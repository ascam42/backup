
require=function e(t,a,s){function n(i,o){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!o&&l)return l(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var p=a[i]={exports:{}};t[i][0].call(p.exports,function(e){var a=t[i][1][e];return n(a?a:e)},p,p.exports,e,t,a,s)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<s.length;i++)n(s[i]);return n}({3:[function(e,t,a){"use strict";var s=e("../naboo/feed"),n=e("../naboo/search"),r=e("../naboo/artist"),i=e("../naboo/album"),o=e("../naboo/playlist"),l=e("../naboo/radio"),c=e("../naboo/talkshow"),p=e("../naboo/talk"),d=e("../naboo/home"),u=e("../naboo/page"),m=e("../naboo/profile"),h=e("../naboo/explore"),_=e("../naboo/tops"),y=e("../naboo/moods"),g=e("../naboo/track"),f=e("../naboo/episode"),b=e("../naboo/appstudio"),v=e("../naboo/Tabs/Fan"),E=e("../naboo/Tabs/TrackList"),T=e("../naboo/Tabs/TopTrack"),S=e("../naboo/Tabs/Discography"),A=e("../naboo/Tabs/LatestEpisodes"),N=e("../naboo/Tabs/RelatedArtist"),P=e("../naboo/Tabs/RelatedPlaylist"),k=e("../naboo/Tabs/RelatedTrack"),I=e("../naboo/Tabs/Biography"),x=e("../naboo/Tabs/Edito"),D=e("../naboo/Tabs/EpisodeDescription"),C=e("../naboo/Tabs/Lyrics"),w=e("../naboo/Tabs/ShowInfo"),R=e("../naboo/comment"),L=e("../naboo/tips"),O=e("../naboo/menu"),z=e("../tools/bugreporting/jira-issue-collector");e("blockadblock"),window.feed=s,window.search=n,window.fan=v,window.artist=r,window.album=i,window.playlist=o,window.radio=l,window.talkshow=c,window.talk=p,window.track_list=E,window.top_track=T,window.discography=S,window.menu=O,window.home=d,window.page=u,window.latestEpisodes=A,window.profile=m,window.explore=h,window.tops=_,window.related_artist=N,window.related_playlist=P,window.related_track=k,window.moods=y,window.track=g,window.episode=f,window.comment=R,window.appstudio=b,window.biography=I,window.edito=x,window.episode_description=D,window.lyrics=C,window.show_info=w,L.init(),document.addEventListener("DOMContentLoaded",z)},{"../naboo/Tabs/Biography":263,"../naboo/Tabs/Discography":264,"../naboo/Tabs/Edito":265,"../naboo/Tabs/EpisodeDescription":266,"../naboo/Tabs/Fan":267,"../naboo/Tabs/LatestEpisodes":268,"../naboo/Tabs/Lyrics":269,"../naboo/Tabs/RelatedArtist":270,"../naboo/Tabs/RelatedPlaylist":271,"../naboo/Tabs/RelatedTrack":272,"../naboo/Tabs/ShowInfo":273,"../naboo/Tabs/TopTrack":274,"../naboo/Tabs/TrackList":275,"../naboo/album":276,"../naboo/appstudio":277,"../naboo/artist":278,"../naboo/comment":279,"../naboo/episode":280,"../naboo/explore":281,"../naboo/feed":282,"../naboo/home":283,"../naboo/menu":284,"../naboo/moods":285,"../naboo/page":286,"../naboo/playlist":287,"../naboo/profile":288,"../naboo/radio":289,"../naboo/search":290,"../naboo/talk":292,"../naboo/talkshow":293,"../naboo/tips":294,"../naboo/tops":295,"../naboo/track":296,"../tools/bugreporting/jira-issue-collector":297,blockadblock:"blockadblock"}],297:[function(e,t,a){"use strict";var s=function(){gatekeeper.isAllowed("employee_feature")&&(window.ATL_JQ_PAGE_PROPS={triggerFunction:function(e){window.ATL_JQ_SHOW_DIALOG=e}})};t.exports=s},{}],296:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("@deezer/components/common/Thumbnail"),o=e("@deezer/components/common/ActionToolbar"),l={id:0,template:"catalog/track",display:function(e){return"string"!=typeof e.sng_id?!1:(l.id=e.sng_id,"object"==typeof e.data?l.displayCallback(e.data):(api.call("deezer.pageTrack",{sng_id:l.id},l.displayCallback),!0))},displayCallback:function(e){try{templating.load(l.template);var t=document.getElementById("naboo_track_play");t&&n.render(s.createElement(i,{type:"track",context:"track_page",play:"force",preview:"on",showOptions:!0,width:200,height:200,data:e.DATA,bordered:!0}),t);var a="undefined"!=typeof e.DATA.LYRICS_ID&&0!==e.DATA.LYRICS_ID,c={related_track:{args:{album_list:e.ISRC.data,sng_id:e.DATA.SNG_ID},selected:!a},lyrics:{args:{lyrics_id:e.DATA.LYRICS_ID,sng_id:e.DATA.SNG_ID},disabled:!a,selected:a}};r("#naboo_track_title").text(e.DATA.SNG_TITLE);var p,d=[],u={};if("undefined"!=typeof e.DATA.ARTISTS&&e.DATA.ARTISTS.length>0){var m=r("#naboo_track_song > a").clone().removeAttr("id");r("#naboo_track_song > a").remove();var h=r("<p></p>");for(var _ in e.DATA.ARTISTS)e.DATA.ARTISTS.hasOwnProperty(_)&&(0==e.DATA.ARTISTS[_].ROLE_ID||5==e.DATA.ARTISTS[_].ROLE_ID)&&(d.push(e.DATA.ARTISTS[_].ART_NAME),u[e.DATA.ARTISTS[_].ART_ID]=!0,p=m.clone(),p.attr("href","/artist/"+e.DATA.ARTISTS[_].ART_ID).text(e.DATA.ARTISTS[_].ART_NAME),_>0&&h.append(r("<span>, </span>")),h.append(p));r("#naboo_track_song").append(h.children())}else null!=e.DATA.ART_ID&&null!=e.DATA.ART_NAME&&(d.push(e.DATA.ART_NAME),r("#naboo_track_song > a").attr("href","/artist/"+e.DATA.ART_ID).text(e.DATA.ART_NAME));null!=e.DATA.DURATION&&r("#naboo_track_duration").text(secToMin(e.DATA.DURATION));var y=document.getElementById("naboo_track_action");return y&&n.render(s.createElement(o,{id:Number(l.id),type:"song"}),y),tabs.init(r("#naboo_track_tabs"),c),naboo.afterLoad(!0),!0}catch(g){error.log(g)}}};t.exports=l},{"@deezer/components/common/ActionToolbar":58,"@deezer/components/common/Thumbnail":138,jquery:"jquery",react:"react","react-dom":"react-dom"}],295:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("../core/i18n"),o=i.gettext,l=e("@deezer/components/common/ThumbnailGrid"),c=e("@deezer/components/common/GenreList/GenreList"),p={initialized:!1,id:0,template:"naboo/tops",data:[],item_width:220,item_height:220,item_artist_height:281,default_genre:0,start:0,nb:25,max:100,parent_genre:0,genre_id:0,type:"playlist",cache:{},abtest:"default",init:function(){try{if(p.initialized)return!0;templating.load(p.template),p.$filters_types=r("#naboo_tops_filters_type"),Events.ready(Events.user.userReady,function(){gatekeeper.isAllowed("curator_edito")||gatekeeper.isAllowed("curator_local")?r("#order_playlist_top").show().on("click",function(){var e=modal.open("/lightbox/curators/edit_top_playlist/music/"+USER.USER_ID);Events.subscribeOnce(Events.modal.close,function(t,a){e===a&&p.forceReload()},"tops")}):r("#order_playlist_top").remove()}),p.abtest=!gatekeeper.isAllowed("new_popular_musics")||gatekeeper.isAllowed("new_home_de")||gatekeeper.isAllowed("new_home_en")||"object"!=typeof USER.ABTEST.new_home?"default":USER.ABTEST.new_home.option,"layoutd"===p.abtest?r("#naboo_tops_filters").addClass(0===p.genre_id?"no-genre":"one-genre"):r("#filter_type_news").remove(),p.initialized=!0}catch(e){error.log(e)}},display:function(e){try{p.start=0,p.type=e.type||p.type,p.genre_id=parseInt(e.genre_id||p.genre_id,10),p.init(),p.load(),r(".btn",p.$filters_types).removeClass("active"),r("#filter_type_"+p.type,p.$filters_types).addClass("active"),p.updateFiltersTypesUrls();var t=document.getElementById("naboo_tops_genre");return!t||0===p.genre_id&&"layoutd"===p.abtest||n.render(s.createElement(c,{onSelect:p.onChangeGenre,selectedId:p.genre_id,withoutGenreAll:"layoutd"===p.abtest}),t),naboo.afterLoad(!0),!0}catch(a){error.log(a)}},onChangeGenre:function(e){try{return e.GENRE_ID!==p.genre_id&&(p.genre_id=e.GENRE_ID,p.start=0,p.load(),tracking.track("tops_genre_click",{id:e.GENRE_ID,genre:addslashes(e.GENRE_NAME)}),p.updateFiltersTypesUrls()),!0}catch(t){error.log(t)}},load:function(){try{p.updateUrl(),0===p.start&&(p.data=[]);var e=p.type+"_"+p.genre_id;return"undefined"!=typeof p.cache[e]&&"undefined"!=typeof p.cache[e][p.start]?(p.loadCallback(p.cache[e][p.start]),!0):(api.call({method:"deezer.pageTops",data:{TYPE:p.type,GENRE_ID:p.genre_id,START:p.start,NB:p.nb},success:p.loadCallback}),!0)}catch(t){error.log(t)}},loadCallback:function(e){try{var t=p.type+"_"+p.genre_id;return"undefined"==typeof p.cache[t]&&(p.cache[t]={}),p.max=e.ITEMS.total,p.cache[t][p.start]=e,p.render(p.cache[t][p.start].ITEMS.data),!0}catch(a){error.log(a)}},render:function(e){try{var t=document.getElementById("naboo_tops_container");if(!t)return;for(var a=[],r=p.type,i=["name","artist","fans","tracks","sticker","play_link"],c=0;c<e.length;c++){var d=e[c];switch(p.type){case"track":r="song",right.checkSongAvailable(d)===right.READABLE&&a.push(d);break;case"album":d.AVAILABLE===!0&&(a.push(d),i.push("favorite"));break;case"artist":a.push(d),i.push("favorite");break;case"playlist":(""===d.TITLE||/^\s+$/.test(d.TITLE))&&(d.TITLE=o("Sans nom")),a.push(d),i.push("favorite");break;case"news":r="album",a.push(d)}}p.data=p.data.concat(a);var u={type:r,data:p.data,context:"tops_"+p.type,options:i,highlight:"playlist"===p.type?0:!1};return n.render(s.createElement(l,u),t,p.activeInfiniteScroll),Events.trigger(Events.navigation.page_updated),!0}catch(m){error.log(m)}},activeInfiniteScroll:function(){return p.start+p.nb>=p.max?(infinite_scroll.disable(),!1):(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),p.start+=p.nb,p.load()},"tops"),void infinite_scroll.active())},updateFiltersTypesUrls:function(){r(".btn",p.$filters_types).each(function(){r(this).attr("href",r(this).attr("href").replace(/(\/genre\/[0-9]+)|$/,"/genre/"+p.genre_id))})},updateUrl:function(){try{var e="/charts/"+p.type.toLowerCase();return p.genre_id>0&&(e+="/genre/"+p.genre_id),www.setCurrentPath(e),!0}catch(t){error.log(t)}},forceReload:function(){p.start=0,p.type="playlist",p.cache={},p.load()},leave:function(){try{p.start=0,p.type="playlist";var e=document.getElementById("naboo_tops_container"),t=document.getElementById("naboo_tops_genre");return e&&n.unmountComponentAtNode(e),t&&n.unmountComponentAtNode(t),!0}catch(a){error.log(a)}}};t.exports=p},{"../core/i18n":255,"@deezer/components/common/GenreList/GenreList":127,"@deezer/components/common/ThumbnailGrid":148,jquery:"jquery",react:"react","react-dom":"react-dom"}],294:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/keys")["default"],n=e("react"),r=e("react-dom"),i=e("jquery"),o=e("../core/i18n"),l=o.gettext,c=e("../components/tips/Tip"),p=null,d={tipsOnLoad:{playerfocus:!0},init:function(){try{var e=null;for(var t in d.tipsOnLoad)if(d.tipsOnLoad.hasOwnProperty(t)&&d.tipsOnLoad[t]===!0){if(e=d.load(t),d.check(e))break;e=null}Events.subscribe(Events.tips.close,function(e,t){d.close(t)}),Events.subscribe(Events.tips.draw,function(e,t){"string"==typeof t?d.draw(t):"object"==typeof t&&d.draw(t.name,t.check)}),Events.ready(Events.player.playerReady,function(){Events.subscribeOnce(Events.player.displayCurrentSong,function(){setTimeout(function(){null!==e&&e.hasOwnProperty("active")&&e.active===!0&&u.draw(e)},500)},"tips")},"tips"),m.init()}catch(a){error.log(a)}},load:function(e){return(e=u.element[e]||function(){return{}})()},check:function(e){return e.hasOwnProperty("active")&&e.active===!0&&"function"==typeof e.trigger&&e.trigger()===!0},draw:function(e,t){t=t||!1,e=d.load(e),t===!0&&!d.check(e)||null!==p||u.draw(e)},close:function(e){try{p=null;var t=document.getElementById(u.overlayName);null!==t&&document.body.removeChild(t);var a=d.load(e);if(a.hasOwnProperty("name")){var s=document.getElementById("tips_"+a.name);null!==s&&document.body.removeChild(s)}Events.unsubscribeAll("tips"),a.hasOwnProperty("overlay")&&a.overlay.hasOwnProperty("className")&&i("body").removeClass("has-focus "+a.overlay.className)}catch(n){error.log(n)}}},u={overlayName:"tips-overlay",draw:function(e){try{var t,a=e.name;if(p=a,"undefined"==typeof u.element[a])return!1;"function"==typeof e.callback&&e.callback(),"object"==typeof e.overlay&&(t=document.createElement("div"),t.id=u.overlayName,t.className=u.overlayName,t.style.display="none",document.body.appendChild(t).addEventListener("click",function(){d.close(a)}),i("body").addClass("has-focus "+e.overlay.className));var o=document.createElement("div");o.id="tips_"+a,o.className="tips",o.style.visibility="hidden",document.body.appendChild(o),r.render(n.createElement(c,e),document.getElementById("tips_"+a),function(){if(e.hasOwnProperty("user_settings")){var a={};s(e.user_settings).map(function(t){a[t]=e.user_settings[t]}),userSetting.set({tips:a})}e.hasOwnProperty("tracking")&&tracking.track(e.tracking.key,{context:e.tracking.context}),this.setPosition(e,o),"undefined"!=typeof t&&(t.style.display="block"),o.style.visibility="visible"}.bind(this))}catch(l){error.log(l)}},setPosition:function(e,t){if("function"==typeof e.style){var a=e.style();for(var s in a)a.hasOwnProperty(s)&&(t.style[s]=a[s]);USER.OPTIONS.ads_display&&Events.subscribeOnce(Events.layout.adsBanner,function(){this.setPosition(e,t)}.bind(this),"tips")}},element:{playlist_assistant:function(){return{active:!0,name:"playlist_assistant",title:l("Rajoutez des titres à votre playlist !"),body:l("Besoin d'inspiration ? On vous recommande des titres à ajouter à votre playlist."),closeBtn:!0,direction:"right-bottom",user_settings:{playlist_assistant:!1},overlay:{className:"has-focus-playlist-assistant"},trigger:function(){return Boolean(USER.SETTING.tips.playlist_assistant)},style:function e(){var t=document.getElementById("naboo_datagrid_add_track"),e={top:t.getBoundingClientRect().top-t.getBoundingClientRect().height/2+"px",left:t.getBoundingClientRect().left+t.getBoundingClientRect().width+6+"px"};return e}}},playlist_assistant_suggest:function(){return{active:!0,name:"playlist_assistant_suggest",title:l("Vous avez compris le principe ?"),body:l('Vous pouvez stopper à tout moment. Il suffit de cliquer sur "Terminé !".'),closeBtn:!0,user_settings:{playlist_assistant_suggest:!1},trigger:function(){return Boolean(USER.SETTING.tips.playlist_assistant_suggest)},style:function e(){var t=document.getElementById("modal_playlist_assistant_submit"),a=document.getElementById("tips_playlist_assistant_suggest"),e={"z-index":8e3,top:t.getBoundingClientRect().top+1.5*t.getBoundingClientRect().height-a.getBoundingClientRect().height+"px",left:t.getBoundingClientRect().left+t.getBoundingClientRect().width+10+"px"};return e}}},playerfocus:function(){return{active:!0,name:"playerfocus",play:!0,body:l("Écoutez vite la musique que vous avez choisie !"),closeBtn:!0,direction:"right",tracking:{key:"onboarding_feed_display",context:"onboarding"},overlay:{className:"has-focus-player"},user_settings:{player:!1},callback:function(){Events.ready(Events.user.userReady,function(){var e=userData.data;return"undefined"==typeof e.FAVORITES_ARTISTS.data[0]?void userData.loadData("genre"):void dzPlayer.play({type:"artist",id:e.FAVORITES_ARTISTS.data[0].ART_ID,autoplay:!1})}),Events.subscribeOnce(Events.user.userLoadData,function(e,t){if("genre"===t.type){var a=userData.data.FAVORITES_GENRES.data;"undefined"!=typeof a[0]&&api.call({method:"deezer.pageTops",data:{nb:1,type:"track",genre_id:a[0].GENRE_ID},success:function(e){"undefined"!=typeof e.ITEMS.data[0]&&dzPlayer.play({type:"track",id:[e.ITEMS.data[0].SNG_ID],autoplay:!1})}})}})},trigger:function(){return Boolean(USER.SETTING.tips.player)},style:function e(){var t=document.getElementById("player-cover"),a=document.getElementById("tips_"+this.name);if(null===t)return d.close(this.name),{};var s=t.getBoundingClientRect(),n=a.getBoundingClientRect(),e={top:s.top+n.height/2-8+"px"};return"rtl"===window.DIRECTION?e.left=s.left-n.width-15+"px":e.left=s.left+s.width+15+"px",e}}},flow:function(){return{active:!0,name:"flow",title:l("Toute la musique que vous avez envie d'écouter"),body:l("Votre Flow : un mix basé sur vos goûts, qui s'adapte continuellement à vous. "),direction:"bottom-right",overlay:{className:"has-focus-flow"},user_settings:{flow:!1},trigger:function(){var e=document.getElementsByClassName("flow-content").length;return Boolean(USER.SETTING.tips.flow&&e)},style:function e(){var t=document.getElementById("flow-love");if(null===t)return d.close(this.name),{};var a=t.childNodes[0].getBoundingClientRect(),e={top:a.top+a.height+20+"px",left:a.left-3+"px"};return e}}},lyrics:function(){return{active:!0,name:"lyrics",title:l("Vous avez repéré le micro ?"),body:l("Les paroles sont disponibles, cliquez et commencez à chanter."),direction:"right-top",overlay:{className:"has-focus-lyrics"},user_settings:{lyrics:0},trigger:function(){return USER.SETTING.tips.lyrics<=0?!1:0===dzPlayer.getCurrentSong("LYRICS_ID")?!1:USER.SETTING.tips.lyrics>1?(userSetting.set({tips:{lyrics:Math.round(USER.SETTING.tips.lyrics-1)}}),!1):!0},style:function e(){var t=document.getElementById("player-lyrics"),a=document.getElementById("tips_lyrics");if(null===t)return d.close(this.name),{};var s=t.getBoundingClientRect(),n=a.getBoundingClientRect(),e={top:s.top-n.height+42+"px"};return"rtl"===window.DIRECTION?e.left=s.left-n.width-15+"px":e.left=s.left+s.width+15+"px",e}}},add_to_library:function(){return{active:!0,name:"add_to_library",title:"",body:"",direction:"bottom",overlay:{className:"has-focus-add-library"},user_settings:{add_to_library:!1},callback:function(){var e=naboo.getCurrentClass(),t=window[e].data;"playlist"===e?(this.title=l("Vous avez envie de retrouver cette playlist ?"),this.body=l("Ajoutez-la à votre musique préférée, vous pouvez la réécouter à tout moment.")):"album"===e?(this.title=l("%1$s vous a plu ?",{sprintf:[t.ALB_TITLE]}),this.body=l("Vous aimez, vous nous le dites, il est directement ajouté à vos favoris.")):"artist"===e&&(this.title=l("Envie d'écouter %1$s plus tard ?",{sprintf:[t.DATA.ART_NAME]}),this.body=l("Retrouvez vos artistes préférés rapidement en les ajoutant à vos favoris."))},trigger:function(){var e=naboo.getCurrentClass();if("object"!=typeof window[e])return!1;var t=window[e].id;if(0===t||!e.match(/^(playlist|album|artist)$/i))return!1;if(userData.isFavorite(e,t))return!1;var a=document.getElementById("add_to_library");return a&&USER.SETTING.tips.add_to_library!==!1?!0:!1},style:function e(){var t=document.getElementById("add_to_library"),a=document.getElementById("tips_"+this.name);if(null===t)return d.close(this.name),{};var s=t.getBoundingClientRect(),n=a.getBoundingClientRect(),e={top:s.top+s.height+15+"px",left:s.left-n.width/2+42+"px"};return e}}}}},m={init:function(){USER.SETTING.tips.flow===!0&&Events.ready(Events.flow.playerDisplay,function(){setTimeout(function(){d.draw("flow",!0)},1e3)}),USER.SETTING.tips.lyrics>0&&Events.subscribe(Events.player.play,function(){setTimeout(function(){d.draw("lyrics",!0)},1e3)},"tips"),USER.SETTING.tips.add_to_library===!0&&Events.subscribe(Events.navigation.page_displayed,function(){setTimeout(function(){d.draw("add_to_library",!0)},1e3)})}};t.exports=d},{"../components/tips/Tip":228,"../core/i18n":255,"babel-runtime/core-js/object/keys":309,jquery:"jquery",react:"react","react-dom":"react-dom"}],228:[function(e,t,a){"use strict";var s=e("react"),n=e("../../core/i18n"),r=n.gettext,i=s.createClass({displayName:"Tip",propTypes:{name:s.PropTypes.string,title:s.PropTypes.string,body:s.PropTypes.string.isRequired,play:s.PropTypes.bool,closeBtn:s.PropTypes.bool,direction:s.PropTypes.string},getDefaultProps:function(){return{title:"",play:!1,closeBtn:!1,direction:"right-top"}},componentDidMount:function(){this.props.play===!0&&Events.subscribeOnce(Events.player.play,this._close)},componentWillUnmount:function(){this.props.play===!0&&Events.unsubscribe(Events.player.play)},render:function(){return s.createElement("div",{className:"popover popover-"+this.props.direction,role:"dialog","aria-labelledby":"tipTitle","aria-describedby":"tipBody"},this.props.closeBtn===!0?s.createElement("a",{className:"popover-close",role:"button",onClick:this._close},s.createElement("span",{className:"icon icon-cancel"})):null,s.createElement("div",{className:"popover-body"},""!==this.props.title?s.createElement("div",{className:"popover-header",id:"tipTitle"},this.props.title):null,s.createElement("p",{className:"highlight",id:"tipBody"},this.props.body),s.createElement("a",{className:"btn btn-primary btn-block",role:"button",onClick:this.props.play===!0?this._play:this._close},s.createElement("span",{className:"label"},r(this.props.play===!0?"Écouter maintenant":"J'ai compris")))))},_close:function(){Events.trigger(Events.tips.close,this.props.name)},_play:function(){dzPlayer.control.play()}});t.exports=i},{"../../core/i18n":255,react:"react"}],293:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery");e("dotdotdot");var i=e("../core/i18n"),o=i.gettext,l=e("@deezer/components/talk/Show"),c=e("@deezer/components/common/Thumbnail"),p=e("@deezer/components/common/ActionToolbar"),d={id:0,template:"naboo/show",data:[],display:function(e){try{return"string"!=typeof e.show_id?!1:(d.id=parseInt(e.show_id,10),api.call("deezer.pageShow",{show_id:d.id,country:COUNTRY,lang:SETTING_LANG},d.displayCallback),!0)}catch(t){error.log(t)}},displayCallback:function(e){try{templating.load(d.template);var t=document.getElementById("tab_talkshow_content");if(!t)return;var a=document.getElementById("naboo_show_image");if(a){var i={excludes:["go_to_show"]};n.render(s.createElement(c,{type:"show",context:"show_page",preview:"off",data:e.DATA,width:200,height:200,play:"force",bordered:!0,showOptions:!0,contextMenuOptions:i}),a)}r("#naboo_show_name").text(e.DATA.SHOW_NAME),window.setTimeout(function(){r("#naboo_show_description").dotdotdot({height:80,after:"a",callback:function(e){e||r("a",this).remove()}}).find("> a").on("click",function(e){e.preventDefault(),tabs.display("show_info")})},0),r("#naboo_show_description").html(e.DATA.SHOW_DESCRIPTION+'<a class="readmore">'+o("Lire la suite")+"</a>");var u={talkshow:{selected:!0,args:{type:"talkshow",id:e.DATA.SHOW_ID}},show_info:{args:{type:"talkshow",data:e.DATA}}};0===e.DATA.SHOW_DESCRIPTION.length&&r("#tab_show_info_link").hide(),n.render(s.createElement(l,e),t);var m=document.getElementById("naboo_show_action");return m&&n.render(s.createElement(p,{id:Number(e.DATA.SHOW_ID),type:"show"}),m),r("#naboo_show_share > button").data("id",e.DATA.SHOW_ID),tabs.init(r("#naboo_show_tabs"),u),naboo.afterLoad(!0),!0}catch(h){error.log(h)}},leave:function(){var e=["tab_track_list_content","naboo_show_action"];e.forEach(function(e){var t=document.getElementById(e);t&&n.unmountComponentAtNode(t)})},onOpenTab:function(e,t){tabs.display(e),"undefined"!=typeof t&&window[e].onDisplay(t),r("#page_content").scrollTop(0)}};t.exports=d},{"../core/i18n":255,"@deezer/components/common/ActionToolbar":58,"@deezer/components/common/Thumbnail":138,"@deezer/components/talk/Show":227,dotdotdot:"dotdotdot",jquery:"jquery",react:"react","react-dom":"react-dom"}],227:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/common/DataGrid"),r=s.createClass({displayName:"Show",propTypes:{id:s.PropTypes.number,DATA:s.PropTypes.object,EPISODES:s.PropTypes.object},childContextTypes:{id:s.PropTypes.number,name:s.PropTypes.string},getDefaultProps:function(){return{id:0,DATA:{},EPISODES:{}}},getChildContext:function(){return{id:Number(this.props.DATA.SHOW_ID),name:"show_page"}},render:function(){var e={header:!1,infiniteScroll:this.props.EPISODES.data.length>100,toolbar:!1};return s.createElement(n,{type:"talkShow",items:this.props.EPISODES.data,options:e})}});t.exports=r},{"@deezer/components/common/DataGrid":97,react:"react"}],292:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("../core/genre"),o=i.FILTER_TALK,l=e("@deezer/components/common/ThumbnailGrid"),c=e("@deezer/components/common/GenreList/GenreList"),p={initialized:!1,template:"naboo/talk",tab:"genres",default_genre:0,genre_id:0,parent_genre_id:0,data:[],pagination:{start:0,nb:20,max:500},loading:!1,init:function(){try{return p.initialized?!1:(templating.load(p.template),p.genre_id=storage.isset("talk_explore_genre")?storage.get("talk_explore_genre"):p.genre_id,p.parent_genre_id=storage.isset("talk_explore_parent_genre")?storage.get("talk_explore_parent_genre"):p.parent_genre_id,p.pagination.start=0,p.initialized=!0,p.data=[],!0)}catch(e){error.log(e)}},display:function(e){try{gatekeeper.isAllowed("talk")||(document.location.href=document.location.protocol+"//"+SETTING_HOST+"/"),p.init();var t=e.id||p.genre_id;return p.load(t,null,!0),naboo.afterLoad(!0),!0}catch(a){error.log(a)}},load:function(e,t){try{if(p.loading===!0)return!1;p.loading=!0,e=e||0;var a=p.genre_id;p.genre_id=Number(e),t="undefined"!=typeof t&&t?r.extend(p.pagination,t):r.extend({},p.pagination),a!==e&&(t=r.extend(p.pagination,t,{start:0}));var s="/shows";0!==e&&(s+="/"+p.tab+"/"+e),r.address.value(s),api.call("deezer.pageTalkExplore",{FILTER:e,START:t.start,NB:t.nb},p.loadCallback)}catch(n){error.log(n)}},loadCallback:function(e){try{p.loading=!1,0===p.pagination.start&&(p.pagination.max=e.EXPLORE_SHOWS.total),storage.set("talk_explore_genre",p.genre_id),storage.set("talk_explore_parent_genre",p.parent_genre_id);var t=document.getElementById("selectbox_talk_genres");t&&n.render(s.createElement(c,{onSelect:p.onChangeGenre,selectedId:p.genre_id,type:o}),t),p.renderGenresReleases(e),Events.trigger(Events.navigation.page_updated)}catch(a){error.log(a)}},renderGenresReleases:function(e){try{var t=document.getElementById("talk_last_releases_grid");if(!t||"undefined"==typeof e||"undefined"==typeof e.EXPLORE_SHOWS)return!1;p.data=p.data.length?p.data.concat(e.EXPLORE_SHOWS.data):e.EXPLORE_SHOWS.data;var a={data:p.data,context:"show_page",options:["name","favorite","play_link"]};return n.render(s.createElement(l,a),t,p.activeInfiniteScroll),!0}catch(r){error.log(r)}},activeInfiniteScroll:function(){return p.pagination.start+p.pagination.nb>=p.pagination.max?(infinite_scroll.disable(),!1):(Events.subscribe(Events.layout.infiniteScroll,function(){p.load(p.genre_id,{start:p.pagination.start+p.pagination.nb,nb:p.pagination.nb})},"talk"),void infinite_scroll.active())},onChangeGenre:function(e){try{return e.GENRE_ID===p.genre_id?!1:("undefined"!=typeof e.PARENT_GENRE_ID?p.parent_genre_id=e.PARENT_GENRE_ID:p.parent_genre_id=0,p.data=[],p.pagination.start=0,p.load(e.GENRE_ID),!0)}catch(t){error.log(t)}},leave:function(){p.data=[];var e=document.getElementById("talk_last_releases_grid"),t=document.getElementById("selectbox_talk_genres");e&&n.unmountComponentAtNode(e),t&&n.unmountComponentAtNode(t)}};t.exports=p},{"../core/genre":254,"@deezer/components/common/GenreList/GenreList":127,"@deezer/components/common/ThumbnailGrid":148,jquery:"jquery",react:"react","react-dom":"react-dom"}],289:[function(e,t,a){"use strict";var s,n=e("react"),r=e("react-dom"),i=e("../components/radio/Page"),o={display:function(e){s=document.getElementById("naboo_content"),s&&r.render(n.createElement(i,e),s)},leave:function(){s&&r.unmountComponentAtNode(s)}};t.exports=o},{"../components/radio/Page":215,react:"react","react-dom":"react-dom"}],215:[function(e,t,a){"use strict";var s=e("react"),n=e("../../core/i18n"),r=n.gettext,i=e("@deezer/components/common/Thumbnail"),o=e("@deezer/components/common/Thumbnail/utils"),l=e("@deezer/components/common/ThumbnailGrid"),c=e("@deezer/components/common/StatesButton"),p=s.createClass({displayName:"Page",propTypes:{id:s.PropTypes.string,type:s.PropTypes.string,data:s.PropTypes.object},getInitialState:function(){return{id:this._getRadioId(),type:this._getRadioType(),filled:!1,items:[],itemsType:"genre",itemsFull:!1,highlight:this.props.data?this.props.data.DATA:null,start:0,nb:20}},componentWillMount:function(){this._loadGenreList(),null===this.state.highlight&&null!==this.state.type&&null!==this.state.id&&this._loadSelectedRadio(this.state.type,this.state.id)},componentDidMount:function(){Events.subscribe(Events.radio.start,this._playRadioStart,"radio"),naboo.afterLoad(!0)},componentWillUnmount:function(){Events.unsubscribe(Events.radio.start,this._playRadioStart),Events.unsubscribe(Events.layout.infiniteScroll,this._subscribeInfiniteScroll)},render:function(){return s.createElement("div",{id:"page_radio"},s.createElement("div",{className:"wrapper"},s.createElement("h1",{className:"heading-1"},r("Mix")),s.createElement("h2",{className:"heading-4"},r("Vos chansons préférées et nos recommandations, le tout dans un mix thématique.")),this._renderHighlighted(),this._renderList()))},_renderHighlighted:function(){return null===this.state.highlight?null:s.createElement("div",{className:"radio-highlighted clearfix"},"artist"===this.state.type?this._renderHighlightedArtistDetails():this._renderHighlightedRadioDetails())},_renderHighlightedArtistDetails:function(){return this._renderHighlightedDetails({id:this.state.highlight.ART_ID,type:"artist",radio:!0,cover:"artist",context:"smartradio_page",title:this.state.highlight.ART_NAME,pic:this.state.highlight.ART_PICTURE,description:this.state.highlight.DESCRIPTION,shareType:"smartradio"})},_renderHighlightedRadioDetails:function(){return this._renderHighlightedDetails({id:this.state.highlight.RADIO_ID,type:"radio",radio:!1,cover:"misc",context:"radio_page",title:this.state.highlight.TITLE,pic:this.state.highlight.RADIO_PICTURE,description:this.state.highlight.DESCRIPTION,shareType:"radio"})},_renderHighlightedDetails:function(e){var t=o.getImageSrc(e.cover,e.pic,250,250);return[s.createElement(i,{key:"thumbnail_"+e.type+"_"+e.id,id:Number(e.id),type:e.type,width:210,height:210,play:"force",overlay:"force",context:e.context,showOptions:!0,imgSrc:t}),s.createElement("div",{key:"detail",className:"radio-detail"},s.createElement("div",{className:"radio-detail-heading"},r("À l'écoute :")),s.createElement("h2",{className:"heading-2"},e.title),"genre"===this.state.type?s.createElement("p",{className:"radio-description"},e.description):null,s.createElement("div",{className:"radio-detail-btn"},s.createElement(c,{key:"states_button_"+e.type+"_"+e.id,id:Number(e.id),type:e.type,action:"favorite"}),s.createElement("button",{"data-link":"0","data-share":"1","data-type":e.shareType,"data-id":e.id,type:"button",className:"btn btn-default evt-click"},s.createElement("span",{className:"icon icon-share"}),s.createElement("span",{className:"label"},r("Partager")))))]},_renderList:function(){return this.state.filled===!1?null:s.createElement(l,{data:this.state.items,context:"radio_page"})},_getRadioId:function(){return null!==this.props.id||dzPlayer.playerLoaded===!1||"radio"!==dzPlayer.getPlayerType()||"artist"!==dzPlayer.getRadioType()&&"radio"!==dzPlayer.getRadioType()?this.props.id:dzPlayer.getContext("ID")},_getRadioType:function(){return null!==this.props.type||dzPlayer.playerLoaded===!1||"radio"!==dzPlayer.getPlayerType()||"artist"!==dzPlayer.getRadioType()&&"radio"!==dzPlayer.getRadioType()?this.props.type:"radio"===dzPlayer.getRadioType()?"genre":"artist"},_loadGenreList:function(){infinite_scroll.disable(),api.call("radio.getSortedList",{START:this.state.start,NB:this.state.nb},function(e,t){this.isMounted()&&this._loadCallbackList(e,t)}.bind(this),"genre")},_loadCallbackList:function(e,t){var a;a=e.total>this.state.start+this.state.nb?!1:!0,this.setState({filled:!0,items:this.state.items.concat(e.data),itemsType:t,itemsFull:a},function(){a||(Events.subscribe(Events.layout.infiniteScroll,this._subscribeInfiniteScroll,"radio"),infinite_scroll.active())}),Events.trigger(Events.navigation.page_updated)},_subscribeInfiniteScroll:function(){Events.unsubscribe(Events.layout.infiniteScroll,this._subscribeInfiniteScroll),this.setState({start:this.state.start+this.state.nb},this._loadGenreList)},_loadSelectedRadio:function(e,t){api.call("deezer.pageRadio",{id:t,type:e},function(a){this.isMounted()&&(this.setState({id:t,type:e,highlight:a.DATA}),www.setCurrentPath("mixes/"+e+"/"+t))}.bind(this))},_playRadioStart:function(e,t){""!==t.type&&0!==t.id&&this._loadSelectedRadio("radio"===t.type?"genre":"artist",t.id)}});t.exports=p},{"../../core/i18n":255,"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,"@deezer/components/common/ThumbnailGrid":148,react:"react"}],288:[function(e,t,a){"use strict";function s(e,t){switch(e){case"albums":return l("album","albums",{count:t});case"playlists":return l("playlist","playlists",{count:t});case"artists":return l("artiste favori","artistes favoris",{count:t});case"radios":return l("mix favori","mix favoris",{count:t});case"following":return o("following");case"followers":return l("follower","followers",{count:t});case"shows":return l("podcast","podcasts",{count:t});default:return""}}var n=e("react"),r=e("react-dom"),i=e("../core/i18n"),o=i.gettext,l=i.ngettext,c=e("@deezer/components/common/DataGrid/utils"),p=c.getSort,d=40,u=2e3,m=e("@deezer/components/common/DataGrid"),h=e("@deezer/components/common/Thumbnail"),_=e("@deezer/components/common/Thumbnail/utils"),y=e("@deezer/components/common/ThumbnailGrid"),g=e("@deezer/components/common/Selectbox"),f=e("@deezer/components/_mixins/sort"),b=e("@deezer/components/common/ActionToolbar"),v={initialized:!1,events:!1,id:0,tab:"",data:null,data_tab:{},cache:{},removeItem:{},playlistFilter:"all",templates:{artists:"artist",albums:"album",tracks:"track",playlists:"playlist",shows:"show",followers:"user",following:"user",radios:"radio"},trad:{profile_home:o("C'est ici que vous retrouverez toute votre musique."),profile_albums:o("Aucun résultat."),profile_albums_public:o("Conseillez-lui un de vos albums préférés."),profile_artists:o("Aucun résultat."),profile_artists_public:o("Conseillez-lui un de vos artistes favoris."),profile_shows:o("Aucun résultat."),profile_shows_public:o("Conseillez-lui un de vos shows préférés."),profile_radios:o("Aucun résultat."),profile_radios_public:o("Conseillez-lui un de vos mix préférés."),profile_followers_public:o("Aucun follower."),profile_following_public:o("Aucun following."),profile_playlists:o("Découvrez vite À écouter, notre fil de recommandations musicales !"),profile_playlists_public:o("Conseillez-lui une de vos playlists."),profile_playlists_personal:o("Qu'attendez-vous pour créer votre première playlist ?"),profile_loved:o("Vous aimez une chanson ? Ajoutez-la à vos coups de cœur en cliquant sur le cœur du player "),profile_personal_song:o("Vous n'avez pas encore téléchargé vos propres MP3 ?"),profile_history:o("Découvrez vite À écouter, notre fil de recommandations musicales !"),profile_private:o("Ce profil est privé."),profile_deactivate:o("Ce profil a été supprimé.")},emptyTrad:{top_tracks:o("Aucun Top Titres"),top_albums:o("Aucun Top Albums"),top_artists:o("Aucun Top Artistes")},idByType:{playlists:"PLAYLIST_ID",albums:"ALB_ID",artists:"ART_ID",radios:"RADIO_ID",shows:"SHOW_ID"},init:function(){try{if(v.initialized)return!1;templating.load("naboo/profile/index"),templating.load("naboo/profile/header",$("#page_profile_header")),Events.subscribe(Events.navigation.page_displayed,v.resizeMenu,"profile"),Events.subscribe(Events.user.blockFriend,v.changeBlockStatus,"profile"),Events.subscribe(Events.user.unblockFriend,v.changeBlockStatus,"profile"),Events.subscribe(Events.user.addFavorite,v.favoriteAdded,"profile"),Events.subscribe(Events.user.deleteFavorite,v.favoriteRemoved,"profile"),Events.subscribe(Events.playlist.removed,v.favoriteRemoved,"profile"),Events.subscribe(Events.layout.resize,window.debounce(v.resizeMenu,400),"profile"),Events.subscribe(Events.layout.adsBackground,v.resizeMenu,"profile"),Events.subscribe(Events.user.updatePicture,v.updateAvatar,"profile"),Events.subscribe(Events.user.uploadPicture,function(){$("#profile_avatar_upload").click()},"profile"),Events.subscribe(Events.player.play,v.displayOnlineTrack,"profile"),Events.subscribe(Events.player.finish,v.displayOnlineTrack,"profile"),Events.subscribe(Events.datagrid.removedTrack,function(){v.data.TAB[v.tab].total--,v.drawDatagridTabTitle()},"profile"),v.drawHeader(),v.drawMenu(),v.initialized=!0}catch(e){error.log(e)}},leave:function(){var e=document.querySelector("section > .datagrid");e&&r.unmountComponentAtNode(e);var t=document.getElementById("profile_page_"+v.tab);t&&r.unmountComponentAtNode(t);var a=document.getElementById("profile_page_"+v.tab+"_empty");a&&r.unmountComponentAtNode(a),v.data=null,v.id=0},display:function(e){try{return"string"!=typeof e.user_id?!1:(v.id=e.user_id,v.id="me"===v.id?USER.USER_ID:parseInt(v.id,10),v.tab=e.tab||"home",$("body").unbind("mouseup",v.toggleMoreMenu),"object"!=typeof e.data||v.isSorted()?(api.call("deezer.pageProfile",{user_id:v.id,tab:v.tab,nb:v.isSorted()?u:d},v.displayCallback),!0):v.displayCallback(e.data))}catch(t){error.log(t)}},onPageChanged:function(e){return v.tab=e.tab||"home","undefined"!=typeof v.data.TAB[v.tab]?(v.displayCallback(),!0):(api.call("deezer.pageProfile",{user_id:v.id,tab:v.tab,nb:v.isSorted()?u:d},v.displayCallback),!0)},displayCallback:function(e){try{if(null===v.data?(v.data=e,"home"===v.tab&&(v.data.TAB={home:e.TAB}),v.init()):e&&("home"===v.tab?v.data.TAB[v.tab]=e.TAB:(v.data.TAB[v.tab]=e.TAB[v.tab],v.data.TAB[v.tab+"_suggest"]=e.TAB[v.tab+"_suggest"],"object"==typeof e.TAB["top_"+v.tab]&&(v.data.TAB["top_"+v.tab]=e.TAB["top_"+v.tab]))),v.tab=v.data.DATA.IS_PUBLIC||v.data.DATA.IS_PERSONNAL?v.tab:"private",v.tab="2"===v.data.DATA.USER.ACTIVATION?"deactivate":v.tab,"deactivate"===v.tab||"private"===v.tab){var t="deactivate"===v.tab?"nocontent":v.tab;$("#profile_page_tab").html('<div class="placeholders-img '+t+'"></div><div class="placeholders-title">'+v.trad["profile_"+v.tab]+"</div>")}else{var a=document.querySelector("section > .datagrid");a&&r.unmountComponentAtNode(a),templating.load("naboo/profile/"+v.tab,$("#profile_page_tab"))}switch(v.currentTab=$("#profile_page_tab"),v.currentList="profile_page_"+v.tab,v.currentPage=$("#page_profile"),v.updateMenu(),v.disableScrollCover(),v.tab){case"loved":case"personal_song":case"history":case"downloads":v.drawDatagridTab();break;case"albums":case"artists":case"playlists":case"shows":case"radios":case"followers":case"following":v.drawCoverTab();break;case"home":v.drawHomeTab();break;default:naboo.afterLoad(!0)}}catch(s){error.log(s)}},displayOnlineTrack:function(e,t){return v.data.DATA.IS_PERSONNAL&&"home"===v.tab?void v.drawOnlineTrack(t.value):!1},drawOnlineTrack:function(e){try{var t=$("#profile_page_online"),a=$("#profile_page_infos");if("undefined"==typeof e||v.data.DATA.IS_PERSONNAL&&null===dzPlayer.getCurrentSong()||e.SNG_ID<0)return t.remove(),!0;$('span > [data-target="onair-song"]',t).prop("href","/album/"+e.ALB_ID).text(e.SNG_TITLE),$('span > [data-target="onair-artist"]',t).prop("href","/artist/"+e.ART_ID).text(e.ART_NAME),t.show(),a.fadeIn()}catch(s){error.log(s)}},drawCoverTab:function(){try{var e=v.data.TAB;v.inputSearch=$("#naboo_datagrid_filter_text");var t=window.debounce(function(){v.search(v.tab,$(this))},400);switch(v.inputSearch.on("keyup",t),v.deleteSearch=$("#search-cross"),v.deleteSearch.on("click",function(){return v.inputSearch.val().length?(v.cleanSearch(),void v.search(v.tab,v.inputSearch)):!1}),v.pagination={nb:40,group:40,total:v.data.TAB[v.tab].data.length},v.disableScrollCover(),v.tab){case"playlists":gatekeeper.isAllowed("curator_feature")&&v.id===USER.USER_ID?$("#profile_page_playlists_curator",v.currentTab).show().on("click",function(){modal.open("/lightbox/curators/edit_playlist/"+USER.USER_ID)}):$("#profile_page_playlists_curator",v.currentTab).remove(),$('[data-target="filter-playlist"] > button',v.currentTab).on("click",function(){v.filterPlaylist($(this).data("type"))}),v.playlistFilter="all",v.data.TAB.playlists=v.filterDisplayPlaylist(v.data.TAB.playlists),v.sort(USER.SETTING.site.sort_panel_playlist||"PLAYLIST_TITLE"),r.render(n.createElement(g,{type:"playlist",label:!0,onChange:v.sort,saveOrder:!1,align:"right"}),document.getElementById("profile_page_playlist_selectbox"));break;case"albums":v.sort(USER.SETTING.site.sort_panel_album||"ART_NAME"),r.render(n.createElement(g,{type:"album",label:!0,onChange:v.sort,saveOrder:!1,align:"right"}),document.getElementById("profile_page_album_selectbox"));break;case"shows":if(gatekeeper.isAllowed("latest_episodes"))if(e.shows.data.length>0){$("#episodes-link").text(o("Derniers épisodes disponibles"));var a=document.getElementById("naboo_episodes_image");if(a){var s=_.getImageSrc("misc","ab63361d54955f5f6494fd1b258b336a",200,200);r.render(n.createElement(h,{type:"generic",redirectUrl:"/episodes",context:"artist_page",overlay:"off",imgSrc:s,width:200,height:200,bordered:!0}),a)}}else $("#profile_page_episodes").hide();v.sort(USER.SETTING.site.sort_panel_show||"SHOW_NAME"),r.render(n.createElement(g,{type:"show",label:!0,onChange:v.sort,saveOrder:!1,align:"right"}),document.getElementById("profile_page_show_selectbox"));break;case"artists":v.sort(USER.SETTING.site.sort_panel_artist||"ART_NAME"),r.render(n.createElement(g,{type:"artist",label:!0,onChange:v.sort,saveOrder:!1,align:"right"}),document.getElementById("profile_page_artist_selectbox"));break;default:v.renderCover(v.currentList,v.tab,e[v.tab].data)}e[v.tab].total<5&&v.data.DATA.IS_PERSONNAL?($('[data-target="suggest-contener"]',v.currentTab).show(),$('[data-target="action"] > div',v.currentTab).hide(),v.drawSuggest(v.tab,"profile_page_"+v.tab+"_empty",e[v.tab+"_suggest"]),"playlists"===v.tab&&gatekeeper.isAllowed("curator_feature")&&v.id===USER.USER_ID&&$('[data-target="action"] > div:first',v.currentTab).show()):0!=e[v.tab].total||v.data.DATA.IS_PERSONNAL||($('[data-target="suggest-contener"]',v.currentTab).hide(),$('[data-target="action"] > div',v.currentTab).hide()),v.drawCoverTabTitle(),v.currentTab.removeClass("full").addClass("user-empty"),naboo.afterLoad(!0)}catch(i){error.log(i)}},drawCoverTabTitle:function(e){var t;try{if(e=e||"tab","tab"===e)t=v.data.TAB[v.tab].count,$("h2",v.currentTab).html('<span class="color-primary">'+breakUpThousands(t)+"</span> "+s(v.tab,t));else{var a=$('h2[data-target="title-'+e+'"]',v.currentTab);t=v.data.TAB.home[e].total,a.html('<span class="color-primary">'+breakUpThousands(t)+"</span> "+s(e,t)),t>0&&a.wrapInner($("<a>",{"class":"link-gray-light evt-click",href:"/profile/"+v.id+"/"+e}))}}catch(n){error.log(n)}},renderCover:function(e,t,a,s,i){try{var o=document.getElementById(e);if(o){if(0===a.length&&v.data.DATA.IS_PERSONNAL&&"playlists"!==t)return r.unmountComponentAtNode(o),!1;var l=["name","artist","fans","status"];(!v.data.DATA.IS_PERSONNAL||i)&&(l=l.concat(["favorite","follow"]));var c={img:"recommendation",wording:v.trad["profile_"+v.tab+"_public"]};"home"===v.tab||i?(a=a.slice(0,"playlists"===t?6:7),c=!1):a=a.slice(0,v.pagination.nb);var p={data:a,type:v.templates[t],context:"profile_"+t,createPlaylist:"playlists"===t&&v.data.DATA.IS_PERSONNAL&&!i&&"all"===v.playlistFilter,options:l,filter:s,oneLine:i||"home"===v.tab,placeHolder:c};r.render(n.createElement(y,p),o),"home"!==v.tab&&v.pagination.nb<v.pagination.total&&(Events.subscribe(Events.layout.infiniteScroll,v.scrollCover,"profile"),infinite_scroll.active())}Events.trigger(Events.navigation.page_updated)}catch(d){error.log(d)}},scrollCover:function(){try{v.disableScrollCover(),v.pagination.nb+=v.pagination.group,v.renderCover(v.currentList,v.tab,v.data.TAB[v.tab].data)}catch(e){error.log(e)}},disableScrollCover:function(){infinite_scroll.disable(),Events.unsubscribe(Events.layout.infiniteScroll,v.scrollCover)},drawDatagridTab:function(){try{var e=v.data.TAB;"undefined"==typeof e[v.tab]&&(e[v.tab]={total:0,count:0,data:[]}),v.data.DATA.IS_PERSONNAL&&v.drawPlaceholder(e[v.tab].total),v.currentTab.removeClass("user-empty").addClass("full"),v.drawDatagridTabTitle();var t={type:v.tab,id:v.id,playlist_personnal:!1,songs:{total:e[v.tab].total,count:e[v.tab].count,data:e[v.tab].data.slice(0)}};switch(v.tab){case"loved":v.data.DATA.IS_PERSONNAL&&$.extend(t,{type:"lovedpersonal",playlist_personnal:!0,offline_data:{playlist_checksum:e.loved.checksum,playlist_picture:"87fc4422c7138e9fe33205ae5707d93f",playlist_picture_type:"playlist"}});break;case"personal_song":Modernizr.draganddrop||$("#profile_mp3_drop").hide(),$("#profile_mp3_upload").fileupload({multipart:!0,dropZone:$("#profile_mp3_drop"),sequentialUploads:!0,add:function(e,t){var a=/^audio\/(mp3|mpeg)$/i;return""!=t.originalFiles[0].type&&a.test(t.originalFiles[0].type)?void t.submit():!1},send:function(e,t){v.currentUploadSong={name:t.files[0].name.substring(0,t.files[0].name.length-4),size:t.files[0].size},Events.trigger(Events.user.sendPersonalSong,[v.currentUploadSong.size,v.currentUploadSong.name]),t.url=SETTING_HOST_UPLOAD+"/?sid="+SESSION_ID+"&resize=1&directory=&type=audio&referer="+SETTING_REFERER_UPLOAD+"&file="+v.currentUploadSong.name+"&"},done:function(e,t){Events.trigger(Events.user.addPersonalSong,-t.result.results),v.data.TAB.personal_song.total++,v.drawDatagridTabTitle()},progressall:function(e,t){var a=parseInt(t.loaded/t.total*100,10);Events.trigger(Events.user.progressPersonalSong,[v.currentUploadSong.size,v.currentUploadSong.name,a])}})}var a=v.tab;switch(a){}var s=document.querySelector("section > .datagrid");s&&r.render(n.createElement(m.FullPage,{id:v.id,type:a,items:e[v.tab].data}),s),Events.unsubscribe(Events.layout.infiniteScroll,v.scrollCover),naboo.afterLoad(!0)}catch(i){error.log(i)}},drawDatagridTabTitle:function(){try{var e=v.data.TAB[v.tab].total,t=breakUpThousands(e),a='<span class="color-primary">'+t+"</span> "+l("titre","titres",{count:e});$("h2",v.currentTab).html(a)}catch(s){error.log(s)}},drawHomeTab:function(){try{var e=v.data.TAB.home;v.$page_message=$("#profile_page_message"),""!==e.message||v.data.DATA.IS_PERSONNAL?(v.$page_message_display_inner=$("#profile_page_message_display").find("> span").text(e.message),v.$page_message_button=$("#profile_page_message_button"),v.data.DATA.IS_PERSONNAL===!1&&v.$page_message_display_inner.html(v.$page_message_display_inner.html().convertURLToLink()),v.data.DATA.IS_PERSONNAL?(v.$page_message_display=$("#profile_page_message_display"),v.$page_message_edit=$("#profile_page_message_edit"),v.$page_message_placeholder=$("#profile_page_message_placeholder"),""===e.message&&v.$page_message_placeholder.show(),v.$page_message.addClass("user-message-cursor"),v.$page_message.on("click","#profile_page_message_display, #profile_page_message_placeholder",function(){v.startEditMessage()}),v.$page_message_edit.on("blur",function(){v.endEditMessage()}).on("keydown",function(e){13===e.keyCode&&$(this).blur()}),v.$page_message_button.data("tooltipFallback",o("Cliquez ici pour éditer")).on("click",function(){v.startEditMessage()})):(v.$page_message_button.remove(),""===e.message&&v.$page_message.remove())):v.$page_message.remove(),v.drawOnlineTrack(e.online);var t=$("#profile_page_infos");0===t.children().length&&t.remove(),$("#profile_page_tops_nav > div > button").on("click",function(){v.drawTops($(this).data("type"))}),$('#profile_page_tops_nav > div > [data-type="tracks"]').addClass("active"),v.drawTops(v.data.DATA.IS_PERSONNAL?"albums":"artists");var a=["playlists","albums","artists","followers","following"];for(var n in a)if(a.hasOwnProperty(n)){var r=$("#profile_page_home_"+a[n]),i="profile_page_"+a[n],l=e[a[n]].total;if("playlists"===a[n]&&(v.data.DATA.IS_PERSONNAL&&5>l&&$('[data-target="no-empty"]',r).remove(),e.playlists=v.filterDisplayPlaylist(e.playlists),e.playlists.data.sort(v.sortByDate),l=e.playlists.total),5>l&&v.data.DATA.IS_PERSONNAL){if(0===l&&"followers"===a[n]){r.remove();continue}$('[data-target="no-empty"]',r).remove(),$('[data-target="line"]',r).remove(),v.renderCover(i,a[n],e[a[n]].data),v.drawSuggest(a[n],i+"_empty",e[a[n]+"_suggest"])}else 0==l&&$('[data-target="no-empty"]',r).remove(),$('[data-target="suggest-contener"]',r).remove();v.renderCover(i,a[n],e[a[n]].data),$('[data-target="no-empty"]',r).children("a").attr("href","/profile/"+v.id+"/"+a[n]);var c=$('[data-target="title-'+a[n]+'"]',r);c.html('<span class="color-primary">'+breakUpThousands(l)+"</span> "+s(a[n],l)+'<span class="icon icon-arrow-right"></span>').data("total",l),l>0&&c.wrapInner($("<a>",{"class":"evt-click",href:"/profile/"+v.id+"/"+a[n]}))}naboo.afterLoad(!0)}catch(p){error.log(p)}},drawTops:function(e){try{$("#profile_page_tops_nav > div > button").removeClass("active"),$('#profile_page_tops_nav > div > [data-type="'+e+'"]').addClass("active");var t=v.data.TAB.home;if(0==t.top_track.total&&0==t.top_album.total&&0==t.top_artist.total)return $("#profile_page_tops").hide(),!1;var a=[];t.top_track.total>0&&"tracks"===e&&(a=t.top_track.data),t.top_album.total>0&&"albums"===e&&(a=t.top_album.data),t.top_artist.total>0&&"artists"===e&&(a=t.top_artist.data),""!==a?(v.renderCover("profile_page_tops_content",e,a),Events.trigger(Events.navigation.page_updated)):$('#profile_page_tops > [data-target="top-empty"]').text(v.emptyTrad[e]).show()}catch(s){error.log(s)}},drawHeader:function(){try{if(v.header=$('#page_profile_header [data-target="header"]'),v.fixNav=$(".navbar",v.header),v.data.DATA.IS_PUBLIC?(v.drawFollowerNumber(),v.data.DATA.IS_PERSONNAL&&($('[data-target="avatar-button"]',v.header).show(),$('[data-target="header-type"]',v.header).addClass("header-personnal"),$("#profile_avatar_upload").fileupload({multipart:!0,dropZone:$('[data-target="avatar-button"]',v.header),add:function(e,t){var a=/^image\/(gif|jpe?g|png)$/i;return""!==t.originalFiles[0].type&&a.test(t.originalFiles[0].type)?void t.submit():!1},send:function(e,t){var a=t.files[0].name.substring(0,t.files[0].name.length-4);t.url=SETTING_HOST_UPLOAD+"/?sid="+SESSION_ID+"&resize=1&directory=user&type=picture&referer="+SETTING_REFERER_UPLOAD+"&file="+a+"&"},done:function(e,t){0===t.result.error.length&&(v.drawAvatar(t.result.results),Events.trigger(Events.user.updatePicture,{md5:t.result.results}))}})),v.data.DATA.CURATOR!==!1&&""!==v.data.DATA.CURATOR.COUNTRY_NAME&&(v.data.DATA.IS_PERSONNAL&&$('[data-target="header-type"]',v.header).addClass("header-edito"),$('[data-target="curator"]',v.header).show().append(v.data.DATA.CURATOR.COUNTRY_NAME).children(".flag").addClass("flag-"+v.data.DATA.CURATOR.DEFAULT_COUNTRY.toLowerCase()))):2===Number(v.data.DATA.USER.ACTIVATION)?(v.fixNav.remove(),$('[data-target="header-type"]',v.header).addClass("header-deactivate")):(v.fixNav.remove(),$('[data-target="header-type"]',v.header).addClass("header-private")),v.drawAvatar(v.data.DATA.USER.USER_PICTURE),v.drawBanner(v.data.DATA.USER.TOP_TRACK),$('[data-target="name"]',v.header).text(v.data.DATA.USER.DISPLAY_NAME).prop("href","/profile/"+v.id).prop("title",v.data.DATA.USER.DISPLAY_NAME),$('[data-target="blocked-wording"]',v.header).text(o("BLOQUÉ")),v.data.DATA.HAS_BLOCKED&&$('[data-target="blocked-status"]',v.header).addClass("user-blocked"),2!==Number(v.data.DATA.USER.ACTIVATION)){var e=document.getElementById("profile_page_header_action");if(e){var t=["play"];v.data.DATA.IS_PERSONNAL||t.push("favorite"),r.render(n.createElement(b,{id:v.id,type:"user",action:t,play_context:"profile_user_radio"}),e)}v.drawDropdown()}}catch(a){error.log(a)}},drawDropdown:function(){try{var e={blocked:v.data.DATA.HAS_BLOCKED},t=document.createElement("div"),a=window.SETTING_STATIC+"/images/common/blank-v"+window.STATIC_VERSION+".gif";r.render(n.createElement(h,{id:v.id,type:"user",context:"user",imgSrc:a,bordered:!1,coverLink:!1,showOptions:!0,contextMenuOptions:e}),t),$('[data-target="dropdown"]',v.header).html(t)}catch(s){error.log(s)}},updateAvatar:function(e,t){try{if(!v.data.DATA.IS_PERSONNAL)return;v.data.DATA.USER.USER_PICTURE=t.md5,v.drawAvatar(t.md5),v.drawDropdown()}catch(a){error.log(a)}},drawBanner:function(e){try{var t=SETTING_STATIC+"/images/naboo/pages/profile/private-v"+STATIC_VERSION+".jpg";return""!==e.ALB_PICTURE&&(t=SETTING_DOMAIN_IMG+"/cover/"+e.ALB_PICTURE+"/250x1200-000000-80-0-0.jpg"),$('[data-target="header-type"]',v.header).css("background-image","url("+t+")"),!0}catch(a){error.log(a)}},drawAvatar:function(e){try{var t=document.createElement("div"),a=_.getImageSrc("user",e,120,120);r.render(n.createElement(h,{type:"user",overlay:"off",imgSrc:a,bordered:!1,width:120,height:120}),t),$('[data-target="avatar"]',v.header).html(t)}catch(s){error.log(s)}},drawFollowerNumber:function(){try{var e=v.data.DATA.NB_FOLLOWING,t=v.data.DATA.NB_FOLLOWER,a="<strong>"+breakUpThousands(e)+"</strong> "+o("Following"),s="<strong>"+breakUpThousands(t)+"</strong> "+l("Follower","Followers",{count:t});$('[data-target="follower"]',v.header).html(s).prop("href","/profile/"+v.id+"/followers"),$('[data-target="following"]',v.header).html(a).prop("href","/profile/"+v.id+"/following")}catch(n){error.log(n)}},drawMenu:function(){try{v.menu=$('[data-target="menu"]',v.header),v.more=$('[data-target="more"]',v.header),v.data.DATA.IS_PUBLIC||(v.menu.remove(),v.more.remove()),v.menu.children().each(function(){$(this).is(".dropdown")?($(this).on("click",v.toggleMoreMenu),$(this).on("mouseup",function(){return!1}),v.more.on("mousedown",function(){return $("body").unbind("mouseup",v.toggleMoreMenu),!1})):$(this).data("public")||v.data.DATA.IS_PERSONNAL?$(this).data({width:$(this).outerWidth(!0),"user-id":v.id}).attr("href","/profile/"+v.id+"/"+$(this).data("tab")):$(this).remove()}),Events.ready(Events.user.dataStoreReady,function(){0===countObject(userData.dataStore)&&($('[data-tab="downloads"]',v.menu).remove(),$('[data-tab="downloads"]',v.more).remove(),v.resizeMenu())}),v.data.DATA.IS_PERSONNAL&&Events.ready(Events.user.userReady,function(){var e=userData.getUnseenPlaylistCount();e>0&&(e>=100&&(e="99+"),v.menu.find('[data-tab="playlists"] a').prepend('<span class="badge badge-info">'+e+"</span>"))}),v.resizeMenu()}catch(e){error.log(e)}},toggleMoreMenu:function(e){try{e.preventDefault();var t=v.more.closest(".dropdown");t.hasClass("opened")?(t.removeClass("opened"),$("body").unbind("mouseup",v.toggleMoreMenu)):(t.addClass("opened"),$("body").trigger("mouseup"),$("body").bind("mouseup",v.toggleMoreMenu))}catch(a){error.log(a)}},updateMenu:function(){try{v.menu.children().removeClass("active"),v.menu.children('[data-tab="'+v.tab+'"]').addClass("active")}catch(e){error.log(e)}},resizeMenu:function(){var e;try{"undefined"!=typeof v.menu&&v.menu.children("li").last().show(),v.more.hasClass("opened")&&v.toggleMoreMenu();var t=v.getTabsMenuWidth();if(v.fixNav.width()<t)return e=v.menu.children("li[data-tab]").last().clone(!0),v.menu.children("li[data-tab]").last().remove(),v.more.prepend(e),v.resizeMenu(),!0;var a=v.more.children().children().length,s=v.more.children().first().data("width"),n=a>1&&v.fixNav.width()>t+s,r=1===a&&v.fixNav.width()>s+t-v.more.parent().outerWidth();return n||r?(e=v.more.children().first().clone(!0),v.more.children().first().remove(),e.insertBefore(v.menu.children("li").last()),a>1?v.resizeMenu():v.menu.children("li").last().hide(),!0):(0===a&&v.menu.children("li").last().hide(),!1)}catch(i){error.log(i)}},getTabsMenuWidth:function(){try{var e=0;return v.menu.children("li").each(function(){e+=$(this).outerWidth(!0)}),e}catch(t){error.log(t)}},startEditMessage:function(){try{v.$page_message.parent().addClass("active"),v.$page_message_display.hide(),v.$page_message_button.hide(),v.$page_message_edit.val(v.data.TAB.home.message).show().focus(),v.$page_message_placeholder.hide()}catch(e){error.log(e)}},endEditMessage:function(){try{var e=v.$page_message_edit.val().trim();e!=v.data.TAB.home.message&&api.call("user.update",{USER_DATA:{DESCRIPTION:e}},function(){v.data.TAB.home.message=e}),v.$page_message_display.show().children("span").text(e),v.$page_message.parent().removeClass("active"),v.$page_message_button.show(),v.$page_message_edit.hide(),""===e&&v.$page_message_placeholder.show()}catch(t){error.log(t)}},search:function(e,t){var a=$.trim(t.val());""!==a?(a=rewriting(a.toLowerCase()),v.deleteSearch.show(),v.disableScrollCover(),v.pagination.nb=v.pagination.total,v.renderCover(v.currentList,v.tab,v.data.TAB[v.tab].data,a)):(v.deleteSearch.hide(),v.pagination.nb=v.pagination.group,v.renderCover(v.currentList,v.tab,v.data.TAB[v.tab].data))},cleanSearch:function(){try{v.inputSearch.val("")}catch(e){error.log(e)}},filterPlaylist:function(e){try{v.disableScrollCover(),$(" > li",v.currentList).show(),v.playlistFilter=e,"all"!==v.playlistFilter&&$('> [data-type!="'+v.playlistFilter+'"]',v.currentList).hide();var t=[];"all"===v.playlistFilter?(t=v.data.TAB.playlists.data,v.pagination.nb=v.pagination.group):(v.data.TAB.playlists.data.forEach(function(e){var a=Number(e.STATUS)>=2,s=Number(e.PARENT_USER_ID)===v.id;"playlist"===v.playlistFilter&&s?t.push(e):"playlist-favorite"!==v.playlistFilter||s||a?"playlist-collaborative"===v.playlistFilter&&a&&t.push(e):t.push(e)}),v.pagination.nb=v.pagination.total),v.renderCover(v.currentList,v.tab,t);var a=t.length;$("h2",v.currentTab).html('<span class="color-primary">'+breakUpThousands(a)+"</span> "+s(v.tab,a)),$('[data-target="filter-playlist"] > button',v.currentTab).removeClass("active"),$('[data-target="filter-playlist"] [data-type="'+v.playlistFilter+'"]',v.currentTab).addClass("active"),v.cleanSearch()}catch(n){error.log(n)}},drawPlaceholder:function(e){try{if(0===e){var t="personal_song"===v.tab?"none":"nocontent",a="profile_"+v.tab;"playlists"===v.tab&&(v.data.DATA.IS_PERSONNAL?"playlist"===v.currentList.data("filter")&&(a+="_personal"):(t="recommendation",a+="_public")),$('[data-target="place-holder"]',v.currentTab).html('<div class="placeholders-img '+t+'"></div><div class="placeholders-title">'+v.trad[a]+"</div>")}else $('[data-target="place-holder"]',v.currentTab).empty()}catch(s){error.log(s)}},drawSuggest:function(e,t,a){try{if("undefined"==typeof a||0===a.total||0===a.count)return $("#"+t).parents(".user-section-suggestion").addClass("hide"),!1;Events.ready(Events.user.userReady,function(){for(var s={playlists:["playlist","PLAYLIST_ID"],artists:["artist","ART_ID"],albums:["album","ALB_ID"],following:["friend","USER_ID"],radios:["radio","RADIO_ID"],shows:["show","SHOW_ID"]},n=0;n<a.data.length;n++)userData.isFavorite(s[e][0],a.data[n][s[e][1]])&&(a.data.splice(n,1),a.count--,n--);a.count>0?($("#"+t).parent().show(),v.renderCover(t,e,a.data,"",!0)):$("#"+t).parent().hide()})}catch(s){error.log(s)}},changeBlockStatus:function(e,t){try{if(t.id!=v.id)return!1;"USER.blockFriend"===e.namespace?$('[data-target="blocked-status"]',v.header).addClass("user-blocked"):"USER.unblockFriend"===e.namespace&&$('[data-target="blocked-status"]',v.header).removeClass("user-blocked")}catch(a){error.log(a)}},favoriteAdded:function(e,t){try{if(v.id!=USER.USER_ID)return!1;switch(t.type){case"user":case"album":case"artist":case"playlist":case"radio":case"show":var a="user"===t.type?"following":t.type+"s",s="home"===v.tab?v.data.TAB.home[a]:v.data.TAB[a],n="home"===v.tab?v.data.TAB.home[a+"_suggest"]:v.data.TAB[a+"_suggest"],r="profile_page_"+a,i="profile_page_"+a+"_empty";for(var o in n.data)if(n.data.hasOwnProperty(o)&&n.data[o][v.idByType[v.tab]]==t.id){n.data.splice(o,1),n.total=n.count=n.data.length;break}s.data.unshift(t),s.total=s.count=s.data.length,v.drawCoverTabTitle("home"===v.tab?a:null),v.renderCover(r,a,s.data),v.data.DATA.IS_PERSONNAL&&v.drawSuggest(a,i,n);break;case"song":"loved"===v.tab&&(v.data.TAB.loved.total++,v.drawDatagridTabTitle())}}catch(l){error.log(l)}},favoriteRemoved:function(e,t){try{if(v.id!=USER.USER_ID)return!1;switch(t.type){case"album":case"artist":case"playlist":case"radio":case"show":var a=t.type+"s",s="home"===v.tab?v.data.TAB.home[a]:v.data.TAB[a],n="profile_page_"+a;for(var r in s.data)if(s.data.hasOwnProperty(r)&&s.data[r][v.idByType[a]]==t.id){s.data.splice(r,1),s.total--,s.count--;break}v.drawCoverTabTitle("home"===v.tab?a:null),v.renderCover(n,a,s.data);break;case"song":if(v.data.TAB.loved)for(var i in v.data.TAB.loved.data)if(v.data.TAB.loved.data.hasOwnProperty(i)&&v.data.TAB.loved.data[i].SNG_ID==t.id){v.data.TAB.loved.data.splice(i,1),v.data.TAB.loved.count--,v.data.TAB.loved.total--,"loved"===v.tab&&v.drawDatagridTabTitle();break}}}catch(o){error.log(o)}},tabIsAllDisplay:function(){try{return"home"===v.tab?!0:!(v.currentList.data("start")<v.data.TAB[v.tab].total)}catch(e){error.log(e)}},sort:function(e){try{v.cleanSearch();var t={ART_NAME:f.sortByArtName,ALB_TITLE:f.sortByAlbTitle,DATE_UPDATE:f.sortByUpdateDate,DATE_CREATE:f.sortByCreateDate,PLAYLIST_TITLE:f.sortByPlaylistTitle,PLAYLIST_TYPE:f.sortByPlaylistType,APP_NAME:f.sortByAppName,TOP_ALBUM:f.sortByTopAlbum,TOP_PLAYLIST:f.sortByTopPlaylist,SHOW_NAME:f.sortByShowName,DATE_FAVORITE:f.sortByCreateDate};v.data.TAB[v.tab].data.sort(t[e].bind(f)),v.renderCover(v.currentList,v.tab,v.data.TAB[v.tab].data)}catch(a){error.log(a)}},isSorted:function(){var e=p(v.id,v.tab),t=e.cell,a=e.order;return null!==t||"asc"!==a},getAdsArgs:function(){return{element_id:v.id,element_data:v.tab}},filterDisplayPlaylist:function(e){try{if(0===e.total)return e;for(var t=0,a=[],s=0;s<e.count;s++)4!=e.data[s].TYPE&&(1!=e.data[s].STATUS&&3!=e.data[s].STATUS||e.data[s].PARENT_USER_ID==USER.USER_ID)?a.push(e.data[s]):++t;return e.data=a,e.count-=t,e.total-=t,e}catch(n){error.log(n)}}};t.exports=v},{"../core/i18n":255,"@deezer/components/_mixins/sort":44,"@deezer/components/common/ActionToolbar":58,"@deezer/components/common/DataGrid":97,"@deezer/components/common/DataGrid/utils":116,"@deezer/components/common/Selectbox":133,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,"@deezer/components/common/ThumbnailGrid":148,react:"react","react-dom":"react-dom"}],287:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("../core/i18n"),o=i.gettext,l=i.ngettext,c=e("../core/modal"),p=e("../models/track"),d=e("@deezer/components/common/DataGrid/utils"),u=d.getSort,m=e("@deezer/components/common/ActionToolbar"),h=40,_=2e3,y=e("@deezer/components/common/Thumbnail"),g=e("@deezer/components/common/Thumbnail/utils"),f={id:0,template:"catalog/playlist",style:null,personal:!1,display:function(e){try{if("string"!=typeof e.playlist_id)return!1;if(f.id=f.playlist_id=parseInt(e.playlist_id,10),"object"==typeof e.data&&(f.setStatus(e.data.DATA),!f.isSorted()))return Events.ready(Events.user.initialized,function(){f.displayCallback(e.data)}),!1;var t={playlist_id:f.id,lang:SETTING_LANG,start:0,nb:f.isSorted()?_:h,tags:!1};return api.call("deezer.pagePlaylist",t,f.displayCallback),!0}catch(a){error.log(a)}},displayCallback:function(e){try{if(e.SONGS.data=p.hydrate(e.SONGS.data),f.data=e.DATA,f.setStatus(e.DATA),templating.load(f.template),null==e.DATA.PLAYLIST_PICTURE||OFFLINE||(Events.subscribe(Events.playlist.updatePicture,function(e,t){"base64"!==t.type&&(f.data.PICTURE_TYPE=t.type,f.data.PLAYLIST_PICTURE=t.md5,f.displayPicture(t))},"playlist"),Events.subscribe(Events.playlist.uploadPicture,function(){r("#naboo_playlist_image_upload").click()},"playlist"),f.isPersonal&&f.uploadPicture()),f.displayEditableData(),null!=e.DATA.PARENT_USERNAME&&r("#naboo_playlist_information_creator").prop("href","/profile/"+e.DATA.PARENT_USER_ID).html(encodeHTMLEntities(e.DATA.PARENT_USERNAME)),!f.isPrivate){var t=r("#naboo_playlist_header");"number"==typeof e.DATA.NB_SONG&&r('[data-target="nb-track"]',t).append(l("Titre","Titres",{count:e.DATA.NB_SONG})).children("strong").text(e.DATA.NB_SONG),isNaN(e.DATA.DURATION)||r('[data-target="duration"] > strong',t).text(getTotalDuration(e.DATA.DURATION)),"number"==typeof e.DATA.NB_FAN&&e.DATA.NB_FAN>0?r('[data-target="nb-fan"] > a',t).append(l("Fan","Fans",{count:e.DATA.NB_FAN})).children("strong").text(breakUpThousands(e.DATA.NB_FAN)):r('[data-target="nb-fan"]',t).remove()}f.isPersonal||"undefined"==typeof e.DATA.PARENT_BLOCK||1!=e.DATA.PARENT_BLOCK||r("#naboo_catalog_comment").remove();var a={track_list:{selected:!0,args:{}}};return f.isPrivate||(a.comment={args:{type:"playlist",id:f.id,data:e.COMMENTS}},a.fan={args:{type:"playlist",id:f.id}}),f.isPersonal&&gatekeeper.isAllowed("playlist_assistant")&&Events.subscribeOnce(Events.datagrid.displayed,function(){Events.trigger(Events.tips.draw,{name:"playlist_assistant",check:!0})},"playlist"),null!=e.SONGS.count&&(a.track_list.args={id:f.id,tab:"track_list",data:{type:"playlist",id:f.id,playlist_personnal:f.isPersonal,last_seen:e.DATA.LAST_SEEN,songs:e.SONGS,playlist_private:f.isPrivate,playlist_collab:f.isCollabStatus,checksum:e.DATA.CHECKSUM,offline_data:{playlist_name:e.DATA.TITLE,playlist_creator:e.DATA.PARENT_USERNAME,playlist_checksum:e.DATA.CHECKSUM,playlist_picture:e.DATA.PLAYLIST_PICTURE,playlist_picture_type:e.DATA.PICTURE_TYPE}}}),f.isPersonal||(Events.subscribe(Events.user.addFavorite,f.updateNbFan,"playlist"),Events.subscribe(Events.user.deleteFavorite,f.updateNbFan,"playlist")),f.renderToolbar(),0===USER.USER_ID||f.data.IS_FAVORITE||!f.isPersonal&&!f.isPrivateStatus?(Events.subscribe(Events.playlist.trackListUpdated,f.trackListUpdateHandler,"playlist"),Events.subscribe(Events.datagrid.addedItems,function(e,t){f.trackListUpdateHandler(e,{tracks:t.items})},"playlist"),Events.trigger(Events.playlist.trackListUpdated,{tracks:e.SONGS.data})):f.isPrivate&&(r("#naboo_playlist_action").remove(),r("#naboo_playlist_type").addClass("extended")),tabs.init(r("#naboo_playlist_tab"),a),naboo.afterLoad(!0),!0}catch(s){error.log(s)}},renderToolbar:function(){var e=document.getElementById("naboo_playlist_action");if(e){var t={id:f.id,type:"playlist",action:[]};(0===USER.USER_ID||f.data.IS_FAVORITE||!f.isPersonal&&!f.isPrivateStatus)&&t.action.push("favorite"),f.isPrivateStatus||t.action.push("share"),f.isPersonal&&(t.action.push("edit"),t.edit=f.editPlaylist),n.render(s.createElement(m,t),e)}},trackListUpdateHandler:function(e,t){f.hasUnseenTracks(t.tracks)&&f.setSeen()},hasUnseenTracks:function(e){return f.data.LAST_SEEN?e.some(function(e){return e.isUnseen(f.data.LAST_SEEN)}):!1},setSeen:function(){Events.ready(Events.user.userReady,function(){api.call("playlist.setSeen",{playlist_id:f.id}),userData.setPlaylistSeen(f.id),Events.trigger(Events.playlist.seen)})},displayEditableData:function(){r("#naboo_playlist_title").text(ucfirst(f.data.TITLE)),r("#naboo_playlist_status").text(o(f.isPrivateStatus?"Privée":"Publique")),r("#naboo_playlist_collab").text(o(f.isCollabStatus?"Collaborative":"Non collaborative")),f.renderToolbar(),null!=f.data.DESCRIPTION&&r("#naboo_playlist_description").html(encodeHTMLEntities(f.data.DESCRIPTION).convertURLToLink()),f.displayPicture()},displayPicture:function(e,t){try{var a=document.getElementById("naboo_playlist_image");if(a){var r={excludes:["go_to_playlist"]};t=t||f.data;var i=f.isPrivate?"":t.PLAYLIST_PICTURE,o=g.getImageSrc(f.data.PICTURE_TYPE,i,200,200);n.render(s.createElement(y,{type:"playlist",context:"playlist_page",preview:"on",data:t,play:f.isPrivate?"off":"force",imgSrc:o,bordered:!0,showOptions:!0,width:200,height:200,contextMenuOptions:r}),a)}}catch(l){error.log(l)}},editPlaylist:function(){try{return Events.subscribeOnce(Events.playlist.updated,function(e,t){f.data.TITLE=t.title,f.data.DESCRIPTION=t.description,f.data.STATUS=t.status,f.setStatus(f.data),f.displayEditableData()},"playlist"),c.open("/lightbox/playlist_assistant?type=create&playlist_id="+f.id),!1}catch(e){error.log(e)}},uploadPicture:function(){try{r("#naboo_playlist_image_upload").fileupload({multipart:!0,add:function(e,t){var a=/^image\/(gif|jpe?g|png)$/i;return""!=t.originalFiles[0].type&&a.test(t.originalFiles[0].type)?void t.submit():!1},send:function(e,t){var a=t.files[0].name.substring(0,t.files[0].name.length-4);t.url=SETTING_HOST_UPLOAD+"/?sid="+SESSION_ID+"&id="+f.id+"&resize=1&directory=playlist&type=picture&referer="+SETTING_REFERER_UPLOAD+"&file="+a+"&"},done:function(e,t){0===t.result.error.length&&Events.trigger(Events.playlist.updatePicture,{md5:t.result.results,type:"playlist"})}})}catch(e){error.log(e)}},updateDurationAndNbSongs:function(e,t){try{f.data.DURATION=parseInt(f.data.DURATION,10)+parseInt(e,10),f.data.NB_SONG=parseInt(f.data.NB_SONG,10)+parseInt(t,10);var a=r("#naboo_playlist_header");"number"==typeof f.data.NB_SONG&&r('[data-target="nb-track"]',a).html("<strong>"+f.data.NB_SONG+"</strong>"+l("Titre","Titres",{count:f.data.NB_SONG})),isNaN(f.data.DURATION)||r('[data-target="duration"] > strong',a).text(getTotalDuration(f.data.DURATION))}catch(s){error.log(s)}},updateNbFan:function(e,t){return t.id!=f.data.PLAYLIST_ID?!1:("USER.addFavorite"===e.namespace?f.data.NB_FAN+=1:f.data.NB_FAN-=1,void r('#naboo_playlist_header [data-target="nb-fan"] > a').html(l("%s Fan","%s Fans",{count:f.data.NB_FAN,sprintf:["<strong>"+breakUpThousands(f.data.NB_FAN)+"</strong>"]})))},onOpenTab:function(e){tabs.display(e),r("#page_content").scrollTop(0)},leave:function(){delete f.data;var e=document.getElementById("tab_track_list_content");e&&n.unmountComponentAtNode(e)},isSorted:function(){var e=f.isPersonal||f.isCollabStatus?"personalPlaylist":"playlist",t=u(f.id,e),a=t.cell,s=t.order;return null!==a||"asc"!==s},setStatus:function(e){f.isPrivateStatus=1===Number(e.STATUS)||3===Number(e.STATUS),f.isPrivate=Number(e.PARENT_USER_ID)!==USER.USER_ID&&f.isPrivateStatus,f.isCollabStatus=2===Number(e.STATUS),f.isPersonal=Number(e.PARENT_USER_ID)===USER.USER_ID},getLiveFeed:function(){return"1_0_PLAYLISTFEED_"+f.id}};t.exports=f},{"../core/i18n":255,"../core/modal":257,"../models/track":262,"@deezer/components/common/ActionToolbar":58,"@deezer/components/common/DataGrid/utils":116,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,jquery:"jquery",react:"react","react-dom":"react-dom"}],286:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("@deezer/components/Page"),i={id:0,display:function(e){var t=document.getElementById("naboo_content");if(t){var a="object"==typeof e&&e.data&&e.data.sections?e.data.sections:[],i=e&&e.type||"home";n.render(s.createElement(r,{sections:a,type:i}),t,function(){naboo.afterLoad(!0)})}},leave:function(){var e=document.getElementById("naboo_content");e&&n.unmountComponentAtNode(e)}};t.exports=i},{"@deezer/components/Page":31,react:"react","react-dom":"react-dom"}],285:[function(e,t,a){"use strict";var s,n=e("react"),r=e("react-dom"),i=e("@deezer/components/moods/Moods"),o={start:0,nb:25,max:0,data:[],container:"",genreId:0,genreIdDefault:0,display:function(e){return gatekeeper.isAllowed("moods")===!1?www.navigate("/"):(e.genre_id?o.genreId=Number(e.genre_id):o.genreId=storage.isset("moods_genre")?storage.get("moods_genre"):o.genreIdDefault,s=document.getElementById("naboo_content"),e.data?o.render(e):o.load(),void naboo.afterLoad(!0))},load:function(){www.setCurrentPath("/moods"+(o.genreId!==o.genreIdDefault?"/"+o.genreId:""),!0),0===o.start&&(o.data=[]),api.call({method:"deezer.pageMoods",data:{genre_id:o.genreId,type:"playlist",start:o.start,nb:o.nb},success:function(e){o.render({data:e})}})},render:function(e){if(s){o.max=e.data.ITEMS.total,o.data=o.data.concat(e.data.ITEMS.data);var t={items:o.data,genreId:o.genreId,onChangeGenre:o.onChangeGenre};r.render(n.createElement(i,t),s,o.activeInfiniteScroll)}},onChangeGenre:function(e){infinite_scroll.disable(),o.start=0,o.genreId=e,o.load(),storage.set("moods_genre",o.genreId)},activeInfiniteScroll:function(){return o.start+o.nb>=o.max?(infinite_scroll.disable(),!1):(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),o.start+=o.nb,o.load()},"moods"),void infinite_scroll.active())},leave:function(){s&&r.unmountComponentAtNode(s)}};t.exports=o},{"@deezer/components/moods/Moods":194,react:"react","react-dom":"react-dom"}],194:[function(e,t,a){"use strict";var s=e("react"),n=e("../../core/i18n"),r=n.gettext,i=e("../../core/genre"),o=i.FILTER_MOODS,l=e("@deezer/components/common/ThumbnailGrid"),c=e("@deezer/components/common/GenreList/GenreList"),p=s.createClass({displayName:"Moods",propTypes:{items:s.PropTypes.array.isRequired,genreId:s.PropTypes.number,onChangeGenre:s.PropTypes.func},getDefaultProps:function(){return{genreId:0,onChangeGenre:function(){}}},getInitialState:function(){return{genreId:this.props.genreId}},render:function(){return s.createElement("div",null,s.createElement("div",{className:"wrapper"},s.createElement("div",{className:"naboo-searchbar clearfix",id:"naboo_tops_filters"},s.createElement("h1",{className:"heading-1"},r("Ambiances")),s.createElement("h2",{className:"heading-4"},r("Choisir une catégorie")),s.createElement("form",{className:"form-inline"},s.createElement("div",{className:"form-group"},s.createElement(c,{onSelect:this._onChangeGenre,selectedId:this.props.genreId,type:o})),this._renderEdit())),s.createElement("div",null,this._renderGrid())))},_renderGrid:function(){var e={type:"playlist",data:this.props.items,context:"moods",options:["name","artist","fans","tracks","sticker","favorite","play_link"]};return s.createElement(l,e)},_renderEdit:function(){return gatekeeper.isAllowed("curator_edito")||gatekeeper.isAllowed("curator_local")?s.createElement("div",{className:"form-group"},s.createElement("a",{className:"btn btn-primary",href:"#",onClick:this._onClickEdit},s.createElement("span",{className:"label"},r("Organiser le Top Moods")))):null},_onChangeGenre:function(e){this.setState({genreId:e.GENRE_ID},function(){this.props.onChangeGenre(this.state.genreId)}.bind(this))},_onClickEdit:function(e){e.preventDefault();var t=modal.open("/lightbox/curators/edit_top_playlist/moods/"+USER.USER_ID);Events.subscribeOnce(Events.modal.close,function(e,a){t===a&&window.moods.onChangeGenre(this.props.genreId)}.bind(this),"moods")}});t.exports=p},{"../../core/genre":254,"../../core/i18n":255,"@deezer/components/common/GenreList/GenreList":127,"@deezer/components/common/ThumbnailGrid":148,react:"react"}],284:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("../core/EventDispatcher"),i=e("../components/menu/Menu"),o=e("../components/menu/Panels"),l={PanelsComponent:null,initialized:!1,init:function(){return l.initialized?!1:(l.dispatchActionEvent=new r,l.subscribeActions(l.onAction),l.initialized=!0,!0)},authorized_actions:{openCreatePlaylist:!0},dispatchAction:function(e,t){return"undefined"==typeof l.authorized_actions[e]?!1:(l.dispatchActionEvent.trigger({action:e,params:t}),!0)},subscribeActions:function(e){l.dispatchActionEvent.subscribe(e)},onAction:function(e){switch(e.action){case"openCreatePlaylist":l.PanelsComponent.isPanelMounted("playlists")||Events.subscribe(Events.menu.panel_mounted,function(e,t){"playlists"===t&&l.dispatchAction("openCreatePlaylist")}),Events.trigger(Events.menu.openPanel,"playlists")}return!0},load:function(){l.init(),l.MenuComponent=n.render(s.createElement(i,null),document.getElementById("page_sidebar")),l.PanelsComponent=n.render(s.createElement(o,null),document.getElementById("page_panels"))},autoScroll:function(){},setCurrentApplication:function(){return!1}};t.exports=l},{"../components/menu/Menu":161,"../components/menu/Panels":162,"../core/EventDispatcher":250,react:"react","react-dom":"react-dom"}],162:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("react-addons-pure-render-mixin"),i=e("./panels/SearchSuggest"),o=e("./panels/SearchHistory"),l=e("./panels/Playlists"),c=e("./panels/Albums"),p=e("./panels/Shows"),d=e("./panels/Apps"),u=e("./panels/QueueList"),m=e("./panels/Settings"),h=e("./panels/Lyrics"),_=s.createClass({displayName:"Panels",mixins:[r],getInitialState:function(){return{openPanelName:null,opened:!1}},childContextTypes:{getTrackingParams:s.PropTypes.func},getChildContext:function(){return{getTrackingParams:this.getTrackingParams}},componentWillMount:function(){Events.subscribe(Events.menu.panel_mounted,this._onPanelMounted)},componentDidMount:function(){Events.subscribe(Events.menu.closeAllPanels,this._onClosePanels),Events.subscribe(Events.menu.openPanel,this._onOpenPanel)},componentWillUnmount:function(){Events.unsubscribe(Events.menu.closeAllPanels,this._onClosePanels),Events.unsubscribe(Events.menu.openPanel,this._onOpenPanel),Events.unsubscribe(Events.menu.panel_mounted,this._onPanelMounted)},getTrackingParams:function(){return{panel:this.state.openPanelName}},isPanelMounted:function(e){return"undefined"!=typeof this._panels_mounted[e]},render:function(){this._initPanel(this.state.openPanelName);var e={"panel-wrapper":!0};this.state.openPanelName&&(e["panel-wrapper-"+this.state.openPanelName]=!0);var t=n(e),a=n({"panel-container":!0,opened:this.state.opened});return s.createElement("div",{className:a,"aria-hidden":this.state.displayed,style:this.state.displayed?{display:"block"}:{}},s.createElement("div",{className:t},this._isPanelInitialized("searchhistory")?s.createElement(o,{ref:"searchhistory",selected:this.state.openPanelName}):null,this._isPanelInitialized("searchsuggest")?s.createElement(i,{ref:"searchsuggest",selected:this.state.openPanelName}):null,this._isPanelInitialized("playlists")?s.createElement(l,{ref:"playlists",selected:this.state.openPanelName}):null,this._isPanelInitialized("albums")?s.createElement(c,{ref:"albums",selected:this.state.openPanelName}):null,this._isPanelInitialized("shows")?s.createElement(p,{ref:"shows",selected:this.state.openPanelName}):null,this._isPanelInitialized("apps")?s.createElement(d,{ref:"apps",selected:this.state.openPanelName}):null,this._isPanelInitialized("queuelist")?s.createElement(u,{ref:"queuelist",selected:this.state.openPanelName}):null,this._isPanelInitialized("settings")?s.createElement(m,{ref:"settings",selected:this.state.openPanelName}):null,this._isPanelInitialized("lyrics")?s.createElement(h,{ref:"lyrics",selected:this.state.openPanelName,displayed:this.state.displayed}):null),s.createElement("div",{className:"panel-overlay",onClick:this._onOverlayClick}))},_onPanelMounted:function(e,t){this._panels_mounted[t]=!0},_onOverlayClick:function(){Events.trigger(Events.menu.closeAllPanels)},_onClosePanels:function(){this.setState({opened:!1},function(){window.setTimeout(function(){this.setState({displayed:!1,openPanelName:null})}.bind(this),150)})},_onOpenPanel:function(e,t){this.setState({openPanelName:t,displayed:!0},function(){"lyrics"===t&&dzPlayer.control.play(),window.setTimeout(function(){this.setState({opened:!0},function(){this.refs[t].openPanel()}.bind(this))}.bind(this),0)})},_panels_initialized:{},_panels_mounted:{},_initPanel:function(e){"undefined"==typeof this._panels_initialized[e]&&(this._panels_initialized[e]=!0)},_isPanelInitialized:function(e){return"undefined"!=typeof this._panels_initialized[e]}});t.exports=_},{"./panels/Albums":164,"./panels/Apps":165,"./panels/Lyrics":166,"./panels/Playlists":167,"./panels/QueueList":168,"./panels/SearchHistory":169,"./panels/SearchSuggest":170,"./panels/Settings":171,"./panels/Shows":172,classnames:"classnames",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],172:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=n.ngettext,o=e("../../common/Selectbox"),l=e("../../common/list_items/Show"),c=e("../../_mixins/sort"),p=e("../../_mixins/panel"),d=e("../../_mixins/panelScroll"),u=s.createClass({displayName:"Shows",mixins:[p,d,c],panel_name:"shows",scrollbar:{ref:"nano",shouldUpdate:function(e){return this.state.list.length!==e.list.length}},getInitialState:function(){return{list:userData.data.FAVORITES_SHOWS.data.slice(0),sort_type:USER.SETTING.site.sort_panel_shows||"SHOW_NAME",nb_display:50,filter:""}},componentDidMount:function(){Events.subscribe(Events.user.addFavorite,function(e,t){"show"===t.type&&this.setState({list:userData.data.FAVORITES_SHOWS.data.slice(0)})}.bind(this),"panel_show"),Events.subscribe(Events.user.deleteFavorite,function(e,t){"show"===t.type&&this.setState({list:userData.data.FAVORITES_SHOWS.data.slice(0)})}.bind(this),"panel_show"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){this.setState({filter:""})}.bind(this))},componentWillUnmount:function(){Events.unsubscribeAll("panel_show")},shouldComponentUpdate:function(e,t){return e.selected!==this.props.selected||t.sort_type!==this.state.sort_type||t.nb_display!==this.state.nb_display||t.filter!==this.state.filter||t.list.length!==this.state.list.length},render:function(){return this._refreshCurrentList(),this.renderPanel(s.createElement("div",{className:"panel-shows"},s.createElement("div",{className:"panel-header"},this._renderTitle(),this.state.list.length?this._renderActions():null),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},_current_list:[],_display_more_enabled:!0,_displayMore:function(){return this._display_more_enabled===!1||this.state.nb_display>this._current_list.length?!1:(this._display_more_enabled=!1,this.setState({nb_display:this.state.nb_display+50},function(){this._display_more_enabled=!0}),!0)},_onSortTypeChange:function(e){this.setState({sort_type:e})},_onFilterChange:function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},_renderTitle:function(){var e=this.state.list.length;return 0===e?s.createElement("h1",{className:"panel-heading heading-2"},s.createElement("span",{className:"color-primary"},breakUpThousands(e))," "+i("show","shows",{count:e})):s.createElement("h1",{className:"panel-heading heading-2"},s.createElement("a",{href:"/profile/"+USER.USER_ID+"/shows",className:"evt-click"},s.createElement("span",{className:"color-primary"},breakUpThousands(e))," "+i("show","shows",{count:e}),s.createElement("span",{className:"icon icon-arrow-right"})))},_renderActions:function(){return s.createElement("div",{className:"action form-inline"},s.createElement("div",{className:"form-group"},s.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:r("Filtrer"),value:this.state.filter})),this.state.list.length>0?s.createElement("div",{className:"form-group"},s.createElement(o,{type:"show",onChange:this._onSortTypeChange})):"")},_renderContent:function(){return s.createElement("ul",{className:"nano-card-list",key:"show-list"},this._current_list.map(function(e,t){var a=$.extend({},e);return s.createElement(l,{data:a,key:"show_"+e.SHOW_ID+t,display_favorite:!1,display_add:!0,context:"menu_panel_show"})}))},_refreshCurrentList:function(){var e=this.sort(this.state.list,this.state.sort_type),t=this.state.filter.toLowerCase().trim();""!==t&&(e=e.filter(function(e){return e.SHOW_NAME.toLowerCase().indexOf(t)>-1})),e=e.slice(0,this.state.nb_display),this._current_list=e}});t.exports=u},{"../../../core/i18n":255,"../../_mixins/panel":41,"../../_mixins/panelScroll":42,"../../_mixins/sort":44,"../../common/Selectbox":133,"../../common/list_items/Show":159,react:"react"}],171:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("classnames"),i=e("react-addons-pure-render-mixin"),o=e("../../../core/i18n"),l=o.gettext,c=e("../../../core/modal"),p=e("../../_mixins/tracking"),d=e("../../_mixins/panel"),u=e("../../_mixins/panelScroll"),m=s.createClass({displayName:"Settings",mixins:[d,u,p,i],panel_name:"settings",scrollbar:{ref:"nano",shouldUpdate:function(){}},getInitialState:function(){return{hq:dzPlayer.isHq(),fade:dzPlayer.fade}},componentDidMount:function(){Events.subscribe(Events.player.hq,function(e,t){this.setState({hq:t})}.bind(this),"player"),Events.subscribe(Events.player.fade,function(e,t){this.setState({fade:t})}.bind(this),"player");var e=this;n(this.refs.fade).draggable({axis:"x",containment:"parent",drag:function(t,a){e.setState({fade:e._getCursorFade(t,a)})},stop:function(t,a){dzPlayer.control.changeFadeValue(e._getCursorFade(t,a))}})},render:function(){var e=r({"nano-card-link settings-hq":!0,checked:this.state.hq}),t=r({"nano-card-link is-kid":!0,checked:user.getMultiAccountOptions().IS_KID});return this.renderPanel(s.createElement("div",{className:"panel-settings"},this.renderScrollbar({"panel-body":!0},s.createElement("div",null,s.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},l("Compte")),s.createElement("ul",{className:"nano-card-list"},s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/account",onClick:this._onLinkClick,"data-type":"account"},s.createElement("span",{className:"icon icon-rounded icon-user"}),s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l("Paramètres"))),user.getMultiAccountOptions().ENABLED||user.getMultiAccountOptions().CHILD_COUNT?s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/lightbox/multi_account/switch",onClick:this._onLinkClick,"data-type":"family_switch","data-modal":"/lightbox/multi_account/switch"},s.createElement("span",{className:"icon icon-rounded icon-family"}),s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l(user.getMultiAccountOptions().CHILD_COUNT?"Changer de profil":"Nouveau profil"))):null,s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/support",target:"_blank",onClick:this._onLinkClick,"data-type":"support"},s.createElement("span",{className:"icon icon-rounded icon-help"}),s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l("Assistance"))),user.getMultiAccountOptions().PARENT?null:s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/gift",target:"_blank",onClick:this._onLinkClick,"data-type":"gift_code"},s.createElement("span",{className:"icon icon-rounded icon-barcode"}),s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l("Activer un code"))),user.getMultiAccountOptions().PARENT?s.createElement("li",{className:t,onClick:this._setKidStatus,"data-type":"is_kid"},s.createElement("input",{className:"checkbox-input pull-right",id:"is_kid",type:"checkbox"}),s.createElement("label",{className:"checkbox-label heading-4",htmlFor:"is_kid"},l("Enfant ?"))):null),s.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},l("Audio")),s.createElement("ul",{className:"nano-card-list"},s.createElement("li",{className:e,onClick:this._setHq,"data-type":"audio_hq"},s.createElement("input",{className:"checkbox-input pull-right",id:"audio_hq",type:"checkbox"}),s.createElement("label",{className:"checkbox-label heading-4",htmlFor:"audio_hq"},l("Haute Qualité"))),s.createElement("li",{className:"nano-card-link"},s.createElement("span",{className:"heading-4"},s.createElement("span",{className:"slider pull-right"},s.createElement("span",{className:"slider-label"},Math.round(10*this.state.fade)),s.createElement("span",{className:"slider-bar",ref:"fade_bar",onClick:this._setFade},s.createElement("span",{className:"slider-bar-active",style:{width:100*this.state.fade+"%"}}),s.createElement("span",{className:"slider-bar-handler",style:{left:100*this.state.fade+"%"},ref:"fade"})),s.createElement("span",{className:"slider-label"},"10")),l("Fondu sonore")))),s.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},l("Découvrir Deezer")),s.createElement("ul",{className:"nano-card-list"},s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/offers",target:"_blank",onClick:this._onLinkClick,"data-type":"offers"},s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l("Offres"))),s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/company",target:"_blank",onClick:this._onLinkClick,"data-type":"company"},s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l("À propos"))),s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/features",target:"_blank",onClick:this._onLinkClick,"data-type":"features"},s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l("Fonctionnalités"))),s.createElement("li",{className:"nano-card-link"},s.createElement("a",{className:"heading-4",href:"/jobs",target:"_blank",onClick:this._onLinkClick,"data-type":"jobs"},s.createElement("span",{className:"icon icon-arrow-right pull-right"}),l("Jobs")))),s.createElement("div",{className:"btn-logout"},s.createElement("button",{className:"btn btn-danger btn-block",type:"button",onClick:this._logout,"data-type":"log_out"},s.createElement("span",{className:"label"},l("Déconnexion"))))))))},_getCursorFade:function(e,t){var a=t.position.left/(e.target.parentNode.offsetWidth-5);return a=Math.min(a,1),a=Math.max(a,0)},_logout:function(){user.logout()},_setHq:function(e){e.preventDefault(),"undefined"!=typeof USER&&USER.OPTIONS.web_hq?dzPlayer.control.setHq(!this.state.hq):(window.open("/offers"),Events.trigger(Events.menu.closeAllPanels))},_setFade:function(e){var t=(e.pageX-n(e.target).offset().left)/this.refs.fade_bar.offsetWidth;dzPlayer.control.changeFadeValue(t)},_setKidStatus:function(){window.user.setKidStatus()},_onLinkClick:function(e){var t=e.currentTarget.getAttribute("href"),a=e.currentTarget.getAttribute("target"),s=dom.dataset(e.currentTarget,"modal");if(this.tracking("panel_click",e.currentTarget),Events.trigger(Events.menu.closeAllPanels),"_blank"!==a){if(e.preventDefault(),e.stopPropagation(),"string"==typeof s)return c.open(s);if("string"==typeof t)return loadBox(t)}}});t.exports=m},{"../../../core/i18n":255,"../../../core/modal":257,"../../_mixins/panel":41,"../../_mixins/panelScroll":42,"../../_mixins/tracking":46,classnames:"classnames",jquery:"jquery",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],170:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=n.ngettext,o=e("../../../naboo/stores/SearchStore"),l=e("../../common/TagList"),c=e("./_elements/History"),p=e("../../common/list_items/Artist"),d=e("../../common/list_items/Album"),u=e("../../common/list_items/Track"),m=e("../../common/list_items/Playlist"),h=e("../../common/list_items/Radio"),_=e("../../common/list_items/Show"),y=e("../../_mixins/tracking"),g=e("../../_mixins/panel"),f=e("../../_mixins/panelScroll"),b=s.createClass({displayName:"SearchSuggest",propTypes:{isAuthUser:s.PropTypes.bool},mixins:[g,f,y],getDefaultProps:function(){return{isAuthUser:0!==window.USER.USER_ID}},getInitialState:function(){return{suggest:o.getResults(),history:userData.data.SEARCH_HISTORY?userData.data.SEARCH_HISTORY.data:[]}},componentDidMount:function(){o.onChange(this._onSearchStoreChange),Events.subscribe(Events.user.updateSearchHistory,this._onHistoryChange)},componentWillUnmount:function(){o.offChange(this._onSearchStoreChange),Events.unsubscribe(Events.user.updateSearchHistory,this._onHistoryChange)},panel_name:"searchsuggest",scrollbar:{ref:"nano",shouldUpdate:function(e){return e.suggest!==this.state.suggest}},render:function(){return this.renderPanel(s.createElement("div",{className:"panel-search-suggest"},s.createElement("div",{className:"panel-header panel-header-link",onClick:this._onViewAllClick.bind(null,"all")},s.createElement("h1",{className:"panel-heading heading-2"},r("Résultats")),this._isSuggestEmpty()?"":s.createElement("div",{className:"action"},s.createElement("span",{className:"icon icon-arrow-right"}))),this.renderScrollbar({"panel-body":!0},s.createElement("div",null,this._renderContent()))))},_renderPlaceholder:function(){return s.createElement("div",{key:"no-result-placeholder"},s.createElement("div",{className:"placeholders-img nocontent"}),s.createElement("div",{className:"placeholders-title"},r("Aucun résultat.")))},_renderContent:function(){var e=[];if(this._isSuggestEmpty()){e.push(this._renderPlaceholder());var t=userData.data.USER_TAGS?userData.data.USER_TAGS.data:null;return t&&t.length&&(e.push(s.createElement("h2",{key:"user-tag-title",className:"panel-heading-sub heading-4 heading-bordered"},r("Tags"))),e.push(s.createElement(l,{key:"user-tag-list",tags:t}))),this.state.history.length&&(e.push(s.createElement("h2",{key:"history-title",className:"panel-heading-sub heading-4 heading-bordered"},r("Dernières recherches"))),e.push(s.createElement(c,{key:"history-list",history:this.state.history}))),e}e.push(s.createElement(l,{key:"tag-list",max:5,tags:this.state.suggest.TAG}));for(var a=this._getSuggest(),n=0;n<a.length;++n){var i=a[n],o=i.type,y=i.data;if(y.length){for(var g=Math.min(y.length,2),f=[],b=0;g>b;b++){var v=y[b];switch(o){case"ARTIST":f.push(s.createElement(p,{data:v,key:"suggest_artist_"+v.ART_ID,display_add:!0,index:b,onClick:this._onSuggestionClick,context:"suggest_artist"}));break;case"ALBUM":f.push(s.createElement(d,{data:v,key:"suggest_album_"+v.ALB_ID,display_add:!0,index:b,onClick:this._onSuggestionClick,context:"suggest_album"}));break;case"TRACK":f.push(s.createElement(u,{data:v,key:"suggest_track_"+v.SNG_ID,display_add:!0,index:b,onClick:this._onSuggestionClick,context:"suggest_track"}));break;case"PLAYLIST":f.push(s.createElement(m,{data:v,key:"suggest_playlist_"+v.PLAYLIST_ID,display_add:!0,index:b,onClick:this._onSuggestionClick,context:"suggest_playlist"}));break;case"RADIO":f.push(s.createElement(h,{data:v,key:"suggest_radio_"+v.RADIO_ID,display_add:!0,index:b,onClick:this._onSuggestionClick,context:"suggest_radio"}));break;case"SHOW":f.push(s.createElement(_,{data:v,key:"suggest_playlist_"+v.SHOW_ID,display_add:!0,index:b,onClick:this._onSuggestionClick,context:"suggest_show"}))}}y.length>2&&f.push(s.createElement("button",{key:"viewmore_"+o,onClick:this._onViewAllClick.bind(null,o),className:"btn btn-block btn-view-more",type:"button","data-type":"view_all"},s.createElement("span",{className:"label"},i.view_more_wording))),e.push(s.createElement("h2",{className:"panel-heading-sub heading-4",key:"suggest_title_"+o},i.title)),e.push(s.createElement("ul",{key:"suggest_list_"+o,className:"nano-card-list"},f))}}return e},_onSearchStoreChange:function(e){"suggest"===e&&this.setState({suggest:o.getResults()})},_onSuggestionClick:function(e,t,a){this.props.isAuthUser&&userData.addSearchHistory(o.getQuery(),t,a)},_onViewAllClick:function(e,t){this.tracking("panel_click",t.currentTarget);var a=o.getQuery();this.props.isAuthUser&&userData.addSearchHistory(a),Events.trigger(Events.menu.closeAllPanels),window.search._tabName=e&&"TRACK"!==e?e.toLowerCase():"all",0===a.lastIndexOf("#",0)?(a=a.replace(/#/g,""),loadBox("/tags/"+encodeURIComponent(a),{force:!0})):loadBox("/search/"+encodeURIComponent(a),{force:!0})},_onHistoryChange:function(){this.setState({history:userData.data.SEARCH_HISTORY})},_isSuggestEmpty:function(){return!(null!==this.state.suggest&&(this.state.suggest.ARTIST&&0!==this.state.suggest.ARTIST.length||this.state.suggest.ALBUM&&0!==this.state.suggest.ALBUM.length||this.state.suggest.TRACK&&0!==this.state.suggest.TRACK.length||this.state.suggest.PLAYLIST&&0!==this.state.suggest.PLAYLIST.length||this.state.suggest.RADIO&&0!==this.state.suggest.RADIO.length||this.state.suggest.SHOW&&0!==this.state.suggest.SHOW.length))},_getSuggest:function(){var e=[{type:"ARTIST",title:i("Artiste","Artistes",{count:this.state.suggest.ARTIST.length}),view_more_wording:r("Afficher tous les artistes"),data:this.state.suggest.ARTIST},{type:"ALBUM",title:i("Album","Albums",{count:this.state.suggest.ALBUM.length}),view_more_wording:r("Afficher tous les albums"),data:this.state.suggest.ALBUM},{type:"TRACK",title:i("Titre","Titres",{count:this.state.suggest.TRACK.length}),view_more_wording:r("Afficher tous les titres"),data:this.state.suggest.TRACK},{type:"PLAYLIST",title:i("Playlist","Playlists",{count:this.state.suggest.PLAYLIST.length}),view_more_wording:r("Afficher toutes les playlists"),data:this.state.suggest.PLAYLIST}];return gatekeeper.isAllowed("search_mix")&&e.push({type:"RADIO",title:i("Mix","Mix",{count:this.state.suggest.RADIO.length}),view_more_wording:r("Afficher tous les mix"),data:this.state.suggest.RADIO}),e.push({type:"SHOW",title:i("Podcast","Podcasts",{count:this.state.suggest.SHOW.length}),view_more_wording:r("Afficher tous les podcasts"),data:this.state.suggest.SHOW}),e}});t.exports=b},{"../../../core/i18n":255,"../../../naboo/stores/SearchStore":291,"../../_mixins/panel":41,"../../_mixins/panelScroll":42,"../../_mixins/tracking":46,"../../common/TagList":136,"../../common/list_items/Album":152,"../../common/list_items/Artist":154,"../../common/list_items/Playlist":157,"../../common/list_items/Radio":158,"../../common/list_items/Show":159,"../../common/list_items/Track":160,"./_elements/History":173,react:"react"}],169:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=e("../../common/TagList"),o=e("./_elements/History"),l=e("../../_mixins/panel"),c=e("../../_mixins/panelScroll"),p=s.createClass({displayName:"SearchHistory",mixins:[l,c],panel_name:"searchhistory",getInitialState:function(){return{userTags:userData.data.USER_TAGS?userData.data.USER_TAGS.data:[],history:userData.data.SEARCH_HISTORY?userData.data.SEARCH_HISTORY.data:[],historyLength:userData.data.SEARCH_HISTORY?userData.data.SEARCH_HISTORY.total:0}},scrollbar:{ref:"nano",shouldUpdate:function(e){return e.historyLength!==this.state.historyLength}},componentDidMount:function(){Events.subscribe(Events.user.updateSearchHistory,this._onHistoryChange)},componentWillUnmount:function(){Events.unsubscribe(Events.user.updateSearchHistory,this._onHistoryChange)},shouldComponentUpdate:function(e,t){return e.selected!==this.props.selected||t.historyLength!==this.state.historyLength||t.userTags.length!==this.state.userTags.length},render:function(){var e=[];return this.state.userTags.length&&(e.push(s.createElement("h2",{key:"user-tag-list-title",className:"panel-heading-sub heading-4 heading-bordered"},r("Tags"))),e.push(s.createElement(i,{key:"user-tag-list",tags:this.state.userTags}))),this.state.history.length&&(e.push(s.createElement("h2",{key:"history-list-title",className:"panel-heading-sub heading-4 heading-bordered"},r("Dernières recherches"))),e.push(s.createElement(o,{key:"history-list",history:this.state.history})),e.push(s.createElement("button",{key:"history-clear-button",className:"btn btn-block btn-view-more",type:"button",onClick:this._clearSearchHistory},s.createElement("span",{className:"label"},r("Effacer"))))),this.renderPanel(s.createElement("div",{className:"panel-search-history"},this.renderScrollbar({"panel-body":!0},s.createElement("div",null,e))))},_onHistoryChange:function(){this.setState({historyLength:userData.data.SEARCH_HISTORY.total})},_clearSearchHistory:function(){userData.clearSearchHistory(),Events.trigger(Events.menu.closeAllPanels)}});t.exports=p},{"../../../core/i18n":255,"../../_mixins/panel":41,"../../_mixins/panelScroll":42,"../../common/TagList":136,"./_elements/History":173,react:"react"}],173:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../common/list_items/Artist"),r=e("../../../common/list_items/Album"),i=e("../../../common/list_items/Track"),o=e("../../../common/list_items/Playlist"),l=e("../../../common/list_items/Show"),c=e("../../../_mixins/tracking"),p=s.createClass({displayName:"History",propTypes:{history:s.PropTypes.array},mixins:[c],getInitialState:function(){return{history:this.props.history}},render:function(){if(this._isHistoryEmpty())return null;for(var e=[],t=0,a=this.state.history.length;a>t;t++){var c=this.state.history[t].query,p=this.state.history[t].result,d=null;switch(p&&p.__TYPE__){case"artist":d=s.createElement(n,{data:p,key:"artist_"+p.ART_ID,display_add:!0,index:t,context:"history_artist"});break;case"album":d=s.createElement(r,{data:p,key:"album_"+p.ALB_ID,display_add:!0,index:t,context:"history_album"});break;case"song":d=s.createElement(i,{data:p,key:"track_"+p.SNG_ID,display_add:!0,index:t,context:"history_track"});break;case"playlist":d=s.createElement(o,{data:p,key:"playlist_"+p.PLAYLIST_ID,display_add:!0,index:t,context:"history_playlist"});break;case"show":d=s.createElement(l,{data:p,key:"show_"+p.PLAYLIST_ID,display_add:!0,index:t,context:"history_show"})}e.push(s.createElement("li",{key:"query_"+c+t,className:"nano-card-link"},s.createElement("a",{className:"heading-4 ellipsis",onClick:this._onViewAll,"data-type":"query","data-query":c,"data-index":t},s.createElement("span",{className:"icon icon-arrow-top-left pull-left"}),c),d?s.createElement("ul",{className:"nano-card-list"},d):null))}return s.createElement("ul",{className:"nano-card-list search-history"},e)},_onViewAll:function(e){this.tracking("panel_click",e.currentTarget);var t=e.currentTarget.getAttribute("data-query");Events.trigger(Events.menu.closeAllPanels),loadBox("/search/"+encodeURIComponent(t))},_isHistoryEmpty:function(){return!(this.state.history&&this.state.history.length)}});t.exports=p},{"../../../_mixins/tracking":46,"../../../common/list_items/Album":152,"../../../common/list_items/Artist":154,"../../../common/list_items/Playlist":157,"../../../common/list_items/Show":159,"../../../common/list_items/Track":160,react:"react"}],159:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/_mixins/tracking"),r=e("@deezer/components/common/Thumbnail"),i=e("@deezer/components/common/Favorite"),o=s.createClass({displayName:"Show",propTypes:{data:s.PropTypes.object,display_favorite:s.PropTypes.bool,display_add:s.PropTypes.bool,context:s.PropTypes.string,index:s.PropTypes.number,onClick:s.PropTypes.func},contextTypes:{panel_name:s.PropTypes.string},mixins:[n],getDefaultProps:function(){return{display_favorite:!0,display_add:!1,context:"",index:null}},shouldComponentUpdate:function(e){return e.data.SHOW_ID!==this.props.data.SHOW_ID},getTrackingParams:function(){return{type:"show",id:this.props.data.SHOW_ID}},render:function(){return s.createElement("li",{key:"show"+this.props.data.SHOW_ID,className:"nano-card-item",onClick:this._onClick,"data-index":this.props.index},s.createElement("div",{className:"nano-card-picture"},s.createElement(r,{type:"show",height:56,width:56,play:"on",overlay:"off",preview:"off",playLink:!0,context:this.props.context,data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),this._renderFavorite()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/show/"+this.props.data.SHOW_ID,"data-instance":"show_name"},this.props.data.SHOW_NAME))))},_renderFavorite:function(){return this.props.display_favorite?s.createElement(i,{type:"show",id:this.props.data.SHOW_ID,context:this.context.panel_name}):void 0},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),"function"==typeof this.props.onClick&&this.props.onClick(e,this.props.data,this.props.index);var t=dom.dataset(e.target,"instance");"undefined"!=typeof t&&dom.dataset(e.currentTarget,"instance",t);var a=e.target.getAttribute("href");a&&loadBox(a)},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,id:this.props.data.SHOW_ID,type:"show",data:this.props.data,position:"right",has_header:!1,context:this.context.panel_name,listen_context:{TYPE:this.props.context,ID:this.props.data.SHOW_ID}})}});t.exports=o},{"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,react:"react"}],168:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("../../../core/i18n"),i=r.gettext,o=r.ngettext,l=e("@deezer/components/common/list_items/Episode"),c=e("@deezer/components/common/list_items/Track"),p=e("@deezer/components/common/list_items/ExternalTrack"),d=e("@deezer/components/_mixins/tracking"),u=e("@deezer/components/_mixins/panel"),m=e("@deezer/components/_mixins/panelScroll"),h=s.createClass({displayName:"QueueList",mixins:[u,m,d],panel_name:"queuelist",scrollbar:{ref:"nano",shouldUpdate:function(e){return this.state.list.length!==e.list.length}},getInitialState:function(){return{list:dzPlayer.getTrackList(),index:dzPlayer.getTrackListIndex(),duration:dzPlayer.getTrackListDuration(),selected:0,nb_display:50}},componentDidMount:function(){Events.subscribe(Events.player.tracklist_changed,function(){this._deselectAllTracks(),this.setState({list:dzPlayer.getTrackList(),duration:dzPlayer.getTrackListDuration(),index:dzPlayer.getTrackListIndex(),nb_display:50})}.bind(this),"panel_queue"),Events.subscribe(Events.player.displayCurrentSong,function(){this.setState({index:dzPlayer.getTrackListIndex()})}.bind(this),"panel_queue"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){n(this.refs.nano_content).scrollTop(this._getScrollPosition())}.bind(this),"panel_queue")},componentWillUnmount:function(){Events.unsubscribeAll("panel_queue")},shouldComponentUpdate:function(e,t){return e.selected!==this.props.selected||t.index!==this.state.index||t.duration!==this.state.duration||t.selected!==this.state.selected||t.nb_display!==this.state.nb_display||t.list.length!==this.state.list.length},render:function(){return this.renderPanel(s.createElement("div",{className:"panel-qlist"},s.createElement("div",{className:"panel-header"},this._renderTitle(),this._renderActionBar()),this.renderScrollbar({"panel-body":!0},s.createElement("ul",{className:"nano-card-list",ref:"list"},this._renderTrackList()))))},_renderTitle:function(){var e=this.state.selected,t=this.state.list.length,a=o("<span>%s</span> titre","<span>%s</span> titres",{count:t,sprintf:[breakUpThousands(t)]}),n=i("À l'écoute");return dzPlayer.getMediaType()!==dzPlayer.MEDIA_TYPE_LIVE_STREAM&&(dzPlayer.isRadio()?(a="",n=i(dzPlayer.helper.isPlayingUserFlow()?"Derniers titres écoutés sur Flow":"Derniers titres écoutés dans le mix")):0===e?a+=" "+String.fromCharCode(183)+" "+formatDuration(this.state.duration,!0):a=o("<span>%s</span> titre sélectionné","<span>%s</span> titres sélectionnés",{count:e,sprintf:[breakUpThousands(e)]})),s.createElement("div",null,s.createElement("h1",{className:"heading-2 ellipsis"},n),s.createElement("h2",{className:"heading-3-sub ellipsis",dangerouslySetInnerHTML:{__html:a}}))},_renderActionBar:function(){return 0===this.state.selected?!1:s.createElement("div",{className:"action"},dzPlayer.getMediaType()!==dzPlayer.MEDIA_TYPE_TALK?s.createElement("button",{className:"btn btn-default btn-mini",type:"button",onClick:this._onAdd,"data-type":"edit_add"},s.createElement("span",{className:"icon icon-add"})):"",this.state.list.length>1?s.createElement("button",{className:"btn btn-default btn-mini",type:"button",onClick:this._onRemove,"data-type":"edit_delete"},s.createElement("span",{className:"icon icon-trash"})):"")},_renderTrackList:function(){var e=[],t=dzPlayer.isRadio(),a=dzPlayer.helper.isPlayingFlow()?"flow":null,n=dzPlayer.getIndexSong(),r=this.state.list.slice(0,this.state.nb_display);return r.forEach(function(i,o){var d=!t||o===n;dzPlayer.getMediaType(i)===dzPlayer.MEDIA_TYPE_SONG?e.push(s.createElement(c,{ref:"item_"+o,onSelect:this._onSelect,key:"track_"+i.SNG_ID+"_"+o,data:i,index:o,play_data:r,play_index:n,is_radio:t,show_play:d,display_drag:!1,display_add:!0,selectable:!t,context:"queue_list",share_context:a})):dzPlayer.getMediaType(i)===dzPlayer.MEDIA_TYPE_TALK?e.push(s.createElement(l,{ref:"item_"+o,onSelect:this._onSelect,key:"episode_"+i.EPISODE_ID+"_"+o,data:i,index:o,play_data:r,play_index:n,is_radio:t,show_play:d,selectable:!t,context:"queue_list",share_context:a})):e.push(s.createElement(p,{ref:"item_"+o,key:"external_"+i.MD5_ORIGIN+"_"+o,data:i,index:o}))}.bind(this)),e},_display_more_enabled:!0,_displayMore:function(){return this._display_more_enabled===!1||this.state.nb_display>this.state.list.length?!1:(this._display_more_enabled=!1,this.setState({nb_display:this.state.nb_display+50},function(){this._display_more_enabled=!0}),!0)},_getScrollPosition:function(){var e=this.refs.nano_content,t=this.refs.list;if(t.offsetHeight<e.offsetHeight)return 0;var a=t.offsetHeight/this.state.list.length,s=a*this.state.index;return this.state.index>0&&(s+=15),s},_getSelectedTracks:function(e){e=e||"data";for(var t=[],a=Math.min(this.state.nb_display,this.state.list.length),s=0;a>s;s++)if(this.refs["item_"+s].state.selected){var n=0;n="id"===e?this.refs["item_"+s].props.data.SNG_ID:"index"===e?s:this.refs["item_"+s].props.data,t.push(n)}return t},_deselectAllTracks:function(){for(var e=Math.min(this.state.nb_display,this.state.list.length),t=0;e>t;t++)this.refs["item_"+t].state.selected&&this.refs["item_"+t].deselect();this.setState({selected:0})},_onAdd:function(e){var t=this._getSelectedTracks("id");Events.trigger(Events.menu.contextMenuOpen,{target:n(e.currentTarget),type:"track",id:t,context:this.panel_name,data:{SONG:1===t.length?this._getSelectedTracks()[0]:{},INDEX:1===t.length?this._getSelectedTracks("index")[0]:0},position:"bottom"}),this.tracking("panel_click",e.currentTarget)},_onRemove:function(e){for(var t=Math.min(this.state.nb_display,this.state.list.length),a=t-1;a>=0;a--)this.refs["item_"+a].state.selected&&dzPlayer.removeTracks(a);this.setState({selected:0}),this.tracking("panel_click",e.currentTarget)},_onSelect:function(){this.setState({selected:this._getSelectedTracks().length})}});t.exports=h},{"../../../core/i18n":255,"@deezer/components/_mixins/panel":41,"@deezer/components/_mixins/panelScroll":42,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/list_items/Episode":155,"@deezer/components/common/list_items/ExternalTrack":156,"@deezer/components/common/list_items/Track":160,jquery:"jquery",react:"react"}],156:[function(e,t,a){"use strict";var s=e("react"),n=e("../../_mixins/tracking"),r=s.createClass({displayName:"ExternalTrack",propTypes:{data:s.PropTypes.object.isRequired,index:s.PropTypes.number},mixins:[n],getDefaultProps:function(){return{index:0}},getInitialState:function(){return{selected:!1}},shouldComponentUpdate:function(e,t){return t.selected!==this.state.selected||e.data.MD5_ORIGIN!==this.props.data.MD5_ORIGIN},getTrackingParams:function(){return{type:dzPlayer.getMediaType(),id:this.props.data.MD5_ORIGIN,index:this.props.index}},deselect:function(){},render:function(){return s.createElement("li",{key:"track"+this.props.data.MD5_ORIGIN,className:"nano-card-item",onClick:this._onClick},s.createElement("div",{className:"nano-card-picture"},s.createElement("img",{src:this.props.data.PICTURE_URL,alt:this.props.data.SNG_TITLE,height:"56",width:"56"})),s.createElement("div",{className:"nano-card-options"}),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},this.props.data.SNG_TITLE),s.createElement("div",{className:"heading-4-sub ellipsis"},this.props.data.ART_NAME)))},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),dzPlayer.playTrackAtIndex(this.props.index)}});t.exports=r},{"../../_mixins/tracking":46,react:"react"}],155:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("@deezer/components/_mixins/tracking"),i=e("@deezer/components/common/Thumbnail"),o=e("@deezer/components/common/Favorite"),l=s.createClass({displayName:"Episode",propTypes:{display_favorite:s.PropTypes.bool,display_add:s.PropTypes.bool,display_drag:s.PropTypes.bool,data:s.PropTypes.object,index:s.PropTypes.number,selectable:s.PropTypes.bool,context:s.PropTypes.string,share_context:s.PropTypes.string,is_radio:s.PropTypes.bool,show_play:s.PropTypes.bool,play_index:s.PropTypes.number,play_data:s.PropTypes.array,enabled:s.PropTypes.bool,onClick:s.PropTypes.func,onSelect:s.PropTypes.func},contextTypes:{panel_name:s.PropTypes.string},mixins:[r],getDefaultProps:function(){return{display_favorite:!1,display_drag:!1,display_add:!1,data:[],index:null,selectable:!1,context:"",is_radio:!1,show_play:!0,play_data:[],onSelect:function(){}}},getInitialState:function(){return{selected:!1}},shouldComponentUpdate:function(e,t){return t.selected!==this.state.selected||e.data.EPISODE_ID!==this.props.data.EPISODE_ID},getTrackingParams:function(){return{type:dzPlayer.MEDIA_TYPE_TALK,id:this.props.data.EPISODE_ID,index:this.props.index}},deselect:function(){this.setState({selected:!1})},render:function(){var e,t=n({"nano-card-item":!0,checked:this.state.selected,hide:this.props.is_radio&&this.props.index>this.props.play_index});return"queuelist"!==this.context.panel_name&&(e="/show/"+this.props.data.SHOW_ID),s.createElement("li",{key:"track"+this.props.data.EPISODE_ID,className:t,onClick:this._onClick},s.createElement("div",{className:"nano-card-picture"},s.createElement(i,{type:"episode",height:56,width:56,play:this.props.show_play?"on":"off",redirectUrl:e,playLink:"queuelist"!==this.context.panel_name,trackListIndex:"queuelist"===this.context.panel_name?this.props.index:null,trackList:this.props.play_data,context:this.props.context,overlay:"off",data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),this._renderFavorite(),this._renderDrag()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/show/"+this.props.data.SHOW_ID,"data-instance":"track_name"},this.props.data.EPISODE_TITLE)),s.createElement("div",{className:"heading-4-sub ellipsis"},s.createElement("a",{href:"/show/"+this.props.data.SHOW_ID,"data-instance":"artist_name"},this.props.data.SHOW_NAME))))},_renderFavorite:function(){return this.props.display_favorite?s.createElement(o,{type:"show",id:this.props.data.EPISODE_ID,context:this.context.panel_name}):void 0},_renderDrag:function(){return this.props.display_drag?s.createElement("span",{className:"draggable"}):void 0},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{has_header:!1,target:e.currentTarget,id:this.props.data.EPISODE_ID,type:"talk",context:this.context.panel_name,listen_context:{TYPE:this.props.context,ID:this.props.data.EPISODE_ID},data:{EPISODE:this.props.data,INDEX:this.props.index},share_context:this.props.share_context,position:"right"})},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),"function"==typeof this.props.onClick&&this.props.onClick(e,this.props.data,this.props.index);var t=dom.dataset(e.target,"instance");if(null!==t&&dom.dataset(e.currentTarget,"instance",t),this.props.selectable&&"DIV"===e.target.tagName)return void this.setState({selected:!this.state.selected},function(){this.props.onSelect()}.bind(this));var a=e.target.getAttribute("href");a&&loadBox(a)}});t.exports=l},{"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],167:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("../../../core/i18n"),i=r.gettext,o=r.ngettext,l=e("../../../core/modal"),c=e("../../common/Selectbox"),p=e("../../common/list_items/Playlist"),d=e("../../_mixins/tracking"),u=e("../../_mixins/sort"),m=e("../../_mixins/panel"),h=e("../../_mixins/panelScroll"),_=s.createClass({displayName:"Playlists",mixins:[m,u,h,d],panel_name:"playlists",scrollbar:{ref:"nano",shouldUpdate:function(e){return this.state.list.length!==e.list.length}},getInitialState:function(){return{list:this._getPlaylistList(),playlist_on_top:[],create_playlist:!1,sort_type:USER.SETTING.site.sort_panel_playlist||"PLAYLIST_TITLE",filter:"",nb_display:50}},componentDidMount:function(){Events.subscribe(Events.user.addFavorite,function(e,t){"playlist"===t.type&&this._updatePlaylists()}.bind(this),"panel_playlist"),Events.subscribe(Events.user.deleteFavorite,function(e,t){"playlist"===t.type&&this._updatePlaylists()}.bind(this),"panel_playlist"),Events.subscribe(Events.playlist.created,this._updatePlaylists,"panel_playlist"),Events.subscribe(Events.playlist.removed,this._updatePlaylists,"panel_playlist"),Events.subscribe(Events.playlist.updated,this._updatePlaylists,"panel_playlist"),Events.subscribe(Events.playlist.addSong,this._updatePlaylists,"panel_playlist"),Events.subscribe(Events.playlist.removeSong,this._updatePlaylists,"panel_playlist"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){this.setState({playlist_on_top:[],filter:""})}.bind(this))},componentWillUnmount:function(){Events.unsubscribeAll("panel_playlist")},render:function(){return this._refreshCurrentList(),this.renderPanel(s.createElement("div",{className:"panel-playlists"},s.createElement("div",{className:"panel-header"},this._renderTitle(),this.state.list.length?this._renderActions():null),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},_current_list:[],_display_more_enabled:!0,_renderTitle:function(){var e=this.state.list.length;return 0===e?s.createElement("h1",{className:"panel-heading heading-2"},s.createElement("span",{className:"color-primary"},breakUpThousands(e))," "+o("playlist","playlists",{count:e})):s.createElement("h1",{className:"panel-heading heading-2"},s.createElement("a",{href:"/profile/"+USER.USER_ID+"/playlists",className:"evt-click"},s.createElement("span",{className:"color-primary"},breakUpThousands(e))," "+o("playlist","playlists",{count:e}),s.createElement("span",{className:"icon icon-arrow-right"})))},_renderActions:function(){return s.createElement("div",{className:"action form-inline"},s.createElement("div",{className:"form-group"},s.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:i("Filtrer"),value:this.state.filter})),this.state.list.length>0?s.createElement("div",{className:"form-group"},s.createElement(c,{type:"playlist",onChange:this._onSortTypeChange})):"")},_renderContent:function(){return s.createElement("ul",{key:"playlist-list",className:"nano-card-list"},s.createElement("li",{className:"nano-card-item nano-card-plus",onClick:this._onOpenPlaylistAssistant,"data-type":"create_playlist"},s.createElement("div",{className:"nano-card-picture"},s.createElement("span",{className:"icon icon-16 icon-add"})),s.createElement("div",{className:"nano-card-infos"},s.createElement("span",{className:"heading-4"},i("Créer une playlist")))),this._current_list.map(function(e){var t=n.extend({},e);return s.createElement(p,{data:t,key:"playlist_"+e.PLAYLIST_ID,display_favorite:!1,display_add:!0,context:"menu_panel_playlist"})}))},_updatePlaylists:function(){this.setState({list:this._getPlaylistList()})},_onSortTypeChange:function(e){this.setState({sort_type:e,playlist_on_top:[]})},_onOpenPlaylistAssistant:function(e){this.tracking("panel_click",e.currentTarget),l.open("/lightbox/playlist_assistant?type=create"),Events.trigger(Events.menu.closeAllPanels)},_onFilterChange:function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},_refreshCurrentList:function(){var e=[],t=this.sort(this.state.list,this.state.sort_type),a=this.state.filter.toLowerCase().trim();""!==a&&(t=t.filter(function(e){return e.TITLE.toLowerCase().indexOf(a)>-1||"undefined"!=typeof e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(a)>-1}));for(var s=0;s<this.state.playlist_on_top.length;s++)for(var n=0;n<t.length;n++)if(Number(t[n].PLAYLIST_ID)===Number(this.state.playlist_on_top[s])){e.push(t[n]),t.splice(n,1);break}t=e.concat(t),t=t.slice(0,this.state.nb_display),this._current_list=t},_displayMore:function(){return this._display_more_enabled===!1||this.state.nb_display>this._current_list.length?!1:(this._display_more_enabled=!1,this.setState({nb_display:this.state.nb_display+50},function(){this._display_more_enabled=!0}),!0)},_getPlaylistList:function(){return n.merge(n.merge([],userData.data.PLAYLISTS.data),userData.data.FAVORITES_PLAYLISTS.data)}});t.exports=_},{"../../../core/i18n":255,"../../../core/modal":257,"../../_mixins/panel":41,"../../_mixins/panelScroll":42,"../../_mixins/sort":44,"../../_mixins/tracking":46,"../../common/Selectbox":133,"../../common/list_items/Playlist":157,jquery:"jquery",react:"react"}],166:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("classnames"),i=e("jquery");e("visibly.js");var o=e("../../../core/i18n"),l=o.gettext,c=e("../../../core/Blurred"),p=e("./_elements/lyrics/Spinner"),d=e("./_elements/lyrics/Placeholder"),u=e("./_elements/lyrics/Header"),m=e("./_elements/lyrics/List"),h=e("../../_mixins/tracking"),_=e("../../_mixins/panel"),y=e("../../_mixins/panelScroll"),g=s.createClass({displayName:"Lyrics",propTypes:{hasAds:s.PropTypes.bool,unloggedClipLength:s.PropTypes.number,isAuthUser:s.PropTypes.bool,autoScrollEasing:s.PropTypes.string,autoScrollDuration:s.PropTypes.number,scrollWaitTimeout:s.PropTypes.number},mixins:[_,y,h],panel_name:"lyrics",scrollbar:{ref:"nano",disableScrollTopOnUpdate:!0,shouldUpdate:function(e){return this.state.lyrics.length!==e.lyrics.length}},getTrackingParams:function(){return{action:{type:"display"},container:"panel",sng:this.state.track.SNG_ID,type:dzPlayer.hasSyncLyrics()?"synchro":"full_text"}},getInitialState:function(){var e=this._getStateFromStore();return e.position=dzPlayer.getPosition(),e.isActivePanel=!0,e.firstOpen=!0,e},getDefaultProps:function(){return{tolerance:0,autoScrollDuration:500,scrollWaitTimeout:900,unloggedClipLength:30,autoScrollEasing:"swing",isAuthUser:0!==window.USER.USER_ID,hasAds:USER.OPTIONS.ads_display}},componentDidMount:function(){Events.subscribe(Events.player.displayCurrentSong,this._onTrackChange,"lyrics_panel"),Events.subscribe(Events.player.changePlayerType,this._onPlayerTypeChange,"lyrics_panel"),Events.subscribe(Events.player.position,this._onPositionChange,"lyrics_panel"),Events.subscribe(Events.player.seek,this._onPlayerSeek,"lyrics_panel"),Events.subscribe(Events.lyrics.load,this._onLyricsLoad,"lyrics_panel"),Events.subscribe(Events.lyrics.seek,this._onLyricsSeek,"lyrics_panel"),this.subscribeOnOpen(function(){this.state.track.SNG_ID===dzPlayer.getCurrentSong("SNG_ID")&&this._scrollToActiveLyric(this.state.activeLyricIndex,!0),"undefined"!=typeof advertising&&advertising.call("lyrics",{element_id:this.state.track.SNG_ID})}.bind(this)),i(this.refs.nano_content).on("scroll",this._onPanelScroll),this._setCoverBackground(this.state.track.ALB_PICTURE),dzPlayer.control.loadLyrics()},componentWillReceiveProps:function(e){this.setState({isActivePanel:"lyrics"===e.selected&&e.displayed===!0})},componentWillUnmount:function(){Events.unsubscribeAll("lyrics_panel"),i(this.refs.nano_content).off("scroll",this._onPanelScroll)},componentWillUpdate:function(e,t){t.isActivePanel&&(this._scrollTopWhenActive?(this._scrollTopWhenActive=!1,setTimeout(this._scrollToTop,0)):t.autoScroll&&t.hasLyrics&&this._scrollToActiveLyric(t.activeLyricIndex))},shouldComponentUpdate:function(){return this.state.isActivePanel===!0},render:function(){var e,t=r({"panel-lyrics":!0,"has-lyrics":this.state.hasLyrics,"has-synchro":this.state.synchro}),a=r({"lyrics-container":!0,"lyrics-container-active":this.state.ready});this.state.synchro&&!this.state.autoScroll&&-1!==this.state.activeLyricIndex&&(e=this.state.lyrics[this.state.activeLyricIndex]);var n,i=this.state.ready&&this.state.hasLyrics,o=i&&this.state.synchro?"marquee":null;return i&&this.state.synchro&&(n=this.state.autoScroll?"assertive":"polite"),this.renderPanel(s.createElement("div",{className:t,ref:"panel_lyrics",itemScope:!0,itemType:"http://data-vocabulary.org/MusicRecording"},s.createElement("div",{className:"panel-lyrics-overlay"}),s.createElement(u,{track:this.state.track,lyric:e}),this.renderScrollbar({"panel-body lyrics-panel-body":!0},s.createElement("div",{className:a,role:o,"aria-live":n},s.createElement(d,{show:this.state.ready&&!this.state.hasLyrics,track:this.state.track}),s.createElement(p,{show:i,max:this.state.timeToFirstLyric,now:this.state.position}),s.createElement(m,{ref:"lyriclist",synchro:this.state.synchro,lyrics:this.state.lyrics,activeIndex:this.state.activeLyricIndex}),this.state.hasLyrics?s.createElement("aside",{className:"legal"},l("Licence et autorisation données par LyricFind"),s.createElement("br",null),"© ",this.state.metadata.copyrights,s.createElement("br",null),this.state.metadata.writers,s.createElement("br",null)):"")),this.props.hasAds?s.createElement("div",{className:"ads ads-bottom"},s.createElement("div",{id:"lyrics_ads_banner_bottom"})):"",s.createElement("div",{className:"panel-footer"},this.state.hasLyrics?s.createElement("a",{className:"evt-click btn btn-link",href:"/track/"+this.state.track.SNG_ID},s.createElement("span",{className:"label"},l("TOUTES LES PAROLES")),s.createElement("span",{className:"icon icon-after icon-arrow-right-long"})):"")))},_getStateFromStore:function(){var e=dzPlayer.hasLyrics();return{track:dzPlayer.getCurrentSong(),hasLyrics:e,lyrics:[],metadata:{},position:0,synchro:!1,autoScroll:!1,autoSeek:!1,timeToFirstLyric:-1,activeLyricIndex:-1,ready:!e,canSeek:dzPlayer.control.canSeek(),firstOpen:!1}},_onTrackChange:function(e,t){this._scrollTopWhenActive=!0,this.state.track.ALB_ID!==t.ALB_ID&&setTimeout(function(){this._setCoverBackground(t.ALB_PICTURE)}.bind(this),0),"undefined"!=typeof advertising&&this.state.isActivePanel&&!this.state.firstOpen&&advertising.call("lyrics",{element_id:this.state.track.SNG_ID}),this.setState(this._getStateFromStore(),dzPlayer.control.loadLyrics)},_onLyricsLoad:function(){var e,t=dzPlayer.hasSyncLyrics(),a=dzPlayer.getLyrics(),s=dzPlayer.getLyricsMetadata(),n={lyrics:a,metadata:s,hasLyrics:a&&0!==a.length,ready:!0,synchro:!1,autoScroll:!1,autoSeek:!1};if(this.tracking("lyrics"),t){e=[];for(var r=0,o=a.length;o>r;r++){var l=a[r];l&&l.line&&l.milliseconds&&(l.originalIndex=r,e.push(l))}e.length>0?i.extend(n,{lyricIndex:e,synchro:!0,autoScroll:!0,autoSeek:!0,timeToFirstLyric:parseInt(e[0].milliseconds,10)/1e3}):i.extend(n,{hasLyrics:!1,lyrics:[]})}setTimeout(function(){this.setState(n)}.bind(this),0)},_onPositionChange:function(e,t){if(!window.visibly.hidden()&&this.state.isActivePanel&&this.state.hasLyrics&&this.state.synchro){!this.props.isAuthUser&&this.state.canSeek&&(t+=this.props.unloggedClipLength);var a=this._findLyric(t);this.state.autoSeek?(-1===a&&-1!==this.state.activeLyricIndex&&(this._scrollTopWhenActive=!0),this.setState({position:t,activeLyricIndex:a})):this.setState({position:t,autoSeek:a===this.state.activeLyricIndex})}},_onLyricsSeek:function(e,t){var a,s,n,r=this.state.activeLyricIndex;if(!t.seek||this.state.canSeek){if("undefined"!=typeof t.index){if(t.index===this.state.activeLyricIndex&&dzPlayer.playing)return;r=t.index}if(t.seek){if(n=parseInt(t.milliseconds,10)/1e3,s=parseInt(this.state.track.DURATION,10),this.props.isAuthUser||(s=this.props.unloggedClipLength,n-=this.props.unloggedClipLength),a=n/s,a>1||!this.props.isAuthUser&&0>n)return;dzPlayer.control.seek(a)}else this._scrollToActiveLyric(r),dzPlayer.isPaused()&&dzPlayer.control.togglePause();this.setState({activeLyricIndex:r,autoSeek:!t.seek,autoScroll:!0})}},_onPlayerSeek:function(e,t){this.state.synchro&&!this.state.autoScroll&&this.setState({activeLyricIndex:this._findLyric(t),autoScroll:!0})},_onPanelScroll:function(){this.state.synchro&&!this._blockUserScroll&&this.setState({autoScroll:!1})},_onPlayerTypeChange:function(){this.state.isActivePanel&&"ads"===dzPlayer.getPlayerType()&&Events.trigger(Events.menu.togglePanel,"lyrics")},_scrollToActiveLyric:function(e,t){if(!this.state.autoScroll||t||this.state.activeLyricIndex!==e){var a=this.refs.lyriclist.getLyric(e);if(a){this._blockUserScroll=!0;var s=this.refs.nano_content,r=i(s).scrollTop(),o=s.offsetHeight||0,l=n.findDOMNode(a),c=i(l).position().top,p=this.props.autoScrollDuration,d=this.props.autoScrollEasing,u=l.getBoundingClientRect();(t||u.bottom<=0||u.bottom>o)&&(p=this.props.autoScrollDuration/3),i(s).animate({scrollTop:r+c-o/2},p,d,function(){setTimeout(function(){this._blockUserScroll=0!==i(s).queue("fx").length}.bind(this),this.props.scrollWaitTimeout)}.bind(this))}}},_scrollToTop:function(){this._blockUserScroll=!0,this.refs.nano_content.scrollTop=0,setTimeout(function(){this._blockUserScroll=!1}.bind(this),this.props.scrollWaitTimeout)},_setCoverBackground:function(e){var t=this.refs.panel_lyrics,a="%1/cover/%2/500x500-000000-80-0-0.jpg".replace("%1","http://cdn-images.deezer.com/images").replace("%2",e),s=window.attachEvent&&!window.addEventListener;s?t.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale");':new c(t).setUrl(a).setBlurStrength(3).render()},_findLyric:function(e){var t,a,s,n=0,r=this.state.lyricIndex.length,i=Math.round(1e3*e),o=1e3*this.state.timeToFirstLyric;if(o>i)return-1;var l=this.state.lyricIndex[r-1],c=parseInt(l.milliseconds,10);if(i>c)return this.state.lyricIndex[r-1].originalIndex;for(;n!==r&&(t=Math.floor((n+r)/2),a=parseInt(this.state.lyricIndex[t].milliseconds,10),a!==i);)i>a?n=t+1:r=t;return s=0===n?n:n-1,window.LYRICS_DEBUG,this.state.lyricIndex[s].originalIndex}});t.exports=g},{"../../../core/Blurred":248,"../../../core/i18n":255,"../../_mixins/panel":41,"../../_mixins/panelScroll":42,"../../_mixins/tracking":46,"./_elements/lyrics/Header":174,"./_elements/lyrics/List":175,"./_elements/lyrics/Placeholder":177,"./_elements/lyrics/Spinner":178,classnames:"classnames",jquery:"jquery",react:"react","react-dom":"react-dom","visibly.js":"visibly.js"}],178:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../../core/i18n"),i=r.ngettext,o=s.createClass({displayName:"Spinner",propTypes:{max:s.PropTypes.number,now:s.PropTypes.number,message:s.PropTypes.string,strokeDasharray:s.PropTypes.number,show:s.PropTypes.bool},getDefaultProps:function(){return{now:0,max:-1,strokeDasharray:300,show:!1}},getInitialState:function(){return this._getState()},componentWillReceiveProps:function(e){setTimeout(function(){this.setState(this._getState(e))}.bind(this),0)},shouldComponentUpdate:function(e,t){return-1===e.max||t.strokeDashoffset>=0&&0!==this.state.strokeDashoffset},render:function(){if(!this.props.show)return null;var e,t,a,r,o,l={strokeDashoffset:this.state.strokeDashoffset},c=n({"starter-svg":!0,"svg-animate":this.state.transition});return this.props.max>0&&(e=0,t=this.props.max,a=this.props.now<t?this.props.now:t,r=Math.floor(t-a),o=i("%s seconde","%s secondes",{sprintf:[r],count:r})),s.createElement("div",{className:"lyrics-starter"},s.createElement("div",{className:"starter-anim"},s.createElement("svg",{className:c,height:"100",width:"100",x:"0px",y:"0px"},s.createElement("g",{fill:"none",stroke:"rgba(255,255,255,0.3)"},s.createElement("circle",{cx:"50",cy:"50",r:"45"})),s.createElement("g",{className:"spinner",fill:"none",stroke:"#FFFFFF",role:"timer","aria-describedby":"starter-message",strokeDasharray:this.props.strokeDasharray,style:l,"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":a,"aria-valuetext":o},s.createElement("circle",{cx:"50",cy:"50",r:"45"}))),s.createElement("span",{className:"icon icon-32 icon-lyrics"})))},_getState:function(e){e=e||this.props;var t,a,s=e.max>=0?e.strokeDasharray:0,n=this.state?this.state.strokeDashoffset:null;return e.max>0&&e.now<=e.max&&(s=e.now>0?e.strokeDasharray/(e.max/e.now):0),a=e.strokeDasharray-s,t=!(0===a||a===e.strokeDasharray||null!==n&&a>=n),{strokeDashoffset:e.strokeDasharray-s,transition:t}}});t.exports=o},{"../../../../../core/i18n":255,classnames:"classnames",react:"react"}],177:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("react-addons-pure-render-mixin"),i=e("../../../../../core/i18n"),o=i.gettext,l=s.createClass({displayName:"Placeholder",propTypes:{placeholders:s.PropTypes.array,explanations:s.PropTypes.array,track:s.PropTypes.object.isRequired,show:s.PropTypes.bool},mixins:[r],getDefaultProps:function(){return{placeholders:[{title:"You Oughta Know",artist:"Alanis Morissette",quote:"It's not fair, to deny me of the cross-eyed bear that you gave to me"},{title:"Rock the Casbah",artist:"The Clash",quote:"Shareef don't like it. Rock the cat box, rock the cat box"},{title:"Sweet Dreams",artist:"Eurythmics",quote:"Sweet dreams are made of cheese"},{title:"Bad Moon Rising",artist:"Creedence Clearwater Revival",quote:"Don't go around tonight, it's bound to take your life, there's a bathroom on the right"},{title:"Smells Like Teen Spirit",artist:"Nirvana",quote:"Here we are now, in containers"},{title:"Message in a Bottle",artist:"The Police",quote:"Mon opinel a dû mal couper !"}],explanations:[o("OK... Nous n'avons pas les paroles de cette chanson."),o("Pas tout à fait... On donne tout pour trouver les paroles de cette chanson."),o("Presque... On se dépêche de vous trouver les paroles de cette chanson.")]}},getInitialState:function(){return this._getState(this.props.track,this.props.show)},componentWillReceiveProps:function(e){return this.setState(this._getState(e.track,e.show),function(){setTimeout(function(){this.setState({fadeIn:e.show})}.bind(this),0)}.bind(this))},render:function(){if(!this.props.show)return null;var e=this.props.placeholders[this.state.placeholderIndex],t=this.props.explanations[this.state.explanationIndex],a=this.state.placeholderIndex+1,r=o("(Mal) entendu dans %1$s <em>de %2$s</em>",{sprintf:[e.title,e.artist]}),i=n({"lyrics-placeholder":!0,"lyrics-placeholder-active":this.state.fadeIn});return s.createElement("div",{className:i,role:"alert"},s.createElement("p",{className:"picto-"+a},s.createElement("span",{className:"lyrics-placeholder-picto"})),s.createElement("p",{className:"quote"},s.createElement("span",{className:"lyrics-placeholder-quote"},e.quote)),s.createElement("p",{className:"lyrics-placeholder-track",dangerouslySetInnerHTML:{__html:r}}),s.createElement("p",{className:"lyrics-placeholder-message"},t))},_getState:function(e,t){if(!t)return{};var a=this.props.placeholders.length,s=this.state?this.state.placeholderIndex:null,n=this.state?this.state.explanationIndex:null,r="fr"===window.SETTING_LANG?a:a-1;return{placeholderIndex:this._getRandom(0,r,s),explanationIndex:this._getRandom(0,this.props.explanations.length,n),fadeIn:!1}},_getRandom:function(e,t,a){if(1>=t)return 0;var s=Math.floor(Math.random()*(t-e))+e;return"undefined"!=typeof a&&s===a?s===t-1?--s:++s:s}});t.exports=l},{"../../../../../core/i18n":255,classnames:"classnames",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],175:[function(e,t,a){"use strict";var s=e("react"),n=e("./Lyric"),r=s.createClass({displayName:"List",propTypes:{lyrics:s.PropTypes.array,activeIndex:s.PropTypes.number,synchro:s.PropTypes.bool},shouldComponentUpdate:function(e){return e.activeIndex!==this.props.activeIndex||e.synchro!==this.props.synchro||e.lyrics.length!==this.props.lyrics.length},getLyric:function(e){return this.refs["lyric_"+e]},render:function(){var e,t,a,r,i=this.props.lyrics||[];return s.createElement("ol",{className:"lyrics-content",itemProp:"text"},i.map(function(i,o){return e=o===this.props.activeIndex,t="lyric_"+o,a=i,this.props.synchro&&(a=i.line,r=i.milliseconds),s.createElement("li",{key:t},s.createElement(n,{ref:t,index:o,line:a,milliseconds:r,active:e}))}.bind(this)))}});t.exports=r},{"./Lyric":176,react:"react"}],174:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../../core/i18n"),i=r.gettext,o=e("./Lyric"),l=s.createClass({displayName:"Header",propTypes:{track:s.PropTypes.object.isRequired,lyric:s.PropTypes.object},shouldComponentUpdate:function(e){return e.track.SNG_ID!==this.props.track.SNG_ID||void 0!==e.lyric&&void 0===this.props.lyric||void 0===e.lyric&&void 0!==this.props.lyric||void 0!==e.lyric&&void 0!==this.props.lyric&&(e.lyric.milliseconds!==this.props.lyric.milliseconds||e.lyric.line!==this.props.lyric.line)},render:function(){var e="undefined"!=typeof this.props.lyric,t="%1/cover/%2/65x65-000000-80-0-0.jpg".replace("%1",window.SETTING_DOMAIN_IMG).replace("%2",this.props.track.ALB_PICTURE),a=n({"lyrics-track-infos":!0,hide:e}),r=n({"lyrics-active":!0,hide:!e});return s.createElement("div",{className:"panel-header"},s.createElement("div",{className:"panel-header-container clearfix"},s.createElement("a",{href:"/album/"+this.props.track.ALB_ID,className:"evt-click"},s.createElement("figure",{className:"lyrics-thumbnail"},s.createElement("img",{width:"65",height:"65",src:t,alt:this.props.track.ALB_TITLE,title:this.props.track.ALB_TITLE}))),s.createElement("div",{className:"lyrics-infos"},s.createElement("p",{className:"sticker sticker-small sticker-flow"},i("PAROLES")),s.createElement("div",{className:a,"aria-hidden":e},s.createElement("h2",{className:"heading-4 heading-inverse",itemProp:"name"},this.props.track.SNG_TITLE),s.createElement("h3",{className:"heading-4-sub heading-inverse"},i("par")+" "," ",s.createElement("a",{href:"/artist/"+this.props.track.ART_ID,className:"lyrics-artist-link evt-click"},this.props.track.ART_NAME))),s.createElement("p",{className:r,"aria-hidden":!e},e?s.createElement(o,{line:this.props.lyric.line,milliseconds:this.props.lyric.milliseconds,active:!0,seek:!1}):""))),s.createElement("button",{className:"btn btn-link panel-close",type:"button",onClick:this._closePanels},s.createElement("span",{className:"icon icon-cancel"})))},_closePanels:function(){Events.trigger(Events.menu.closeAllPanels)}});t.exports=l},{"../../../../../core/i18n":255,"./Lyric":176,classnames:"classnames",react:"react"}],176:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("react-addons-pure-render-mixin"),i=s.createClass({displayName:"Lyric",propTypes:{line:s.PropTypes.string.isRequired,milliseconds:s.PropTypes.string,index:s.PropTypes.number,active:s.PropTypes.bool,seek:s.PropTypes.bool},mixins:[r],getDefaultProps:function(){return{seek:!0}},render:function(){var e="undefined"!=typeof this.props.milliseconds,t=this.props.line?this.props.line.trim():"",a=n({"lyrics-line":!0,"lyrics-line-empty":!t,"lyrics-line-active":e&&this.props.active});return e?s.createElement("a",{className:a,onClick:this._onClick},t):s.createElement("p",{className:a},t)},_onClick:function(){Events.trigger(Events.lyrics.seek,{milliseconds:this.props.milliseconds,index:this.props.index,seek:this.props.seek})}});t.exports=i},{classnames:"classnames",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],165:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=n.ngettext,o=e("@deezer/components/common/Thumbnail"),l=e("@deezer/components/common/Favorite"),c=e("@deezer/components/common/list_items/App"),p=e("@deezer/components/_mixins/tracking"),d=e("@deezer/components/_mixins/sort"),u=e("@deezer/components/_mixins/panel"),m=e("@deezer/components/_mixins/panelScroll"),h=s.createClass({displayName:"Apps",mixins:[u,d,m,p],panel_name:"apps",scrollbar:{ref:"nano",shouldUpdate:function(e){return this.state.list.length!==e.list.length}},getInitialState:function(){return{list:userData.data.FAVORITES_APPLICATIONS?userData.data.FAVORITES_APPLICATIONS.data.slice(0):[],suggest:userData.data.DEFAULT_APPLICATIONS?userData.data.DEFAULT_APPLICATIONS.data.slice(0):[]}},componentDidMount:function(){Events.subscribe(Events.user.addFavorite,function(e,t){"application"===t.type&&this.setState({list:userData.data.FAVORITES_APPLICATIONS.data.slice(0)})}.bind(this),"panel_application"),Events.subscribe(Events.user.deleteFavorite,function(e,t){"application"===t.type&&this.setState({list:userData.data.FAVORITES_APPLICATIONS.data.slice(0)})}.bind(this),"panel_application")},componentWillUnmount:function(){Events.unsubscribeAll("panel_application")},shouldComponentUpdate:function(e,t){return e.selected!==this.props.selected||t.suggest!==this.state.suggest||t.list.length!==this.state.list.length},render:function(){var e=this.sort(this.state.list,"APP_NAME");return this.renderPanel(s.createElement("div",{className:"panel-apps"},s.createElement("div",{className:"panel-header"},s.createElement("h1",{className:"panel-heading heading-2"},s.createElement("span",{className:"color-primary"},breakUpThousands(e.length))," "+i("application","applications",{count:e.length}))),this.renderScrollbar({"panel-body":!0},[this._renderSuggest(this.state.suggest),this._renderContent(e)])))},_onAppClick:function(e){e.preventDefault(),e.stopPropagation(),loadBox(dom.dataset(e.currentTarget,"url")),this.tracking("panel_click",e.currentTarget)},_onDiscoverClick:function(e){e.preventDefault(),e.stopPropagation(),loadBox(e.currentTarget.getAttribute("href")),this.tracking("panel_click",e.currentTarget)},_getSuggestUrl:function(){var e=this.state.suggest[0],t=""!==e.INAPP_ALIAS?e.INAPP_ALIAS:e.APP_ID;return"app/"+t},_renderContent:function(e){return e=e||[],s.createElement("div",{className:"nano-card-list",key:"apps-list"},s.createElement("li",{className:"nano-card-item nano-card-plus"},s.createElement("a",{key:"discover_link",href:"/appstudio","data-type":"all_apps",onClick:this._onDiscoverClick},s.createElement("div",{className:"nano-card-picture"},s.createElement("span",{className:"icon icon-16 icon-add"})),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},r("Découvrir nos apps")),s.createElement("div",{className:"heading-4-sub ellipsis"},r("100 % musique & jeux !"))))),e.map(function(e){var t=$.extend({},e);return s.createElement(c,{data:t,key:"app_"+e.APP_ID})}))},_renderSuggest:function(e){return 0===e.length?null:(e=e[0],s.createElement("div",{key:"suggest",className:"app-suggest",onClick:this._onAppClick,"data-type":"suggested_apps","data-url":this._getSuggestUrl(),"data-id":e.APP_ID},s.createElement("h2",{className:"panel-heading-sub heading-4"},r("Deezer vous recommande :")),s.createElement(o,{type:"app",overlay:"off",data:e,height:120,width:320}),s.createElement("ul",{className:"nano-card-list"},s.createElement("li",{className:"nano-card-item"},s.createElement("div",{className:"nano-card-options"},s.createElement(l,{type:"application",context:"appsuggest",id:e.APP_ID})),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/"+this._getSuggestUrl()},e.NAME)),s.createElement("div",{className:"heading-4-sub ellipsis"},s.createElement("a",{href:"/"+this._getSuggestUrl()},e.DESCRIPTION)))))))}});t.exports=h},{"../../../core/i18n":255,"@deezer/components/_mixins/panel":41,"@deezer/components/_mixins/panelScroll":42,"@deezer/components/_mixins/sort":44,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/list_items/App":153,react:"react"}],153:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=e("../../../core/favorite"),o=e("@deezer/components/_mixins/tracking"),l=e("@deezer/components/common/Thumbnail"),c=s.createClass({displayName:"App",propTypes:{data:s.PropTypes.object,display_add:s.PropTypes.bool,display_remove:s.PropTypes.bool},mixins:[o],getDefaultProps:function(){return{display_add:!1,display_remove:!0}},shouldComponentUpdate:function(e){return e.data.APP_ID!==this.props.data.APP_ID},getTrackingParams:function(){return{type:"app",id:this.props.data.APP_ID}},render:function(){var e="/app/"+this._getAppAlias();return s.createElement("li",{className:"nano-card-item",onClick:this._onClick},s.createElement("div",{className:"nano-card-picture"},s.createElement(l,{type:"app",height:56,width:87,playLink:!0,redirectUrl:e,overlay:"off",data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),this._renderRemove()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/app/"+this._getAppAlias()},this.props.data.NAME))))},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_renderRemove:function(){return this.props.display_remove?s.createElement("a",{className:"option-hide",onClick:this._onRemove,"data-tooltip":"1","data-tooltip-gravity":"n","data-tooltip-delay":"400",title:r("Retirer de Ma musique")},s.createElement("span",{className:"icon icon-cancel"})):void 0},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget);var t=e.target.getAttribute("href");t&&loadBox(t)},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{has_header:!1,target:e.currentTarget,id:this.props.data.APP_ID,type:"app",data:this.props.data,position:"right"})},_onRemove:function(e){e.preventDefault(),e.stopPropagation(),i.remove({id:this.props.data.APP_ID,type:"application"})},_getAppAlias:function(){return""===this.props.data.INAPP_ALIAS?this.props.data.APP_ID:this.props.data.INAPP_ALIAS}});t.exports=c},{"../../../core/favorite":253,"../../../core/i18n":255,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Thumbnail":138,react:"react"}],164:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("../../../core/i18n"),i=r.gettext,o=r.ngettext,l=e("../../common/Selectbox"),c=e("../../common/list_items/Album"),p=e("../../_mixins/sort"),d=e("../../_mixins/panel"),u=e("../../_mixins/panelScroll"),m=s.createClass({displayName:"Albums",mixins:[d,p,u],panel_name:"albums",scrollbar:{ref:"nano",shouldUpdate:function(e){return this.state.list.length!==e.list.length}},getInitialState:function(){return{list:userData.data.FAVORITES_ALBUMS.data.slice(0),sort_type:USER.SETTING.site.sort_panel_album||"ART_NAME",nb_display:50,filter:""}},componentDidMount:function(){Events.subscribe(Events.user.addFavorite,function(e,t){"album"===t.type&&this.setState({list:userData.data.FAVORITES_ALBUMS.data.slice(0)})}.bind(this),"panel_album"),Events.subscribe(Events.user.deleteFavorite,function(e,t){"album"===t.type&&this.setState({list:userData.data.FAVORITES_ALBUMS.data.slice(0)})}.bind(this),"panel_album"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){this.setState({filter:""})}.bind(this))},componentWillUnmount:function(){Events.unsubscribeAll("panel_album")},shouldComponentUpdate:function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nb_display!==this.state.nb_display||t.sort_type!==this.state.sort_type||t.list.length!==this.state.list.length},render:function(){return this._refreshCurrentList(),this.renderPanel(s.createElement("div",{className:"panel-albums"},s.createElement("div",{className:"panel-header"},this._renderTitle(),this.state.list.length?this._renderActions():null),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},_current_list:[],_display_more_enabled:!0,_refreshCurrentList:function(){var e=this.sort(this.state.list,this.state.sort_type),t=this.state.filter.toLowerCase().trim();t&&(e=e.filter(function(e){return e.ALB_TITLE.toLowerCase().indexOf(t.toLowerCase())>-1||e.ART_NAME.toLowerCase().indexOf(t.toLowerCase())>-1})),e=e.slice(0,this.state.nb_display),this._current_list=e},_onSortTypeChange:function(e){this.setState({sort_type:e})},_onFilterChange:function(e){this.setState({filter:e.target.value},function(){this.refreshScrollbar()})},_renderTitle:function(){var e=this.state.list.length;return 0===e?s.createElement("h1",{className:"panel-heading heading-2"},s.createElement("span",{className:"color-primary"},breakUpThousands(e))," "+o("album","albums",{count:e})):s.createElement("h1",{className:"panel-heading heading-2"},s.createElement("a",{href:"/profile/"+USER.USER_ID+"/albums",className:"evt-click"},s.createElement("span",{className:"color-primary"},breakUpThousands(e))," "+o("album","albums",{count:e}),s.createElement("span",{className:"icon icon-arrow-right"})))},_renderActions:function(){return s.createElement("div",{className:"action form-inline",key:"actions"},s.createElement("div",{className:"form-group"},s.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:i("Filtrer"),value:this.state.filter})),this.state.list.length?s.createElement("div",{className:"form-group"},s.createElement(l,{type:"album",onChange:this._onSortTypeChange})):"")},_renderContent:function(){return s.createElement("ul",{key:"album-list",className:"nano-card-list"},this._current_list.map(function(e,t){var a=n.extend({},e);return s.createElement(c,{data:a,key:"album_"+e.ALB_ID+t,display_favorite:!1,display_add:!0,context:"menu_panel_album"})}))},_displayMore:function(){return this._display_more_enabled===!1||this.state.nb_display>this._current_list.length?!1:(this._display_more_enabled=!1,this.setState({nb_display:this.state.nb_display+50},function(){this._display_more_enabled=!0}),!0)}});t.exports=m},{"../../../core/i18n":255,"../../_mixins/panel":41,"../../_mixins/panelScroll":42,"../../_mixins/sort":44,"../../common/Selectbox":133,"../../common/list_items/Album":152,jquery:"jquery",react:"react"}],42:[function(e,t,a){"use strict";var s=e("jquery"),n=e("classnames"),r=e("react"),i=e("../../core/EventDispatcher"),o={componentWillMount:function(){this.scrollbar.shouldUpdate=this.scrollbar.shouldUpdate.bind(this)},componentDidMount:function(){this.hasScrollbar()&&this.refreshScrollbar()},componentWillUnmount:function(){s(this.refs[this.scrollbar.ref]).unbind("scrollend")},componentDidUpdate:function(e,t){this.scrollbarShouldUpdate(t)&&(this.isActive()?this.refreshScrollbar():this.onOpenEvent.subscribe(this.delayedRefreshScrollbar))},scrollbarShouldUpdate:function(e){return this.scrollbar.shouldUpdate(e)},hasScrollbar:function(){return"undefined"!=typeof this.scrollbar},scrollbar_endEvent:null,scrollbar_onEnd:function(e){null===this.scrollbar_endEvent&&(this.scrollbar_endEvent=new i,s(this.refs[this.scrollbar.ref]).bind("scrollend",function(){this.scrollbar_endEvent.trigger()}.bind(this))),this.scrollbar_endEvent.subscribe(e)},scrollbar_offEnd:function(e){return null===this.scrollbar_endEvent?!0:void this.scrollbar_endEvent.unSubscribe(e)},refreshScrollbar:function(){s(this.refs[this.scrollbar.ref]).nanoScroller()},delayedRefreshScrollbar:function(){this.refreshScrollbar(),this.onOpenEvent.unSubscribe(this.delayedRefreshScrollbar)},renderScrollbar:function(e,t){e[this.scrollbar.ref]=!0;var a=n(e);return r.createElement("div",{className:a,ref:this.scrollbar.ref},r.createElement("div",{className:"nano-content",ref:"nano_content"},r.createElement("div",{className:"nano-wrapper"},t)))}};t.exports=o},{"../../core/EventDispatcher":250,classnames:"classnames",jquery:"jquery",react:"react"}],41:[function(e,t,a){"use strict";var s=e("react"),n=e("../../core/EventDispatcher"),r={childContextTypes:{panel_name:s.PropTypes.string},getChildContext:function(){return{panel_name:this.panel_name}},onOpenEvent:null,openPanel:function(){this.onOpenEvent.trigger()},subscribeOnOpen:function(e){this.onOpenEvent.subscribe(e)},componentWillMount:function(){this.onOpenEvent=new n},componentDidMount:function(){Events.trigger(Events.menu.panel_mounted,this.panel_name)},isActive:function(){return this.props.selected===this.panel_name},renderPanel:function(e){return s.createElement("div",{className:"panel-content","data-panel":this.panel_name,style:this.isActive()?{display:"block"}:{},"aria-hidden":this.isActive()},e)}};t.exports=r},{"../../core/EventDispatcher":250,react:"react"}],161:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/keys")["default"],n=e("react"),r=e("classnames"),i=e("jquery"),o=e("../../core/i18n"),l=o.gettext,c=o.ngettext,p=e("../../core/modal"),d=e("../../core/genre"),u=e("../common/Badge"),m=e("../player/Player"),h=e("./SearchBar"),_=e("../_mixins/tracking"),y=n.createClass({displayName:"Menu",mixins:[_],getInitialState:function(){return{pages:this._getPagesState(),panels:this._getPanelsState(),player_ready:!1,unseenPlaylistCount:0,new_home_abtest:!gatekeeper.isAllowed("new_popular_musics")||gatekeeper.isAllowed("new_home_de")||gatekeeper.isAllowed("new_home_en")||"object"!=typeof USER.ABTEST.new_home?"default":USER.ABTEST.new_home.option,topGenre:0}},componentWillMount:function(){this._custo.active="object"==typeof CUSTO&&"object"==typeof CUSTO.logos&&"string"==typeof CUSTO.logos.logo_position&&""!==CUSTO.logos.header.trim(),this._custo.active&&(this._custo.position=CUSTO.logos.logo_position)},componentDidMount:function(){this._onPageChanged(www.getCurrentPath()),i(this.refs.navigation).nanoScroller(),Events.subscribe(Events.navigation.page_displayed,this._pageDisplayed),Events.subscribe(Events.menu.closeAllPanels,this._onClosePanels),Events.subscribe(Events.menu.openPanel,this._onOpenPanel),Events.subscribe(Events.menu.togglePanel,this._onTogglePanel),Events.subscribe(Events.playlist.seen,this.updateUnseenPlaylists),Events.ready(Events.player.playerReady,this._onPlayerReady),Events.ready(Events.user.userReady,this.updateUnseenPlaylists),Events.ready(Events.user.userReady,this.updateTopGenre)},shouldComponentUpdate:function(e,t){if(t.player_ready!==this.state.player_ready||t.unseenPlaylistCount!==this.state.unseenPlaylistCount)return!0;var a,n;return n=s(t.pages).some(function(e){return t.pages[e]!==this.state.pages[e]}.bind(this)),a=s(t.panels).some(function(e){return t.panels[e]!==this.state.panels[e]}.bind(this)),n||a},componentWillUnmount:function(){Events.unsubscribe(Events.navigation.page_displayed,this._pageDisplayed),Events.unsubscribe(Events.menu.closeAllPanels,this._onClosePanels),Events.unsubscribe(Events.menu.openPanel,this._onOpenPanel),Events.unsubscribe(Events.menu.togglePanel,this._onTogglePanel),Events.unsubscribe(Events.playlist.seen,this.updateUnseenPlaylists)},updateUnseenPlaylists:function(){window.setTimeout(function(){this.setState({unseenPlaylistCount:userData.getUnseenPlaylistCount()})}.bind(this),0)},updateTopGenre:function(){var e=userData.getTopGenre();if(0===e){var t=d.getList(d.FILTER_MUSIC);e=t.length>1?t[1].GENRE_ID:132}window.setTimeout(function(){this.setState({topGenre:e})}.bind(this),0)},isPanelOpen:function(e){return e&&this._panels[e]?this._panels[e].active:!1},render:function(){var e=r({"sidebar-container":!0,"has-partner":this._custo.active&&"right"===this._custo.position,"has-partner-large":this._custo.active&&"bottom"===this._custo.position});return n.createElement("div",{className:e},n.createElement("div",{className:"brand"},n.createElement("a",{className:"logo logo-deezer",onClick:USER.USER_ID>0?this._onMenuItemClick:!1,href:"/"}),this._custo.active?n.createElement("a",{className:"logo-partner",href:CUSTO.logos.logo_link,target:"_blank"},n.createElement("img",{src:CUSTO.logos.header})):""),n.createElement(h,{active:"active-panel"===this.state.panels.search}),n.createElement("div",{className:"navigation nano",id:"menu_navigation",ref:"navigation"},n.createElement("div",{className:"nano-content"},n.createElement("ul",{className:"nav nav-main"+(this._hasOpenPanel()?" panel-opened":"")},USER.USER_ID>0?n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.home,onClick:this._onMenuItemClick,href:"/","data-type":"home"},l("ACCUEIL"))):!1,USER.USER_ID>0&&!user.isKid()?n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.feed,onClick:this._onFeedLinkClick,href:"/feed","data-type":"feed"},l("À ÉCOUTER"))):!1,USER.USER_ID>0&&!user.isKid()&&"layoutd"!==this.state.new_home_abtest?n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.explore,onClick:this._onMenuItemClick,href:"/explore","data-type":"explore"},l("NOUVEAUTÉS"))):!1,USER.USER_ID>0&&!user.isKid()&&"layoutd"===this.state.new_home_abtest?n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.tops,onClick:this._onMenuItemClick,href:"/charts/playlist/genre/0","data-type":"tops"},l("TENDANCES"))):!1,USER.USER_ID>0&&!user.isKid()&&"layoutd"!==this.state.new_home_abtest?n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.charts,onClick:this._onMenuItemClick,href:"/charts","data-type":"tops"},l("TOP PLAYLISTS"))):!1,USER.USER_ID>0&&!user.isKid()&&"layoutd"===this.state.new_home_abtest?n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.genres,onClick:this._onMenuItemClick,href:"/charts/playlist/genre/"+this.state.topGenre,"data-type":"genres"},l("PARCOURIR"))):!1,user.isKid()?!1:n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.mixes,onClick:this._onMenuItemClick,href:"/mixes","data-type":"radio"},c("MIX","MIX",{count:2}))),USER.USER_ID>0&&!user.isKid()&&gatekeeper.isAllowed("talk")?n.createElement("li",null,n.createElement("a",{className:"nav-link ellipsis "+this.state.pages.talk,onClick:this._onMenuItemClick,href:"/shows","data-type":"talk"},l("INFOS & DIVERTISSEMENT"))):!1,USER.USER_ID>0&&!user.isKid()&&gatekeeper.isAllowed("audiobooks")?n.createElement("li",null,n.createElement("a",{className:"nav-link ellipsis "+this.state.pages.audiobooks,onClick:this._onMenuItemClick,href:"/app/audiobooks","data-type":"audiobooks"},l("LIVRES AUDIO"))):!1,USER.USER_ID>0&&gatekeeper.isAllowed("moods")?n.createElement("li",null,n.createElement("a",{className:"nav-link ellipsis "+this.state.pages.moods,onClick:this._onMenuItemClick,href:"/moods","data-type":"moods"},l("AMBIANCES"))):!1,gatekeeper.isAllowed("employee_feature")?n.createElement("li",null,n.createElement("a",{className:"nav-link ellipsis",onClick:this._onBugReportClick},"REPORT A BUG")):!1),this._custo.active&&""!==CUSTO.tab_header.name?n.createElement("div",null,n.createElement("div",{className:"nav-divider"}),n.createElement("ul",{className:"nav"},n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.pages.exclus,href:"/"+CUSTO.tab_header.url,onClick:this._onMenuItemClick},CUSTO.tab_header.name)))):"",n.createElement("div",{className:"nav-divider"}),USER.USER_ID>0?n.createElement("ul",{className:"nav"+(this._hasOpenPanel()?" panel-opened":"")},n.createElement("li",{className:"profile"},n.createElement("a",{className:"nav-link "+this.state.pages.profile,href:"/profile/"+USER.USER_ID,onClick:this._onMenuItemClick,"data-type":"profile"},n.createElement("span",{className:"profile-picture"},n.createElement("img",{id:"naboo_menu_collection_avatar",src:SETTING_DOMAIN_IMG+"/user/"+USER.USER_PICTURE+"/24x24.jpg"})),user.getMultiAccountOptions().ENABLED&&user.getMultiAccountOptions().PARENT?n.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},window.user.getDisplayName(!0)):n.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},l("Ma musique"))),n.createElement("span",{className:"icon icon-16 icon-settings profile-settings "+this.state.panels.settings,"data-type":"settings",onClick:this._onMenuItemClick})),USER.OPTIONS.can_subscribe?n.createElement("li",{className:"subscribe"},this._renderABTestPushMobile()):"",n.createElement("li",null,n.createElement("a",{href:"/profile/"+USER.USER_ID+"/loved",className:"nav-link "+this.state.pages.loved,onClick:this._onMenuItemClick,"data-type":"loved"},n.createElement("span",{className:"icon icon-16 icon-love"}),n.createElement("span",null,l("Coups de cœur")))),n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.panels.playlists,"data-type":"playlists",onClick:this._onMenuItemClick},n.createElement("span",{className:"icon icon-16 icon-playlist"}),n.createElement("span",null,l("Playlists"),n.createElement(u,{counter:this.state.unseenPlaylistCount})))),n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.panels.albums,"data-type":"albums",onClick:this._onMenuItemClick},n.createElement("span",{className:"icon icon-16 icon-album"}),n.createElement("span",null,l("Albums")))),USER.USER_ID>0&&gatekeeper.isAllowed("talk")?n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.panels.shows,"data-type":"shows",onClick:this._onMenuItemClick},n.createElement("span",{className:"icon icon-16 icon-podcast"}),n.createElement("span",null,l("Podcasts")))):"",n.createElement("li",null,n.createElement("a",{className:"nav-link "+this.state.panels.apps,"data-type":"apps",onClick:this._onMenuItemClick},n.createElement("span",{className:"icon icon-16 icon-app"}),n.createElement("span",null,l("Applications"))))):n.createElement("div",{className:"unlogged"},n.createElement("button",{className:"btn btn-primary btn-block evt-click","data-register":"1",type:"button"},n.createElement("span",{className:"label"},l("Inscription"))),n.createElement("button",{className:"btn btn-inverse btn-block evt-click","data-login":"1",type:"button"},n.createElement("span",{className:"label"},l("Connexion"))),n.createElement("div",{className:"divider"},n.createElement("span",{className:"or"},l("ou"))),n.createElement("a",{href:"/company",className:"btn btn-discover btn-block",type:"button",onClick:this._onMenuItemClick,target:"_blank","data-type":"discovery"},n.createElement("span",{className:"label"},l("Découvrir Deezer")),n.createElement("span",{className:"icon icon-arrow-link"}))))),this.state.player_ready?n.createElement(m,{ref:"player"}):"")},_renderABTestPushMobile:function(){var e="undefined"!=typeof USER.OPTIONS.upgrade?USER.OPTIONS.upgrade.offer.duration:0,t="undefined"!=typeof USER.ABTEST.abtest_senttomobile_oldreg?USER.ABTEST.abtest_senttomobile_oldreg.option:"default";return e>0&&"A"===t?n.createElement("button",{className:"btn btn-primary btn-block",type:"button","data-modal":"/lightbox/push_mobile?context=button_menu",onClick:this._onMenuItemClick},n.createElement("span",{className:"label"},c("%s JOUR OFFERT","%s JOURS OFFERTS",{count:e,sprintf:[e]}))):n.createElement("button",{href:"/offers",className:"btn btn-primary btn-block",type:"button",onClick:this._onMenuItemClick,target:"_blank","data-type":"offers_subscribe"},n.createElement("span",{className:"icon icon-add"}),n.createElement("span",{className:"label"},l("S'ABONNER")))},_onPlayerReady:function(){this.setState({player_ready:!0})},_onFeedLinkClick:function(e){e.preventDefault(),e.stopPropagation(),feed.flushCache(),this._onMenuItemClick(e)},_onMenuItemClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.getAttribute("href"),a=e.currentTarget.getAttribute("target"),s=dom.dataset(e.currentTarget,"type"),n=dom.dataset(e.currentTarget,"modal");return this.tracking("menu_click",e.currentTarget),null!==t?(Events.trigger(Events.menu.closeAllPanels),void("_blank"===a?window.open(t):loadBox(t))):"undefined"!=typeof n?void p.open(n):"undefined"!=typeof s?void Events.trigger(Events.menu.togglePanel,s):void 0},_onBugReportClick:function(e){e.preventDefault();var t=window.ATL_JQ_SHOW_DIALOG;"function"==typeof t&&t()},_onClosePanels:function(){for(var e in this._panels)this._panels.hasOwnProperty(e)&&(this._panels[e].active=!1);this.setState({panels:this._getPanelsState()}),this.refs.player&&this.refs.player.setState({queuelist_opened:!1,lyrics_opened:!1})},_onOpenPanel:function(e,t){for(var a in this._panels)this._panels.hasOwnProperty(a)&&(this._panels[a].active=t===a);this.setState({panels:this._getPanelsState()}),this.refs.player&&this.refs.player.setState({queuelist_opened:this._panels.queuelist.active,lyrics_opened:this._panels.lyrics.active})},_onTogglePanel:function(e,t){this.isPanelOpen(t)?Events.trigger(Events.menu.closeAllPanels):Events.trigger(Events.menu.openPanel,t)},_onPageChanged:function(e){var t;for(var a in this._pages)this._pages.hasOwnProperty(a)&&(t=!0,t=t&&this._pages[a].pattern.test(e),"undefined"!=typeof this._pages[a].pattern_not&&(t=t&&!this._pages[a].pattern_not.test(e)),this._pages[a].selected=t);this.setState({pages:this._getPagesState()})},_hasOpenPanel:function(){for(var e in this._panels)if(this._panels.hasOwnProperty(e)&&this._panels[e].active===!0)return!0;return!1},_pages:{home:{pattern:/^\/?$/i,selected:!1},feed:{pattern:/^\/feed?$/i,selected:!1},loved:{pattern:new RegExp("^/profile/"+USER.USER_ID+"/loved","i"),selected:!1},profile:{pattern:new RegExp("^/profile/"+USER.USER_ID+"[^0-9]*(/.*)?$","i"),pattern_not:new RegExp("^/profile/"+USER.USER_ID+"/loved","i"),selected:!1},explore:{pattern:/^\/explore/i,selected:!1},charts:{pattern:/^\/charts/i,selected:!1},tops:{pattern:/^\/charts\/[a-z]+((\/genre\/0)|$)/i,selected:!1},genres:{pattern:/^\/charts\/[a-z]+\/genre\/[1-9][0-9]*/i,selected:!1},mixes:{pattern:/^\/mixes/i,selected:!1},exclus:{pattern:/^\/exclus/i,selected:!1},pro:{pattern:/^\/pro\/?$/i,selected:!1},talk:{pattern:/^\/shows/i,selected:!1},audiobooks:{pattern:/^\/app\/audiobooks/i,selected:!1},moods:{pattern:/^\/(moods)/i,selected:!1}},_panels:{searchhistory:{active:!1},searchsuggest:{active:!1},playlists:{active:!1},albums:{active:!1},shows:{active:!1},loved:{active:!1},apps:{active:!1},queuelist:{active:!1},settings:{active:!1},lyrics:{active:!1}},_custo:{active:!1,large:!1},_getPagesState:function(){var e={};for(var t in this._pages)this._pages.hasOwnProperty(t)&&(e[t]=this._pages[t].selected===!0?"active-link":"");return e},_getPanelsState:function(){var e={};for(var t in this._panels)this._panels.hasOwnProperty(t)&&(e[t]=this._panels[t].active===!0?"active-panel":"");return e},_pageDisplayed:function(e,t){this._onPageChanged(t?t.path:www.getCurrentPath()),this._hasOpenPanel()&&Events.trigger(Events.menu.closeAllPanels)}});t.exports=y},{"../../core/genre":254,"../../core/i18n":255,"../../core/modal":257,"../_mixins/tracking":46,"../common/Badge":59,"../player/Player":204,"./SearchBar":163,"babel-runtime/core-js/object/keys":309,classnames:"classnames",jquery:"jquery",react:"react"}],204:[function(e,t,a){"use strict";var s=e("react"),n=e("./_elements/Cover"),r=e("./_elements/ControlBar"),i=e("../_mixins/control"),o=s.createClass({displayName:"Player",mixins:[i],render:function(){return s.createElement("div",{className:"player",id:"player"},s.createElement(n,{lyrics_opened:this.state.lyrics_opened}),s.createElement(r,{queuelist_opened:this.state.queuelist_opened}))}});t.exports=o},{"../_mixins/control":37,"./_elements/ControlBar":209,"./_elements/Cover":210,react:"react"}],210:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../_mixins/currentSong"),i=e("../../_mixins/currentType"),o=e("../../_mixins/control"),l=e("./Title"),c=e("./Action"),p=e("./TimeBar"),d=s.createClass({displayName:"Cover",propTypes:{lyrics_opened:s.PropTypes.bool.isRequired},mixins:[r,i,o],componentWillUpdate:function(e,t){this.state.track.SNG_ID!==t.track.SNG_ID&&this.refs.action.closeContextMenu()},render:function(){var e=SETTING_STATIC+"/images/common/ads/player.jpg",t=n({"player-options":!0,hide:"ads"===this.state.type||this.state.track_type!==dzPlayer.MEDIA_TYPE_SONG});return"ads"!==this.state.type&&(e=SETTING_DOMAIN_IMG+"/cover/",this.state.track_type===dzPlayer.MEDIA_TYPE_TALK?e=SETTING_DOMAIN_IMG+"/talk/"+this.state.track.SHOW_ART_MD5:playercontrol.blindTestMode||"string"!=typeof this.state.track.ALB_PICTURE||(e+=this.state.track.ALB_PICTURE),e+="/250x250.jpg"),(this.state.track_type===dzPlayer.MEDIA_TYPE_EXTERNAL||this.state.track_type===dzPlayer.MEDIA_TYPE_LIVE_STREAM)&&(e=this.state.track.PICTURE_URL),s.createElement("div",{className:"player-cover",id:"player-cover"},s.createElement("img",{src:e,height:"220",width:"220",alt:""}),s.createElement(l,null),s.createElement(c,{ref:"action",lyrics_opened:this.props.lyrics_opened}),s.createElement(p,null),s.createElement("a",{className:t,"data-action":"add",role:"button",onClick:this.action},s.createElement("span",{className:"icon icon-options"})),s.createElement("div",{className:"player-overlay","data-action":"seek",role:"button",onClick:this.action}))}});t.exports=d},{"../../_mixins/control":37,"../../_mixins/currentSong":38,"../../_mixins/currentType":39,"./Action":205,"./TimeBar":213,"./Title":214,classnames:"classnames",react:"react"}],214:[function(e,t,a){"use strict";var s=e("react"),n=e("../../_mixins/control"),r=e("./SongTitle"),i=e("./ArtistName"),o=s.createClass({displayName:"Title",mixins:[n],render:function(){return s.createElement("div",{className:"player-track","data-action":"seek",onClick:this.action},s.createElement(r,null),s.createElement(i,null))}});t.exports=o},{"../../_mixins/control":37,"./ArtistName":206,"./SongTitle":212,react:"react"}],212:[function(e,t,a){"use strict";var s=e("react"),n=e("../../_mixins/currentSong"),r=e("../../_mixins/currentType"),i=e("../../_mixins/control"),o=s.createClass({displayName:"SongTitle",mixins:[n,r,i],render:function(){if(playercontrol.blindTestMode)return s.createElement("h2",{className:"player-track-title heading-2"},"???");if("ads"===this.state.type){var e={title:null===dzPlayer.getAudioAds()?"":dzPlayer.getAudioAds().textlink.text,link:null===dzPlayer.getAudioAds()?"":dzPlayer.getAudioAds().tracking.clickCommand};return s.createElement("h2",{className:"player-track-title heading-2 ads"},s.createElement("a",{className:"player-track-link","data-action":"link","data-href":e.link,onClick:this.action},e.title))}var t=this.state.track_type===dzPlayer.MEDIA_TYPE_TALK?this.state.track.EPISODE_TITLE:this.state.track.SNG_TITLE;"string"==typeof this.state.track.VERSION&&this.state.track.VERSION.length>0&&(t+=" "+this.state.track.VERSION),window.document.title=t;var a="";return this.state.track_type===dzPlayer.MEDIA_TYPE_TALK?a="/show/"+this.state.track.SHOW_ID:Number(this.state.track.ALB_ID)>0&&(a="/album/"+this.state.track.ALB_ID),s.createElement("h2",{className:"player-track-title heading-2"},s.createElement("span",{className:"player-track-link","data-action":"link","data-href":a,onClick:this.action},t))}});t.exports=o},{"../../_mixins/control":37,"../../_mixins/currentSong":38,"../../_mixins/currentType":39,react:"react"}],206:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=e("../../_mixins/currentSong"),o=e("../../_mixins/currentType"),l=e("../../_mixins/control"),c=s.createClass({displayName:"ArtistName",mixins:[i,o,l],render:function(){var e=this.state.track.ARTISTS||[];if("ads"===this.state.type)return s.createElement("div",null);if(this.state.track_type===dzPlayer.MEDIA_TYPE_TALK)return s.createElement("h3",{className:"player-track-artist heading-2-sub ellipsis"},s.createElement("span",{className:"player-track-link","data-action":"link","data-href":"/show/"+this.state.track.SHOW_ID,onClick:this.action},this.state.track.SHOW_NAME));if(this.state.track_type===dzPlayer.MEDIA_TYPE_EXTERNAL||this.state.track_type===dzPlayer.MEDIA_TYPE_LIVE_STREAM)return s.createElement("h3",{className:"player-track-artist heading-2-sub ellipsis"},s.createElement("span",{className:"player-track-link"},this.state.track.ART_NAME));0===e.length&&e.push({ART_NAME:this.state.track.ART_NAME,ART_ID:this.state.track.ART_ID});var t={};return s.createElement("h3",{className:"player-track-artist heading-2-sub ellipsis"},r("par")," ",e.map(function(e,a){return"boolean"==typeof t[e.ART_ID]?[]:(t[e.ART_ID]=!0,playercontrol.blindTestMode?"???":(window.document.title+=" - "+e.ART_NAME,[a>0?", ":"",s.createElement("span",{className:"player-track-link","data-action":"link",key:"artist_"+e.ART_ID,"data-href":0!==e.ART_ID?"/artist/"+e.ART_ID:"",onClick:this.action},e.ART_NAME)]))}.bind(this)))}});t.exports=c},{"../../../core/i18n":255,"../../_mixins/control":37,"../../_mixins/currentSong":38,"../../_mixins/currentType":39,react:"react"}],213:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("../../_mixins/playing"),i=e("../../_mixins/control"),o=s.createClass({displayName:"TimeBar",propTypes:{dragging:s.PropTypes.bool},mixins:[r,i],getDefaultProps:function(){return{dragging:!1}},componentDidMount:function(){var e=this;n(this.refs.seek).draggable({axis:"x",containment:"parent",start:function(){e.props.dragging=!0},stop:function(t,a){e.props.dragging=!1,dzPlayer.isPlaying()?dzPlayer.control.seek(a.position.left/t.target.parentNode.offsetWidth):n(this).css("left",e.cursorPosition())}}),Events.subscribe(Events.player.changePlayerType,function(){n(this.refs.seek).draggable(this.seekAllowed()?"enable":"disable")}.bind(this),"player")},cursorPosition:function(){var e=Math.min(this.state.position,this.state.duration);return e>0?Math.floor(100*e/this.state.duration)+"%":"0%"},seek:function(e){this.seekAllowed()&&dzPlayer.control.seek(e.pageX/e.currentTarget.parentNode.offsetWidth)},render:function(){var e=this.cursorPosition(),t={};return this.props.dragging||(t.left=e),s.createElement("div",{className:"player-progress",role:"progressbar"},s.createElement("div",{className:"progress progress-background"}),s.createElement("div",{className:"progress progress-buffer",style:{width:this.state.buffer+"%"},onClick:this.action,"data-action":"seek"}),s.createElement("div",{className:"progress progress-seek",style:{width:e},onClick:this.action,"data-action":"seek"},s.createElement("div",{className:"progress-seek-overlay"})),s.createElement("div",{className:"progress-handler",style:t,ref:"seek"}),s.createElement("div",{className:"progress-time"},secToMin(this.state.position)),s.createElement("div",{className:"progress-length"},secToMin(this.state.duration)))}});t.exports=o},{"../../_mixins/control":37,"../../_mixins/playing":43,jquery:"jquery",react:"react"}],205:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/extends")["default"],n=e("react"),r=e("classnames"),i=e("../../../core/i18n"),o=i.gettext,l=e("../../_mixins/currentSong"),c=e("../../_mixins/currentType"),p=e("../../_mixins/notification"),d=e("../../_mixins/control"),u=e("../../common/Dislike"),m=e("../../common/Favorite"),h=n.createClass({displayName:"Action",propTypes:{lyrics_opened:n.PropTypes.bool},mixins:[l,d,c,p],render:function(){var e=this.state.type,t=dzPlayer.isRadio(),a=dzPlayer.helper.isPlayingFlow()?"flow":null,i="undefined"!=typeof this.state.track.LYRICS_ID&&0!==this.state.track.LYRICS_ID,l=[];if("ads"!==e&&this.state.track_type===dzPlayer.MEDIA_TYPE_SONG){var c=r({"evt-out evt-over action action-hide":!0,disabled:this.state.track.SNG_ID<0}),p=r({"icon icon-lyrics":!0,disabled:this.state.track.SNG_ID<0,active:this.props.lyrics_opened}),d={"data-tooltip":1,"data-tooltip-delay":700,"data-tooltip-offset":2,"data-tooltip-gravity":"sw"},h=n.createElement(m,{type:"song",style:"heart",context:"player",tooltip:!0,tooltip_gravity:"sw",id:String(this.state.track.SNG_ID),overlay:!1,key:this.state.track.SNG_ID,onClickCallback:this._onFavoriteClick,share_context:a}),_=n.createElement(u,{tooltip:!0,tooltip_gravity:"sw",style:"heart",id:this.state.track.SNG_ID,overlay:!1,key:"dislike_"+this.state.track.SNG_ID,onClickCallback:this._onDislikeClick}),y=n.createElement("a",s({className:c,onClick:this.action,key:"add_playlist_"+this.state.track.SNG_ID,role:"button","data-action":"playlist","data-tooltip-fallback":o("Ajouter à une playlist")},d),n.createElement("span",{className:"icon-32 icon-stack icon-stack-circle"},n.createElement("span",{className:"icon icon-playlist-add"})));d.title=o(this.props.lyrics_opened?"Masquer les paroles":"Afficher les paroles");var g=n.createElement("a",s({className:"evt-out evt-over action",onClick:this.action,key:"lyrics_"+this.state.track.SNG_ID,role:"button","data-action":"lyrics"},d),n.createElement("span",{className:"icon-32 icon-stack icon-stack-circle",id:"player-lyrics"},n.createElement("span",{className:p})));l=[h],t&&l.unshift(_),i&&l.push(g),t||l.push(y)}return n.createElement("div",{className:"player-actions clearfix","data-action":"seek",onClick:this.action},l.map(function(e,t){return[e,t===l.length-1]}))},_onDislikeClick:function(){return dzPlayer.skipRadioAllowed()?(this.displayNotification("dislike"),void setTimeout(dzPlayer.control.nextSong,300)):this.notify_already_displayed?!1:(this.notify_already_displayed=!0,notificationBar.display("flow_skip_push",{}),!1)},_onFavoriteClick:function(e,t,a){a&&this.displayNotification("like")}});t.exports=h},{"../../../core/i18n":255,"../../_mixins/control":37,"../../_mixins/currentSong":38,"../../_mixins/currentType":39,"../../_mixins/notification":40,"../../common/Dislike":121,"../../common/Favorite":125,"babel-runtime/helpers/extends":314,classnames:"classnames",react:"react"}],209:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=e("../../_mixins/control"),o=e("../../_mixins/playing"),l=e("../../_mixins/statusButton"),c=e("../../_mixins/currentSong"),p=e("./BottomControl"),d=e("./PlayControl"),u=e("./ChromecastControl"),m=s.createClass({displayName:"ControlBar",propTypes:{queuelist_opened:s.PropTypes.bool.isRequired},mixins:[i,o,l,c],render:function(){var e=r("Précédent"),t=r("Suivant");return s.createElement("div",{className:"player-controls"},s.createElement("ul",{className:"controls controls-main clearfix"},s.createElement("li",null,s.createElement("button",{className:"control control-prev",type:"button",onClick:this.action,"data-action":"prevSong",disabled:this.status("prev"),title:e},s.createElement("span",{className:"icon icon-prev"}))),this.state.track_type===dzPlayer.MEDIA_TYPE_TALK?s.createElement("li",null,s.createElement("button",{className:"control control-prev-30",type:"button",onClick:this.action,"data-action":"backward"},s.createElement("span",{className:"icon icon-prev-30"}))):!1,s.createElement("li",null,s.createElement(d,null)),this.state.track_type===dzPlayer.MEDIA_TYPE_TALK?s.createElement("li",null,s.createElement("button",{className:"control control-next-30",type:"button",onClick:this.action,"data-action":"forward"},s.createElement("span",{className:"icon icon-next-30"}))):!1,s.createElement("li",null,s.createElement("button",{className:"control control-next",type:"button",onClick:this.action,"data-action":"nextSong",disabled:this.status("next"),title:t},s.createElement("span",{className:"icon icon-next"})))),s.createElement(p,{queuelist_opened:this.props.queuelist_opened}),this.state.track_type===dzPlayer.MEDIA_TYPE_SONG?s.createElement(u,null):!1)}});t.exports=m},{"../../../core/i18n":255,"../../_mixins/control":37,"../../_mixins/currentSong":38,"../../_mixins/playing":43,"../../_mixins/statusButton":45,"./BottomControl":207,"./ChromecastControl":208,"./PlayControl":211,react:"react"}],211:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../core/i18n"),i=r.gettext,o=e("../../_mixins/control"),l=e("../../_mixins/playing"),c=e("../../_mixins/currentSong"),p=e("../../_mixins/statusButton"),d=s.createClass({displayName:"PlayControl",mixins:[o,l,p,c],getInitialState:function(){return{playing:!1,paused:!1}},componentDidMount:function(){Events.subscribe(Events.player.playing,function(e,t){this.setState({playing:t,loading:!1})}.bind(this),"player"),Events.subscribe(Events.player.paused,function(e,t){this.setState({paused:t})}.bind(this),"player"),Events.subscribe(Events.player.finishTrackList,function(){this.setState({playing:!1,paused:!1,loading:!1})}.bind(this),"player")},render:function(){var e=i("Play"),t=i(this.state.track_type===dzPlayer.MEDIA_TYPE_LIVE_STREAM?"Stop":"Pause");if(this.state.paused&&!this.state.playing||!this.state.paused&&!this.state.playing)return s.createElement("button",{className:"control control-play",type:"button",onClick:this.action,"data-action":"play",disabled:this.status("play")||this.state.loading,title:e},s.createElement("span",{className:"icon icon-play"}));var a=n({icon:!0,"icon-pause":this.state.track_type!==dzPlayer.MEDIA_TYPE_LIVE_STREAM,"icon-square-fill":this.state.track_type===dzPlayer.MEDIA_TYPE_LIVE_STREAM}),r=n({control:!0,"control-pause":this.state.track_type!==dzPlayer.MEDIA_TYPE_LIVE_STREAM,"control-stop":this.state.track_type===dzPlayer.MEDIA_TYPE_LIVE_STREAM}),o=this.state.track_type===dzPlayer.MEDIA_TYPE_LIVE_STREAM?"stop":"pause";return s.createElement("button",{className:r,type:"button",onClick:this.action,"data-action":o,disabled:this.status("pause"),title:t},s.createElement("span",{className:a}))}});t.exports=d},{"../../../core/i18n":255,"../../_mixins/control":37,"../../_mixins/currentSong":38,"../../_mixins/playing":43,"../../_mixins/statusButton":45,classnames:"classnames",react:"react"}],207:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("../../../core/i18n"),i=r.gettext,o=e("../../_mixins/playing"),l=e("../../_mixins/control"),c=e("../../_mixins/statusButton"),p=e("../../_mixins/currentSong"),d=e("../../_mixins/currentType"),u=e("../../_mixins/tracking"),m=e("./ChromecastControl"),h=s.createClass({displayName:"BottomControl",mixins:[o,l,c,d,u,p],componentDidMount:function(){var e=this;n(this.refs.volume).draggable({axis:"x",containment:"parent",drag:function(t,a){n(this).is(":visible")&&dzPlayer.control.setVolume(e.getCursorVolume(t,a),!0)},stop:function(t,a){n(this).is(":visible")?dzPlayer.control.setVolume(e.getCursorVolume(t,a),!0):n(this).css("left",e.status("volume"))}}),Events.subscribe(Events.player.changePlayerType,function(e,t){n(this.refs.volume).draggable("ads"!==t?"enable":"disable")}.bind(this),"player")},getCursorVolume:function(e,t){var a=t.position.left/(e.target.parentNode.offsetWidth-4);return a=Math.min(a,1),a=Math.max(a,0)},render:function(){var e=[],t=i("Répéter"),a=i("Aléatoire"),n=i("File d'attente");if(("mod"===this.state.type||"chromecast"===this.state.type&&!chromecast.isRadio())&&(e=this.state.track_type===dzPlayer.MEDIA_TYPE_SONG||this.state.track_type===dzPlayer.MEDIA_TYPE_EXTERNAL?[s.createElement("li",{key:"repeat"},s.createElement("button",{className:"control control-repeat"+this.status("repeat"),type:"button",onClick:this.action,"data-type":"repeat","data-action":"setRepeat",title:t},s.createElement("span",{className:"icon icon-repeat"}),s.createElement("span",{className:"icon icon-repeat-one"}))),s.createElement("li",{key:"shuffle"},s.createElement("button",{className:"control control-shuffle"+this.status("shuffle"),type:"button",onClick:this.action,"data-type":"shuffle","data-action":"setShuffle",title:a},s.createElement("span",{className:"icon icon-shuffle"})))]:this.state.track_type===dzPlayer.MEDIA_TYPE_TALK?[s.createElement("li",{className:"chromecast",key:"chromecast"},s.createElement(m,null))]:[s.createElement("li",{className:"invisible",key:"invisible"})]),"radio"===this.state.type||"chromecast"===this.state.type&&chromecast.isRadio()){var r="user"===dzPlayer.radioType;e=[s.createElement("li",{key:"radio",className:"tag"},s.createElement("span",{className:"sticker sticker-small sticker-flow"},i(r?"FLOW":"MIX")))]}return"ads"===this.state.type&&(e=[s.createElement("li",{key:"ads",className:"tag"},s.createElement("span",{className:"sticker sticker-small sticker-flow"},i("PUBLICITÉ")))]),s.createElement("ul",{className:"controls controls-options clearfix"},s.createElement("li",{className:"volume"},s.createElement("button",{className:"control control-volume"+this.status("mute"),type:"button",onClick:this.action,"data-action":"mute"},s.createElement("span",{className:"icon icon-volume"}),s.createElement("span",{className:"icon icon-volume-min"}),s.createElement("span",{className:"icon icon-volume-off"})),s.createElement("span",{className:"volume-progress",onClick:this.action,"data-action":"setVolume",ref:"volume_bar"},s.createElement("span",{className:"volume-progress-bar"},s.createElement("span",{className:"volume-bar",style:{width:this.status("volume")},onClick:this.action,"data-action":"setVolume"}),s.createElement("span",{className:"volume-handler",style:{left:this.status("volume")},ref:"volume"}))),s.createElement("button",{className:"control control-volume-max",type:"button"},s.createElement("span",{className:"icon icon-volume-max"}))),e,s.createElement("li",null,s.createElement("button",{className:"control "+("chromecast"===this.state.type?"disabled":"")+" control-qlist"+this.status("queue"),type:"button",title:n,onClick:this.action,"data-type":"queuelist","data-action":"queuelist"},s.createElement("span",{className:"icon icon-qlist"}))))}});t.exports=h},{"../../../core/i18n":255,"../../_mixins/control":37,"../../_mixins/currentSong":38,"../../_mixins/currentType":39,"../../_mixins/playing":43,"../../_mixins/statusButton":45,"../../_mixins/tracking":46,"./ChromecastControl":208,jquery:"jquery",react:"react"}],208:[function(e,t,a){"use strict";var s=e("react"),n=e("../../_mixins/chromecast"),r=s.createClass({displayName:"ChromecastControl",mixins:[n],render:function(){var e=this.state.chromecast;chromecast.canCast()||(e="hide");var t,a,n="chromecast-icon",r={hide:"hidden",loading:"loading",connected:"active",show:"",disconnected:""},i=!1;return"show"===e&&(storage.get("CCIntro_"+USER.USER_ID)||(i=!0)),t=n+" "+r[e],a=s.createElement("a",{className:t,title:"Chromecast","data-action":"chromecast",onClick:this._onClick}),i&&(a=s.createElement("div",{className:"chromecast-tooltip"},a)),a},_onClick:function(){"connected"!==chromecast.getStatus()&&Events.trigger(Events.chromecast.status,"show"),storage.set("CCIntro_"+USER.USER_ID,!0),chromecast.launch()}});t.exports=r},{"../../_mixins/chromecast":36,react:"react"}],36:[function(e,t,a){"use strict";var s={getInitialState:function(){return{chromecast:chromecast.getStatus()}},componentDidMount:function(){Events.subscribe(Events.chromecast.status,this._onStatusChange)},componentWillUnmount:function(){Events.unsubscribe(Events.chromecast.status,this._onStatusChange)},_onStatusChange:function(e,t){this.setState({chromecast:t})}};t.exports=s},{}],39:[function(e,t,a){"use strict";var s={getInitialState:function(){return{type:dzPlayer.getPlayerType()}},componentDidMount:function(){Events.subscribe(Events.player.changePlayerType,function(e,t){this.setState({type:t})}.bind(this),"player")}};t.exports=s},{}],45:[function(e,t,a){"use strict";var s={status:function(e){switch(e){case"prev":return("chromecast"===dzPlayer.getPlayerType()&&!chromecast.isRadio()||"mod"===dzPlayer.getPlayerType())&&(dzPlayer.getIndexSong()>0||this.state.repeat>0)&&dzPlayer.getMediaType()!==dzPlayer.MEDIA_TYPE_LIVE_STREAM?"":"disabled";case"next":return"chromecast"!==dzPlayer.getPlayerType()&&"mod"!==dzPlayer.getPlayerType()&&!dzPlayer.isRadio()||dzPlayer.isLastSong()&&!(this.state.repeat>0)||dzPlayer.getMediaType()===dzPlayer.MEDIA_TYPE_LIVE_STREAM?"disabled":"";case"play":case"pause":return"ads"===dzPlayer.getPlayerType()?"disabled":"";case"volume":return this.state.volume+"%";case"mute":return this.state.mute||0===this.state.volume?"-mute":"";case"repeat":return this.state.repeat>0?2===this.state.repeat?"-one active":" active":"";case"shuffle":return this.state.shuffle?" active":"";case"queue":return this.props.queuelist_opened?" active":""}}};t.exports=s},{}],43:[function(e,t,a){"use strict";var s={getInitialState:function(){return{position:0,buffer:0,duration:0,loading:0}},componentDidMount:function(){Events.subscribe(Events.player.position,function(e,t){this.setState({position:t})}.bind(this),"player"),Events.subscribe(Events.player.pourcentLoaded,function(e,t){this.setState({buffer:t})}.bind(this),"player"),Events.subscribe(Events.player.duration,function(e,t){this.setState({duration:t})}.bind(this),"player"),Events.subscribe(Events.player.loading,function(e,t){this.setState({loading:t})}.bind(this),"player")}};t.exports=s},{}],38:[function(e,t,a){"use strict";function s(){var e=dzPlayer.getCurrentSong();return{track:e||{},track_type:dzPlayer.getMediaType(e)}}var n={getInitialState:function(){return s()},componentDidMount:function(){Events.subscribe(Events.player.displayCurrentSong,this._onSongChange,"currentSongMixin"),Events.subscribe(Events.player.blind_test_mode_changed,this._onSongChange,"currentSongMixin")},componentWillUnmount:function(){Events.unsubscribeAll("currentSongMixin")},_onSongChange:function(){this.setState(s())}};t.exports=n},{}],37:[function(e,t,a){"use strict";var s=e("jquery"),n={getInitialState:function(){return{volume:100*dzPlayer.getVolume(),shuffle:dzPlayer.isShuffle(),repeat:dzPlayer.getRepeat(),mute:dzPlayer.isMuted(),queuelist_opened:!1,lyrics_opened:!1}},componentWillUnmount:function(){Events.unsubscribe(Events.player.changePlayerType,this._onChangePlayerType),Events.unsubscribe(Events.player.repeat_changed,this._onChangeRepeat),Events.unsubscribe(Events.player.shuffle_changed,this._onChangeShuffle),Events.unsubscribe(Events.player.volume_changed,this._onChangeVolume),Events.unsubscribe(Events.player.mute_changed,this._onChangeMute)},componentDidMount:function(){Events.subscribe(Events.player.changePlayerType,this._onChangePlayerType,"player"),Events.subscribe(Events.player.repeat_changed,this._onChangeRepeat,"player"),Events.subscribe(Events.player.shuffle_changed,this._onChangeShuffle,"player"),Events.subscribe(Events.player.volume_changed,this._onChangeVolume,"player"),Events.subscribe(Events.player.mute_changed,this._onChangeMute,"player")},action:function(e){e.preventDefault(),e.stopPropagation();var t=dom.dataset(e.currentTarget),a=e.currentTarget.className,n=dzPlayer.helper.isPlayingFlow()?"flow":"";if("string"==typeof t.action&&-1===a.indexOf("disabled")){var r,i=[],o=t.action;switch(t.action){case"link":""!==t.href&&("http"===t.href.substr(0,4)?window.open(t.href):loadBox(t.href));break;case"setShuffle":i=[!dzPlayer.isShuffle(),!0];break;case"setRepeat":i=[2===dzPlayer.getRepeat()?0:dzPlayer.getRepeat()+1];break;case"share":sharebox.load(0,dzPlayer.getCurrentSong("SNG_ID"));break;case"add":case"playlist":var l=dzPlayer.getCurrentSong();Events.trigger(Events.menu.contextMenuOpen,{target:e.target,position:"right",type:"track",view:"playlist"===t.action?"playlist":"home",data:{SONG:l,PLAYLIST_ID:dzPlayer.getContext("ID")},id:dzPlayer.getCurrentSong("SNG_ID"),context:"player",share_context:n,image:l.ALB_PICTURE});break;case"mute":i=[!dzPlayer.isMuted()];break;case"setVolume":var c=(e.pageX-s(e.currentTarget).offset().left)/this.refs.volume_bar.offsetWidth;c=Math.min(c,1),i=[Math.max(c,0),!0];break;case"queuelist":Events.trigger(Events.menu.togglePanel,"queuelist");break;case"lyrics":Events.trigger(Events.menu.togglePanel,"lyrics");break;case"play":if(OFFLINE)return void dzoffline.display();break;case"seek":if(!this.seekAllowed())return;i=[e.pageX/e.currentTarget.parentNode.offsetWidth];break;case"chromecast":"connected"!==chromecast.getStatus()&&Events.trigger(Events.chromecast.status,"show"),storage.set("CCIntro_"+USER.USER_ID,!0),chromecast.launch();break;case"nextSong":dzPlayer.skipRadioAllowed()||notificationBar.display("flow_skip_push",{});break;case"forward":o="seek",r=(dzPlayer.position+30)/dzPlayer.duration,r>=1&&(o="nextSong"),i=[r];break;case"backward":o="seek",r=(dzPlayer.position-30)/dzPlayer.duration,i=[Math.max(r,0)]}this.doTracking(t.action,e),"function"==typeof dzPlayer.control[o]&&dzPlayer.control[o].apply(dzPlayer,i)}},closeContextMenu:function(){Events.trigger(Events.menu.contextMenuClose,"player")},doTracking:function(e,t){if("function"!=typeof this.tracking)return!1;var a={queuelist:!0,setRepeat:!0,setShuffle:!0};return"boolean"!=typeof a[e]?!1:void this.tracking("player_click",t.currentTarget)},seekAllowed:function(){return!(dzPlayer.isRadio()&&!USER.OPTIONS.web_hq||"chromecast"===dzPlayer.getPlayerType()&&chromecast.isRadio()||"ads"===dzPlayer.getPlayerType()||"jingle"===dzPlayer.getPlayerType()||dzPlayer.getMediaType()===dzPlayer.MEDIA_TYPE_LIVE_STREAM)},_onChangePlayerType:function(e,t){this.setState({type:t})},_onChangeRepeat:function(e,t){this.setState({repeat:t})},_onChangeShuffle:function(e,t){this.setState({shuffle:t})},_onChangeVolume:function(e,t){this.setState({volume:t})},_onChangeMute:function(e,t){this.setState({mute:t,volume:t?0:100*dzPlayer.getVolume()})}};t.exports=n},{jquery:"jquery"}],163:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("react-addons-pure-render-mixin"),i=e("../../core/i18n"),o=i.gettext,l=e("../../naboo/search"),c=e("../../naboo/stores/SearchStore"),p=s.createClass({displayName:"SearchBar",mixins:[r],getDefaultProps:function(){return{request_suggest_wait_value:400,isAuthUser:0!==window.USER.USER_ID}},componentDidMount:function(){c.onChange(this._searchStoreChanged)},componentWillUnmount:function(){c.offChange(this._searchStoreChanged)},render:function(){var e=o("Rechercher"),t=n({search:!0,active:this.props.active});return s.createElement("div",{className:t},s.createElement("div",{className:"search-form",role:"search"},s.createElement("label",{htmlFor:"menu_search",className:"sr-only"},e),s.createElement("input",{id:"menu_search",ref:"query",className:"search-control",type:"text",placeholder:e,onBlur:this._handleBlur,onKeyUp:this._handleKeys,onClick:this._handleClick}),s.createElement("button",{className:"search-submit",type:"button",onClick:this._triggerSearch},s.createElement("span",{className:"icon icon-16 icon-search"}))))},_focused:!1,_request_suggest_timeout:null,_searchStoreChanged:function(e){return"suggest"!==e?!1:void(""!==c.getQuery()&&this._focused?Events.trigger(Events.menu.openPanel,"searchsuggest"):this.props.isAuthUser&&userData.isLoaded&&this._focused?Events.trigger(Events.menu.openPanel,"searchhistory"):Events.trigger(Events.menu.closeAllPanels))},_handleKeys:function(e){var t=e.which;if(13===t)return this.refs.query.blur(),void this._triggerSearch();var a=this.refs.query.value;c.setQuery(a),this._triggerSuggest()},_handleClick:function(){var e=c.getQuery();e?Events.trigger(Events.menu.openPanel,"searchsuggest"):this.props.isAuthUser&&Events.trigger(Events.menu.openPanel,"searchhistory"),this._focused||(this.refs.query.select(),this._focused=!0)},_handleBlur:function(){this._focused=!1},_triggerSuggest:function(){var e=c.getQuery();null!==this._request_suggest_timeout&&(window.clearTimeout(this._request_suggest_timeout),this._request_suggest_timeout=null),this._request_suggest_timeout=window.setTimeout(function(){c.search(e)},this.props.request_suggest_wait_value)},_triggerSearch:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=c.getQuery();t&&(this.props.isAuthUser&&userData.addSearchHistory(t),l._tabName="all",Events.trigger(Events.menu.closeAllPanels),0===t.lastIndexOf("#",0)?(t=t.replace(/#/g,""),loadBox("/tags/"+encodeURIComponent(t),{force:!0})):loadBox("/search/"+encodeURIComponent(t),{force:!0}))}});t.exports=p},{"../../core/i18n":255,"../../naboo/search":290,"../../naboo/stores/SearchStore":291,classnames:"classnames",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],291:[function(e,t,a){"use strict";function s(e){var t=i;api.call({method:"deezer.suggest",data:{QUERY:t,TYPES:{ARTIST:!0,ALBUM:!0,TRACK:!0,PLAYLIST:!0,RADIO:!0,SHOW:!0,TAG:!0},NB:3},success:function(a){o[t]=a,t===i&&e(a)}})}var n=e("../../core/Store"),r=null,i="",o={},l=new n({getQuery:function(){return i},setQuery:function(e){return e=e.trim(),i!==e&&(i=e,this.emitChange("input")),this},getResults:function(){return r},search:function(e){return this.setQuery(e),""===i||"#"===i?(r=null,this.emitChange("suggest")):"undefined"!=typeof o[i]?(r=o[i],this.emitChange("suggest")):void s(function(e){r=e,this.emitChange("suggest")}.bind(this))}});t.exports=l},{"../../core/Store":251}],290:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("../components/search/Search"),i={query:"",display:function(e){i.fetch(e,function(e,t){return e?error.log(e):void Events.trigger(Events.search.loaded,t)})},leave:function(){var e=document.getElementById("naboo_content");e&&n.unmountComponentAtNode(e)},fetch:function(e,t){if(i.query=decodeURIComponent(e.query),e.data===Object(e.data))return setTimeout(t.bind(this,null,e.data),0);if(!i.query)return setTimeout(t(new Error("Missing query parameter")),0);try{var a=e.tags?"deezer.tagSearch":"deezer.pageSearch";api.call({method:a,data:{query:i.query,start:0,nb:40,suggest:!0,artist_suggest:!0,top_tracks:!0},error:t,success:t.bind(this,null)})}catch(s){var n="string"==typeof s?new Error(s):s;setTimeout(t(n),0)}return!0},render:function(e,t){var a=document.getElementById("naboo_content");a&&(Events.subscribeOnce(Events.layout.adsBackground,i.resizeCover,"search"),t.tab=i._tabName||"all",t.TRACK.count||t.ARTIST.count||t.ALBUM.count||(t.tab="playlist"),n.render(s.createElement(r,t),a,function(){naboo.afterLoad(!0)}))},getAdsArgs:function(){return{element_id:"ALL",element_data:i.query}}};Events.subscribe(Events.search.loaded,i.render),t.exports=i},{"../components/search/Search":216,react:"react","react-dom":"react-dom"}],216:[function(e,t,a){"use strict";var s=e("react"),n=e("../../core/i18n"),r=n.gettext,i=n.ngettext,o=e("./_elements/Header"),l=e("./_elements/Suggest"),c=e("@deezer/components/common/NavBar"),p=e("./_elements/NoResult"),d=e("@deezer/components/common/DataGrid"),u=e("@deezer/components/common/ThumbnailGrid"),m=s.createClass({displayName:"Search",propTypes:{tab:s.PropTypes.string,QUERY:s.PropTypes.string.isRequired,TRACK:s.PropTypes.object,ARTIST:s.PropTypes.object,ALBUM:s.PropTypes.object,PLAYLIST:s.PropTypes.object,RADIO:s.PropTypes.object,SHOW:s.PropTypes.object,TAG:s.PropTypes.array,FILTER:s.PropTypes.string},childContextTypes:{id:s.PropTypes.string,name:s.PropTypes.string.isRequired},getDefaultProps:function(){return{tab:"all",TRACK:{count:0,data:[],total:0},ARTIST:{count:0,data:[],total:0},ALBUM:{count:0,data:[],total:0},PLAYLIST:{count:0,data:[],total:0},RADIO:{count:0,data:[],total:0},SHOW:{count:0,data:[],total:0},FILTER:"all",TAG:[],allFilled:!0,artistFilled:!1,albumFilled:!1,playlistFilled:!1,radiolistFilled:!1,showlistFilled:!1}},getInitialState:function(){return this.props.ARTIST.total=Math.min(this._maxResults,this.props.ARTIST.total),this.props.ALBUM.total=Math.min(this._maxResults,this.props.ALBUM.total),this.props.PLAYLIST.total=Math.min(this._maxResults,this.props.PLAYLIST.total),this.props.RADIO.total=Math.min(this._maxResults,this.props.RADIO.total),this.props.SHOW.total=Math.min(this._maxResults,this.props.SHOW.total),{query:this.props.QUERY,tab:this.props.tab,track:this.props.TRACK,artist:this.props.ARTIST,album:this.props.ALBUM,playlist:this.props.PLAYLIST,radio:this.props.RADIO,show:this.props.SHOW,tag:this.props.TAG,allFilled:!0,artistFilled:!1,albumFilled:!1,playlistFilled:!1,radioFilled:!1}},getChildContext:function(){return{id:this.state.query,name:"search_page"}},componentWillReceiveProps:function(e){e.ARTIST.total=Math.min(this._maxResults,e.ARTIST.total),e.ALBUM.total=Math.min(this._maxResults,e.ALBUM.total),e.PLAYLIST.total=Math.min(this._maxResults,e.PLAYLIST.total),e.RADIO.total=Math.min(this._maxResults,e.RADIO.total),e.SHOW.total=Math.min(this._maxResults,e.SHOW.total),this.setState({query:e.QUERY,tab:e.tab,track:e.TRACK,artist:e.ARTIST,album:e.ALBUM,playlist:e.PLAYLIST,radio:e.RADIO,show:e.SHOW,tag:e.TAG||[]})},render:function(){if(!(this.state.track.total||this.state.artist.total||this.state.album.total||this.state.playlist.total||this.state.radio.total||this.state.show.total))return s.createElement(p,{query:this.state.query});var e=[{id:"all",label:r("Tout"),action:this._onTabClick},{id:"artist",label:r("Artistes"),action:this._onTabClick},{id:"album",label:r("Albums"),action:this._onTabClick},{id:"playlist",label:r("Playlists"),action:this._onTabClick}];return gatekeeper.isAllowed("search_mix")&&e.push({id:"radio",label:i("Mix","Mix",{count:2}),action:this._onTabClick}),e.push({id:"show",label:r("Podcasts"),action:this._onTabClick}),s.createElement("div",{className:"page-naboo-search",id:"page_naboo_search"},s.createElement(o,{query:this.state.query,tags:this.state.tag,filter:this.props.FILTER}),s.createElement(c,{items:e,active:this.state.tab}),this._renderTabContent())},_renderTabContent:function(){if(this._loadTab(this.state.tab),"all"===this.state.tab)return[s.createElement(l,{key:"suggest",artist:this.state.artist,album:this.state.album,playlist:this.state.playlist,radio:this.state.radio,shows:this.state.show,onTitleClick:this._changeTab}),s.createElement(d.FullPage,{key:"tracklist",type:"search",items:this.state.track.data})];var e,t=this.state[this.state.tab].total,a={artist:i("Artiste","Artistes",{count:t}),album:i("Album","Albums",{count:t}),playlist:i("Playlist","Playlists",{count:t}),radio:i("Mix","Mix",{count:t}),show:i("Podcast","Podcasts",{count:t})};switch(this.state.tab){case"artist":e=s.createElement(u,{data:this.state.artist.data,options:["name","fans","favorite"]});break;case"album":e=s.createElement(u,{data:this.state.album.data,options:["name","artist","favorite"],context:"search_album"});break;case"playlist":e=s.createElement(u,{data:this.state.playlist.data,options:["name","favorite"],context:"search_playlist"});break;case"radio":e=s.createElement(u,{data:this.state.radio.data,options:["title","tags","favorite"],context:"search_radio"});break;case"show":e=s.createElement(u,{data:this.state.show.data,options:["title","name","favorite"],context:"search_show"})}return s.createElement("div",{className:"search-results"},s.createElement("h2",{className:"heading-2","data-target":"title-"+this.state.tab+"s","data-total":"0"},s.createElement("span",{className:"color-primary"},t)," ",a[this.state.tab]),e)},_onTabClick:function(e){this._changeTab(e.id)},_maxResults:40,_changeTab:function(e){this.setState({tab:e})},_loadTab:function(e){this.state[e+"Filled"]||this._fetchTabData(e,function(t,a){if(t)return error.log(t);if(this.isMounted()){var s={};a.total=Math.min(this._maxResults,a.total),s[e]=a,s[e+"Filled"]=!0,this.setState(s)}}.bind(this))},_fetchTabData:function(e,t){api.call({method:"search.music",data:{query:this.state.query,filter:this.props.FILTER,output:e.toUpperCase(),start:0,nb:this._maxResults},error:t,success:t.bind(this,null)})}});t.exports=m},{"../../core/i18n":255,"./_elements/Header":217,"./_elements/NoResult":218,"./_elements/Suggest":219,"@deezer/components/common/DataGrid":97,"@deezer/components/common/NavBar":132,"@deezer/components/common/ThumbnailGrid":148,react:"react"}],219:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.ngettext,i=e("./suggest/Column"),o=s.createClass({displayName:"Suggest",propTypes:{artist:s.PropTypes.object,album:s.PropTypes.object,playlist:s.PropTypes.object,radio:s.PropTypes.object,shows:s.PropTypes.object,onTitleClick:s.PropTypes.func,limit:s.PropTypes.number},getDefaultProps:function(){return{artist:{data:[],length:0},album:{data:[],length:0},playlist:{data:[],length:0},radio:{data:[],length:0},shows:{data:[],length:0},limit:1}},render:function(){var e=this,t=[];return["artist","album","playlist","radio","shows"].forEach(function(a){e.props[a].data.length>0&&t.push(a)}),0===t.length?null:(t=t.slice(0,t.length-t.length%2),s.createElement("div",{className:"search-suggest clearfix"},t.map(this._renderColumn)))},_renderColumn:function(e){var t="";switch(e){case"artist":t=r("Artiste","Artistes",{count:this.props.artist.total});break;case"album":t=r("Album","Albums",{count:this.props.album.total});break;case"playlist":t=r("Playlist","Playlists",{count:this.props.playlist.total});break;case"radio":t=r("Mix","Mix",{count:this.props.radio.total});break;case"shows":t=r("Podcast","Podcasts",{count:this.props.shows.total});break;default:return null}return s.createElement(i,{key:e,title:t,onTitleClick:this.props.onTitleClick,items:this.props[e].data,count:this.props[e].total,limit:this.props.limit})}});t.exports=o},{"../../../core/i18n":255,"./suggest/Column":222,react:"react"}],222:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("./Artist"),i=e("./Album"),o=e("./Playlist"),l=e("./Radio"),c=e("./Show"),p=s.createClass({displayName:"Column",propTypes:{title:s.PropTypes.string,onTitleClick:s.PropTypes.func,items:s.PropTypes.array,count:s.PropTypes.number,limit:s.PropTypes.number},getDefaultProps:function(){return{title:"",items:[],count:0,limit:1}},getInitialState:function(){return{type:this.props.items.length?this.props.items[0].__TYPE__:""}},componentWillReceiveProps:function(e){this.setState({type:e.items.length?e.items[0].__TYPE__:""})},render:function(){if(!this.props.items.length)return null;var e=n({"suggest-column":!0,"column-artists":"artist"===this.state.type,"column-albums":"album"===this.state.type,"column-playlists":"playlist"===this.state.type,"column-radio":"radio"===this.state.type,"column-shows":"shows"===this.state.type});return s.createElement("dl",{className:e},s.createElement("dt",{className:"suggest-title"},s.createElement("a",{onClick:this._onTitleClick,"data-type":this.state.type},s.createElement("span",{className:"color-primary"},this.props.count)," ",this.props.title,s.createElement("span",{className:"icon icon-arrow-right-long"}))),this._renderItems())},_renderItems:function(){for(var e,t=[],a=0;a<this.props.limit;a++)if("undefined"==typeof this.props.items[a])t.push(s.createElement("dd",{className:"nano-card-item invisible","aria-hidden":"true",key:"blank_"+a}));else switch(e=this.props.items[a],e.__TYPE__){case"artist":t.push(s.createElement(r,{data:e,key:e.__TYPE__+e.ART_ID}));break;case"album":t.push(s.createElement(i,{data:e,key:e.__TYPE__+e.ALB_ID}));break;case"playlist":t.push(s.createElement(o,{data:e,key:e.__TYPE__+e.PLAYLIST_ID}));break;case"radio":t.push(s.createElement(l,{data:e,key:e.__TYPE__+e.RADIO_ID}));break;case"show":t.push(s.createElement(c,{data:e,key:e.__TYPE__+e.SHOW_ID}));break;default:error.log(new Error('Unknown "'+e.__TYPE__+'" item type'))}return t},_onTitleClick:function(e){"function"==typeof this.props.onTitleClick&&this.props.onTitleClick(e.currentTarget.getAttribute("data-type"))}});t.exports=p},{"./Album":220,"./Artist":221,"./Playlist":223,"./Radio":224,"./Show":225,classnames:"classnames",react:"react"}],225:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/common/Thumbnail"),r=s.createClass({displayName:"Show",propTypes:{data:s.PropTypes.object.isRequired},render:function(){return s.createElement("dd",{className:"nano-card-item has-shadow"},s.createElement("div",{className:"nano-card-picture"},s.createElement(n,{type:"show",height:120,width:120,imgHeight:110,imgWidth:110,context:"search_show",play:"on",playLink:!0,overlay:"off",data:this.props.data})),s.createElement("aside",{className:"nano-card-info"},s.createElement("h2",{className:"heading-4 ellipsis"},s.createElement("a",{className:"evt-click",href:"/show/"+this.props.data.SHOW_ID,"data-instance":"show_name"},this.props.data.SHOW_NAME))))}});t.exports=r},{"@deezer/components/common/Thumbnail":138,react:"react"}],224:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/common/Thumbnail"),r=e("@deezer/components/common/TagList"),i=s.createClass({displayName:"Radio",propTypes:{data:s.PropTypes.object.isRequired},render:function(){return s.createElement("dd",{className:"nano-card-item has-shadow"},s.createElement("div",{className:"nano-card-picture"},s.createElement(n,{type:"radio",height:120,width:120,imgHeight:110,imgWidth:110,context:"search_radio",play:"on",playLink:!0,overlay:"off",data:this.props.data})),s.createElement("aside",{className:"nano-card-info"},s.createElement("h2",{className:"heading-4 ellipsis"},s.createElement("a",{className:"evt-click",href:"/mixes/"+this.props.data.RADIO_ID,"data-instance":"radio_name"},this.props.data.TITLE)),s.createElement("h3",{className:"heading-4-sub ellipsis"},this._renderTags())))},_renderTags:function(){if(!this.props.data.TAGS)return null;var e=this.props.data.TAGS.map(function(e){return{LABEL:e}});return s.createElement(r,{tags:e,max:5,type:"text",link:gatekeeper.isAllowed("search_tag")})}});t.exports=i},{"@deezer/components/common/TagList":136,"@deezer/components/common/Thumbnail":138,react:"react"}],223:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../core/i18n"),r=n.gettext,i=n.ngettext,o=e("@deezer/components/common/Thumbnail"),l=s.createClass({displayName:"Playlist",propTypes:{data:s.PropTypes.object.isRequired},render:function(){return s.createElement("dd",{className:"nano-card-item has-shadow"},s.createElement("div",{className:"nano-card-picture"},s.createElement(o,{type:"playlist",height:180,width:180,imgHeight:110,imgWidth:110,context:"search_playlist",play:"on",preview:"on",playLink:!0,multiCover:!0,overlay:"off",data:this.props.data})),s.createElement("aside",{className:"nano-card-info"},s.createElement("h2",{className:"heading-4 ellipsis"},s.createElement("a",{className:"evt-click",href:"/playlist/"+this.props.data.PLAYLIST_ID,"data-instance":"playlist_name"},this.props.data.TITLE)),this._renderInfos()))},_renderInfos:function(){return this.props.data.PARENT_USER_ID!==window.USER.USER_ID?s.createElement("h3",{className:"heading-4-sub ellipsis"},r("par")+" ",s.createElement("a",{className:"evt-click",href:"/profile/"+this.props.data.PARENT_USER_ID,"data-instance":"user_name"},this.props.data.PARENT_USERNAME)," - ",this.props.data.NB_SONG+" "+i("titre","titres",{count:this.props.data.NB_SONG})):s.createElement("h3",{className:"heading-4-sub ellipsis"},this.props.data.NB_SONG+" "+i("titre","titres",{count:this.props.data.NB_SONG}))}});t.exports=l},{"../../../../core/i18n":255,"@deezer/components/common/Thumbnail":138,react:"react"}],221:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../core/i18n"),r=n.ngettext,i=e("@deezer/components/common/Thumbnail"),o=s.createClass({displayName:"Artist",propTypes:{data:s.PropTypes.object.isRequired},render:function(){return s.createElement("dd",{className:"nano-card-item has-shadow"},s.createElement("div",{className:"nano-card-picture"},s.createElement(i,{type:"artist",height:320,width:250,imgHeight:110,imgWidth:86,overlay:"off",data:this.props.data})),s.createElement("aside",{className:"nano-card-info"},s.createElement("h2",{className:"heading-4 ellipsis"},s.createElement("a",{className:"evt-click",href:"/artist/"+this.props.data.ART_ID},this.props.data.ART_NAME)),s.createElement("h3",{className:"heading-4-sub ellipsis"},window.breakUpThousands(this.props.data.NB_FAN)," ",r("fan","fans",{count:this.props.data.NB_FAN}))))}});t.exports=o},{"../../../../core/i18n":255,"@deezer/components/common/Thumbnail":138,react:"react"}],220:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../core/i18n"),r=n.gettext,i=e("@deezer/components/common/Thumbnail"),o=s.createClass({displayName:"Album",propTypes:{data:s.PropTypes.object.isRequired},render:function(){return s.createElement("dd",{className:"nano-card-item has-shadow"},s.createElement("div",{className:"nano-card-picture"},s.createElement(i,{type:"album",height:120,width:120,imgHeight:110,imgWidth:110,context:"search_album",play:"on",preview:"on",overlay:"off",data:this.props.data})),s.createElement("aside",{className:"nano-card-info"},s.createElement("h2",{className:"heading-4 ellipsis"},s.createElement("a",{className:"evt-click",href:"/album/"+this.props.data.ALB_ID,"data-instance":"album_name"},this.props.data.ALB_TITLE)),s.createElement("h3",{className:"heading-4-sub ellipsis"},r("par")+" ",s.createElement("a",{className:"evt-click",href:"/artist/"+this.props.data.ART_ID,"data-instance":"artist_name"},this.props.data.ART_NAME))))}});t.exports=o},{"../../../../core/i18n":255,"@deezer/components/common/Thumbnail":138,react:"react"}],218:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=n.ngettext,o=e("@deezer/components/common/ThumbnailGrid"),l=s.createClass({displayName:"NoResult",propTypes:{query:s.PropTypes.string.isRequired},getInitialState:function(){return{albums:[],tracks:[],artists:[]}},componentDidMount:function(){this._fetchData()},render:function(){var e=r("Aucun résultat pour «<strong>%s</strong>»",{sprintf:[" "+window.encodeHTMLEntities(this.props.query)+" "]});return s.createElement("div",{className:"page-naboo-search",id:"page_search_noresult"},s.createElement("div",{className:"search-header"},s.createElement("h1",{className:"heading-1 ellipsis",dangerouslySetInnerHTML:{__html:e}}),s.createElement("h2",{className:"heading-2"},r("Découvrez ce qui cartonne sur Deezer en ce moment :"))),s.createElement("div",{className:"search-results"},this._renderArtists(),this._renderAlbums(),this._renderTracks()))},_renderAlbums:function(){return 0===this.state.albums.length?null:[s.createElement("h3",{className:"heading-2"},i("Album","Albums",{count:this.state.albums.length})),s.createElement(o,{data:this.state.albums,options:["name","artist"]})]},_renderArtists:function(){return 0===this.state.artists.length?null:[s.createElement("h3",{className:"heading-2"},i("Artiste","Artistes",{count:this.state.artists.length})),s.createElement(o,{data:this.state.artists,options:["name","fans"]})]},_renderTracks:function(){return 0===this.state.artists.length?null:[s.createElement("h3",{className:"heading-2"},i("Titre","Titres",{count:this.state.tracks.length})),s.createElement(o,{data:this.state.tracks,options:["name","artist"],type:"album"})]},_fetchData:function(){api.call("deezer.pageTops",{genre_id:0,type:"all",nb:7},function(e){this.isMounted()&&this.setState({artists:e.ITEMS.artist.data,albums:e.ITEMS.album.data,tracks:e.ITEMS.track.data})}.bind(this))}});t.exports=l},{"../../../core/i18n":255,"@deezer/components/common/ThumbnailGrid":148,react:"react"}],217:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=e("../../common/TagList"),o=s.createClass({displayName:"Header",propTypes:{filter:s.PropTypes.string.isRequired,query:s.PropTypes.string.isRequired,tags:s.PropTypes.array.isRequired},render:function(){if("TAG"===this.props.filter){var e=[];return this.props.query.split(" ").map(function(t){e.push({LABEL:"#"+t,selected:!0})}),s.createElement("div",{className:"search-header"},s.createElement(i,{tags:e,selected:!0,min:1,showLabel:!0}),s.createElement(i,{tags:this.props.tags,query:this.props.query,showLabel:!0,selectable:!0}))}var t=r("Résultats de recherche pour %s",{sprintf:["« "+window.encodeHTMLEntities(this.props.query)+" »"]});return s.createElement("div",{className:"search-header"},s.createElement("h1",{className:"heading-1 ellipsis"},t))}});t.exports=o},{"../../../core/i18n":255,"../../common/TagList":136,react:"react"}],132:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/array/from")["default"],n=e("react"),r=e("classnames"),i=e("../../core/i18n"),o=i.gettext,l=n.createClass({displayName:"NavBar",propTypes:{items:n.PropTypes.arrayOf(n.PropTypes.shape({id:n.PropTypes.string.isRequired,action:n.PropTypes.oneOfType([n.PropTypes.string,n.PropTypes.func]).isRequired,label:n.PropTypes.string.isRequired})).isRequired,active:n.PropTypes.string},getInitialState:function(){return{lastElementIndex:1/0,isOpenDropDown:!1}},componentDidMount:function(){this._getInitialWidth(),Events.subscribe(Events.layout.resize,this._onResize),Events.subscribe(Events.layout.adsBackground,this._onResize)},componentWillUnmount:function(){Events.unsubscribe(Events.layout.resize,this._onResize),Events.unsubscribe(Events.layout.adsBackground,this._onResize)},render:function(){return n.createElement("div",{className:"search-navbar"},n.createElement("nav",{className:"navbar",ref:"navbar"},n.createElement("ul",{className:"navbar-nav",ref:"navbarLinks"},this._renderList())))},_renderList:function(){for(var e=[],t=0,a=this.props.items.length;a>t;t++){if(!(t<this.state.lastElementIndex)){e.push(this._renderViewMore(t));break}e.push(this._renderItem(t))}return e},_renderItem:function(e){var t=this.props.items[e],a=r({active:this.props.active===t.id});return n.createElement("li",{key:t.id,className:a},"string"==typeof t.action?n.createElement("a",{href:t.action},t.label):n.createElement("a",{onClick:this._onItemClick.bind(this,t)},t.label))},_renderViewMore:function(e){for(var t=r({dropdown:!0,opened:this.state.isOpenDropDown}),a=r({icon:!0,"icon-chevron-down":!this.state.isOpenDropDown,"icon-chevron-up":this.state.isOpenDropDown}),s=[],i=e,l=this.props.items.length;l>i;i++)s.push(this._renderItem(i));return n.createElement("li",{className:t,key:"viewmore_"+this.state.lastElementIndex},n.createElement("a",{onClick:this._onToggleDropDown},o("Plus")," ",n.createElement("span",{className:a})),n.createElement("ul",{className:"dropdown-menu pull-right"},s))},_onToggleDropDown:function(){var e=!this.state.isOpenDropDown;this.setState({isOpenDropDown:e}),e?document.addEventListener("click",this._onToggleDropDown):document.removeEventListener("click",this._onToggleDropDown)},_onItemClick:function(e){e.action(e)},_onResize:function(){var e=1/0,t=0,a=this.refs.navbar.offsetWidth;this._buttonsWidth.forEach(function(s,n){t+=s,t>a&&e===1/0&&(e=n-1)}),this.state.lastElementIndex!==e&&this.setState({lastElementIndex:e})},_getInitialWidth:function(){this._buttonsWidth=[],s(this.refs.navbarLinks.childNodes).forEach(function(e,t){this._buttonsWidth[t]=e.getBoundingClientRect().width}.bind(this)),this._onResize()}});t.exports=l},{"../../core/i18n":255,"babel-runtime/core-js/array/from":304,classnames:"classnames",react:"react"}],283:[function(e,t,a){"use strict";var s,n=e("react"),r=e("react-dom"),i=e("@deezer/components/Page"),o={id:0,display:function(e){if(s=document.getElementById("naboo_content")){var t="object"==typeof e&&e.data&&e.data.sections?e.data.sections:[];r.render(n.createElement(i,{sections:t,type:"home"}),s,function(){naboo.afterLoad(!0)})}},leave:function(){s&&r.unmountComponentAtNode(s)}};t.exports=o},{"@deezer/components/Page":31,react:"react","react-dom":"react-dom"}],31:[function(e,t,a){"use strict";t.exports=e("./Page")},{"./Page":17}],17:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/object-without-properties")["default"],n=e("babel-runtime/helpers/extends")["default"],r=e("react"),i=e("./_elements/layouts/Highlight"),o=e("./_elements/layouts/DeeplinkList"),l=e("./_elements/layouts/List"),c=e("./_elements/layouts/Grid"),p=r.createClass({displayName:"Page",propTypes:{type:r.PropTypes.string.isRequired,sections:r.PropTypes.array},getDefaultProps:function(){return{sections:[]}},getInitialState:function(){return{sections:this.props.sections}},componentDidMount:function(){0===this.state.sections.length&&this._getSections()},render:function(){return r.createElement("div",{className:"home-container"},this._renderSections())},_renderSections:function(){for(var e=[],t=0,a=this.state.sections.length;a>t;t++){var i=this.state.sections[t],o=i.layout,l=s(i,["layout"]);l.page_type=this.props.type;var c=this._getLayout(o);e.push(r.createElement(c,n({key:t},l)))}return e},_getLayout:function(e){var t={highlight:i,"deeplink-list":o,list:l,grid:c};if("undefined"==typeof t[e])throw new Error('Layout "'+e+'" cannot be found');return t[e]},_getSections:function(){api.call({method:"page.get",data:{PAGE:this.props.type,VERSION:"2.0",SUPPORT:{highlight:i.SUPPORTED_TYPES,"deeplink-list":o.SUPPORTED_TYPES,list:l.SUPPORTED_TYPES,grid:c.SUPPORTED_TYPES},OPTIONS:["deeplink_subscribeoffer"]},success:function(e){this.isMounted()&&this.setState({sections:e.sections})}.bind(this)})}});t.exports=p},{"./_elements/layouts/DeeplinkList":27,"./_elements/layouts/Grid":28,"./_elements/layouts/Highlight":29,"./_elements/layouts/List":30,"babel-runtime/helpers/extends":314,"babel-runtime/helpers/object-without-properties":317,react:"react"}],317:[function(e,t,a){"use strict";a["default"]=function(e,t){var a={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a},a.__esModule=!0},{}],30:[function(e,t,a){(function(a){"use strict";var s=e("babel-runtime/helpers/define-property")["default"],n=e("babel-runtime/helpers/extends")["default"],r=e("react"),i=e("classnames"),o=e("../../navigate"),l=e("../../standardize"),c=e("../../Type"),p=e("../items/List"),d=a.live,u=r.createClass({displayName:"ListLayout",propTypes:{title:r.PropTypes.string,subtitle:r.PropTypes.string,separator:r.PropTypes.bool,target:r.PropTypes.string,items:r.PropTypes.array.isRequired,section_id:r.PropTypes.string.isRequired,page_type:r.PropTypes.string.isRequired},statics:{SUPPORTED_TYPES:[c.Generic,c.Album,c.App,c.Artist,c.Playlist,c.Radio,c.Show,c.Track,c.User],LOW_ITEMS_LIMIT_PER_LINE:2,HIGH_ITEMS_LIMIT_PER_LINE:3},getInitialState:function(){return{itemsLimitPerLine:this._getItemsLimitPerLine()}},componentWillMount:function(){Events.subscribeOnce(Events.layout.adsBackground,this._checkItemsLimit,"header_flow"),Events.subscribe(Events.layout.resize,this._checkItemsLimit,"header_flow")},componentDidMount:function(){this._logDisplay(),this._checkItemsLimit()},render:function(){var e=this.props.items.length<=u.LOW_ITEMS_LIMIT_PER_LINE?this.props.items.length:this.props.items.length-this.props.items.length%this.state.itemsLimitPerLine,t="home"===this.props.page_type?this.props.items.slice(0,e):this.props.items,a=s({"home-list":!0,clearfix:!0},"home-list-"+this.state.itemsLimitPerLine,!0);return r.createElement("div",{ref:"pageRecos",className:"home-tops"},this._renderTitle(),r.createElement("div",{className:i(a)},this._renderItems(t)))},_renderTitle:function(){if("undefined"==typeof this.props.title)return null;var e={};return"undefined"!=typeof this.props.target&&(e.onClick=o.bind(this)),r.createElement("div",n({className:"home-title"},e),r.createElement("h3",{className:"heading-3"},this.props.title),this._renderSubTitle())},_renderSubTitle:function(){return"undefined"==typeof this.props.subtitle?null:r.createElement("h4",{className:"heading-4-sub"},this.props.subtitle)},_renderItems:function(e){return e.map(this._renderItem)},_renderItem:function(e,t){if(-1===u.SUPPORTED_TYPES.indexOf(e.type))throw new Error('Items of type "'+e.type+'" are not handled by the List layout.');return r.createElement(p,n({key:t},l(e)))},_checkItemsLimit:function(){var e=this._getItemsLimitPerLine();e!==this.state.itemsLimitPerLine&&this.setState({itemsLimitPerLine:e})},_getItemsLimitPerLine:function(){if(this.refs&&this.refs.pageRecos)return this.refs.pageRecos.clientWidth<=1025?u.LOW_ITEMS_LIMIT_PER_LINE:u.HIGH_ITEMS_LIMIT_PER_LINE;var e=window.matchMedia||function(e){var t=window.styleMedia||window.media;return{matches:t?t.matchMedium(e||"all"):!0,media:e||"all"}};return e("(max-width: 1340px)").matches?u.LOW_ITEMS_LIMIT_PER_LINE:u.HIGH_ITEMS_LIMIT_PER_LINE},_logDisplay:function(){d.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})}});t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../Type":18,"../../navigate":32,"../../standardize":33,"../items/List":26,"babel-runtime/helpers/define-property":313,"babel-runtime/helpers/extends":314,classnames:"classnames",react:"react"}],313:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/define-property")["default"];a["default"]=function(e,t,a){return t in e?s(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},a.__esModule=!0},{"babel-runtime/core-js/object/define-property":307}],26:[function(e,t,a){"use strict";var s=e("react"),n=e("../../navigate"),r=e("@deezer/components/common/Thumbnail"),i=e("@deezer/components/common/Thumbnail/utils"),o=e("@deezer/components/common/Badge"),l=s.createClass({displayName:"ListItem",propTypes:{id:s.PropTypes.number,type:s.PropTypes.string.isRequired,pictures:s.PropTypes.arrayOf(s.PropTypes.shape({md5:s.PropTypes.string.isRequired,type:s.PropTypes.string.isRequired})).isRequired,play_button:s.PropTypes.bool,badge:s.PropTypes.number,title:s.PropTypes.string.isRequired,target:s.PropTypes.string,subtitle:s.PropTypes.string,caption:s.PropTypes.string,data:s.PropTypes.object,item_id:s.PropTypes.string.isRequired},getDefaultProps:function(){return{play_button:!1,weight:1,tags:[]}},render:function(){return s.createElement("div",{className:"home-list-item"},this._renderItem())},_renderItem:function(){return s.createElement("div",{className:"nano-card-item has-shadow"},s.createElement("div",{className:"nano-card-picture"},this._renderThumbnail()),s.createElement("div",{className:"nano-card-infos"},s.createElement("p",{className:"heading-3 ellipsis"},s.createElement(o,{counter:this.props.badge}),s.createElement("a",{onClick:n.bind(this)},this.props.title)),this._renderSubtitle(),this._renderCaption()))},_renderThumbnail:function(){if(this.props.pictures instanceof Array==!1||0===this.props.pictures.length)return null;var e=i.getImageSrc(this.props.pictures[0].type,this.props.pictures[0].md5,110,110),t={ID:this.props.id,TYPE:"dynamic_page_"+this.props.type+("artist"===this.props.type||"user"===this.props.type?"_radio":""),CONTEXT_ID:this.props.item_id};return s.createElement("div",{onClick:n.bind(this)},s.createElement(r,{id:this.props.id,type:this.props.type,multiCover:!0,height:110,width:110,context:t,play:this.props.play_button?"on":"off",preview:"on",overlay:"off",coverLink:!1,imgSrc:e}))},_renderSubtitle:function(){return"string"!=typeof this.props.subtitle?null:s.createElement("p",{className:"heading-2-sub ellipsis"},this.props.subtitle);},_renderCaption:function(){return"string"!=typeof this.props.caption?null:s.createElement("p",{className:"heading-4-sub ellipsis caption"},this.props.caption)}});t.exports=l},{"../../navigate":32,"@deezer/components/common/Badge":59,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,react:"react"}],29:[function(e,t,a){(function(a){"use strict";var s=e("babel-runtime/helpers/extends")["default"],n=e("react"),r=e("../../navigate"),i=e("../../standardize"),o=e("../../Type"),l=e("../items/Highlight"),c=a.live,p=n.createClass({displayName:"HighlightLayout",propTypes:{title:n.PropTypes.string,subtitle:n.PropTypes.string,separator:n.PropTypes.bool,target:n.PropTypes.string,items:n.PropTypes.array.isRequired,section_id:n.PropTypes.string.isRequired},statics:{SUPPORTED_TYPES:[o.Generic,o.Album,o.Artist,o.Playlist,o.Radio,o.Show,o.Track,o.User]},componentDidMount:function(){this._logDisplay()},render:function(){return n.createElement("div",null,this._renderTitle(),this._renderItems())},_renderTitle:function(){if("undefined"==typeof this.props.title)return null;var e={};return"undefined"!=typeof this.props.target&&(e.onClick=r.bind(this)),n.createElement("div",s({className:"home-title"},e),n.createElement("h3",{className:"heading-3"},this.props.title),this._renderSubTitle())},_renderSubTitle:function(){return"undefined"==typeof this.props.subtitle?null:n.createElement("h4",{className:"heading-4-sub"},this.props.subtitle)},_renderItems:function(){return this.props.items.map(this._renderItem)},_renderItem:function(e,t){if(-1===p.SUPPORTED_TYPES.indexOf(e.type))throw new Error('Items of type "'+e.type+'" are not handled by the Highlight layout.');return n.createElement(l,s({key:t},i(e)))},_logDisplay:function(){c.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})}});t.exports=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../Type":18,"../../navigate":32,"../../standardize":33,"../items/Highlight":25,"babel-runtime/helpers/extends":314,react:"react"}],25:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("./ProgressBar"),i=e("./Launcher"),o=e("./Player"),l=e("./Background"),c=e("@deezer/components/common/Thumbnail"),p=e("@deezer/components/common/Thumbnail/utils"),d=s.createClass({displayName:"Highlight",propTypes:{id:s.PropTypes.number,type:s.PropTypes.string,pictures:s.PropTypes.arrayOf(s.PropTypes.shape({md5:s.PropTypes.string.isRequired,type:s.PropTypes.string.isRequired})).isRequired,title:s.PropTypes.string,subtitle:s.PropTypes.string,target:s.PropTypes.string,play_button:s.PropTypes.bool,redirect_on_play:s.PropTypes.bool,data:s.PropTypes.object,item_id:s.PropTypes.string.isRequired},getDefaultProps:function(){return{pictures:[{md5:"",type:""}]}},getInitialState:function(){return{player_launched:!1,launcher_fade_active:!1,player_fade_active:!1,redirect_on_play:!1,seek_position:0}},componentDidMount:function(){"user"===this.props.type&&(Events.subscribe(Events.player.tracklist_changed,this._onTrackListChanged,"header_flow"),dzPlayer.playerLoaded?this._checkFlowStatus():Events.subscribeOnce(Events.player.playerLoaded,this._checkFlowStatus,"header_flow"))},componentWillUnmount:function(){clearTimeout(this._switchTimeout),"user"===this.props.type&&Events.unsubscribeAll("header_flow")},render:function(){if("user"!==this.props.type){var e=p.getImageSrc(this.props.pictures[0].type,this.props.pictures[0].md5,1200,280),t="generic"===this.props.type?"off":"on";(this.props.title||this.props.play_button)&&(t="force");var a={ID:this.props.id,TYPE:"dynamic_page_"+this.props.type+("artist"===this.props.type||"user"===this.props.type?"_radio":""),CONTEXT_ID:this.props.item_id},d=n({"home-flow home-highlight":!0,"has-play":this.props.play_button});return s.createElement("div",{className:d,onClick:this._togglePlay},s.createElement(c,{id:this.props.id,type:this.props.type,multiCover:!0,coverLink:"generic"===this.props.type?!0:this.props.redirect_on_play,playLink:this.props.redirect_on_play,width:1200,height:280,play:this.props.play_button?"force":"off",overlay:t,preview:"off",context:a,blur:"generic"===this.props.type?0:3,redirectUrl:"generic"===this.props.type?this.props.target:void 0,imgSrc:e}),s.createElement("div",{className:"flow-container"},s.createElement("h1",{className:"heading-1 heading-inverse"},this.props.target?s.createElement("a",{className:"evt-click",href:this.props.target},this.props.title):this.props.title),s.createElement("h2",{className:"heading-2 heading-inverse"},this.props.subtitle)))}var u=n({"flow-container":!0,active:this.state.player_fade_active}),m=n({"flow-container":!0,"flow-launcher":!0,active:this.state.launcher_fade_active});return s.createElement("div",{className:"home-flow"},s.createElement(l,{pictures:this.props.pictures,type:this.props.type}),this.state.player_launched?s.createElement(r,null):"",s.createElement("div",{className:"flow-overlay"}),this.state.player_launched?s.createElement("div",{className:u},s.createElement(o,{id:this.props.id,type:this.props.type,item_id:this.props.item_id})):s.createElement("div",{className:m},s.createElement(i,this.props)))},_onTrackListChanged:function(e,t){return"undefined"==typeof t||"set"===t.type&&!t.first?(this._checkFlowStatus(),!0):!1},_switchTimeout:null,_checkFlowStatus:function(){var e=dzPlayer.helper.isPlayingUserFlow();if(e){if(this.state.player_launched&&this.state.player_fade_active)return!1;if(!this.state.launcher_fade_active)return this._switchToPlayerNow(),!1;this._switchToPlayer()}else{if(!this.state.player_launched&&this.state.launcher_fade_active)return!1;this._switchToLauncher()}},_switchToLauncher:function(){this.setState({player_fade_active:!1},function(){this._switchTimeout=setTimeout(function(){this._loadLauncher()}.bind(this),400)})},_switchToPlayer:function(){this.setState({launcher_fade_active:!1},function(){this._switchTimeout=setTimeout(function(){this._loadPlayer()}.bind(this),600)})},_switchToPlayerNow:function(){this.setState({launcher_fade_active:!1},function(){this._loadPlayerNow()})},_loadLauncher:function(){this.setState({launcher_fade_active:!1},function(){this._switchTimeout=setTimeout(function(){this.setState({player_launched:!1,launcher_fade_active:!0})}.bind(this),600)})},_loadPlayer:function(){this.setState({player_fade_active:!1},function(){this._switchTimeout=setTimeout(function(){this.setState({player_launched:!0,player_fade_active:!0})}.bind(this),600)})},_loadPlayerNow:function(){this.setState({player_fade_active:!1},function(){this.setState({player_launched:!0,player_fade_active:!0})})},_togglePlay:function(){this.props.play_button&&Events.trigger(Events.thumbnail.togglePlay)}});t.exports=d},{"./Background":21,"./Launcher":22,"./Player":23,"./ProgressBar":24,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,classnames:"classnames",react:"react"}],24:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=s.createClass({displayName:"ProgressBar",getInitialState:function(){return{position:this._calculatePosition(dzPlayer.getPosition())}},componentDidMount:function(){Events.subscribe(Events.player.position,this._setPlayerPosition,"home_flow")},shouldComponentUpdate:function(e,t){return t.position!==this.state.position},componentWillUnmount:function(){Events.unsubscribe(Events.player.position,this._setPlayerPosition)},render:function(){var e=n({"flow-progress-bar":!0,seek:USER.OPTIONS.ads_display===!1}),t={width:this.state.position+"%"};return s.createElement("div",{ref:"progressBar",role:"progressbar",className:e,onClick:this._seek},s.createElement("div",{className:"flow-progress-bar-overlay",style:t}))},_setPlayerPosition:function(e,t){this.setState({position:this._calculatePosition(t)})},_calculatePosition:function(e){return Math.round(1e4*e/dzPlayer.getCurrentSong("DURATION"))/100},_seek:function(e){if(!dzPlayer.control.canSeek())return void e.preventDefault();var t=this.refs.progressBar,a=(e.pageX-t.getBoundingClientRect().left+document.body.scrollLeft)/t.offsetWidth;dzPlayer.control.seek(a)}});t.exports=r},{classnames:"classnames",react:"react"}],23:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../../core/i18n"),i=r.gettext,o=e("@deezer/components/common/Thumbnail"),l=e("@deezer/components/common/Thumbnail/utils"),c=e("@deezer/components/common/Favorite"),p=e("@deezer/components/common/Dislike"),d=e("@deezer/components/_mixins/notification"),u=s.createClass({displayName:"Player",propTypes:{id:s.PropTypes.number.isRequired,type:s.PropTypes.string.isRequired,item_id:s.PropTypes.string.isRequired},mixins:[d],getInitialState:function(){return{pictures_index:0,player_type:"radio",radio_skip_blocked:!dzPlayer.skipRadioAllowed(),hasLyrics:dzPlayer.hasLyrics()}},componentWillMount:function(){this._preloaded_data=[dzPlayer.getCurrentSong(),dzPlayer.getNextSong()]},componentDidMount:function(){this._setOnair(),Events.resolve(Events.flow.playerDisplay),Events.subscribe(Events.player.displayCurrentSong,this._setPlayerState,"header_flow"),Events.subscribe(Events.player.changePlayerType,this._setPlayerTypeState,"header_flow")},componentWillUpdate:function(e,t){this.state.pictures_index!==t.pictures_index&&this._closeContextMenu()},componentDidUpdate:function(){this._setOnair()},componentWillUnmount:function(){Events.unsubscribe(Events.player.displayCurrentSong,this._setPlayerState),Events.unsubscribe(Events.player.changePlayerType,this._setPlayerTypeState)},render:function(){var e=[],t=[],a=[];this._preloaded_data.map(function(r,i){var c=this.state.pictures_index===i,p=r.SNG_ID+"_"+i,d=n({"flow-thumbnail":!0,active:c}),u={ID:this.props.id,TYPE:"dynamic_page_"+this.props.type+("artist"===this.props.type||"user"===this.props.type?"_radio":""),CONTEXT_ID:this.props.item_id},m=l.getImageSrc("cover",r.ALB_PICTURE,180,180);e.push(s.createElement("div",{className:d,key:"cover_"+p,onClick:this._togglePlay},s.createElement(o,{id:USER.USER_ID,type:"user",play:"on",playLink:!1,coverLink:!1,context:u,width:180,height:180,showOptions:!0,imgSrc:m,data:r}))),t.push(s.createElement("span",{className:"flow-play-track ellipsis"+(c?" active":""),key:"title_"+p},r.SNG_TITLE)),a.push(s.createElement("span",{className:"flow-play-track ellipsis"+(c?" active":""),key:"artist_"+p},r.ART_NAME))}.bind(this));var r=this._preloaded_data[this.state.pictures_index],d=n({"evt-over evt-out":this.state.hasLyrics,invisible:!this.state.hasLyrics});return s.createElement("div",{className:"flow-content"},e,s.createElement("div",{className:"flow-play-info"},s.createElement("p",{className:"sticker sticker-flow"},i("FLOW")),s.createElement("p",{className:"heading-1 heading-inverse"},s.createElement("a",{className:"evt-click",href:"/album/"+r.ALB_ID},t)),s.createElement("p",{className:"heading-1-sub heading-inverse"},s.createElement("span",{className:"flow-by"},i("par")),s.createElement("a",{className:"evt-click",href:"/artist/"+r.ART_ID},a)),s.createElement("ul",{className:"flow-action-list clearfix"},s.createElement("li",{className:"flow-action"},s.createElement(p,{style:"heart_medium",tooltip:!0,elId:"flow-unlove",overlay:!1,id:r.SNG_ID,onClickCallback:this._onDislikeClick})),s.createElement("li",{className:"flow-action"},s.createElement(c,{type:"song",style:"heart_medium",overlay:!1,context:"flow_header",elId:"flow-love",tooltip:!0,id:r.SNG_ID,onClickCallback:this._onFavoriteClick})),s.createElement("li",{className:"flow-action"},s.createElement("a",{className:d,"data-tooltip":"1","data-tooltip-gravity":"s","data-tooltip-delay":"400",title:i("Afficher les paroles"),onClick:this._openLyrics,role:"button"},s.createElement("span",{className:"icon-52 icon-stack icon-stack-circle"},s.createElement("span",{className:"icon icon-lyrics"})))),s.createElement("li",{className:"flow-action next"},s.createElement("a",{className:"icon icon-24 icon-next",disabled:"ads"===this.state.player_type,role:"button",onClick:this._next})))))},_onDislikeClick:function(){this.displayNotification("dislike"),setTimeout(this._next,300)},_onFavoriteClick:function(e,t,a){a&&this.displayNotification("like")},_togglePlay:function(){Events.trigger(Events.thumbnail.togglePlay)},_setPlayerTypeState:function(){this.setState({player_type:dzPlayer.getPlayerType()})},_setPlayerState:function(){if(!dzPlayer.helper.isPlayingUserFlow())return!1;if(dzPlayer.getCurrentSong().SNG_ID===this._preloaded_data[this.state.pictures_index].SNG_ID)return!1;var e={player_type:dzPlayer.getPlayerType()},t=this.state.pictures_index>=2?0:this.state.pictures_index+1,a=t>=2?0:t+1,s=dzPlayer.getNextSong()||{};this._preloaded_data[a]=s,e.pictures_index=t,e.radio_skip_blocked=!dzPlayer.skipRadioAllowed(),e.hasLyrics=dzPlayer.hasLyrics(),this.setState(e)},_setOnair:function(){window.setTimeout(function(){dzPlayer.isPlaying()&&onair.onPlay()},0)},_next:function(e){e&&e.stopPropagation&&e.stopPropagation(),this.state.radio_skip_blocked?notificationBar.display("flow_skip_push",{}):dzPlayer.control.nextSong()},_closeContextMenu:function(){Events.trigger(Events.menu.contextMenuClose,"dynamic_page_"+this.props.type+("artist"===this.props.type||"user"===this.props.type?"_radio":""))},_openLyrics:function(){"ads"!==this.state.player_type&&Events.trigger(Events.menu.openPanel,"lyrics")}});t.exports=u},{"../../../../../core/i18n":255,"@deezer/components/_mixins/notification":40,"@deezer/components/common/Dislike":121,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,classnames:"classnames",react:"react"}],121:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../core/i18n"),i=r.gettext,o=e("../../core/favorite"),l=s.createClass({displayName:"Dislike",propTypes:{id:s.PropTypes.string.isRequired,type:s.PropTypes.string,style:s.PropTypes.oneOf(["heart","heart_medium","heart_large"]),overlay:s.PropTypes.bool,tooltip:s.PropTypes.bool,tooltip_gravity:s.PropTypes.string,elId:s.PropTypes.string,onClickCallback:s.PropTypes.func},getDefaultProps:function(){return{type:"disliked_song",style:"heart",overlay:!0,tooltip:!1,tooltip_gravity:"s",elId:null,onClickCallback:function(){}}},getInitialState:function(){return{active:!1}},componentDidMount:function(){Events.subscribe(Events.user.addFavorite,this._onFavoriteToggle),Events.subscribe(Events.user.deleteFavorite,this._onFavoriteToggle)},componentWillReceiveProps:function(){this.setState({active:!1})},shouldComponentUpdate:function(e,t){return this.state.active!==t.active||this.props.id!==e.id},componentWillUnmount:function(){Events.unsubscribe(Events.user.addFavorite,this._onFavoriteToggle),Events.unsubscribe(Events.user.deleteFavorite,this._onFavoriteToggle)},render:function(){var e=n({action:"heart"===this.props.style,"evt-over evt-out":this.props.tooltip}),t=n({"icon-32":"heart"===this.props.style,"icon-52":"heart_medium"===this.props.style,"icon-64":"heart_large"===this.props.style,"icon-stack-hover":this.props.overlay,"icon-stack icon-stack-circle icon-stack-circle-striked":!0}),a=n({"icon icon-unlove":!0,active:this.state.active&&dzPlayer.skipRadioAllowed()}),r={};return this.props.tooltip&&(r={enabled:"1",gravity:this.props.tooltip_gravity,delay:"400",offset:2}),s.createElement("a",{className:e,id:this.props.elId,"data-tooltip":r.enabled,"data-tooltip-offset":r.offset,"data-tooltip-gravity":r.gravity,"data-tooltip-delay":r.delay,title:i("Ne plus me proposer ce titre"),onClick:this._onDislikeClick,role:"button"},s.createElement("span",{className:t},s.createElement("span",{className:a})))},_onFavoriteToggle:function(e,t){var a=Number(this.props.id),s=Number(t.SNG_ID);return a!==s||"disliked_song"!==t.type?!1:void this.setState({active:userData.isDisliked(a)})},_onDislikeClick:function(e){e.stopPropagation(),o.add({type:this.props.type,id:this.props.id}),this.props.onClickCallback()}});t.exports=l},{"../../core/favorite":253,"../../core/i18n":255,classnames:"classnames",react:"react"}],40:[function(e,t,a){"use strict";var s=e("../../core/i18n"),n=s.gettext,r={like:!0,dislike:!0},i={dislike_first:n("Flow ne vous proposera plus ce titre, promis."),dislike:n("Non merci Flow."),like_first:n("Ajouté aux Coups de cœur. Allez-y, continuez à ajouter, Flow apprend à vous connaître."),like:n("Ajouté aux Coups de cœur")},o={displayNotification:function(e){if(!r[e])return!1;var t="number"==typeof USER.SETTING.site["nb_flowplayer_"+e+"_notification"]?USER.SETTING.site["nb_flowplayer_"+e+"_notification"]:0;if(3>t){var a=i[e+(0===t?"_first":"")];window.notification.display(null,{message:a});var s={};s["nb_flowplayer_"+e+"_notification"]=t+1,userSetting.set({site:s})}}};t.exports=o},{"../../core/i18n":255}],22:[function(e,t,a){"use strict";var s=e("react"),n=s.createClass({displayName:"Launcher",propTypes:{id:s.PropTypes.number.isRequired,type:s.PropTypes.string.isRequired,title:s.PropTypes.string.isRequired,subtitle:s.PropTypes.string.isRequired,target:s.PropTypes.string,item_id:s.PropTypes.string.isRequired},player_launched:!1,render:function(){return s.createElement("div",{className:"flow-content"},s.createElement("div",{className:"flow-btn",role:"button",onClick:this._onClickFlow},s.createElement("span",{className:"icon-52 icon-stack icon-stack-circle"},s.createElement("span",{className:"icon icon-play"}))),s.createElement("h1",{className:"heading-1 heading-inverse"},this.props.title),s.createElement("h2",{className:"heading-2 heading-inverse"},this.props.subtitle))},_onClickFlow:function(){return"user"!==this.props.type&&"string"==typeof this.props.target?void www.navigate(this.props.target):void(this.player_launched!==!0&&(this.player_launched=!0,dzPlayer.play({radio:!0,type:this.props.type,id:this.props.id,context:{ID:this.props.id,TYPE:"dynamic_page_"+this.props.type+("artist"===this.props.type||"user"===this.props.type?"_radio":""),CONTEXT_ID:this.props.item_id}}),tracking.track("flow_click",{type:this.props.type,instance:"dynamic_page"})))}});t.exports=n},{react:"react"}],21:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../../core/Blurred"),i=s.createClass({displayName:"Background",propTypes:{type:s.PropTypes.string,pictures:s.PropTypes.array},getInitialState:function(){var e=dzPlayer.helper.isPlayingUserFlow();return{pictures_index:e?this.props.pictures.length:0,player_launched:e,preloaded_pictures:this._getPreloadedPictures()}},componentDidMount:function(){this.props.pictures.length>0&&!this.state.player_launched&&this._setLoopPicturesInterval(),this._renderBlur(),"user"===this.props.type&&Events.subscribe(Events.player.play,this._setPlayerBackground,"header_flow")},componentDidUpdate:function(){this._renderBlur()},componentWillUnmount:function(){this._clearLoopPicturesInterval(),Events.unsubscribe(Events.player.play,this._setPlayerBackground)},render:function(){var e=this.state.preloaded_pictures.map(function(e,t){var a=n({"background-position":!0,active:this.state.pictures_index===t});return s.createElement("div",{key:e.md5+"_"+t,ref:e.md5+"_"+t,className:a})}.bind(this));return s.createElement("div",{className:"flow-cover"},e)},_renderBlur:function(){this.state.preloaded_pictures.map(function(e,t){var a=this.refs[e.md5+"_"+t];return new r(a).setUrl(window.SETTING_DOMAIN_IMG+"/"+e.type+"/"+e.md5+"/500x500.jpg").setBlurStrength(3).render()}.bind(this))},_background_loop_interval:0,_preloaded_pictures:[],_setPlayerBackground:function(){var e=dzPlayer.helper.isPlayingUserFlow();if(!this.state.player_launched&&!e)return!1;if(!this.state.player_launched&&e)return this._clearLoopPicturesInterval(),this._setBackgroundTransition(),!1;if(this.state.player_launched&&!e)return this._setBackgroundTransition(),this._setLoopPicturesInterval(),!1;var t=dzPlayer.getNextSong()||{},a=this.state.pictures_index>=this.state.preloaded_pictures.length-1?this.props.pictures.length:this.state.pictures_index+1,s=a>=this.state.preloaded_pictures.length-1?this.props.pictures.length:a+1;this._preloaded_pictures[s]={md5:t.ALB_PICTURE,type:"cover"},this.setState({pictures_index:a,preloaded_pictures:this._preloaded_pictures,player_launched:!0})},_setBackgroundTransition:function(){var e=dzPlayer.helper.isPlayingUserFlow();this.setState({player_launched:e,preloaded_pictures:e?this._getPreloadedPictures():this.state.preloaded_pictures},this._setBackgroundTransitionCallback)},_setBackgroundTransitionCallback:function(){var e=dzPlayer.helper.isPlayingUserFlow();window.setTimeout(function(){this.setState({pictures_index:e?this.props.pictures.length:0})}.bind(this),400)},_clearLoopPicturesInterval:function(){clearInterval(this._background_loop_interval)},_setLoopPicturesInterval:function(){this.props.pictures.length>0&&(this._clearLoopPicturesInterval(),this._background_loop_interval=window.setInterval(this._setLoopPicturesBackground,4e3))},_setLoopPicturesBackground:function(){var e=(this.state.pictures_index+1)%this.props.pictures.length;this.setState({pictures_index:e,player_launched:!1})},_getPreloadedPictures:function(){var e=this.props.pictures.slice();return dzPlayer.helper.isPlayingUserFlow()&&e.push({md5:dzPlayer.getCurrentSong().ALB_PICTURE,type:"cover"},{md5:dzPlayer.getNextSong().ALB_PICTURE,type:"cover"},{md5:"d41d8cd98f00b204e9800998ecf8427e",type:"cover"}),this._preloaded_pictures=e,e}});t.exports=i},{"../../../../../core/Blurred":248,classnames:"classnames",react:"react"}],28:[function(e,t,a){(function(a){"use strict";var s=e("babel-runtime/helpers/extends")["default"],n=e("react"),r=e("classnames"),i=e("../../navigate"),o=e("../../standardize"),l=e("../../Type"),c=e("../items/Grid"),p=a.live,d=n.createClass({displayName:"GridLayout",propTypes:{title:n.PropTypes.string,subtitle:n.PropTypes.string,separator:n.PropTypes.bool,related:n.PropTypes.shape({target:n.PropTypes.string.isRequired,label:n.PropTypes.string}),items:n.PropTypes.array.isRequired,section_id:n.PropTypes.string.isRequired},statics:{SUPPORTED_TYPES:[l.Generic,l.Album,l.Artist,l.Playlist,l.Radio,l.Show,l.Track],MIN_NB_VISIBLE_ITEMS_LIMIT_PER_LINE:3},componentDidMount:function(){this._logDisplay()},render:function(){return n.createElement("div",{className:"home-mix"},this._renderTitle(),n.createElement("ul",{className:"thumbnail-grid"},this._renderItems()),this._renderRelatedButton())},_renderRelatedButton:function(){return"object"==typeof this.props.related&&this.props.related.target&&this.props.related.label?n.createElement("div",{className:"view-more-container"},n.createElement("button",s({className:"btn btn-block btn-view-more-inverse",type:"button"},this._targetEvents()),n.createElement("span",{className:"label ellipsis"},this.props.related.label))):null},_renderTitle:function(){return"undefined"==typeof this.props.title?null:n.createElement("div",s({className:"home-title"},this._targetEvents()),n.createElement("h3",{className:"heading-3"},this.props.title),this._renderSubTitle())},_renderSubTitle:function(){return"undefined"==typeof this.props.subtitle?null:n.createElement("h4",{className:"heading-4-sub"},this.props.subtitle)},_renderItems:function(){return this.props.items.map(this._renderItem)},_renderItem:function(e,t){if(-1===d.SUPPORTED_TYPES.indexOf(e.type))throw new Error('Items of type "'+e.type+'" are not handled by the Grid layout.');var a=this.props.items.length,s=r({"hide-lg":t>=d.MIN_NB_VISIBLE_ITEMS_LIMIT_PER_LINE&&t>=a-a%3,"hide-md":t>=d.MIN_NB_VISIBLE_ITEMS_LIMIT_PER_LINE&&t>=a-a%4,"hide-sm":t>=d.MIN_NB_VISIBLE_ITEMS_LIMIT_PER_LINE&&t>=a-a%5,"hide-xs":t>=d.MIN_NB_VISIBLE_ITEMS_LIMIT_PER_LINE&&t>=a-a%6});return n.createElement("li",{key:t,className:s},n.createElement(c,o(e)))},_targetEvents:function(){var e={};return"object"==typeof this.props.related&&this.props.related.target&&(e.onClick=i.bind(this)),e},_logDisplay:function(){p.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})}});t.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../Type":18,"../../navigate":32,"../../standardize":33,"../items/Grid":20,"babel-runtime/helpers/extends":314,classnames:"classnames",react:"react"}],20:[function(e,t,a){"use strict";var s=e("react"),n=e("../../navigate"),r=e("@deezer/components/common/Thumbnail"),i=e("@deezer/components/common/Thumbnail/utils"),o=e("@deezer/components/common/TagList"),l=s.createClass({displayName:"GridItem",propTypes:{id:s.PropTypes.number,type:s.PropTypes.string.isRequired,target:s.PropTypes.string,pictures:s.PropTypes.arrayOf(s.PropTypes.shape({md5:s.PropTypes.string.isRequired,type:s.PropTypes.string.isRequired})).isRequired,play_button:s.PropTypes.bool,title:s.PropTypes.string,subtitle:s.PropTypes.string,caption:s.PropTypes.string,weight:s.PropTypes.number,data:s.PropTypes.object,tags:s.PropTypes.arrayOf(s.PropTypes.string),item_id:s.PropTypes.string.isRequired},getDefaultProps:function(){return{play_button:!1,subtitle:"",weight:1,tags:[]}},render:function(){var e=[this._renderThumbnail()],t=this.props.subtitle,a="string"==typeof this.props.caption,n=this.props.tags.length>0;return(a||n||t)&&e.push(s.createElement("div",{key:"infos",className:"thumbnail-infos"},t?s.createElement("p",{className:"heading-4 ellipsis"},this.props.subtitle):null,a?s.createElement("p",{className:"heading-5-sub"},this.props.caption):n?this._renderTags():null)),s.createElement("div",{className:"thumbnail-col"},e)},_renderThumbnail:function(){if(this.props.pictures instanceof Array==!1||0===this.props.pictures.length)return null;var e="generic"!==this.props.type&&("radio"!==this.props.type||1!==this.props.id),t=i.getImageSrc(this.props.pictures[0].type,this.props.pictures[0].md5,250,250),a={ID:this.props.id,TYPE:"dynamic_page_"+this.props.type+("artist"===this.props.type||"user"===this.props.type?"_radio":""),CONTEXT_ID:this.props.item_id};return s.createElement("div",{key:"thumbnail",className:"thumbnail-wrapper",onClick:n.bind(this)},s.createElement(r,{id:this.props.id,type:this.props.type,multiCover:!0,play:this.props.play_button?"on":"off",preview:"on",title:this.props.title,showOptions:e,data:this.props.data,coverLink:!1,context:a,overlay:this.props.title?"force":"off",imgSrc:t}))},_renderTags:function(){var e=this.props.tags.map(function(e){return{LABEL:e}});return s.createElement(o,{tags:e,type:"text",link:gatekeeper.isAllowed("search_tag")})}});t.exports=l},{"../../navigate":32,"@deezer/components/common/TagList":136,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,react:"react"}],27:[function(e,t,a){(function(a){"use strict";var s=e("babel-runtime/helpers/extends")["default"],n=e("react"),r=e("../../navigate"),i=e("../../standardize"),o=e("../../Type"),l=e("../items/DeeplinkList"),c=a.live,p=n.createClass({displayName:"DeeplinkListLayout",propTypes:{title:n.PropTypes.string,subtitle:n.PropTypes.string,separator:n.PropTypes.bool,target:n.PropTypes.string,items:n.PropTypes.array.isRequired,section_id:n.PropTypes.string.isRequired},statics:{SUPPORTED_TYPES:[o.Generic,o.Deeplink]},componentDidMount:function(){this._logDisplay()},render:function(){return n.createElement("div",{className:"home-nav home-list home-list-"+this.props.items.length+" clearfix"},this._renderTitle(),n.createElement("div",null,this._renderItems()))},_renderTitle:function(){if("undefined"==typeof this.props.title)return null;var e={};return"undefined"!=typeof this.props.target&&(e.onClick=r.bind(this)),n.createElement("div",s({className:"home-title"},e),n.createElement("h3",{className:"heading-3"},this.props.title),this._renderSubTitle())},_renderSubTitle:function(){return"undefined"==typeof this.props.subtitle?null:n.createElement("h4",{className:"heading-4-sub"},this.props.subtitle)},_renderItems:function(){return this.props.items.map(this._renderItem)},_renderItem:function(e,t){if(-1===p.SUPPORTED_TYPES.indexOf(e.type))throw new Error('Items of type "'+e.type+'" are not handled by the DeeplinkList layout.');return n.createElement(l,s({key:t},i(e)))},_logDisplay:function(){c.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})}});t.exports=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../Type":18,"../../navigate":32,"../../standardize":33,"../items/DeeplinkList":19,"babel-runtime/helpers/extends":314,react:"react"}],33:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/assign")["default"],n=function(e){e=s({},e);var t={generic:"id",album:"ALB_ID",app:"APP_ID",artist:"ART_ID",playlist:"PLAYLIST_ID",radio:"RADIO_ID",show:"SHOW_ID",track:"SNG_ID",user:"USER_ID"};return t[e.type]&&(e.id=Number(e.data[t[e.type]])),e};t.exports=n},{"babel-runtime/core-js/object/assign":305}],19:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../navigate"),i=s.createClass({displayName:"DeeplinkListItem",propTypes:{type:s.PropTypes.string.isRequired,target:s.PropTypes.string.isRequired,icon:s.PropTypes.string.isRequired,title:s.PropTypes.string.isRequired,item_id:s.PropTypes.string.isRequired},render:function(){var e=n({"icon icon-home":!0,"icon-top-playlist":"top"===this.props.icon,"icon-new-releases":"new_release"===this.props.icon,"icon-hear-this":"feed"===this.props.icon,"icon-mix":"mix"===this.props.icon,"icon-podcast":"show"===this.props.icon,"icon-user":"profile"===this.props.icon,"icon-download":"download"===this.props.icon,"icon-album":"album"===this.props.icon,"icon-playlist":"playlist"===this.props.icon,"icon-love":"favorite"===this.props.icon,"icon-app":"app"===this.props.icon,"icon-link":"default"===this.props.icon});return s.createElement("div",{className:"home-list-item"},s.createElement("div",{className:"nano-card-item has-shadow",onClick:r.bind(this)},s.createElement("span",{className:e}),s.createElement("span",{className:"heading-4"},this.props.title),s.createElement("span",{className:"icon icon-16 icon-arrow-right pull-right"})))}});t.exports=i},{"../../navigate":32,classnames:"classnames",react:"react"}],32:[function(e,t,a){(function(e){"use strict";var a=e.live,s=function(){a.log.send("navigation",{event:"onClick",properties:{id:this.props.item_id,type:this.props.type}});var e;return"object"==typeof this.props.related&&this.props.related.target&&(e=this.props.related.target),e||"string"!=typeof this.props.target||(e=this.props.target),e?/^\//.test(e)?void www.navigate(e):void(document.location=e):void 0};t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,a){"use strict";var s={Generic:"generic",Deeplink:"deeplink",Album:"album",Artist:"artist",App:"app",Playlist:"playlist",Radio:"radio",Show:"show",Track:"track",User:"user",Native:"native"};t.exports=s},{}],282:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("../core/i18n"),o=i.gettext,l=i.ngettext,c={id:0,template:"naboo/feed",card_id:0,nb_card:10,unread:0,loadComplete:!1,initialized:!1,ads_position:0,non_displayed_cards:{},waveform_id:[],current_yscroll:0,current_play_sng_id:0,last_play_sng_id:0,total_cards_height:0,total_cards:0,on_scroll:!1,timeout_id:0,nb_scroll:1,current_separator_timestamp:0,first_week_separator_added:!1,first_day_separator_added:!1,storage:[],nb_cards_noads:0,nb_cards_noads_on_prepend:0,next_refresh_timeout_id:0,is_webview:!1,comment_height:{},comment_height_total:0,waveform_selector:["#content > .card-edito-track > .info > .info-down > .progress_bar","#content > .share-song > .info > .card-follow > .track > .info > .progress_bar","#content > .card-social > .info > .card-follow > .track > .info > .progress_bar","#content > .card-trending > .info > .info-down .progress_bar"].join(","),more_friend_selector:"#content > .card-social > .info .show-more-friends",comment_button_selector:"#content > .card > footer > .btn-comment",init:function(){try{return c.registerHelper(),c.initialized=!0,c.first_week_separator_added=!1,c.first_day_separator_added=!1,c.updateUnread(0),r(document).on("click",c.waveform_selector,function(e){var t=r(this).data(),a=r("#"+t.cardId),s=r((a.hasClass("share-song")?".card-follow ":"")+"figure > a",a);if(c.current_play_sng_id===t.id){if(0===dzPlayer.position||c.current_play_sng_id!==dzPlayer.getCurrentSong("SNG_ID"))return s.trigger("click"),!0;var n=(e.pageX-r(this).offset().left)/r(this).width();dzPlayer.control.seek(n)}else s.trigger("click")}),r(document).on("click",c.more_friend_selector,function(e){e.preventDefault();var t=r(this).parent().parent();r(".hide",t).removeClass("hide"),r(".btn",t).hide()}),r(document).on("click",c.comment_button_selector,function(){var e=r(this),t=e.data(),a=e.parent().next(),s=a.outerHeight()+e.offset().top+e.parent().outerHeight();a.commentbox({type:t.type,nb:10,start:4,element_id:t.elementId,content_id:t.trackingId,infinite_scroll:!1,publish_on_enter:!0,adjust_onscroll:!0,display:!1,counter:e,addCallback:c.addToStorageComment,displayCallback:c.displayCommentCallback,template:"feed"}),!a.is(":visible")&&s>client_height&&r("#page_content").animate({scrollTop:c.current_yscroll+s-client_height},"slow"),a.finish().slideToggle(function(){c.displayCommentCallback(t.trackingId)})}),"undefined"!=typeof live&&c.is_webview===!0&&0!==USER.USER_ID&&(live.addInternalChannel(USER.USER_ID+"_"+USER.USER_ID+"_STREAM"),live.addInternalChannel("-1_"+USER.USER_ID+"_USERFEED_"+USER.USER_ID)),c.initEventsSubscribe(),!0}catch(e){error.log(e)}},initEventsSubscribe:function(){try{var e=r("body > .page-wrapper > .page-header").height(),t=c.current_feed_window_bottom=client_height-e;Events.subscribe(Events.layout.resize,function(){t=client_height-e},"feed"),Events.subscribe(Events.player.playerLoaded,function(){c.current_play_sng_id=dzPlayer.getCurrentSong("SNG_ID")},"feed"),Events.subscribe(Events.layout.scroll,function(e,a){0!==a.yscroll&&(c.current_yscroll=a.yscroll),c.current_feed_window_bottom=a.yscroll+t,c.timeout_id>0||(c.timeout_id=setTimeout(function(){c.timeout_id=0;var e=c.current_yscroll-a.yscroll;Math.abs(e)>1500||c.logDisplayedCard()},1e3))},"feed"),Events.subscribe(Events.player.play,function(){0!==c.current_play_sng_id&&jQuery.inArray(c.current_play_sng_id,c.waveform_id)>-1&&r(".waveform_"+c.current_play_sng_id,"#content").css("width","0%"),c.current_play_sng_id=dzPlayer.getCurrentSong("SNG_ID"),c.current_play_sng_duration=dzPlayer.getCurrentSong("DURATION")},"feed"),Events.subscribe(Events.player.position,function(e,t){jQuery.inArray(c.current_play_sng_id,c.waveform_id)>-1&&c.current_play_sng_id===dzPlayer.getCurrentSong("SNG_ID")&&c.setWaveformPosition(c.current_play_sng_id,t)},"feed")}catch(a){error.log(a)}},display:function(){try{c.initialized||c.init();var e=["song","album","artist","playlist","radio","show","episode"];c.is_webview||e.push("promo");var t=function(){api.call({method:"musicfeed.getList",data:{last_card_id:c.card_id,nb:c.nb_card,filter_types:e},success:c.draw,error:c.drawError,callback_parameters:{api_called:!0}})};return c.on_scroll?t():(templating.load(c.template),c.is_webview===!1&&naboo.afterLoad(!0),c.card_id=0,c.total_cards=0,c.ads_position=0,c.nb_cards_noads=0,ads.feed_ads_position=0,c.current_separator_timestamp=0,c.loadComplete=!1,c.storage.length>0&&(t=function(){c.draw(c.storage,!1)}),c.is_webview===!0?c.drawWebviewFlowHeader(t):t()),!0}catch(a){error.log(a)}},displayNextCard:function(){try{var e="feed"!==www.getCurrentPath()&&c.is_webview===!1?c.addToStorage:c.draw;api.call("musicfeed.getList",{last_card_id:0,nb:1},e,{api_called:!0,prepend_data:!0})}catch(t){error.log(t)}},addToStorage:function(e){try{if("undefined"!=typeof e.data&&e.count>0){var t=e.data[0];c.storage.unshift(t),c.updateUnread(),"undefined"!=typeof e.next_refresh&&c.setNextRefresh(e.next_refresh)}}catch(a){error.log(a)}},addToStorageComment:function(e,t){try{for(var a in c.storage)if(c.storage.hasOwnProperty(a)&&c.storage[a].CARD_ID===e){delete t.DISPLAY,c.storage[a].COMMENTS.data.unshift(t),c.storage[a].COMMENTS.count++,c.storage[a].COMMENTS.total++;break}}catch(s){error.log(s)}},displayCommentCallback:function(e){try{c.comment_height[e]=0;var t=r("#"+e+" > .comments");t.is(":visible")&&(c.comment_height[e]=t.height()),c.comment_height_total=0;for(var a in c.comment_height)c.comment_height.hasOwnProperty(a)&&(c.comment_height_total+=c.comment_height[a])}catch(s){error.log(s)}},setNextRefresh:function(e){try{var t=1e3*e||2147483647;t=t>=2147483647?2147483647:t,c.next_refresh_timeout_id>0&&clearTimeout(c.next_refresh_timeout_id),c.next_refresh_timeout_id=setTimeout(function(){c.displayNextCard()},t)}catch(a){error.log(a)}},updateUnread:function(e){try{c.unread="undefined"==typeof e?c.unread+1:e,0===c.unread?r("#feed_counter").text("").hide():r("#feed_counter").text(c.unread).fadeIn()}catch(t){error.log(t)}},drawWebviewFlowHeader:function(e){try{var t=Handlebars.templates.webview_feed_flow,a=t({USER_ID:USER.USER_ID,USER_PICTURE:USER.USER_PICTURE,TITLE:o("Bonjour %s !",{sprintf:[USER.BLOG_NAME]})});r("#content").append(a).find('[data-target="flow"]').replaceWith(button_multi_state.draw({id:USER.USER_ID,action:"play",type:"user",radio:!0,wording:"full",color:"primary",color_equalizer:"inverse",play_context:"feed_user_radio",tracking:1,tracking_tag:"flow_click",tracking_params:"{'type': 'flow', 'instance': 'feed'}"})),"function"==typeof e&&e()}catch(s){error.log(s)}},drawError:function(e){"DATA_ERROR"===e.name&&n.render(s.createElement("div",null,s.createElement("div",{className:"placeholders-img nocontent"}),s.createElement("div",{className:"placeholders-title"},o("Aucun résultat."))),document.getElementById("content"))},draw:function(e,t){try{var a,s,n="",i=t.api_called||!1,o=t.prepend_data||!1;if(i){if("undefined"!=typeof e.end&&(c.loadComplete=!0),"undefined"!=typeof e.next_refresh&&(c.card_id<=0||o)&&c.setNextRefresh(e.next_refresh),a=e.data,c.storage=c.storage.concat(a),null===a||a.length<=0)return!1}else a=e;for(var l=a.length,p=0;l>p;p++)if(s="","undefined"!=typeof advertising&&USER.OPTIONS.ads_display&&(o&&c.nb_cards_noads_on_prepend%5===0||0!==c.total_cards&&c.nb_cards_noads%5===0)&&"undefined"!=typeof Handlebars.templates.feed_ads&&(s=c.drawAdsCard()),"PROMO"===a[p].TYPE&&(a[p].data.img_small=a[p].data.img370x300||a[p].data.img730x300,a[p].data.img_big=a[p].data.img578x300||a[p].data.img1028x300,a[p].data.img_drive=a[p].data.img302x244||a[p].data.img1028x300),"undefined"!=typeof a[p]&&null!==a[p]&&""!==a[p]&&"undefined"!=typeof a[p].typ&&("undefined"!=typeof Handlebars.templates[a[p].TEMPLATE]||"undefined"!=typeof Handlebars.templates["webview_"+a[p].TEMPLATE])){if(a[p].USER_PICTURE=USER.USER_PICTURE,a[p].USER_ID=USER.USER_ID,"undefined"!=typeof a[p].COMMENTS&&a[p].COMMENTS.count>0)for(var d=a[p].COMMENTS.count,u=0;d>u;u++){var m=a[p].COMMENTS.data[u];m.TYPE=a[p].TYPE.toLowerCase(),m.ELEMENT_ID=m.USER_ID===USER.USER_ID?c.getIdFromType(a[p].TYPE,a[p].DATA):!1,m.COMMENT=r("<div/>").html(m.COMMENT).text()}o?(n+=c.drawCard(a[p])+s,c.nb_cards_noads_on_prepend+=1):(n+=s+c.drawCard(a[p]),c.card_id=a[p].CARD_ID,c.nb_cards_noads+=1),i&&(c.non_displayed_cards[a[p].CARD_ID]={}),c.total_cards++}if(o){var h=r(n);h.hide();var _=r("#content > .divider:eq(0)");_.after(h),h.fadeIn("slow")}else r("#content").append(n),r("#page_content").scrollTop(c.current_yscroll),c.activeScroll(),c.on_scroll=!1,c.nb_card=10;if(Events.trigger(Events.navigation.page_updated),jQuery.inArray(c.current_play_sng_id,c.waveform_id)>-1&&dzPlayer.getCurrentSong("SNG_ID")===c.current_play_sng_id&&c.setWaveformPosition(c.current_play_sng_id,dzPlayer.position),calculeTime(),i){var y,g;for(var f in c.non_displayed_cards)c.non_displayed_cards.hasOwnProperty(f)&&(y=r("#"+f),g=r("aside > span > figure",y).height(),y.length>0&&(c.non_displayed_cards[f]={t:y.position().top+20-c.comment_height_total,h:g}));0===c.current_yscroll&&c.logDisplayedCard()}}catch(b){error.log(b)}},drawCard:function(e){try{var t="",a=c.is_webview===!0?"webview_"+e.TEMPLATE:e.TEMPLATE,s=Handlebars.templates[a];return("snge"===e.typ||"sngf"===e.typ||"sngt"===e.typ||"sngs"===e.typ)&&("undefined"!=typeof e.DATA.FALLBACK&&(e.DATA=e.DATA.FALLBACK),-1===jQuery.inArray(e.DATA.SNG_ID,c.waveform_id)&&c.waveform_id.push(e.DATA.SNG_ID),thumbnails.current_song_id===e.DATA.SNG_ID&&(c.current_play_sng_id=dzPlayer.getCurrentSong("SNG_ID"),c.current_play_sng_duration=dzPlayer.getCurrentSong("DURATION"))),t+=c.drawSeparator(e.TIMESTAMP),t+=s(e)}catch(n){error.log(n)}},drawAdsCard:function(){try{var e="",t=Handlebars.templates.feed_ads;return e+=t({ads_position:c.ads_position}),c.ads_position++,advertising.call("multiple_feed",c.ads_position),e}catch(a){error.log(a)}},drawSeparator:function(e){try{var t="",a=c.is_webview===!0?"webview_feed_separator":"feed_separator",s="undefined"!=typeof Handlebars.templates[a]?Handlebars.templates[a]:"";if("undefined"==typeof e||""===e||0>e)return t;var n=localTimeStamp()-e;if(518400>=n)if(86400>n&&c.first_day_separator_added===!1&&(c.first_day_separator_added=!0,t=s({date:o("Recommandé pour vous aujourd'hui")})),n>=86400&&172800>=n){var r=Math.floor(n/86400);r!==Math.floor(c.current_separator_timestamp/86400)&&(c.current_separator_timestamp=n,t=s({date:getAgoTime(n)}))}else n>172800&&c.first_week_separator_added===!1&&(c.first_week_separator_added=!0,t=s({date:o("Il y a quelques jours")}));else if(n>518400&&2592e3>=n){var i=Math.round(n/604800);i!==Math.round(c.current_separator_timestamp/604800)&&(c.current_separator_timestamp=n,t=s({date:getAgoTime(n)}))}else{var l=Math.round(e/2592e3),p=new Date(1e3*e);if(Math.round(n/2592e3)>12){var d=Math.round(e/31536e3);d!==Math.round(c.current_separator_timestamp/31536e3)&&(c.current_separator_timestamp=e,t=s({date:p.getFullYear()}))}else if(l!==Math.round(c.current_separator_timestamp/2592e3)){var u=l>1?getShortMonthName((parseInt(p.getMonth(),10)+1).toString())+" "+p.getFullYear():getAgoTime(n);c.current_separator_timestamp=e,t=s({date:u})}}return t}catch(m){error.log(m)}},setWaveformPosition:function(e,t){try{var a=100*t/c.current_play_sng_duration;r(".waveform_"+e,"#content").css("width",a+"%")}catch(s){error.log(s)}},activeScroll:function(){try{infinite_scroll.disable(),c.loadComplete||(Events.subscribeOnce(Events.layout.infiniteScroll,function(){c.on_scroll=!0,c.nb_scroll+=1,c.display()},"feed"),infinite_scroll.active(r("#content")))}catch(e){error.log(e)}},flushCache:function(){c.storage=[],c.current_yscroll=0},tracking:function(e,t,a){try{return c.is_webview===!1&&"function"==typeof a&&(a(),a=null),api.call("musicfeed.log",{action:e,params:{card_id:t,dev:{v:STATIC_VERSION,t:c.is_webview===!0?"6":"0"}}},a),!0}catch(s){error.log(s)}},leave:function(){try{return r(document).off("click",c.waveform_selector),r(document).off("click",c.more_friend_selector),r(document).off("click",c.comment_button_selector),r(document).off("keypress keydown keyup"),Events.unsubscribeAll("header_flow"),!0}catch(e){error.log(e)}},logDisplayedCard:function(){try{for(var e in c.non_displayed_cards)if(c.non_displayed_cards.hasOwnProperty(e)){var t=c.non_displayed_cards[e].t+c.comment_height_total,a=c.non_displayed_cards[e].h,s=t+Math.round(a/2);c.current_yscroll<t&&c.current_feed_window_bottom>s&&(c.tracking("display",e),delete c.non_displayed_cards[e])}return!0}catch(n){error.log(n)}},getIdFromType:function(e,t){try{return"undefined"==typeof e||"undefined"==typeof t?!1:"ALBUM"===e?t.ALB_ID:"PLAYLIST"===e?t.PLAYLIST_ID:!0}catch(a){error.log(a)}},registerHelper:function(){try{return Handlebars.registerHelper("sticker",function(e,t,a){if("undefined"==typeof e||"undefined"==typeof t)return!1;var s=new Date(e).getFullYear(),n=t.match(/\d{4}/);return n=null!==n?Number(n[0]):s,n===s&&dateToTimestamp(CURRENT_DATE)-dateToTimestamp(e)<=2678400?a.fn():a.inverse()}),Handlebars.registerHelper("formatDate",function(e){return"undefined"==typeof e?!1:formatDate(e,"/")}),Handlebars.registerHelper("textSizeLimit",function(e,t){return"undefined"==typeof e||"undefined"==typeof t||isNaN(t)?!1:e.length>t?e.substr(0,t)+"...":e}),Handlebars.registerHelper("favorite_status",function(e){var t=e.hash.id+("song"===e.hash.type?"_0":"");return userData.isFavorite(e.hash.type,t)?e.fn():e.inverse()}),Handlebars.registerHelper("artistsList",function(e,t){if(!e)return!1;if(!e.ARTISTS||!e.ARTISTS.length)return t.fn(e);for(var a,s=e.ARTISTS,n=[],i=[],o=0,l=s.length;l>o;o++)a=s[o],"0"!==a.ROLE_ID&&"5"!==a.ROLE_ID||-1!==r.inArray(a.ART_ID,n)||(n.push(a.ART_ID),i.push(t.fn(a)));return i.join(", ")}),Handlebars.registerHelper("tracksList",function(e,t){if("undefined"==typeof e||"undefined"==typeof t.hash.length)return!1;for(var a=e.length,s=t.hash.length,n="",r=0,i=0;a>i;i++)if(right.checkSongAvailable(e[i])===right.READABLE){if(e[i].track_index=i,n+=t.fn(e[i]),r>=s-1)return n;r++}return n}),Handlebars.registerHelper("friendsList",function(e,t){if("undefined"==typeof e||"undefined"==typeof t.hash.length)return!1;for(var a,s=e.length,n=3>=s?e.length:2,r=15,i=[],c="",p=0;n>p;p++)2!==s&&3!==s||p+1!==n?i.push(t.fn(e[p])):c=" "+o("et")+" "+t.fn(e[p]);if(1===s)a=o("a écouté ce titre.");else if(s>1&&4>s)a=o("ont écouté ce titre.");else{var d,u,m=Math.round(s-n);s>r?(d='<a class="link-primary show-more-friends">',u="</a>"):(d="<strong>",u="</strong>"),a=l("et %s%s autre%s de vos amis ont écouté ce titre.","et %s%s autres%s de vos amis ont écouté ce titre.",{sprintf:[d,m,u],count:m})}return i.join(", ")+c+" "+a}),Handlebars.registerHelper("enum",function(e,t){if("undefined"==typeof e)return!1;for(var a,s=t.hash.length&&t.hash.length<=e.length?t.hash.length:e.length,n="",r=0;s>r;r++)null!==e[r]&&(a=e[r],n=n+t.fn(a)+(r>=s-1?".":", "));var i=("alba"===this.typ||"albr"===this.typ||"albe"===this.typ)&&this.DISCOGRAPHY.total>s,o=("plse"===this.typ||"plsa"===this.typ)&&this.PLAYLIST_ARTISTS.total>s;return i||o?n.substring(0,n.length-1):n}),!0}catch(e){error.log(e)}}};Events.subscribe(Events.live.events,function(e,t){return 0===t.length?!1:"undefined"!=typeof t[0].ACTION&&"MUSICFEED_NEW"!==t[0].ACTION?!1:void("feed"!==www.getCurrentPath()&&c.is_webview===!1?c.updateUnread():c.displayNextCard())}),t.exports=c},{"../core/i18n":255,jquery:"jquery",react:"react","react-dom":"react-dom"}],281:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("@deezer/components/common/ThumbnailGrid"),o=e("@deezer/components/common/GenreList/GenreList"),l={initialized:!1,template:"naboo/explore",tab:"genres",default_genre:0,genre_id:0,grid:!1,pagination:{start:0,nb:20,max:500},loading:!1,data:[],init:function(){try{if(l.initialized)return!1;templating.load(l.template),l.genre_id=storage.isset("explore_genre")?storage.get("explore_genre"):l.genre_id;var e=document.getElementById("page_explore_genres");return e&&n.render(s.createElement(o,{onSelect:l.onChangeGenre,selectedId:Number(l.genre_id)}),e),l.pagination.start=0,l.initialized=!0,!0}catch(t){error.log(t)}},display:function(e){try{return l.init(),l.onPageChanged(e),!0}catch(t){error.log(t)}},onPageChanged:function(e){var t=e.id||l.genre_id;l.load(t,null,!0)},load:function(e,t){try{if(l.loading===!0)return!1;l.loading=!0;var a=l.genre_id;l.genre_id=Number(e),t="undefined"!=typeof t&&t?r.extend(l.pagination,t):r.extend({},l.pagination),a!==e&&(t=r.extend(l.pagination,t,{start:0}));var s="/explore";0!==e&&(s+="/"+l.tab+"/"+e),www.setCurrentPath(s,!0),api.call("deezer.pageExplore",{USER_ID:USER.USER_ID,COUNTRY:COUNTRY,FILTER:e,START:t.start,NB:t.nb},l.loadCallback)}catch(n){error.log(n)}},loadCallback:function(e){try{return l.loading=!1,0===l.pagination.start&&(l.pagination.max=e.ITEMS.total),storage.set("explore_genre",l.genre_id),l.renderGenres(e),naboo.afterLoad(0===l.pagination.start),!0}catch(t){error.log(t)}},renderGenres:function(e){try{return("undefined"==typeof e.ITEMS||"undefined"==typeof e.ITEMS.data||e.ITEMS.count<=0)&&infinite_scroll.disable(),l.renderGenresReleases(e.ITEMS),l.rendered=!0,Events.trigger(Events.navigation.page_updated),!0}catch(t){error.log(t)}},renderGenresReleases:function(e){try{var t=document.getElementById("explore_last_releases_grid");if(!t||"undefined"==typeof e||"undefined"==typeof e.data)return!1;l.data.length?l.data=l.data.concat(e.data):l.data=e.data;var a={data:l.data,context:"explore_releases_album",options:["type","name","artist","release_date","favorite","sticker","play_link"],placeHolder:{img:"nocontent",wording:gettext("Nous n'avons pas trouvé de musique pour ce genre. Essayez d'en sélectionner un autre.")}};return n.render(s.createElement(i,a),t,l.activeInfiniteScroll),!0}catch(r){error.log(r)}},activeInfiniteScroll:function(){return l.pagination.start+l.pagination.nb>=l.pagination.max?(infinite_scroll.disable(),!1):(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),l.load(l.genre_id,{start:l.pagination.start+l.pagination.nb,nb:l.pagination.nb})},"explore"),void infinite_scroll.active())},onChangeGenre:function(e){try{return l.data=[],l.start=0,Number(e.GENRE_ID)===Number(l.genre_id)?!1:(l.load(e.GENRE_ID),tracking.track("explore_genres_select_click",{genre_id:e.GENRE_ID,genre_name:addslashes(e.GENRE_NAME)}),!0)}catch(t){error.log(t)}},leave:function(){l.data=[],l.initialized=!1;var e=document.getElementById("explore_last_releases_grid"),t=document.getElementById("page_explore_genres");e&&n.unmountComponentAtNode(e),t&&n.unmountComponentAtNode(t)}};t.exports=l},{"@deezer/components/common/GenreList/GenreList":127,"@deezer/components/common/ThumbnailGrid":148,jquery:"jquery",react:"react","react-dom":"react-dom"}],127:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/genre"),r=e("@deezer/components/common/DropDown"),i=s.createClass({displayName:"GenreList",propTypes:{onSelect:s.PropTypes.func.isRequired,type:s.PropTypes.number,selectedId:s.PropTypes.number,withoutGenreAll:s.PropTypes.bool},getDefaultProps:function(){return{selectedId:0,type:n.FILTER_MUSIC,withoutGenreAll:!1}},getInitialState:function(){return Events.subscribe(Events.genre.loaded,this._onGenreLoaded),{genreList:n.getList(this.props.type),selectedId:this.props.selectedId}},componentWillUnmount:function(){Events.unsubscribe(Events.genre.loaded,this._onGenreLoaded)},render:function(){if(0===this.state.genreList.length)return null;var e=this.state.genreList.map(function(e,t){return this.props.withoutGenreAll&&0===e.GENRE_ID?null:s.createElement(r.Item,{key:t,label:e.GENRE_NAME},s.createElement("a",{onClick:this._onSelect.bind(this,e),href:"#"},e.GENRE_NAME))}.bind(this));return s.createElement("div",{className:"toolbar-group pull-right"},s.createElement("div",{className:"btn-group"},s.createElement(r,{selected:this._getSelected()},e)))},_onSelect:function(e,t){t.preventDefault(),this.setState({selectedId:Number(e.GENRE_ID)}),this.props.onSelect(e)},_onGenreLoaded:function(e,t){this.setState({genreList:t.genre})},_defaut:0,_getSelected:function(){if("function"==typeof this.state.genreList.findIndex){var e=this.state.genreList.findIndex(this._predicate,this);return-1===e?this._default:e}for(var t=0,a=this.state.genreList.length;a>t;t++)if(this._predicate(this.state.genreList[t]))return t;return this._default},_predicate:function(e){return this.state.selectedId===e.GENRE_ID}});t.exports=i},{"../../../core/genre":254,"@deezer/components/common/DropDown":124,react:"react"}],254:[function(e,t,a){"use strict";function s(e){return isNaN(e)&&(e=i),api.call({method:"deezer.getGenres",data:{FILTER:e},success:function(t){p[e]=t,c[e]=!0,Events.trigger(Events.genre.loaded,{genre:t})}}),[]}function n(e){return c[e]?!0:!1}function r(e){return n(e)?p[e]:s(e)}var i=1,o=4,l=8,c={},p={};t.exports={FILTER_MUSIC:i,FILTER_TALK:o,FILTER_MOODS:l,getList:r}},{}],280:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("@deezer/components/common/Thumbnail"),o={id:0,template:"catalog/episode",display:function(e){return"string"!=typeof e.episode_id?!1:(o.id=e.episode_id,"object"==typeof e.data?o.displayCallback(e.data):(api.call("episode.getData",{episode_id:o.id},o.displayCallback),!0))},displayCallback:function(e){templating.load(o.template);var t=document.getElementById("naboo_episode_play");if(t&&n.render(s.createElement(i,{type:"episode",context:"episode_page",play:"force",showOptions:!0,width:200,height:200,data:e,bordered:!0}),t),tabs.init(r("#naboo_episode_tabs"),{episode_description:{args:{type:"episode_description",id:o.id,description:e.EPISODE_DESCRIPTION},selected:!0}}),r("#naboo_episode_title").text(e.EPISODE_TITLE),r("#naboo_show_title > a").attr("href","/show/"+e.SHOW_ID).text(e.SHOW_NAME),e.DURATION&&r("#naboo_episode_duration").text(secToMin(e.DURATION)),e.EPISODE_PUBLISHED_TIMESTAMP){var a=e.EPISODE_PUBLISHED_TIMESTAMP.split(" ");r("#naboo_episode_date").text(formatDate(a[0]))}Events.ready(Events.user.userReady,function(){var t=window.bookmark.getEpisodeBookmark(o.id).OFFSET;r("#naboo_episode_bookmark").css("width",100*Number(t)/e.DURATION+"%")}),naboo.afterLoad(!0)}};t.exports=o},{"@deezer/components/common/Thumbnail":138,jquery:"jquery",react:"react","react-dom":"react-dom"}],279:[function(e,t,a){"use strict";var s,n=e("react"),r=e("react-dom"),i=e("../core/i18n"),o=i.gettext,l=e("@deezer/components/common/Comment"),c={id:0,type:0,type_id:{artist:1,album:2,user:3,playlist:4,radio:5,video:6},start:0,max:100,nb:15,data:[],initialized:!1,container:null,flagged:[],init:function(){return c.initialized?!1:(c.container=document.getElementById("naboo_catalog_comment"),c.subscribeCommentComponent(),void(c.initialized=!0))},display:function(e){return"object"!=typeof e?!1:(c.init(),c.id=e.id,c.type=e.type,0===c.start&&(c.data=[]),api.call({method:"comment.getList",data:{element_id:c.id,type:c.type_id[c.type],start:c.start,nb:c.nb},success:function(e){c.data=c.data.concat(e.data),c.max=e.total,c.render()}}),!0)},render:function(){c.container&&(s=r.render(n.createElement(l,{data:c.data}),c.container,c.activeInfiniteScroll)),Events.trigger(Events.navigation.tab_displayed,{type:"comment",id:c.id})},activeInfiniteScroll:function(){return c.max<=c.start+c.nb?(infinite_scroll.disable(),!1):(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),c.start+=c.nb,c.display({id:c.id,type:c.type})},"comment"),void infinite_scroll.active())},subscribeCommentComponent:function(){Events.subscribe(Events.comment.add,c.onAdd,"comment"),Events.subscribe(Events.comment.remove,c.onRemove,"comment"),Events.subscribe(Events.comment.flag,c.onFlag,"comment")},onDisplay:function(){c.activeInfiniteScroll(),c.subscribeCommentComponent()},onAdd:function(e,t){api.call({method:"comment.add",data:{comment:t.comment,element_id:c.id,type:c.type_id[c.type],lang:SETTING_LANG},success:c.addComment})},addComment:function(e){return isNaN(e)?!1:void api.call({method:"comment.getData",data:{comment_id:e},success:function(e){c.data.unshift(e),c.start++,Events.unsubscribe(Events.layout.infiniteScroll),s.forceUpdate(c.activeInfiniteScroll)}})},onRemove:function(e,t){confirm(o("Souhaitez-vous définitivement supprimer votre commentaire ?"))&&api.call({method:"comment.delete",data:{type:c.type_id[c.type],element_id:c.id,comment_id:t.comment_id},success:function(){c.data.splice(t.comment_index,1),c.start--,Events.unsubscribe(Events.layout.infiniteScroll),s.forceUpdate(c.activeInfiniteScroll)}})},onFlag:function(e,t){return"undefined"===t.comment_id||""===t.comment_id||c.flagged.indexOf(t.comment_id)>-1?!1:void api.call({method:"comment.flag",data:{type:c.type_id[c.type],comment_id:t.comment_id},success:function(){c.flagged.push(t.comment_id),alert(o("Merci, ce commentaire sera vérifié dans les plus brefs délais."))}})},destroy:function(){Events.unsubscribeAll("comment"),c.start=0,c.initialized=!1,c.container&&r.unmountComponentAtNode(c.container)}};t.exports=c},{"../core/i18n":255,"@deezer/components/common/Comment":63,react:"react","react-dom":"react-dom"}],63:[function(e,t,a){"use strict";var s=e("./Comment");t.exports=s},{"./Comment":61}],61:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../core/i18n"),i=r.gettext,o=e("./_elements/UserComment"),l=e("@deezer/components/common/Thumbnail"),c=e("@deezer/components/common/Thumbnail/utils"),p=s.createClass({displayName:"Comment",propTypes:{data:s.PropTypes.array.isRequired,commentMinChar:s.PropTypes.number,commentMaxChar:s.PropTypes.number,publishOnEnter:s.PropTypes.bool,facebookShare:s.PropTypes.bool,twitterShare:s.PropTypes.bool},getDefaultProps:function(){return{commentMinChar:10,commentMaxChar:250,publishOnEnter:!0,facebookShare:!0,twitterShare:!0}},getInitialState:function(){var e=this.props.facebookShare&&facebook.isActionEnabled("comment")&&facebook.isScopeAllowed("publish_actions"),t=this.props.twitterShare&&twitter.commentEnable()&&window.USER.TWITTER.TOKEN;return{commentLength:0,isInvalid:!1,facebookEnabled:e,twitterEnabled:t}},render:function(){var e=0===user.current()?this._renderUserNotLogged():this._renderPostComment();return s.createElement("div",{className:"catalog-tab-box"},e,this._renderCommentList())},_renderPostComment:function(){var e=c.getImageSrc("user",USER.USER_PICTURE,30,30);return s.createElement("div",{className:"user-comment post-comment"},s.createElement("div",{className:"comment-thumbnail"},s.createElement(l,{id:Number(USER.USER_ID),imgSrc:e,height:30,width:30,rounded:!0,type:"user"})),s.createElement("form",{className:"comment-message"},s.createElement("textarea",{className:"form-control",maxLength:this.props.commentMaxChar,ref:"comment",onChange:this._onKeyUp}),this.state.isInvalid?s.createElement("div",{className:"alert alert-danger"},i("Vous devez écrire un minimum de 10 caractères.")):null,s.createElement("div",{className:"comment-submit"},i("%s caractères restants",{sprintf:[this.props.commentMaxChar-this.state.commentLength]}),s.createElement("button",{className:"btn btn-default",type:"button",onClick:this._postComment},s.createElement("span",{className:"label"},i("Publier")))),this._renderSharer()))},_renderUserNotLogged:function(){var e=i("connecter"),t=i("inscrire");return s.createElement("div",{className:"alert alert-info"},s.createElement("span",{dangerouslySetInnerHTML:{__html:i("Merci de vous %1$s ou de vous %2$s pour déposer un commentaire.",{sprintf:['<a class="link-primary" href="/login"><strong>'+e+"</strong></a>",'<a class="link-primary" href="/register"><strong>'+t+"</strong></a>"]})}}))},_renderCommentList:function(){return 0===this.props.data.length?null:s.createElement("ul",{className:"comment-list"},this.props.data.map(function(e,t){return s.createElement("li",{key:"comment_"+e.COMMENT_ID},s.createElement(o,{data:e,index:t}))}))},_renderSharer:function(){return this.props.facebookShare||this.props.twitterShare?s.createElement("div",{className:"comment-sharer"},s.createElement("span",{className:"label"},i("PARTAGER SUR :")),this._renderFacebookButton(),this._renderTwitterButton()):null},_renderFacebookButton:function(){if(!this.props.facebookShare)return null;var e=n({"social social-small social-facebook":!0,active:this.state.facebookEnabled});return s.createElement("a",{className:e,onClick:this._onFacebookShare},s.createElement("span",{className:"icon icon-facebook"}))},_renderTwitterButton:function(){if(!this.props.twitterShare)return null;var e=n({"social social-small social-twitter":!0,active:this.state.twitterEnabled});return s.createElement("a",{className:e,onClick:this._onTwitterShare},s.createElement("span",{className:"icon icon-twitter"}))},_onFacebookShare:function(){facebook.isScopeAllowed("publish_actions")?(this.setState({facebookEnabled:!this.state.facebookEnabled}),userSetting.set({facebook:{share_comment:this.state.facebookEnabled}},!0)):facebook.login({scope_mandatory:!0})},_onTwitterShare:function(){"undefined"==typeof USER.TWITTER.TOKEN?twitter.link():userSetting.set({twitter:{share_comment:this.refs.comment.value}},!0)},_onKeyUp:function(e){if(this.props.publishOnEnter&&13===e.which)return this._postComment();var t={commentLength:e.target.value.length};this.state.isInvalid===!0&&e.target.value.length>=this.props.commentMinChar&&(t.isInvalid=!1),this.setState(t)},_postComment:function(){this.state.commentLength<this.props.commentMinChar?this.setState({isInvalid:!0}):(Events.trigger(Events.comment.add,{comment:this.refs.comment.value}),this.refs.comment.value="")}});t.exports=p},{"../../../core/i18n":255,"./_elements/UserComment":62,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,classnames:"classnames",react:"react"}],62:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/common/Thumbnail"),r=e("@deezer/components/common/Tooltip"),i=e("@deezer/components/_mixins/calculateTime"),o=s.createClass({displayName:"UserComment",propTypes:{data:s.PropTypes.object.isRequired,index:s.PropTypes.number.isRequired},mixins:[i],render:function(){return s.createElement("div",{className:"user-comment"},s.createElement("div",{className:"comment-thumbnail"},s.createElement(n,{data:this.props.data,height:30,width:30,rounded:!0,type:"user"})),s.createElement("div",{className:"comment-message"},s.createElement("div",{className:"message-header"},s.createElement("a",{className:"message-author",href:"/profile/"+this.props.data.USER_ID,onClick:this._onLink},this.props.data.BLOG_NAME),s.createElement("span",{className:"message-time"},this.state.time)),s.createElement("div",{className:"message-body",dangerouslySetInnerHTML:{__html:this.props.data.COMMENT.convertURLToLink()}}),this._renderActions(this.props.data,this.props.index)))},_renderActions:function(e,t){return s.createElement("div",{className:"message-actions"},Number(e.USER_ID)===Number(USER.USER_ID)?s.createElement(r,{text:gettext("Supprimer")},s.createElement("button",{className:"btn btn-mini btn-default",type:"button",onClick:this._removeComment.bind(this,t)},s.createElement("span",{className:"icon icon-trash"}))):s.createElement(r,{text:gettext("Signaler un abus")},s.createElement("button",{className:"btn btn-mini btn-default",type:"button",onClick:this._flagComment.bind(this,t)},s.createElement("span",{className:"icon icon-flag"}))))},_onLink:function(e){e.preventDefault(),www.navigate(e.currentTarget.getAttribute("href"))},_removeComment:function(e){Events.trigger(Events.comment.remove,{comment_index:e,comment_id:this.props.data.COMMENT_ID})},_flagComment:function(){Events.trigger(Events.comment.flag,{comment_id:this.props.data.COMMENT_ID})},_getDate:function(){return Number(this.props.data.DATE)}});t.exports=o},{"@deezer/components/_mixins/calculateTime":35,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Tooltip":151,react:"react"}],35:[function(e,t,a){"use strict";var s={getInitialState:function(){return{time:this._calculateTime()}},componentDidMount:function(){this.updateInterval=setInterval(this._updateTime,3e4)},componentWillUnmount:function(){clearInterval(this.updateInterval)},updateInterval:null,_calculateTime:function(){return getAgoTime(window.SERVER_TIMESTAMP-this._getDate())},_updateTime:function(){this.isMounted()&&this.setState({time:this._calculateTime()})}};t.exports=s},{}],278:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("../core/i18n"),o=i.gettext,l=i.ngettext,c=e("@deezer/components/common/List"),p=e("@deezer/components/common/Discography"),d=e("@deezer/components/common/DataGrid"),u=e("@deezer/components/common/Thumbnail"),m=e("@deezer/components/common/ActionToolbar"),h={id:0,template:"catalog/artist",data:[],type:"",DISPLAY_SMALL:"small",DISPLAY_BIG:"big",minWidth:1200,display:function(e){return"string"!=typeof e.art_id?!1:(h.id=h.art_id=parseInt(e.art_id,10),"object"==typeof e.data?(Events.ready(Events.user.initialized,function(){h.displayCallback(e.data)}),!1):(api.call("deezer.pageArtist",{art_id:h.id,lang:SETTING_LANG},h.displayCallback),!0))},displayCallback:function(e){templating.load(h.template),h.data=e,h.data.NB_FAN=e.DATA.NB_FAN,h.type=window.getClientWidth()>h.minWidth?h.DISPLAY_BIG:h.DISPLAY_SMALL,h.displayCatalogMessage();var t={discography:{selected:!0,args:{art_id:h.id,data:h.data.ALBUMS,page:"artist"}},top_track:{disabled:"undefined"==typeof h.data.TOP||!h.data.TOP.count,args:{type:"artist_top",id:h.id}},related_playlist:{disabled:!("undefined"!=typeof h.data.RELATED_PLAYLIST&&h.data.RELATED_PLAYLIST.count||"undefined"!==h.data.SELECTED_PLAYLIST&&h.data.SELECTED_PLAYLIST.count),args:{type:"artist",id:h.id}},related_artist:{disabled:"undefined"==typeof h.data.RELATED_ARTISTS||!h.data.RELATED_ARTISTS.count,args:{art_id:h.id}},comment:{args:{type:"artist",id:h.id}},biography:{disabled:h.data.BIO===!1||""===h.data.BIO.BIO}},a=r("#page_naboo_artist"),i=document.getElementById("naboo_artist_action");if(i){var o=["favorite","share"];h.data.SMARTRADIO&&o.unshift("play"),n.render(s.createElement(m,{id:h.id,type:"artist",action:o,play_context:"artist_smartradio"}),i)}r('[data-target="fans"]',a).append(l("Fan","Fans",{count:e.DATA.NB_FAN})).children("strong").text(breakUpThousands(e.DATA.NB_FAN)),""!==h.data.BIO.BIO&&h.drawBiographyContent(),r('[data-target="artist_name"]',a).text(h.data.DATA.ART_NAME);var c=r('[data-target="banner"]',a),p={backgroundImage:"url("+SETTING_DOMAIN_IMG+(1===h.data.LAST_ALBUM.count?"/cover/"+h.data.LAST_ALBUM.data[0].ALB_PICTURE:"/misc/3222e780ece735f85ee9555eaa84e623")+"/250x1200-0000-80-0-0.jpg)",backgroundPosition:"center",backgroundColor:"#000"};if("undefined"!=typeof h.data.DATA.DATA&&"undefined"!=typeof h.data.DATA.DATA.ART_BANNER&&""!==h.data.DATA.DATA.ART_BANNER)p.backgroundImage="url("+SETTING_DOMAIN_IMG+"/artist/"+h.data.DATA.DATA.ART_BANNER+"/230x1800.jpg)",p.backgroundPosition=h.data.DATA.DATA.ART_BANNER_ALIGN,p.backgroundColor=h.data.DATA.DATA.ART_BANNER_BGCOLOR,"string"==typeof h.data.DATA.DATA.ART_BANNER_LINK&&""!==h.data.DATA.DATA.ART_BANNER_LINK&&(p.cursor="pointer",c.attr("onClick",'window.open("'+h.data.DATA.DATA.ART_BANNER_LINK+'")'));else{var d=document.getElementById("naboo_artist_image");if(d){var _={excludes:["go_to_artist"]};n.render(s.createElement(u,{type:"artist",data:h.data.DATA,width:250,height:320,imgWidth:140,imgHeight:180,coverLink:!1,bordered:!0,showOptions:!0,context:"artist_smartradio",contextMenuOptions:_}),d)}}return c.css(p),"undefined"!=typeof h.data.DATA.STATUS&&""!==h.data.DATA.STATUS.status?r('[data-target="status"]',a).text('"'+h.data.DATA.STATUS.status+'"'):r('[data-target="status"]',a).remove(),h.drawSocialNetwork(a),Events.subscribeOnce(Events.gigs.display,function(e,t){t.display?r('[data-target="ontour"]',a).show().on("click",function(){window.gigs.goToEvents(h.id,"artist_page")}):(r('[data-target="ontour"]',a).remove(),0===r('[data-target="social"]',a).children().length&&r('[data-target="social"]',a).remove())},"artist"),Events.subscribe(Events.layout.adsBackground,function(e,t){"show"===t.display&&h.type===h.DISPLAY_BIG&&h.toggleDisplay()},"artist"),Events.subscribe(Events.layout.resize,function(e,t){t.client_width<=h.minWidth&&h.type===h.DISPLAY_BIG?h.toggleDisplay():t.client_width>h.minWidth&&h.type===h.DISPLAY_SMALL&&h.toggleDisplay()},"artist"),Events.subscribe(Events.user.addFavorite,h.updateNbFan,"artist"),Events.subscribe(Events.user.deleteFavorite,h.updateNbFan,"artist"),h.drawTops(a),tabs.init(r("#naboo_artist_second"),t),naboo.afterLoad(!0),!0},toggleDisplay:function(){h.type=h.type===h.DISPLAY_BIG?h.DISPLAY_SMALL:h.DISPLAY_BIG,h.drawTops(r("#page_naboo_artist"))},displayCatalogMessage:function(){return"undefined"!=typeof h.data.DATA.DATA&&h.data.DATA.DATA.DISABLE_CATALOG?(r("#naboo_discography_disable_catalog").show(),!0):void r("#naboo_discography_disable_catalog").hide()},drawTops:function(e){var t=h.type===h.DISPLAY_BIG?"":"_responsive_ads";return 0===h.data.TOP.total?(r('[data-target="top-track"]',e).remove(),r('[data-target="playlist"]',e).remove(),r('[data-target="artist"]',e).remove(),r('[data-target="exclu-track"]',e).remove(),h.drawLastRelease(e),!1):(h.drawTopTrack(e),h.drawTopPlaylist(e,t),h.drawTopRelated(e,t),h.data.RELATED_ARTISTS.count||h.data.SELECTED_PLAYLIST.count||r(".visible-ads-full",e).remove(),void h.drawLastRelease(e))},drawTopTrack:function(e){var t=document.getElementById("top_track_datagrid");"object"==typeof h.data.TOP&&h.data.TOP.count>0&&t?n.render(s.createElement(d,{type:"topArtist",id:h.id,context:"artist_top",items:h.data.TOP.data}),t):r('[data-target="top-track"]',e).remove(),h.data.TOP.count<6&&r('[data-target="top-track-view-more"]',e).remove()},drawTopPlaylist:function(e,t){var a=h.data.SELECTED_PLAYLIST.data.concat(h.data.RELATED_PLAYLIST.data),i=document.getElementById("related_playlist"+t);if(a.length>0&&i){r('[data-target="playlist"] > h4 > .label',e).text(l("Playlist","Playlists",{count:a.length}));var o={data:a.slice(0,3),type:"playlist",display_fan:!0,display_creator:!1,display_track:!0,display_add:!0,context:"artist_similar_playlist"};n.render(s.createElement(c,o),i)}else r('[data-target="playlist"]',e).remove();a.length<3&&r('[data-target="playlist-view-more"]',e).remove()},drawTopRelated:function(e,t){var a=document.getElementById("related_artist"+t);if(h.data.RELATED_ARTISTS.count>0&&a){r('[data-target="artist"] > h4 > .label',e).text(l("Artiste similaire","Artistes similaires",{count:h.data.RELATED_ARTISTS.count}));var i=h.data.RELATED_ARTISTS.data,o=0;if(h.data.LAST_ALBUM.count>0){var p=h.data.LAST_ALBUM.data[0].SONGS.total;5>p&&(o=3),p>=5&&7>=p&&(o=4),8===p&&(o=5)}"_responsive_ads"===t&&(o=3);var d={data:0===o?i:i.slice(0,o),type:"artist",display_add:!0,thumbnail_rounded:!0};n.render(s.createElement(c,d),a)}else r('[data-target="artist"]',e).remove();h.data.RELATED_ARTISTS.count<3&&r('[data-target="artist-view-more"]',e).remove()},drawLastRelease:function(e){var t,a=[];h.data.LAST_ALBUM.count>0?(r('[data-target="last-release"] > h4 > .label',e).text(o("Dernière sortie")),a=h.data.LAST_ALBUM.data,t=h.data.LAST_ALBUM.data[0].SONGS.count,5>t?r(".content-bottom").addClass("xsmall"):r(".content-bottom").removeClass("xsmall"),t>=5&&7>=t?r(".content-bottom").addClass("small"):r(".content-bottom").removeClass("small"),8===t?r(".content-bottom").addClass("medium"):r(".content-bottom").removeClass("medium")):0===h.data.TOP.count&&r('[data-target="last-release"] > h4',e).empty();var i={data:a,limit:9,heading:!1,tracking:!0,context:"last_release",producerLine:t>4,addFavorite:t>4},l=document.getElementById("last_release");l&&n.render(s.createElement(p,i),l)},drawBiographyContent:function(){try{r("#tab_biography_content .naboo_artist_biography_content_photo img").attr("src",SETTING_DOMAIN_IMG+"/artist/"+h.data.DATA.ART_PICTURE+"/200x200-000000-80-0-0.jpg"),"undefined"!=typeof h.data.BIO.RESUME_FULL?r("#tab_biography_content .naboo_artist_biography_content_message").html("<b>"+h.data.BIO.RESUME_FULL+"</b><br/>"+h.data.BIO.BIO):r("#tab_biography_content .naboo_artist_biography_content_message").html(h.data.BIO.BIO)}catch(e){error.log(e)}},drawSocialNetwork:function(e){try{"undefined"!=typeof h.data.DATA.FACEBOOK&&"http"===h.data.DATA.FACEBOOK.substr(0,4)?r('[data-target="facebook"]',e).attr("href",h.data.DATA.FACEBOOK):r('[data-target="facebook"]',e).remove(),"undefined"!=typeof h.data.DATA.TWITTER&&"http"===h.data.DATA.TWITTER.substr(0,4)?r('[data-target="twitter"]',e).attr("href",h.data.DATA.TWITTER):r('[data-target="twitter"]',e).remove()}catch(t){error.log(t)}},getLiveFeed:function(){return"1_0_ARTISTFEED_"+h.id},updateNbFan:function(e,t){return Number(t.id)!==Number(h.data.DATA.ART_ID)?!1:("USER.addFavorite"===e.namespace?h.data.NB_FAN+=1:h.data.NB_FAN-=1,void r('.artist-headings [data-target="fans"]').html(l("%s Fan","%s Fans",{count:h.data.NB_FAN,sprintf:["<strong>"+breakUpThousands(h.data.NB_FAN)+"</strong>"]})))},onOpenTab:function(e){r("#page_content").scrollTop(0),tabs.display(e),tracking.track("artist_page_click",{type:e})},goToAlbum:function(){www.navigate("/album/"+h.data.LAST_ALBUM.data[0].ALB_ID),tracking.track("artist_page_click",{type:"last_release"})},leave:function(){r("#tab_discography_content").hide();var e=["related_playlist","related_artist","top_track_datagrid","last_release","discography_artist","related_playlist_responsive_ads","related_artist_responsive_ads","naboo_artist_action"];e.map(function(e){var t=document.getElementById(e);t&&n.unmountComponentAtNode(t)})}};t.exports=h},{"../core/i18n":255,"@deezer/components/common/ActionToolbar":58,"@deezer/components/common/DataGrid":97,"@deezer/components/common/Discography":120,"@deezer/components/common/List":131,"@deezer/components/common/Thumbnail":138,jquery:"jquery",react:"react","react-dom":"react-dom"}],131:[function(e,t,a){"use strict";var s=e("react"),n=e("./list_items/Playlist"),r=e("./list_items/Artist"),i=e("./list_items/Album"),o=e("./list_items/Track"),l=e("./list_items/Radio"),c=s.createClass({displayName:"List",propTypes:{data:s.PropTypes.array.isRequired,type:s.PropTypes.string.isRequired,context:s.PropTypes.string,display_favorite:s.PropTypes.bool,display_creator:s.PropTypes.bool,display_add:s.PropTypes.bool,display_track:s.PropTypes.bool,display_fan:s.PropTypes.bool,thumbnail_rounded:s.PropTypes.bool},getDefaultProps:function(){return{display_favorite:!0,display_creator:!0,display_add:!1,display_track:!0,display_fan:!1,context:"",thumbnail_rounded:!1}},render:function(){return s.createElement("ul",{className:"nano-card-list"},this.props.data.map(function(e){switch(this.props.type){case"playlist":return s.createElement(n,{data:e,key:"playlist_"+e.PLAYLIST_ID,display_creator:this.props.display_creator,display_favorite:this.props.display_favorite,display_add:this.props.display_add,display_fan:this.props.display_fan,display_track:this.props.display_track,context:this.props.context});case"artist":return s.createElement(r,{data:e,key:"artist_"+e.ART_ID,display_favorite:this.props.display_favorite,display_add:this.props.display_add,context:this.props.context,thumbnail_rounded:this.props.thumbnail_rounded});case"album":return s.createElement(i,{data:e,key:"album_"+e.ALB_ID,display_favorite:this.props.display_favorite,display_add:this.props.display_add,context:this.props.context});case"track":return s.createElement(o,{data:e,key:"track_"+e.SNG_ID,display_favorite:this.props.display_favorite,display_add:this.props.display_add,context:this.props.context});case"radio":return s.createElement(l,{data:e,key:"radio_"+e.RADIO_ID,display_favorite:this.props.display_favorite,display_add:this.props.display_add,context:this.props.context});default:return null}}.bind(this)))}});t.exports=c},{"./list_items/Album":152,"./list_items/Artist":154,"./list_items/Playlist":157,"./list_items/Radio":158,"./list_items/Track":160,react:"react"}],160:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../core/i18n"),i=r.gettext,o=e("@deezer/components/_mixins/tracking"),l=e("@deezer/components/common/Thumbnail"),c=e("@deezer/components/common/Favorite"),p=s.createClass({displayName:"Track",propTypes:{id:s.PropTypes.number,display_favorite:s.PropTypes.bool,display_add:s.PropTypes.bool,display_drag:s.PropTypes.bool,data:s.PropTypes.object,index:s.PropTypes.number,selectable:s.PropTypes.bool,context:s.PropTypes.string,share_context:s.PropTypes.string,is_radio:s.PropTypes.bool,show_play:s.PropTypes.bool,play_index:s.PropTypes.number,play_data:s.PropTypes.array,enabled:s.PropTypes.bool,onClick:s.PropTypes.func,onSelect:s.PropTypes.func},contextTypes:{panel_name:s.PropTypes.string},mixins:[o],getDefaultProps:function(){return{display_favorite:!0,display_drag:!1,display_add:!1,data:null,index:null,selectable:!1,context:"",is_radio:!1,show_play:!0,play_data:[],onSelect:function(){}}},getInitialState:function(){return{selected:!1}},shouldComponentUpdate:function(e,t){return t.selected!==this.state.selected||e.data.SNG_ID!==this.props.data.SNG_ID||e.play_index!==this.props.play_index},deselect:function(){this.setState({selected:!1})},getTrackingParams:function(){return{type:"track",id:this.props.data.SNG_ID,index:this.props.index}},render:function(){var e=n({"nano-card-item":!0,checked:this.state.selected,hide:this.props.is_radio&&this.props.index>this.props.play_index}),t="undefined"!=typeof this.props.data.LYRICS_ID&&0!==this.props.data.LYRICS_ID;return s.createElement("li",{key:"track"+this.props.data.SNG_ID,className:e,onClick:this._onClick},s.createElement("div",{className:"nano-card-picture"},s.createElement(l,{type:"track",height:56,width:56,play:this.props.show_play?"on":"off",preview:"on",playLink:"queuelist"!==this.context.panel_name,trackListIndex:"queuelist"===this.context.panel_name?this.props.index:null,trackList:this.props.play_data,context:this.props.context,overlay:"off",data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),t?s.createElement("a",{className:"icon icon-lyrics",onClick:this._onLyricsClick,role:"button"}):"",this._renderFavorite(),this._renderDrag()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/album/"+this.props.data.ALB_ID,"data-instance":"track_name"},this.props.data.SNG_TITLE+("string"==typeof this.props.data.VERSION&&""!==this.props.data.VERSION?" "+this.props.data.VERSION:""))),s.createElement("div",{className:"heading-4-sub ellipsis"},i("par")," ",this._renderArtistName())))},_renderArtistName:function(){return this.props.data.ARTISTS?this.props.data.ARTISTS.map(function(e,t){return 0===Number(e.ROLE_ID)||5===Number(e.ROLE_ID)?[t>0?", ":"",s.createElement("a",{href:"/artist/"+e.ART_ID,"data-instance":"artist_name"},e.ART_NAME)]:void 0}):s.createElement("a",{href:"/artist/"+this.props.data.ART_ID,"data-instance":"artist_name"},this.props.data.ART_NAME)},_renderFavorite:function(){return this.props.display_favorite?s.createElement(c,{type:"song",id:this.props.data.SNG_ID,context:this.context.panel_name}):void 0},_renderDrag:function(){return this.props.display_drag?s.createElement("span",{className:"draggable"}):void 0},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,id:this.props.data.SNG_ID,type:"track",context:this.context.panel_name,listen_context:{TYPE:this.props.context,ID:this.props.data.SNG_ID},data:{SONG:this.props.data,INDEX:this.props.index},share_context:this.props.share_context,position:"right",image:this.props.data.ALB_PICTURE})},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),"function"==typeof this.props.onClick&&this.props.onClick(e,this.props.data,this.props.index);var t=dom.dataset(e.target,"instance");if(t&&dom.dataset(e.currentTarget,"instance",t),this.props.selectable&&"DIV"===e.target.tagName)return void this.setState({selected:!this.state.selected},function(){this.props.onSelect()}.bind(this));var a=e.target.getAttribute("href");a&&loadBox(a)},_onLyricsClick:function(e){if(e.preventDefault(),e.stopPropagation(),"queue_list"===this.props.context)Events.subscribeOnce(Events.player.displayCurrentSong,function(){Events.trigger(Events.menu.togglePanel,"lyrics")}),dzPlayer.playTrackAtIndex(this.props.index);else{Events.subscribeOnce(Events.player.tracklist_changed,function(){dzPlayer.control.nextSong(),Events.trigger(Events.menu.togglePanel,"lyrics")});var t={type:"track",id:this.props.id,radio:!1,context:{ID:this.props.id,TYPE:this.props.context},data:[this.props.data]};"radio"!==dzPlayer.getPlayerType()&&(t.addNext=!0),dzPlayer.play(t)}}});t.exports=p},{"../../../core/i18n":255,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],158:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/_mixins/tracking"),r=e("@deezer/components/common/Thumbnail"),i=e("@deezer/components/common/Favorite"),o=e("@deezer/components/common/TagList"),l=s.createClass({displayName:"Radio",propTypes:{data:s.PropTypes.object.isRequired,display_favorite:s.PropTypes.bool,display_add:s.PropTypes.bool,context:s.PropTypes.string,index:s.PropTypes.number,onClick:s.PropTypes.func},contextTypes:{panel_name:s.PropTypes.string},mixins:[n],getDefaultProps:function(){return{display_favorite:!0,display_add:!1,context:"",index:null}},shouldComponentUpdate:function(e){return e.data.RADIO_ID!==this.props.data.RADIO_ID},getTrackingParams:function(){return{type:"radio",id:this.props.data.RADIO_ID}},render:function(){return s.createElement("li",{key:"radio"+this.props.data.RADIO_ID,className:"nano-card-item",onClick:this._onClick,"data-index":this.props.index},s.createElement("div",{className:"nano-card-picture"},s.createElement(r,{type:"radio",height:56,width:56,play:"on",preview:"on",playLink:!0,context:this.props.context,overlay:"off",data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),this._renderFavorite()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/mixes/genre/"+this.props.data.RADIO_ID,"data-instance":"radio_name"},this.props.data.TITLE)),s.createElement("div",{className:"heading-4-sub ellipsis"},this._renderTags())))},_renderTags:function(){if(!this.props.data.TAGS)return null;var e=this.props.data.TAGS.map(function(e){return{LABEL:e}});return s.createElement(o,{tags:e,max:5,type:"text",link:gatekeeper.isAllowed("search_tag")})},_renderFavorite:function(){return this.props.display_favorite?s.createElement(i,{type:"radio",id:this.props.data.RADIO_ID,context:this.context.panel_name}):void 0},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),"function"==typeof this.props.onClick&&this.props.onClick(e,this.props.data,this.props.index);var t=dom.dataset(e.target,"instance");"undefined"!=typeof t&&dom.dataset(e.currentTarget,"instance",t);var a=e.target.getAttribute("href");a&&loadBox(a)},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,id:this.props.data.RADIO_ID,type:"radio",data:this.props.data,position:"right",context:this.context.panel_name,listen_context:{TYPE:this.props.context,ID:this.props.data.RADIO_ID},image:this.props.data.RADIO_PICTURE})}});t.exports=l},{"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Favorite":125,"@deezer/components/common/TagList":136,"@deezer/components/common/Thumbnail":138,react:"react"}],157:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=n.ngettext,o=e("@deezer/components/_mixins/tracking"),l=e("@deezer/components/common/Badge"),c=e("@deezer/components/common/Thumbnail"),p=e("@deezer/components/common/Favorite"),d=s.createClass({displayName:"Playlist",propTypes:{data:s.PropTypes.object,display_favorite:s.PropTypes.bool,display_creator:s.PropTypes.bool,display_add:s.PropTypes.bool,display_fan:s.PropTypes.bool,display_track:s.PropTypes.bool,context:s.PropTypes.string,index:s.PropTypes.number,onClick:s.PropTypes.func},contextTypes:{panel_name:s.PropTypes.string},mixins:[o],getDefaultProps:function(){return{display_favorite:!0,display_creator:!0,display_add:!0,display_track:!0,display_fan:!1,context:""}},shouldComponentUpdate:function(e){return e.data.PLAYLIST_ID!==this.props.data.PLAYLIST_ID||e.data.NB_SONG!==this.props.data.NB_SONG||e.data.UNSEEN_TRACK_COUNT!==this.props.data.UNSEEN_TRACK_COUNT},getTrackingParams:function(){return{type:"playlist",id:this.props.data.PLAYLIST_ID}},render:function(){return s.createElement("li",{key:"playlist"+this.props.data.PLAYLIST_ID,className:"nano-card-item",onClick:this._onClick,"data-index":this.props.index},s.createElement("div",{className:"nano-card-picture"},s.createElement(c,{type:"playlist",height:56,width:56,play:"on",preview:"on",playLink:!0,context:this.props.context,overlay:"off",data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),this._renderFavorite()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement(l,{counter:this.props.data.UNSEEN_TRACK_COUNT}),s.createElement("a",{href:"/playlist/"+this.props.data.PLAYLIST_ID,"data-instance":"playlist_name"},this.props.data.TITLE)),this._renderInfo()))},_renderFavorite:function(){return this.props.display_favorite?s.createElement(p,{type:"playlist",id:this.props.data.PLAYLIST_ID,context:this.context.panel_name}):void 0},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_renderInfo:function(){var e=Number(this.props.data.PARENT_USER_ID),t=e!==USER.USER_ID&&this.props.display_creator,a=this.props.display_fan&&this.props.data.NB_FAN>0,n=this.props.display_track,o=[];return t&&o.push(""),n&&o.push(window.breakUpThousands(this.props.data.NB_SONG)+" "+i("titre","titres",{count:this.props.data.NB_SONG})),a&&o.push(window.breakUpThousands(this.props.data.NB_FAN)+" "+i("fan","fans",{count:this.props.data.NB_FAN})),s.createElement("div",{className:"heading-4-sub ellipsis"},t?r("par")+" ":"",t?s.createElement("a",{href:"/profile/"+e,"data-instance":"user_name"},this.props.data.PARENT_USERNAME):"",o.join(" - "))},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),"function"==typeof this.props.onClick&&this.props.onClick(e,this.props.data,this.props.index);var t=dom.dataset(e.target,"instance");"undefined"!=typeof t&&dom.dataset(e.currentTarget,"instance",t);var a=e.target.getAttribute("href");a&&loadBox(a)},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,id:this.props.data.PLAYLIST_ID,type:"playlist",data:this.props.data,position:"right",context:this.context.panel_name,listen_context:{TYPE:this.props.context,ID:this.props.data.PLAYLIST_ID},cover_type:this.props.data.PICTURE_TYPE||"playlist",image:this.props.data.PLAYLIST_PICTURE})}});t.exports=d},{"../../../core/i18n":255,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Badge":59,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,react:"react"}],59:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("react-addons-pure-render-mixin"),i=s.createClass({displayName:"Badge",propTypes:{counter:s.PropTypes.number,type:s.PropTypes.oneOf(["danger","info"])},mixins:[r],getDefaultProps:function(){return{counter:0,type:"info"}},render:function(){if(0===this.props.counter)return!1;var e={badge:!0};e["badge-"+this.props.type]=!0;var t=n(e);return s.createElement("span",{className:t},this.props.counter<100?this.props.counter:"99+")}});t.exports=i},{classnames:"classnames",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],154:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.ngettext,i=e("@deezer/components/_mixins/tracking"),o=e("@deezer/components/common/Thumbnail"),l=e("@deezer/components/common/Favorite"),c=s.createClass({displayName:"Artist",propTypes:{data:s.PropTypes.object,display_favorite:s.PropTypes.bool,display_add:s.PropTypes.bool,context:s.PropTypes.string,index:s.PropTypes.number,thumbnail_rounded:s.PropTypes.bool,onClick:s.PropTypes.func},contextTypes:{panel_name:s.PropTypes.string},mixins:[i],getDefaultProps:function(){return{display_favorite:!0,index:null,thumbnail_rounded:!1}},shouldComponentUpdate:function(e){return e.data.ART_ID!==this.props.data.ART_ID||e.data.NB_FAN!==this.props.data.NB_FAN},getTrackingParams:function(){return{type:"artist",id:this.props.data.ART_ID,index:this.props.index}},render:function(){var e=breakUpThousands(this.props.data.NB_FAN)+" "+r("fan","fans",{count:this.props.data.NB_FAN});return s.createElement("li",{key:"artist"+this.props.data.ART_ID,className:"nano-card-item",onClick:this._onClick},s.createElement("div",{className:"nano-card-picture"},s.createElement(o,{type:"artist",height:56,width:56,rounded:this.props.thumbnail_rounded,playLink:!0,overlay:"off",data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),this._renderFavorite()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/artist/"+this.props.data.ART_ID},this.props.data.ART_NAME)),s.createElement("div",{className:"heading-4-sub ellipsis"},e)))},_renderFavorite:function(){return this.props.display_favorite?s.createElement(l,{type:"artist",id:this.props.data.ART_ID,context:this.context.panel_name}):void 0},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),"function"==typeof this.props.onClick&&this.props.onClick(e,this.props.data,this.props.index);var t=e.target.getAttribute("href");t&&loadBox(t)},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{has_header:!0,target:e.currentTarget,id:this.props.data.ART_ID,type:"artist",data:this.props.data,position:"right",context:this.context.panel_name,listen_context:{TYPE:this.props.context,ID:this.props.data.ART_ID}})}});t.exports=c},{"../../../core/i18n":255,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,react:"react"}],152:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../core/i18n"),r=n.gettext,i=e("@deezer/components/_mixins/tracking"),o=e("@deezer/components/common/Thumbnail"),l=e("@deezer/components/common/Favorite"),c=s.createClass({displayName:"Album",propTypes:{data:s.PropTypes.object,display_favorite:s.PropTypes.bool,display_add:s.PropTypes.bool,context:s.PropTypes.string,index:s.PropTypes.number,onClick:s.PropTypes.func},contextTypes:{panel_name:s.PropTypes.string},mixins:[i],getDefaultProps:function(){return{display_favorite:!0,display_add:!1,context:"",index:null}},shouldComponentUpdate:function(e){return e.data.ALB_ID!==this.props.data.ALB_ID},getTrackingParams:function(){return{type:"album",id:this.props.data.ALB_ID}},render:function(){return s.createElement("li",{key:"album"+this.props.data.ALB_ID,className:"nano-card-item",onClick:this._onClick,"data-index":this.props.index},s.createElement("div",{className:"nano-card-picture"},s.createElement(o,{type:"album",height:56,width:56,play:"on",preview:"on",playLink:!0,context:this.props.context,overlay:"off",data:this.props.data})),s.createElement("div",{className:"nano-card-options"},this._renderAdd(),this._renderFavorite()),s.createElement("div",{className:"nano-card-infos"},s.createElement("div",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/album/"+this.props.data.ALB_ID,"data-instance":"album_name"},this.props.data.ALB_TITLE)),s.createElement("div",{className:"heading-4-sub ellipsis"},r("par")," ",this._renderArtistName())))},_renderArtistName:function(){return this.props.data.ARTISTS?this.props.data.ARTISTS.map(function(e,t){return 0===Number(e.ROLE_ID)||5===Number(e.ROLE_ID)?[t>0?", ":"",s.createElement("a",{href:"/artist/"+e.ART_ID,"data-instance":"artist_name"},e.ART_NAME)]:void 0}):s.createElement("a",{href:"/artist/"+this.props.data.ART_ID,"data-instance":"artist_name"},this.props.data.ART_NAME)},_renderFavorite:function(){return this.props.display_favorite?s.createElement(l,{type:"album",id:this.props.data.ALB_ID,context:this.context.panel_name}):void 0},_renderAdd:function(){return this.props.display_add?s.createElement("a",{className:"option-hide",onClick:this._onAdd},s.createElement("span",{className:"icon icon-options"})):void 0},_onClick:function(e){e.preventDefault(),this.tracking("panel_click",e.currentTarget),"function"==typeof this.props.onClick&&this.props.onClick(e,this.props.data,this.props.index);var t=dom.dataset(e.target,"instance");"undefined"!=typeof t&&dom.dataset(e.currentTarget,"instance",t);var a=e.target.getAttribute("href");a&&loadBox(a)},_onAdd:function(e){e.preventDefault(),e.stopPropagation(),Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,id:this.props.data.ALB_ID,type:"album",data:this.props.data,position:"right",context:this.context.panel_name,listen_context:{TYPE:this.props.context,ID:this.props.data.ALB_ID},image:this.props.data.ALB_PICTURE})}});t.exports=c},{"../../../core/i18n":255,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/Favorite":125,"@deezer/components/common/Thumbnail":138,react:"react"}],277:[function(e,t,a){"use strict";var s=e("jquery"),n=e("../core/i18n"),r=n.gettext,i={id:0,template:"naboo/appstudio",categories:["curators","labels","tools","discovery","games","events"],init:function(){i.initApps(),i.initCategories()},display:function(e){return"object"==typeof e.data?i.displayCallback(e.data):(window.getScripts(window.RESSOURCES.appstudio,function(){api.call("deezer.pageAppstudio",{},i.displayCallback,{})}),!0)},displayCallback:function(e){templating.load(i.template);for(var t=[e.visio,e.apps],a=s(".showcase"),n=s(".applications .applist_container",a),o=s(".application",n).remove(),l=0;l<t.length;l++){for(var c=t[l],p=[],d=0;d<c.length;d++){var u=o.clone(),m=c[d];m.LINK=""===m.INAPP_ALIAS?m.APP_ID:m.INAPP_ALIAS;var h;h=0===l?i.getImgLink(m.APP_PICTURE_950x320,"160x475"):i.getImgLink(m.APP_PICTURE_220x140,"140x220");var _=i.getCatKey(m.CATEGORY);u.addClass(_).find(".meta_name").html(i.getCatName(m.CATEGORY)),u.find(".app_name").html(m.NAME),u.find(".app_description .tinyscroll_overview").html(m.DESCRIPTION),u.find(".app_img img").attr("src",h);var y=[],g=[];"2"==m.INAPP_STATUS?(y.push('<li><a href="'+SETTING_HOST_SITE+"/app/"+m.LINK+'" target="_blank" onclick="tracking.track(\'appstudio_app_click\', {app_id:'+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'inapp', source:'btn', category:'"+_+"'}); appstudio.goToApp('"+m.LINK+"', "+(m.NEED_LOGIN?"true":"false")+');return false;">'+r("App Deezer")+"</a></li>"),g.push('<a href="'+SETTING_HOST_SITE+"/app/"+m.LINK+'" target="_blank" onclick="tracking.track(\'appstudio_app_click\', {app_id:'+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'inapp', source:'icon', category:'"+_+"'});appstudio.goToApp('"+m.LINK+"', "+(m.NEED_LOGIN?"true":"false")+');return false;"><span class="icon icon-deezer-short"></span></a>')):(""!==m.SITE_URL&&(y.push('<li><a href="'+m.SITE_URL+"\" onclick=\"tracking.track('appstudio_app_click', {app_id:"+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'web', source:'btn', category:'"+_+'\'});" target="_blank">Web</a></li>'),g.push('<a href="'+m.SITE_URL+"\" onclick=\"tracking.track('appstudio_app_click', {app_id:"+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'web', source:'icon', category:'"+_+'\'});" target="_blank"><span class="icon icon-html5"></span></a>')),""!==m.APP_STORE_URL&&(y.push('<li><a href="'+m.APP_STORE_URL+"\" onclick=\"tracking.track('appstudio_app_click', {app_id:"+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'ios', source:'btn', category:'"+_+'\'});" target="_blank">iOS</a></li>'),g.push('<a href="'+m.APP_STORE_URL+"\" onclick=\"tracking.track('appstudio_app_click', {app_id:"+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'ios', source:'icon', category:'"+_+'\'});" target="_blank"><span class="icon icon-apple"></span></a>')),""!==m.GOOGLE_PLAY_URL&&(y.push('<li><a href="'+m.GOOGLE_PLAY_URL+"\" onclick=\"tracking.track('appstudio_app_click', {app_id:"+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'android', source:'btn', category:'"+_+'\'});" target="_blank">Android Market</a></li>'),g.push('<a href="'+m.GOOGLE_PLAY_URL+"\" onclick=\"tracking.track('appstudio_app_click', {app_id:"+m.APP_ID+", app_name:'"+escape(m.NAME)+"', type:'android', source:'icon', category:'"+_+'\'});" target="_blank"><span class="icon icon-android"></span></a>'))),u.find(".button-container .block_available-links ul").append(y.join("")),u.find(".meta_links").append(g.join("")),p.push(u.get(0).outerHTML)}s(n.get(l)).html(p.join(""))}naboo.afterLoad(!0),i.init()},getCatKey:function(e){return"undefined"==typeof i.categories[e]?"":i.categories[e]},getCatName:function(e){return"undefined"==typeof i.categories[e]?"":i.categories_name[i.categories[e]]},getImgLink:function(e,t){return SETTING_DOMAIN_IMG+"/misc/"+e+"/"+t+"-ffffff-90-1-1.jpg"},goToApp:function(e,t){return 0===USER.USER_ID&&t?(www.goToConnection(),!1):void loadBox("/app/"+e)},resizeTinyscrollbars_timeout:null,resizeTinyscrollbars:function(){null!==i.resizeTinyscrollbars_timeout&&(window.clearTimeout(i.resizeTinyscrollbars_timeout),i.resizeTinyscrollbars_timeout=null),i.resizeTinyscrollbars_timeout=window.setTimeout(function(){s(".app_description").each(function(){s(this).tinyscrollbar_update("relative")})},500)},initApps:function(){s(".app_description").each(function(){s(this).tinyscrollbar({extremePreventDefault:!1})}),s(".applist_container").each(function(e){0===e?s(this).coverPane({max_line:1,ratio:.35,cover_size:475,padding:20,between:20,label_size:100,onresize:function(){i.resizeTinyscrollbars()}}):s(this).coverPane({ratio:.63,cover_size:220,padding:20,between:20,label_size:140,onresize:function(){i.resizeTinyscrollbars()}})}),s(".application .app_img").hover(function(){},function(){s(this).find(".block_available-links").hide()}),s(".button-container").each(function(){var e=s(this).find(".block_available-links li");if(1===e.length){var t=s(this).find(".btn");t.find(".icon-arrow-filter-down").remove(),t.css({"padding-right":"13px","text-align":"center"}),t.click(function(){var t=e.find("a"),a=t.get(0).onclick();a!==!1&&window.open(t.attr("href"))})}else s(this).find(".btn").click(function(){s(this).parent().find(".block_available-links").slideToggle("fast")})}),s(".icn_deezer").tipsy({gravity:"e",fallback:r("Disponible dans Deezer")}),s(".icn_web").tipsy({gravity:"e",fallback:r("Disponible sur le Web")}),s(".icn_ios").tipsy({gravity:"e",fallback:r("Disponible sur iOS")}),s(".icn_android_market").tipsy({gravity:"e",fallback:r("Disponible sur Android")})},initCategories:function(){s(".app_cat_menu .menu_item").each(function(){s(this).click(function(){var e=s(this).attr("id-cat"),t=s("#apps_container");return"all"===e?(s(".app_cat_menu .menu_item").removeClass("app_disabled"),s(".application",t).removeClass("app_disabled"),!0):(s(".app_cat_menu .menu_item").addClass("app_disabled"),s(this).removeClass("app_disabled"),s(".application",t).addClass("app_disabled"),void s(".application."+e,t).removeClass("app_disabled"))})})},openAppDetails:function(e){loadFacebox("/lightbox/app.php?app_id="+e)},actual_width:0,nb_apps:0,apps_container:null,big_apps:[],events_subscribed:!1,subscribeEvents:function(){return i.events_subscribed?!1:(i.events_subscribed=!0,void Events.subscribe(Events.layout.resize,i.redrawApps))},initCovers:function(){i.actual_width=0,i.nb_apps=0,i.big_apps=[],i.apps_container=s("#apps_container"),i.prepareListApp(),i.redrawApps(),i.subscribeEvents()},prepareListApp:function(){i.apps_container.find(".application").each(function(e){var t=s(this);if(t.is(".app_big")){var a={position_original:e,position:e,element:t};i.big_apps.push(a)}i.nb_apps=e+1})},getNbAppsAfter:function(e){if(e>=i.big_apps.length)return 0;var t=i.big_apps[e],a=i.nb_apps-t.position-1;return e+1<i.big_apps.length&&(a=i.big_apps[e+1].position_original-t.position-1),a},getNbAppsBefore:function(e){if(e>=i.big_apps.length)return 0;var t=0;e>0&&(t=i.big_apps[e-1].position+1);var a=i.big_apps[e].position,s=a-t;return s},redrawApps:function(){var e=i.apps_container.width(),t=222,a=18,n=Math.floor((e+a)/(t+a)),r=n*(t+a)-a;if(r==i.actual_width)return!1;i.actual_width=r;for(var o=0;o<i.big_apps.length;o++){i.big_apps[o].position=i.big_apps[o].position_original;var l=i.big_apps[o],c=i.getNbAppsBefore(o),p=i.getNbAppsAfter(o);if(o%2==1&&l.element.css({"float":"right"}),o>0){if(m=2*(n-2),c==m)continue;if(m>c){var d=m-c;if(d>=p){l.position=l.position-c,p=i.getNbAppsAfter(o),n>4&&2*(n-4)>p&&l.element.css({"float":"left"});continue}l.position=l.position+d,p=i.getNbAppsAfter(o),4>=n&&2*(n-2)>p&&l.element.css({"float":"left"}),c=0}else c-=m}var u=Math.ceil(c/n),m=u*n-c;m>n/2?l.position=l.position-(n-m):l.position=l.position+m}i.apps_container.find(".application.app_big").remove();for(var h=0;h<i.big_apps.length;h++){var _=i.apps_container.find(".application"),y=Math.min(i.big_apps[h].position-1,_.length-1);i.big_apps[h].element.insertAfter(s(_.get(y)))}s(".applications",i.apps_container).css({width:r+"px"}),s(".applist_container",i.apps_container).css({width:r+a+"px"}),s(".fluid_container").css({width:r+"px"})}};t.exports=i},{"../core/i18n":255,jquery:"jquery"}],276:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),s=e("react"),n=e("react-dom"),i=e("../core/i18n"),o=i.gettext,l=i.ngettext,c=e("@deezer/components/common/ActionToolbar"),p=e("@deezer/components/common/DataGrid"),d=e("@deezer/components/common/Thumbnail"),u={id:0,data:[],template:"catalog/album",display:function(e){return"string"==typeof e.alb_id?(u.id=u.alb_id=parseInt(e.alb_id,10),"object"==typeof e.data?void Events.ready(Events.user.initialized,function(){u.displayCallback(e.data)}):void api.call("deezer.pageAlbum",{alb_id:u.id,lang:SETTING_LANG,tab:0},u.displayCallback)):void 0},displayCallback:function(e){if(templating.load(u.template),"object"==typeof e.DATA.FALLBACK)return loadBox("/album/"+e.DATA.FALLBACK.ALB_ID),!1;u.data=e.DATA;var t={comment:{selected:!0,args:{type:"album",id:e.DATA.ALB_ID}},related_playlist:{args:{type:"album",id:e.DATA.ALB_ID}},fan:{args:{type:"album",id:e.DATA.ALB_ID}},related_artist:{args:{art_id:e.DATA.ART_ID}},discography:{args:{art_id:e.DATA.ART_ID,page:"album"}},edito:{disabled:!0,args:{id:e.DATA.ALB_ID}}};r("#naboo_album_title").text(e.DATA.ALB_TITLE);var a=document.getElementById("naboo_album_image");if(a){var i={zoom_on_cover:!0,excludes:["go_to_album"]};n.render(s.createElement(d,{type:"album",context:"album_page",play:"force",data:e.DATA,width:200,height:200,bordered:!0,showOptions:!0,sticker:!0,contextMenuOptions:i}),a)}var m=[],h=[];if("undefined"!=typeof e.DATA.ARTISTS&&e.DATA.ARTISTS.length>0){var _=r("#naboo_album_artist_modele").clone().removeAttr("id");r("#naboo_album_artist_modele").remove();for(var y=r("<p></p>"),g=0;g<e.DATA.ARTISTS.length;g++)if(0===Number(e.DATA.ARTISTS[g].ROLE_ID)||5===Number(e.DATA.ARTISTS[g].ROLE_ID)){var f=_.clone();f.attr("href","/artist/"+e.DATA.ARTISTS[g].ART_ID).text(e.DATA.ARTISTS[g].ART_NAME),m.push(e.DATA.ARTISTS[g].ART_NAME),0===Number(e.DATA.ARTISTS[g].ROLE_ID)&&(h[e.DATA.ARTISTS[g].ART_ID]=!0),g>0&&y.append(r("<span>, </span>")),y.append(f)}r("#naboo_album_artist").html(y.children())}else m.push(e.DATA.ART_NAME),r("#naboo_album_artist_modele").text(e.DATA.ART_NAME).attr("href","/artist/"+e.DATA.ART_ID);Events.subscribeOnce(Events.navigation.tab_displayed,function(){r("#naboo_album_heading").height()>135&&r("#naboo_catalog_heading").addClass("extended").next().addClass("album-full-infos")}),Events.subscribe(Events.user.addFavorite,u.updateNbFan),Events.subscribe(Events.user.deleteFavorite,u.updateNbFan),"string"==typeof e.DATA.PHYSICAL_RELEASE_DATE&&"0000-00-00"!==e.DATA.PHYSICAL_RELEASE_DATE&&r('#naboo_album_info > [data-target="date"] > strong').text(formatDate(e.DATA.PHYSICAL_RELEASE_DATE)),e.DATA.NB_FAN>0&&(r('#naboo_album_info > [data-target="fans"] > a > strong').text(breakUpThousands(e.DATA.NB_FAN)),r('#naboo_album_info > [data-target="fans"] > a').append(l("Fan","Fans",{count:e.DATA.NB_FAN})));var b=r("#naboo_album_review");if(e.CHRONICLES.count>0){t.edito.disabled=!1;for(var v in e.CHRONICLES.data)if(e.CHRONICLES.data.hasOwnProperty(v)){var E=e.CHRONICLES.data[v],T=E.LOGO_BIG.split(".");r('[data-target="logo"]',b).append('<a href="javascript:void(0)" class="review-logo" onclick="album.onOpenTab(\'edito\', \''+E.SOURCE+'\');"><img src="'+SETTING_STATIC+"/img/review/big/"+T[0]+"-v"+STATIC_VERSION+"."+T[1]+'"/></a>')}1===e.CHRONICLES.count?r('[data-target="text"]',b).prepend(e.CHRONICLES.data[0].RESUME):(r('[data-target="text-link"]',b).remove(),r('[data-target="text"]',b).text(o("Découvrez les chroniques :")).parent().removeClass("has-readmore")),r("#tab_edito_link > a").text(l("Chronique","Chroniques",{count:e.CHRONICLES.count}))}else b.hide();var S=document.getElementById("naboo_album_action");S&&n.render(s.createElement(c,{id:u.id,type:"album"}),S),r("#naboo_album_legal").text(e.DATA.PHYSICAL_RELEASE_DATE.substr(0,4)+" | "+e.DATA.LABEL_NAME);var A,N=[],P=0,k={data:[],count:0,total:0},I=0;if(e.SONGS&&"number"==typeof e.SONGS.count&&e.SONGS.count>0){for(var x in e.SONGS.data)if(e.SONGS.data.hasOwnProperty(x)){var D=e.SONGS.data[x];P=parseInt(D.DISK_NUMBER,10)-1,A=parseInt(D.TRACK_NUMBER,10)-1,"undefined"==typeof N[P]&&(N[P]=[]),("undefined"==typeof N[P][A]||right.checkSongAvailable(D)===right.READABLE)&&("undefined"!=typeof D.FALLBACK&&(D.FALLBACK.DISK_NUMBER=D.DISK_NUMBER,D.FALLBACK.TRACK_NUMBER=D.TRACK_NUMBER),N[P][A]=D,I+=parseInt(D.DURATION,10))}P=N.length;var C=function(e){return!h[e.ART_ID]};for(var w in N)if(N.hasOwnProperty(w))for(A in N[w])N[w].hasOwnProperty(A)&&(N[w][A].ARTISTS=N[w][A].ARTISTS.filter(C),k.data.push(N[w][A]));k.count=k.total=k.data.length,Events.trigger(Events.album.noReplaceNeed,{id:parseInt(e.DATA.ALB_ID,10),type:"empty"})}else Events.trigger(Events.album.checkReplace,{id:parseInt(e.DATA.ALB_ID,10),type:"empty"});return n.render(s.createElement(p,{id:Number(e.DATA.ALB_ID),type:"album",items:k.data}),document.getElementById("naboo_album_tracks")),r('#naboo_album_info > [data-target="duration"] > strong').text(getTotalDuration(I)),tabs.init(r("#naboo_album_tabs"),t),naboo.afterLoad(!0),!0},updateNbFan:function(e,t){return Number(t.id)!==Number(u.alb_id)?!1:("USER.addFavorite"===e.namespace?u.data.NB_FAN+=1:u.data.NB_FAN-=1,void r('#naboo_album_action [data-target="fans"] > a').html(l("%s Fan","%s Fans",{count:u.data.NB_FAN,sprintf:["<strong>"+breakUpThousands(u.data.NB_FAN)+"</strong>"]})))},onOpenTab:function(e,t){tabs.display(e),"undefined"!=typeof t&&window[e].onDisplay(t),r("#page_content").scrollTop(0)},getLiveFeed:function(){return"1_0_ALBUMFEED_"+u.id},leave:function(){var e=document.getElementById("naboo_album_tracks");e&&n.unmountComponentAtNode(e)}};t.exports=u},{"../core/i18n":255,"@deezer/components/common/ActionToolbar":58,"@deezer/components/common/DataGrid":97,"@deezer/components/common/Thumbnail":138,jquery:"jquery",react:"react","react-dom":"react-dom"}],58:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/common/StatesButton"),r=e("@deezer/components/common/Tooltip"),i=e("../../core/i18n"),o=i.gettext,l=s.createClass({displayName:"ActionToolbar",propTypes:{id:s.PropTypes.number.isRequired,type:s.PropTypes.oneOf(["show","artist","album","playlist","song","user"]).isRequired,action:s.PropTypes.array,edit:s.PropTypes.func,play_context:s.PropTypes.string},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string},childContextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string},getDefaultProps:function(){return{action:["favorite","share"],edit:function(){},play_context:""}},getChildContext:function(){return{id:this.props.id,name:this.props.play_context}},render:function(){return s.createElement("ul",{className:"list-actions"},this.props.action.map(function(e){return"function"==typeof this["_render"+window.ucfirst(e)]?s.createElement("li",{key:e},this["_render"+window.ucfirst(e)]()):void 0}.bind(this)))},_renderFavorite:function(){return s.createElement(n,{id:this.props.id,type:this.props.type})},_renderPlay:function(){return s.createElement(n,{id:this.props.id,type:this.props.type,action:"play",color:"primary",wording_type:"full",play_context:this.props.play_context})},_renderShare:function(){return s.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onShare},s.createElement("span",{className:"icon icon-share"}),s.createElement("span",{className:"label"},o("Partager")))},_renderEdit:function(){return s.createElement(r,{text:o("Editer")},s.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onEdit},s.createElement("span",{className:"icon icon-edit"})))},_onShare:function(){window.sharebox.load(this._types[this.props.type],this.props.id)},_onEdit:function(){this.props.edit()},_types:{track:0,album:1,artist:2,playlist:3,radio:4,smart_radio:6,smartradio:6,sradio:6,show:7,episode:8}});t.exports=l},{"../../core/i18n":255,"@deezer/components/common/StatesButton":134,"@deezer/components/common/Tooltip":151,react:"react"}],275:[function(e,t,a){"use strict";var s,n=e("react"),r=e("react-dom"),i=e("@deezer/components/tracklist/TrackList"),o={display:function(e){s=document.getElementById("tab_track_list_content"),s&&r.render(n.createElement(i,{playlist:e.data}),s),Events.trigger(Events.navigation.tab_displayed,e)},leave:function(){s&&r.unmountComponentAtNode(s)}};t.exports=o},{"@deezer/components/tracklist/TrackList":229,react:"react","react-dom":"react-dom"}],229:[function(e,t,a){"use strict";var s=e("react"),n=e("../../core/i18n"),r=n.gettext,i=e("@deezer/components/common/DataGrid"),o=s.createClass({displayName:"TrackList",propTypes:{playlist:s.PropTypes.object.isRequired},childContextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),lastSeen:s.PropTypes.number},getChildContext:function(){return{id:this.props.playlist.id,lastSeen:this.props.playlist.last_seen}},componentDidMount:function(){Events.subscribe(Events.playlist.addSong,this._updateHeaderAdd),Events.subscribe(Events.playlist.removeSong,this._updateHeaderRemove)},componentWillUnmount:function(){Events.unsubscribe(Events.playlist.addSong,this._updateHeaderAdd),Events.unsubscribe(Events.playlist.removeSong,this._updateHeaderRemove)},render:function(){if(this.props.playlist.playlist_private===!0)return this._renderPrivatePlaceholder();var e="playlist";return this.props.playlist.playlist_personnal||this.props.playlist.playlist_collab?e="personalPlaylist":(gatekeeper.isAllowed("curator_edito")||gatekeeper.isAllowed("curator_local"))&&(e="curatorPlaylist"),s.createElement(i.FullPage,{type:e,items:this.props.playlist.songs.data})},_renderPrivatePlaceholder:function(){return s.createElement("div",{className:"datagrid datagrid-header"},s.createElement("div",{className:"wrapper",id:"naboo_datagrid_private"},s.createElement("div",{className:"placeholders-img private"}),s.createElement("div",{className:"placeholders-title"},r("Cette playlist est privée"))))},_updateHeaderAdd:function(e,t){this._updateHeader("add",t.song)},_updateHeaderRemove:function(e,t){this._updateHeader("remove",t.song)},_updateHeader:function(e,t){api.call({method:"song.getListAllData",data:{sng_ids:t},success:function(t){var a=("add"===e?1:-1)*this._getPlaylistDuration(t.data),s=("add"===e?1:-1)*t.data.length;window.playlist.updateDurationAndNbSongs(a,s)}.bind(this)})},_getPlaylistDuration:function(e){switch(e.length){case 0:return 0;case 1:return Number(e[0].DURATION);default:return e.reduce(function(e,t){return(Number(e.DURATION)||e)+Number(t.DURATION)})}}});t.exports=o},{"../../core/i18n":255,"@deezer/components/common/DataGrid":97,react:"react"}],274:[function(e,t,a){"use strict";var s,n=e("react"),r=e("react-dom"),i=e("@deezer/components/common/DataGrid"),o={id:0,display:function(e){return o.id=e.id,api.call({method:"artist.getTopTrack",data:{art_id:o.id,start:0,nb:40},success:o.displayCallback}),!0},displayCallback:function(e){if(s=document.getElementById("naboo_top_track_artist")){var t={id:o.id,type:"artistTopTracks",items:e.data};r.render(n.createElement(i.FullPage,t),s)}Events.trigger(Events.navigation.tab_displayed,{type:"top_track",id:o.id})},leave:function(){s&&n.unmountComponentAtNode(s)}};t.exports=o},{"@deezer/components/common/DataGrid":97,react:"react","react-dom":"react-dom"}],273:[function(e,t,a){"use strict";var s=e("jquery"),n={display:function(e){var t=s("#tab_show_info_content");return s('[data-target="title"]',t).html(e.data.SHOW_NAME),s('[data-target="text"]',t).html(e.data.SHOW_DESCRIPTION),Events.trigger(Events.navigation.tab_displayed,e),!0}};t.exports=n},{jquery:"jquery"}],272:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("@deezer/components/common/ThumbnailGrid"),i={display:function(e){var t=document.getElementById("related_content_top");if(!t||"undefined"==typeof e.album_list||0===countObject(e.album_list))return!1;for(var a=[],i=0;i<e.album_list.length;i++)right.checkSongAvailable(e.album_list[i])===right.READABLE&&a.push(e.album_list[i]);var o={data:a,type:"album",context:"track_page",options:["name","artist"]};return n.render(s.createElement(r,o),t),Events.trigger(Events.navigation.tab_displayed,e),!0},leave:function(){var e=document.getElementById("related_content_top");e&&n.unmountComponentAtNode(e)}};t.exports=i},{"@deezer/components/common/ThumbnailGrid":148,react:"react","react-dom":"react-dom"}],271:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("@deezer/components/common/ThumbnailGrid"),i={id:0,type:0,destroy:function(){o.data=[],o.start=0;var e=document.getElementById("naboo_related_playlist_list");e&&n.unmountComponentAtNode(e)},display:function(e){return i.id=e.id,i.type=e.type,"undefined"!=typeof e.start&&(o.start=e.start),api.call({method:i.type+"_getRelatedPlaylist",data:{id:i.id,start:o.start,nb:o.nb},success:o.displayCallback}),!0},onDisplay:function(){o.activeInfiniteScroll()}},o={start:0,nb:15,loadComplete:!1,data:[],displayCallback:function(e){var t=document.getElementById("naboo_related_playlist_list");if(t){o.loadComplete=e.total<=parseInt(o.start+o.nb,10),o.data.length?o.data=o.data.concat(e.data):o.data=e.data;var a={data:o.data,type:"playlist",context:i.type+"_similar_playlist",tab:"related_playlists",options:["name","fans","tracks","play_link"],placeHolder:{img:"recommendation",wording:gettext("Aucune playlist n'est disponible.")}};n.render(s.createElement(r,a),t,o.activeInfiniteScroll),Events.trigger(Events.navigation.tab_displayed,{type:"related_playlist",id:i.id})}},activeInfiniteScroll:function(){return o.loadComplete?(infinite_scroll.disable(),!1):(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),i.display({id:i.id,type:i.type,start:o.start+o.nb})},"related_playlist"),void infinite_scroll.active())}};t.exports=i},{"@deezer/components/common/ThumbnailGrid":148,react:"react","react-dom":"react-dom"}],270:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("@deezer/components/common/ThumbnailGrid"),i={art_id:0,start:0,nb:15,loadComplete:!1,data:[],display:function(e){i.art_id=e.art_id,"undefined"!=typeof e.start&&(i.start=e.start);var t={art_id:i.art_id,start:i.start,nb:i.nb};return api.call("artist.getRelated",t,i.displayCallback),!0},displayCallback:function(e){var t=document.getElementById("naboo_related_list");if(t){i.loadComplete=e.total<=parseInt(i.start+i.nb,10),i.data.length?i.data=i.data.concat(e.data):i.data=e.data;var a={data:i.data,type:"artist",context:"artist_page",options:["name","fans","favorite"],placeHolder:{img:"recommendation",wording:gettext("Aucun artiste similaire n'est disponible")}};n.render(s.createElement(r,a),t,i.activeInfiniteScroll),Events.trigger(Events.navigation.tab_displayed,{type:"related",id:i.art_id})}},onDisplay:function(){i.activeInfiniteScroll()},activeInfiniteScroll:function(){return i.loadComplete?(infinite_scroll.disable(),!1):(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),i.display({art_id:i.art_id,start:i.start+i.nb})},"related"),void infinite_scroll.active())},destroy:function(){i.data=[],i.start=0;var e=document.getElementById("naboo_related_list");e&&n.unmountComponentAtNode(e)}};t.exports=i},{"@deezer/components/common/ThumbnailGrid":148,react:"react","react-dom":"react-dom"}],269:[function(e,t,a){"use strict";var s=e("jquery"),n={display:function(e){return api.call({method:"song.getlyrics",data:{SNG_ID:e.sng_id},success:function(t){for(var a,n,r=s("#tab_lyrics_content"),i=t.LYRICS_TEXT.split(/\r\n|\r|\n/g),o=document.createDocumentFragment(),l=0,c=i.length;c>l;l++)n=i[l],a=document.createElement("p"),a.innerHTML=n||"&nbsp;",o.appendChild(a);s(".lyrics-content",r).append(o),s(".copyrights",r).html(t.LYRICS_COPYRIGHTS),s(".writers",r).html(t.LYRICS_WRITERS);var p=s(".btn-karaoke",r);p.on("click",function(){"ads"!==dzPlayer.getPlayerType()&&(dzPlayer.getCurrentSong("SNG_ID")!==e.sng_id?(dzPlayer.play({id:e.sng_id,type:"track"}),Events.subscribeOnce(Events.player.play,function(){Events.trigger(Events.menu.openPanel,"lyrics")})):Events.trigger(Events.menu.openPanel,"lyrics"))}),t.LYRICS_SYNC_JSON&&t.LYRICS_SYNC_JSON.length?p.addClass("has-sync"):p.addClass("has-text"),p.removeClass("hide"),Events.trigger(Events.navigation.tab_displayed,e),window.lyrics.log({action:{type:"display"},container:"page_track",sng:e.sng_id,ts:SERVER_TIMESTAMP,type:t.LYRICS_SYNC_JSON&&t.LYRICS_SYNC_JSON.length?"synchro":"full_text"})}}),!0},log:function(e){api.call({method:"log_central.log",data:{BATCH:[{channel:"lyrics",params:e}]}})}};t.exports=n},{jquery:"jquery"}],268:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("../../core/i18n"),i=r.gettext,o=e("jquery"),l=e("@deezer/components/common/Thumbnail"),c=e("@deezer/components/common/Thumbnail/utils"),p=e("@deezer/components/talk/LatestEpisodes"),d={template:"naboo/latest_episodes",data:[],count:0,duration:0,display:function(){templating.load(d.template),Events.ready(Events.user.dataStoreReady,function(){0!==userData.data.FAVORITES_SHOWS.data.length?(d.data=d._buildEpisodes(userData.data.FAVORITES_SHOWS.data),o('#naboo_episodes_info > [data-target="duration"] > strong').text(getTotalDuration(d.duration)),o('#naboo_episodes_info > [data-target="nb-episodes"] > strong').text(userData.data.FAVORITES_SHOWS.data.length),o("#episodes_content h3").hide(),n.render(s.createElement(p,{list:d.data}),document.getElementById("episodes_content"),function(){naboo.afterLoad(!0)})):(o('#naboo_episodes_info > [data-target="duration"] > strong').text(getTotalDuration(0)),o('#naboo_episodes_info > [data-target="nb-episodes"] > strong').text(0),o("#episodes_content h3").text(i("Aucun podcast"))),Events.ready(Events.user.userReady,function(){o("#naboo_playlist_information_creator").html(encodeHTMLEntities(USER.BLOG_NAME))})}),o("#naboo_episodes_title").text(i("Derniers épisodes disponibles"));var e=document.getElementById("naboo_episodes_image");if(e){var t=c.getImageSrc("misc","ab63361d54955f5f6494fd1b258b336a",200,200);n.render(s.createElement(l,{type:"show",context:"artist_page",overlay:"off",width:200,height:200,imgSrc:t,bordered:!0,coverLink:!1}),e)}naboo.afterLoad(!0)},_buildEpisodes:function(e){for(var t,a=[],s=0;s<e.length;s+=1)t=d._addHeardData(e[s].LATEST_EPISODE.data[0]),d.duration+=parseInt(t.DURATION,10),a.push(t);return a},_addHeardData:function(e){var t=window.bookmark.getEpisodeBookmark(e.EPISODE_ID,e.DURATION);return e.IS_HEARD=t.IS_HEARD,e}};t.exports=d},{"../../core/i18n":255,"@deezer/components/common/Thumbnail":138,"@deezer/components/common/Thumbnail/utils":139,"@deezer/components/talk/LatestEpisodes":226,jquery:"jquery",react:"react","react-dom":"react-dom"}],226:[function(e,t,a){"use strict";var s=e("react"),n=e("@deezer/components/common/DataGrid"),r=s.createClass({displayName:"LatestEpisodes",propTypes:{list:s.PropTypes.object.isRequired},childContextTypes:{id:s.PropTypes.number,name:s.PropTypes.string},getChildContext:function(){return{id:Number(this.props.list[0].EPISODE_ID),name:"show_page"}},render:function(){return s.createElement(n,{type:"talkEpisodes",items:this.props.list,options:{header:!1,infiniteScroll:!1,toolbar:!1}})}});t.exports=r},{"@deezer/components/common/DataGrid":97,react:"react"}],267:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("jquery"),i=e("../../core/i18n"),o=i.ngettext,l=e("@deezer/components/common/ThumbnailGrid"),c={type:"",element_id:0,nb:20,start:0,data:[],loadComplete:!1,rendering:!1,display:function(e){if(!c.rendering){c.rendering=!0,c.type=e.type,c.element_id=e.id,"undefined"!=typeof e.start&&(c.start=e.start);var t,a={start:c.start,nb:c.nb,country_name:!0};switch(c.type){case"playlist":t="playlist.getFans",a.playlist_id=c.element_id;break;case"artist":t="artist.getFans",a.art_id=c.element_id;break;case"album":t="album.getFans",a.alb_id=c.element_id}api.call(t,a,c._displayCallback)}},destroy:function(){c.start=0,c.data=[];var e=document.getElementById("naboo_fan_list");e&&n.unmountComponentAtNode(e)},onDisplay:function(){this._reload()},_displayCallback:function(e){var t=document.getElementById("naboo_fan_list");if(t){c.loadComplete=e.total<=parseInt(c.start+c.nb,10),c.data=c.data.concat(e.data);var a={data:c.data,type:"user",context:"artist_page",options:["name","follow"],placeHolder:{img:"recommendation",wording:gettext("Aucun fan actuellement")}};n.render(s.createElement(l,a),t,function(){c._activateListeners(),c.rendering=!1});var i=r("#naboo_fan_title");if(e.count>0){if(0===c.start){i.show();var p=window[c.type].data.NB_FAN;i.html(o("%s Fan","%s Fans",{count:p,sprintf:[breakUpThousands(p)]}))}}else i.hide();Events.trigger(Events.navigation.tab_displayed,{type:c.type,id:c.element_id})}},_reload:function(){c.start=0,c.data=[],c.display({id:c.element_id,type:c.type})},_activateListeners:function(){c.loadComplete?infinite_scroll.disable():(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),c.display({id:c.element_id,type:c.type,start:c.start+c.nb})},"fan"),infinite_scroll.active()),Events.subscribeOnce(Events.user.addFavorite,function(e,t){t.id&&Number(t.id)===Number(c.element_id)&&this._reload()}.bind(this),"fan"),Events.subscribeOnce(Events.user.deleteFavorite,function(e,t){t.id&&Number(t.id)===Number(c.element_id)&&this._reload()}.bind(this),"fan")}};t.exports=c},{"../../core/i18n":255,"@deezer/components/common/ThumbnailGrid":148,jquery:"jquery",react:"react","react-dom":"react-dom"}],266:[function(e,t,a){"use strict";var s=e("jquery"),n={display:function(e){s("#naboo_episode_description").text(e.description),Events.trigger(Events.navigation.tab_displayed,{type:e.type,id:e.id})}};t.exports=n},{jquery:"jquery"}],265:[function(e,t,a){"use strict";var s=e("jquery"),n=e("../../core/i18n"),r=n.gettext,i={alb_id:0,current_provider:"",data:{},display:function(e){i.alb_id=e.id,i.current_provider=e.provider||"",i.content=s("#tab_edito_content");var t={alb_id:i.alb_id,lang:SETTING_LANG};return api.call("review.getList",t,i.displayCallback),!0},displayCallback:function(e,t){i.data=e,i.current_provider=t.provider_name||i.current_provider;var a=0;if(null!=e.count&&e.count>0){s('[data-target="logo"]',i.content).empty(),s('[data-target="author"] > img',i.content).remove();for(var n in e.data)if(e.data.hasOwnProperty(n)){var o=e.data[n],l=o.LOGO_BIG.split(".");if(o.SOURCE===i.current_provider&&(a=n),2===l.length){var c=SETTING_STATIC+"/img/review/big/"+l[0]+"-v"+STATIC_VERSION+"."+l[1],p=o.PARTNER_NAME,d=o.SOURCE;""===i.provider&&(i.provider=d);var u='<img src="'+c+'" alt="'+p+'"/>';e.count>1&&(u='<a href="javascript:void(0)" class="review-logo" onclick="edito.changePovider(\''+o.SOURCE+"'); return false;\">"+u+"</a>"),s('[data-target="logo"]',i.content).append(u)}}s('[data-target="logo"] > a',i.content).removeClass("active"),s('[data-target="logo"] > a:eq('+a+")",i.content).addClass("active"),s('[data-target="title"]',i.content).text(album.data.ALB_TITLE),s('[data-target="author"]',i.content).text(e.data[a].AUTHOR_NAME||""),""!==e.data[a].PARTNER_NAME&&""!==e.data[a].URL&&s('[data-target="source"]',i.content).html(r("Source :")+' <a href="'+e.data[a].URL+'" class="link-primary" target="_blank">'+e.data[a].PARTNER_NAME+'<span class="icon icon-arrow-right icon-after"></span></a>'),null!=e.data[a].URL&&null!=e.data[a].CHRONICLE&&s('[data-target="text"]',i.content).html(e.data[a].CHRONICLE)}return Events.trigger(Events.navigation.tab_displayed,{type:"edito",id:i.alb_id}),!0},onDisplay:function(e){i.current_provider=e,i.changePovider(e)},changePovider:function(e){return i.displayCallback(i.data,{provider_name:e}),!0}};t.exports=i},{"../../core/i18n":255,jquery:"jquery"}],264:[function(e,t,a){"use strict";var s=e("react"),n=e("react-dom"),r=e("@deezer/components/common/Discography"),i={initialized:!1,loadComplete:!1,pagination:{start:0,nb:15,max:500},sort:"type",art_id:0,data:[],init:function(){return i.initialized?!0:(i.initialized=!0,i.pagination.start=0,i.data=[],!0)},display:function(e){return i.init(),i.art_id=e.art_id,"undefined"!=typeof e.page&&(i.page=e.page),"undefined"!=typeof e.start&&(i.pagination.start=e.start),0===i.pagination.start&&(i.loadComplete=!1),i.sort!==e.sort&&(i.data=[],i.pagination.start=0,i.sort=e.sort),"object"==typeof e.data?(i.displayCallback(e.data),!0):(api.call({method:"album.getDiscography",data:{art_id:i.art_id,start:i.pagination.start,nb:i.pagination.nb,sort:i.sort,filter_role_id:[0,1,5]},success:i.displayCallback}),!0)},displayCallback:function(e){if("undefined"==typeof e||"undefined"==typeof e.data)return infinite_scroll.disable(),!1;if(0===i.pagination.start&&(i.pagination.max=e.total,0===i.pagination.max))return Events.trigger(Events.navigation.tab_displayed,{id:i.art_id,type:"discography"}),!1;if(0===i.data.length?i.data=e.data:i.data=i.data.concat(e.data),i.container=document.getElementById("discography_artist"),i.container){var t={data:i.data,format:"small",onSort:i.onSortLoad,total:i.pagination.max,tracking:"artist"===i.page};n.render(s.createElement(r,t),i.container,i.activeInfiniteScroll)}Events.trigger(Events.navigation.tab_displayed,{id:i.art_id,type:"discography"})},onSortLoad:function(e){Events.unsubscribeAll("discography"),i.display({art_id:i.art_id,start:i.pagination.start+i.pagination.nb,nb:i.pagination.nb,sort:e})},activeInfiniteScroll:function(){return i.pagination.start+i.pagination.nb>=i.pagination.max?(infinite_scroll.disable(),!1):(Events.subscribeOnce(Events.layout.infiniteScroll,function(){infinite_scroll.disable(),i.display({art_id:i.art_id,start:i.pagination.start+i.pagination.nb,nb:i.pagination.nb,sort:i.sort})},"discography"),void infinite_scroll.active())},destroy:function(){Events.unsubscribeAll("discography"),i.container&&n.unmountComponentAtNode(i.container),i.pagination.start=0,i.data=[]}};t.exports=i},{"@deezer/components/common/Discography":120,react:"react","react-dom":"react-dom"}],120:[function(e,t,a){"use strict";t.exports=e("./Discography")},{"./Discography":117}],117:[function(e,t,a){"use strict";var s=e("react"),n=e("./_elements/Album"),r=e("@deezer/components/common/ThumbnailGrid"),i=e("./_elements/Sorter"),o=e("@deezer/components/_mixins/sort"),l=e("@deezer/components/_mixins/tracking"),c=e("classnames"),p=e("../../../core/i18n"),d=p.gettext,u=s.createClass({displayName:"Discography",propTypes:{data:s.PropTypes.array.isRequired,onSort:s.PropTypes.func,limitSong:s.PropTypes.number,total:s.PropTypes.number,heading:s.PropTypes.bool,sorter:s.PropTypes.bool,sortBy:s.PropTypes.string,producerLine:s.PropTypes.bool,addFavorite:s.PropTypes.bool,format:s.PropTypes.oneOf(["big","small"]),tracking:s.PropTypes.bool,context:s.PropTypes.string},mixins:[o,l],getDefaultProps:function(){return{onSort:function(){},limitSong:10,total:0,heading:!0,sorter:!0,sortBy:"type",format:"big",tracking:!1}},getInitialState:function(){return{format:this.props.format,sortBy:this.props.sortBy}},render:function(){if(!this.props.data.length)return this._renderPlaceholder();var e=this.props.data;return this._isAllDataLoaded()&&(e=this.sort(this.props.data,this._getSortKey())),"big"===this.state.format?this._renderDiscographyBig(e):this._renderDiscographySmall(e)},_renderDiscographyBig:function(e){var t,a="";return s.createElement("div",{className:"catalog-tab-discography"},e.map(function(e,r){var i=[];return t=this._getAlbumType(e),t!==a&&"type"===this.state.sortBy?(a=t,i.push(this._renderHeading(r,t))):0===r&&i.push(this._renderHeading(0)),i.push(s.createElement(n,{key:e.ALB_ID+"_"+r,id:Number(e.ALB_ID),data:e,songs:e.SONGS.data.slice(0,this.props.limitSong||e.SONGS.total),limit:this.props.limitSong,total:e.SONGS.total,index:r,tracking:this.props.tracking,context:this.props.context,producerLine:this.props.producerLine,addFavorite:this.props.addFavorite})),i}.bind(this)))},_renderDiscographySmall:function(e){var t=["name","artist","release_date","favorite","play_link"];if("type"===this.state.sortBy){var a="",n="",i={0:[],1:[],2:[],3:[],4:[]};return s.createElement("div",{className:"catalog-tab-discography"},this._renderHeading(0,this._getAlbumType(e[0])),e.map(function(e,o){return n=this._getAlbumType(e),n!==a?(a=n,i[n].push(e),[o>0?this._renderHeading(o,n):null,s.createElement(r,{key:"grid_"+n,data:i[n],options:t,context:"artist_discography",tracking:this.props.tracking})]):void i[n].push(e)}.bind(this)))}return s.createElement("div",{className:"catalog-tab-discography"},this._renderHeading(0),s.createElement(r,{data:e,options:t,context:"artist_discography",tracking:this.props.tracking}))},_renderHeading:function(e,t){return this.props.heading?s.createElement("div",{className:"heading"},s.createElement("div",{className:"cell cell-title"},s.createElement("h4",{className:"heading-3"},this._getTypeName(t))),s.createElement("div",{className:"cell cell-line"},s.createElement("div",{className:"line"})),this._renderSorter(e),this._renderSwitch(e)):void 0},_renderSorter:function(e){return e>0?null:this.props.sorter===!1?null:s.createElement("div",{className:"cell cell-sort"},s.createElement(i,{onSort:this._onSort,sortType:this.state.sortBy}))},_renderSwitch:function(e){if(e>0)return null;var t=c({"btn btn-default":!0,active:"big"===this.state.format}),a=c({"btn btn-default":!0,active:"small"===this.state.format});return s.createElement("div",{className:"cell cell-view"},s.createElement("span",{className:"btn-group"},s.createElement("button",{className:a,type:"button","data-view":"thumbnail",onClick:this._switchFormat.bind(this,"small")},s.createElement("span",{className:"icon icon-mosaic"})),s.createElement("button",{className:t,type:"button","data-view":"card",onClick:this._switchFormat.bind(this,"big")},s.createElement("span",{className:"icon icon-list"}))))},_renderPlaceholder:function(){return s.createElement("div",{className:"placeholder-container"},s.createElement("div",{className:"placeholders-img nocontent"}),s.createElement("div",{className:"placeholders-title"},d("Aucun album n'est actuellement disponible.")))},_onSort:function(e,t){this._isAllDataLoaded()||this.props.onSort(e),this.setState({sortBy:e}),this.props.tracking&&this.tracking("discography_click",t.currentTarget)},_isAllDataLoaded:function(){return this.props.total===this.props.data.length},_getSortKey:function(){var e={type:"ALB_TYPE",name:"ALB_TITLE",release:"RELEASE_DATE",top:"ALB_RANK"};return e[this.state.sortBy]},_getAlbumType:function(e){return 0===Number(e.ROLE_ID)?e.TYPE:4},_getTypeName:function(e){var t=[d("Singles"),d("Albums"),d("Splits"),d("EPs"),d("Apparaît dans")],a=Number(e);return t[a]?t[a]:d("Discographie")},_switchFormat:function(e,t){this.setState({format:e}),this.props.tracking&&this.tracking("discography_click",t.currentTarget)}});t.exports=u},{"../../../core/i18n":255,"./_elements/Album":118,"./_elements/Sorter":119,"@deezer/components/_mixins/sort":44,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/ThumbnailGrid":148,classnames:"classnames",react:"react"}],148:[function(e,t,a){"use strict";t.exports=e("./ThumbnailGrid")},{"./ThumbnailGrid":140}],140:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/extends")["default"],n=e("babel-runtime/core-js/array/from")["default"],r=e("react"),i=e("../../../core/i18n"),o=i.gettext,l=e("./_elements/Artist"),c=e("./_elements/Album"),p=e("./_elements/Playlist"),d=e("./_elements/Radio"),u=e("./_elements/Show"),m=e("./_elements/User"),h=e("./_elements/Song"),_=r.createClass({displayName:"ThumbnailGrid",propTypes:{data:r.PropTypes.array.isRequired,type:r.PropTypes.string,context:r.PropTypes.string,placeHolder:r.PropTypes.oneOfType([r.PropTypes.oneOf([!1]),r.PropTypes.object]),options:r.PropTypes.array,tracking:r.PropTypes.bool,highlight:r.PropTypes.oneOfType([r.PropTypes.oneOf([!1]),r.PropTypes.number]),createPlaylist:r.PropTypes.bool,filter:r.PropTypes.string,oneLine:r.PropTypes.bool},getDefaultProps:function(){return{data:[],type:"unknown",context:"",placeHolder:{img:"nocontent",wording:o("Aucun résultat.")},page:"",options:[],tracking:!1,highlight:!1,createPlaylist:!1,filter:"",oneLine:!1}},getInitialState:function(){return{lineEndIndex:1/0}},componentDidMount:function(){this.props.oneLine&&(Events.subscribe(Events.layout.resize,this._onResize),Events.subscribe(Events.layout.adsBackground,this._onResize),this._onResize())},componentWillUnmount:function(){this.props.oneLine&&(Events.unsubscribe(Events.layout.resize,this._onResize),Events.unsubscribe(Events.layout.adsBackground,this._onResize))},render:function(){var e=this.props.createPlaylist,t=r.createElement("ul",{className:"thumbnail-grid",ref:"grid"},this._renderCreatePlaylist(),this.props.data.map(function(t,a){var n="unknown"===this.props.type?t.__TYPE__:this.props.type;if(this._filter(n,t))return null;e=!0;var i={data:t,options:this.props.options,context:this.props.context,index:a,tracking:this.props.tracking,hidden:this.props.oneLine&&a>=this.state.lineEndIndex,highlight:this.props.highlight!==!1&&this.props.highlight===a?!0:!1};switch(n){case"artist":return r.createElement(l,s({key:t.ART_ID+"-"+a},i));case"album":return r.createElement(c,s({key:t.ALB_ID+"-"+a},i));case"playlist":return r.createElement(p,s({key:t.PLAYLIST_ID+"-"+a},i));case"radio":return r.createElement(d,s({key:t.RADIO_ID+"-"+a},i));case"show":return r.createElement(u,s({key:t.SHOW_ID+"-"+a},i));case"user":return r.createElement(m,s({key:t.USER_ID+"-"+a},i));case"track":case"song":return r.createElement(h,s({key:t.SNG_ID+"-"+a},i,{track_list:this.props.data,track_index:a}));default:return null}}.bind(this)));return e===!0?t:this._renderPlaceholder()},_renderCreatePlaylist:function(){return this.props.createPlaylist===!1?null:r.createElement("li",null,r.createElement("div",{className:"thumbnail-col create-playlist-container"},r.createElement("a",{type:"button",onClick:this._onCreatePlaylist},r.createElement("div",{className:"create-playlist"},r.createElement("div",{className:"create-playlist-icon"},r.createElement("span",{className:"icon icon-add"})),r.createElement("h4",{className:"heading-4"},o("Créer une playlist"))),r.createElement("div",{className:"thumbnail-wrapper"}),r.createElement("article",{className:"thumbnail-caption"},r.createElement("h4",{className:"heading-4 ellipsis"}," "),r.createElement("h5",{className:"heading-4-sub ellipsis"}," ")))))},_renderPlaceholder:function(){if(this.props.placeHolder===!1)return null;var e=this.props.placeHolder.img,t=this.props.placeHolder.wording;return""!==this.props.filter&&(e="nocontent",t=o("Aucun résultat.")),r.createElement("div",null,r.createElement("div",{className:"placeholders-img "+e}),r.createElement("div",{className:"placeholders-title"},t))},_onCreatePlaylist:function(){return modal.open("/lightbox/playlist_assistant?type=create")},_onResize:function(){var e=1/0,t=this.refs.grid.childNodes;n(t).forEach(function(t,a){t.offsetTop>0&&e===1/0&&(e=a)}),this.props.createPlaylist&&e--,this.state.lineEndIndex!==e&&this.setState({lineEndIndex:e})},_filter:function(e,t){if(""===this.props.filter)return!1;var a={artist:["ART_NAME"],album:["ART_NAME","ALB_TITLE"],playlist:["TITLE"],radio:["TITLE"],show:["SHOW_NAME"],user:["BLOG_NAME"]},s=!0;return a[e].forEach(function(e){window.rewriting(t[e].toLowerCase()).indexOf(this.props.filter)>-1&&(s=!1)}.bind(this)),s}});t.exports=_},{"../../../core/i18n":255,"./_elements/Album":141,"./_elements/Artist":142,"./_elements/Playlist":143,"./_elements/Radio":144,"./_elements/Show":145,"./_elements/Song":146,"./_elements/User":147,"babel-runtime/core-js/array/from":304,"babel-runtime/helpers/extends":314,react:"react"}],304:[function(e,t,a){t.exports={"default":e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":318}],318:[function(e,t,a){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/$.core").Array.from},{"../../modules/$.core":329,"../../modules/es6.array.from":363,"../../modules/es6.string.iterator":368}],368:[function(e,t,a){"use strict";var s=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=s(t,a),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":343,"./$.string-at":355}],355:[function(e,t,a){var s=e("./$.to-integer"),n=e("./$.defined");t.exports=function(e){return function(t,a){var r,i,o=String(n(t)),l=s(a),c=o.length;return 0>l||l>=c?e?"":void 0:(r=o.charCodeAt(l),55296>r||r>56319||l+1===c||(i=o.charCodeAt(l+1))<56320||i>57343?e?o.charAt(l):r:e?o.slice(l,l+2):(r-55296<<10)+(i-56320)+65536)}}},{"./$.defined":331,"./$.to-integer":356}],343:[function(e,t,a){"use strict";var s=e("./$.library"),n=e("./$.export"),r=e("./$.redefine"),i=e("./$.hide"),o=e("./$.has"),l=e("./$.iterators"),c=e("./$.iter-create"),p=e("./$.set-to-string-tag"),d=e("./$").getProto,u=e("./$.wks")("iterator"),m=!([].keys&&"next"in[].keys()),h="@@iterator",_="keys",y="values",g=function(){return this};t.exports=function(e,t,a,f,b,v,E){c(a,t,f);var T,S,A=function(e){if(!m&&e in I)return I[e];switch(e){case _:return function(){return new a(this,e)};case y:return function(){return new a(this,e)}}return function(){return new a(this,e)}},N=t+" Iterator",P=b==y,k=!1,I=e.prototype,x=I[u]||I[h]||b&&I[b],D=x||A(b);if(x){var C=d(D.call(new e));p(C,N,!0),!s&&o(I,h)&&i(C,u,g),P&&x.name!==y&&(k=!0,D=function(){return x.call(this)})}if(s&&!E||!m&&!k&&I[u]||i(I,u,D),l[t]=D,l[N]=g,b)if(T={values:P?D:A(y),keys:v?D:A(_),entries:P?A("entries"):D},E)for(S in T)S in I||r(I,S,T[S]);else n(n.P+n.F*(m||k),t,T);return T}},{"./$":346,"./$.export":333,"./$.has":336,"./$.hide":337,"./$.iter-create":342,"./$.iterators":345,"./$.library":347,"./$.redefine":351,"./$.set-to-string-tag":353,"./$.wks":361}],351:[function(e,t,a){t.exports=e("./$.hide")},{"./$.hide":337}],347:[function(e,t,a){t.exports=!0},{}],342:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.property-desc"),r=e("./$.set-to-string-tag"),i={};e("./$.hide")(i,e("./$.wks")("iterator"),function(){return this}),t.exports=function(e,t,a){e.prototype=s.create(i,{next:n(1,a)}),r(e,t+" Iterator")}},{"./$":346,"./$.hide":337,"./$.property-desc":350,"./$.set-to-string-tag":353,"./$.wks":361}],353:[function(e,t,a){var s=e("./$").setDesc,n=e("./$.has"),r=e("./$.wks")("toStringTag");t.exports=function(e,t,a){e&&!n(e=a?e:e.prototype,r)&&s(e,r,{configurable:!0,value:t})}},{"./$":346,"./$.has":336,"./$.wks":361}],337:[function(e,t,a){var s=e("./$"),n=e("./$.property-desc");t.exports=e("./$.descriptors")?function(e,t,a){return s.setDesc(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},{"./$":346,"./$.descriptors":332,"./$.property-desc":350}],350:[function(e,t,a){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],332:[function(e,t,a){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":334}],336:[function(e,t,a){var s={}.hasOwnProperty;t.exports=function(e,t){return s.call(e,t)}},{}],363:[function(e,t,a){"use strict";var s=e("./$.ctx"),n=e("./$.export"),r=e("./$.to-object"),i=e("./$.iter-call"),o=e("./$.is-array-iter"),l=e("./$.to-length"),c=e("./core.get-iterator-method");n(n.S+n.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,n,p,d=r(e),u="function"==typeof this?this:Array,m=arguments,h=m.length,_=h>1?m[1]:void 0,y=void 0!==_,g=0,f=c(d);if(y&&(_=s(_,h>2?m[2]:void 0,2)),void 0==f||u==Array&&o(f))for(t=l(d.length),a=new u(t);t>g;g++)a[g]=y?_(d[g],g):d[g];else for(p=f.call(d),a=new u;!(n=p.next()).done;g++)a[g]=y?i(p,_,[n.value,g],!0):n.value;return a.length=g,a}})},{"./$.ctx":330,"./$.export":333,"./$.is-array-iter":339,"./$.iter-call":341,"./$.iter-detect":344,"./$.to-length":358,"./$.to-object":359,"./core.get-iterator-method":362}],362:[function(e,t,a){var s=e("./$.classof"),n=e("./$.wks")("iterator"),r=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[n]||e["@@iterator"]||r[s(e)]:void 0}},{"./$.classof":327,"./$.core":329,"./$.iterators":345,"./$.wks":361}],327:[function(e,t,a){var s=e("./$.cof"),n=e("./$.wks")("toStringTag"),r="Arguments"==s(function(){return arguments}());t.exports=function(e){var t,a,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=(t=Object(e))[n])?a:r?s(t):"Object"==(i=s(t))&&"function"==typeof t.callee?"Arguments":i}},{"./$.cof":328,"./$.wks":361}],358:[function(e,t,a){var s=e("./$.to-integer"),n=Math.min;t.exports=function(e){return e>0?n(s(e),9007199254740991):0}},{"./$.to-integer":356}],356:[function(e,t,a){var s=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?n:s)(e)}},{}],344:[function(e,t,a){var s=e("./$.wks")("iterator"),n=!1;try{var r=[7][s]();r["return"]=function(){n=!0},Array.from(r,function(){throw 2})}catch(i){}t.exports=function(e,t){if(!t&&!n)return!1;var a=!1;try{var r=[7],i=r[s]();i.next=function(){a=!0},r[s]=function(){return i},e(r)}catch(o){}return a}},{"./$.wks":361}],341:[function(e,t,a){var s=e("./$.an-object");t.exports=function(e,t,a,n){try{return n?t(s(a)[0],a[1]):t(a)}catch(r){var i=e["return"];throw void 0!==i&&s(i.call(e)),r}}},{"./$.an-object":326}],339:[function(e,t,a){var s=e("./$.iterators"),n=e("./$.wks")("iterator"),r=Array.prototype;t.exports=function(e){return void 0!==e&&(s.Array===e||r[n]===e)}},{"./$.iterators":345,"./$.wks":361}],361:[function(e,t,a){var s=e("./$.shared")("wks"),n=e("./$.uid"),r=e("./$.global").Symbol;t.exports=function(e){return s[e]||(s[e]=r&&r[e]||(r||n)("Symbol."+e))}},{"./$.global":335,"./$.shared":354,"./$.uid":360}],360:[function(e,t,a){var s=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++s+n).toString(36))}},{}],354:[function(e,t,a){var s=e("./$.global"),n="__core-js_shared__",r=s[n]||(s[n]={});t.exports=function(e){return r[e]||(r[e]={})}},{"./$.global":335}],345:[function(e,t,a){t.exports={}},{}],147:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("@deezer/components/common/Thumbnail"),i=e("@deezer/components/common/StatesButton"),o=s.createClass({displayName:"User",propTypes:{data:s.PropTypes.object.isRequired,context:s.PropTypes.string.isRequired,options:s.PropTypes.array,hidden:s.PropTypes.bool},getDefaultProps:function(){return{data:null,context:"artist_page",options:[],hidden:!1}},render:function(){var e=n({"thumbnail-hidden":this.props.hidden});return s.createElement("li",{className:e,key:"user_"+this.props.data.USER_ID},s.createElement("div",{className:"thumbnail-col"},s.createElement("div",{className:"thumbnail-wrapper"},s.createElement(r,{type:this.props.data.__TYPE__,context:this.props.context,data:this.props.data})),this.props.options.length>0?this._renderCaption():null))},_renderCaption:function(){return s.createElement("article",{className:"thumbnail-caption"},this.props.options.indexOf("name")>-1?this._renderName():null,this.props.options.indexOf("follow")>-1?this._renderFollow():null)},_renderName:function(){return s.createElement("h4",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/profile/"+this.props.data.USER_ID,className:"evt-click",title:this.props.data.BLOG_NAME},this.props.data.BLOG_NAME))},_renderFollow:function(){return s.createElement("p",{className:"thumbnail-button"},s.createElement(i,{id:Number(this.props.data.USER_ID),disabled:Number(this.props.data.USER_ID)===window.USER.USER_ID,type:"user",size:"block"}))}});t.exports=o},{"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],146:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../core/i18n"),i=r.gettext,o=e("@deezer/components/common/Thumbnail"),l=e("@deezer/components/common/StatesButton"),c=s.createClass({displayName:"Song",propTypes:{data:s.PropTypes.object.isRequired,context:s.PropTypes.string.isRequired,options:s.PropTypes.array,track_list:s.PropTypes.array,track_index:s.PropTypes.number,hidden:s.PropTypes.bool},getDefaultProps:function(){return{data:null,track_list:[],track_index:0,context:"track_page",options:[],hidden:!1}},render:function(){var e=n({"thumbnail-hidden":this.props.hidden});return s.createElement("li",{className:e,key:"track_"+this.props.data.SNG_ID},s.createElement("div",{className:"thumbnail-col"},s.createElement("div",{className:"thumbnail-wrapper"},s.createElement(o,{type:"track",play:"on",trackList:this.props.track_list,trackListIndex:this.props.track_index,preview:"on",playLink:this.props.options.indexOf("play_link")>-1,context:this.props.context,sticker:this.props.options.indexOf("sticker")>-1,showOptions:!0,data:this.props.data})),this._renderCaption()))},_renderCaption:function(){return this.props.options.length>0?s.createElement("article",{className:"thumbnail-caption"},this._renderType(),this._renderName(),this._renderArtist(),this._renderReleaseDate(),this._renderFavorite()):void 0},_renderType:function(){return this.props.options.indexOf("type")>-1?s.createElement("h4",{className:"sticker sticker-gray sticker-small"},s.createElement("span",null,this.props.data.ALB_TYPE)):void 0},_renderName:function(){return this.props.options.indexOf("name")>-1?s.createElement("h4",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/album/"+this.props.data.ALB_ID,className:"evt-click",title:this.props.data.ALB_TITLE},this.props.data.SNG_TITLE)):void 0},_renderArtist:function(){return this.props.options.indexOf("artist")>-1&&this.props.data.ART_NAME?s.createElement("h5",{className:"heading-4-sub ellipsis"},s.createElement("span",{key:"artistLabel"},i("par")+" "),s.createElement("a",{key:"artistLink",href:"/artist/"+this.props.data.ART_ID,className:"evt-click",title:this.props.data.ART_NAME},this.props.data.ART_NAME)):void 0},_renderFavorite:function(){return this.props.options.indexOf("favorite")>-1?s.createElement("p",{className:"thumbnail-button"},s.createElement(l,{id:Number(this.props.data.ALB_ID),type:"track",size:"block"})):void 0},_renderReleaseDate:function(){return this.props.options.indexOf("release_date")>-1?s.createElement("h5",{className:"heading-5 release"},i("Sorti le")," ",formatDate(this.props.data.PHYSICAL_RELEASE_DATE)):void 0},_getRewritingName:function(e){return window.rewriting(e).toLowerCase()}});t.exports=c},{"../../../../core/i18n":255,"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],145:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("@deezer/components/common/Thumbnail"),i=e("@deezer/components/common/StatesButton"),o=s.createClass({displayName:"Show",propTypes:{data:s.PropTypes.object.isRequired,context:s.PropTypes.string.isRequired,options:s.PropTypes.array,hidden:s.PropTypes.bool},getDefaultProps:function(){return{data:null,context:"show_page",options:[],hidden:!1}},render:function(){var e=n({"thumbnail-hidden":this.props.hidden});return s.createElement("li",{className:e},s.createElement("div",{className:"thumbnail-col"},s.createElement("div",{className:"thumbnail-wrapper"},s.createElement(r,{type:"show",play:"on",playLink:this.props.options.indexOf("play_link")>-1,context:this.props.context,showOptions:!0,data:this.props.data})),this._renderCaption()))},_renderCaption:function(){return this.props.options.length>0?s.createElement("article",{className:"thumbnail-caption"},this._renderTitle(),this._renderName(),this._renderFavorite()):void 0},_renderTitle:function(){return this.props.options.indexOf("title")>-1?s.createElement("h4",{className:"heading-4"},this.props.data.TITLE):void 0},_renderName:function(){return this.props.options.indexOf("name")>-1?s.createElement("h5",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/show/"+this.props.data.SHOW_ID,className:"evt-click",title:this.props.data.SHOW_NAME},this.props.data.SHOW_NAME)):void 0},_renderFavorite:function(){return this.props.options.indexOf("favorite")>-1?s.createElement("p",{className:"thumbnail-button"},s.createElement(i,{id:Number(this.props.data.SHOW_ID),type:"show",size:"block"})):void 0},_getRewritingName:function(e){return window.rewriting(e).toLowerCase()}});t.exports=o},{"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],144:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("@deezer/components/common/Thumbnail"),i=e("@deezer/components/common/TagList"),o=e("@deezer/components/common/StatesButton"),l=s.createClass({displayName:"Radio",propTypes:{data:s.PropTypes.object.isRequired,context:s.PropTypes.string.isRequired,options:s.PropTypes.array,hidden:s.PropTypes.bool},getDefautProps:function(){return{data:null,context:"",options:[],hidden:!1}},render:function(){var e=n({"thumbnail-hidden":this.props.hidden});return s.createElement("li",{className:e},s.createElement("div",{className:"thumbnail-col"},s.createElement("div",{className:"thumbnail-wrapper"},s.createElement(r,{type:"radio",play:"on",coverLink:!1,overlay:"force",title:this.props.data.TITLE,showOptions:!0,context:this.props.context,data:this.props.data}))),this._renderCaption())},_renderCaption:function(){return this.props.options.length>0?s.createElement("article",{className:"thumbnail-caption"},this._renderName(),this._renderTags(),this._renderFavorite()):void 0},_renderName:function(){return this.props.options.indexOf("name")>-1?s.createElement("h4",{className:"heading-4"},this.props.data.TITLE):void 0},_renderTags:function(){if(this.props.options.indexOf("tags")>-1){var e=this.props.data.TAGS.map(function(e){return{LABEL:e}});return s.createElement(i,{tags:e,max:5,type:"text",link:gatekeeper.isAllowed("search_tag")})}},_renderFavorite:function(){return this.props.options.indexOf("favorite")>-1?s.createElement("p",{className:"thumbnail-button"},s.createElement(o,{id:Number(this.props.data.RADIO_ID),type:"radio",size:"block"})):void 0}});t.exports=l},{"@deezer/components/common/StatesButton":134,"@deezer/components/common/TagList":136,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],143:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../core/i18n"),i=r.gettext,o=r.ngettext,l=e("@deezer/components/common/Thumbnail"),c=e("@deezer/components/common/StatesButton"),p=s.createClass({displayName:"Playlist",propTypes:{data:s.PropTypes.object.isRequired,context:s.PropTypes.string.isRequired,options:s.PropTypes.array,highlight:s.PropTypes.bool,hidden:s.PropTypes.bool},getDefaultProps:function(){return{data:null,context:"playlist_page",options:[],highlight:!1,hidden:!1}},render:function(){var e=n({"thumbnail-highlight":this.props.highlight,"thumbnail-hidden":this.props.hidden}),t={private_status:Number(this.props.data.STATUS)};return s.createElement("li",{key:"playlist_"+this.props.data.PLAYLIST_ID,className:e},s.createElement("div",{className:"thumbnail-col"},s.createElement("div",{className:"thumbnail-wrapper"},s.createElement(l,{type:"playlist",play:"on",playLink:this.props.options.indexOf("play_link")>-1,preview:"on",context:this.props.context,multiCover:!0,showOptions:!0,duplicatePicture:this.props.highlight,data:this.props.data,contextMenuOptions:t})),this._renderCaption()))},_renderCaption:function(){return this.props.options.length>0?s.createElement("article",{className:"thumbnail-caption"},this._renderName(),this._renderCreator(),this._renderNumber(),this._renderStatus(),this._renderFavorite()):void 0},_renderName:function(){return this.props.options.indexOf("name")>-1?s.createElement("h4",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/playlist/"+this.props.data.PLAYLIST_ID,className:"evt-click",title:this.props.data.TITLE},this._renderIcon()," "+this.props.data.TITLE)):void 0},_renderIcon:function(){return userData.isFavorite("playlist",this.props.data.PLAYLIST_ID)&&userData.getUnseenTrackCount(this.props.data.PLAYLIST_ID)>0?s.createElement("span",{className:"badge badge-info"},userData.getUnseenTrackCount(this.props.data.PLAYLIST_ID)):s.createElement("span",{className:"icon icon-"+this._getPlaylistType()})},_renderCreator:function(){return this.props.options.indexOf("creator")>-1?s.createElement("h5",{className:"heading-4-sub ellipsis"},i("par")+" ",s.createElement("a",{href:"/profile/"+this.props.data.PARENT_USER_ID,className:"evt-click",title:this.props.data.PARENT_USERNAME},this.props.data.PARENT_USERNAME)):void 0},_renderNumber:function(){var e=this.props.options.indexOf("fans")>-1&&this.props.data.NB_FAN>0,t=this.props.options.indexOf("tracks")>-1;return e||t?s.createElement("h5",{className:"heading-5-sub ellipsis"},t?window.breakUpThousands(this.props.data.NB_SONG)+" "+o("titre","titres",{count:this.props.data.NB_SONG}):"",t&&e?" - ":"",e?window.breakUpThousands(this.props.data.NB_FAN)+" "+o("fan","fans",{count:this.props.data.NB_FAN}):""):void 0},_renderFavorite:function(){var e=1===Number(this.props.data.STATUS)||3===Number(this.props.data.STATUS);return!e&&this.props.options.indexOf("favorite")>-1?s.createElement("p",{className:"thumbnail-button"},s.createElement(c,{id:Number(this.props.data.PLAYLIST_ID),type:"playlist",size:"block"})):void 0},_renderStatus:function(){if(this.props.options.indexOf("status")>-1){var e=[],t=Number(this.props.data.STATUS);return(0===t||2===t)&&e.push(i("Publique")),(1===t||3===t)&&e.push(i("Privée")),(2===t||3===t)&&e.push(i("Collaborative")),s.createElement("h5",{className:"heading-4-sub ellipsis"},e.join(" · ")||" ")}},_getPlaylistType:function(){return Number(this.props.data.PARENT_USER_ID)===window.profile.id?"playlist":2===this.props.data.STATUS?"playlist-collaborative":"playlist-favorite"}});t.exports=p},{"../../../../core/i18n":255,"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],142:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../core/i18n"),i=r.ngettext,o=e("@deezer/components/common/Thumbnail"),l=e("@deezer/components/common/StatesButton"),c=s.createClass({displayName:"Artist",propTypes:{data:s.PropTypes.object.isRequired,context:s.PropTypes.string.isRequired,options:s.PropTypes.array,hidden:s.PropTypes.bool},getDefaultProps:function(){return{data:null,context:"artist_page",options:[],hidden:!1}},render:function(){var e=n({"thumbnail-hidden":this.props.hidden});return s.createElement("li",{className:e,key:"artist_"+this.props.data.ART_ID},s.createElement("div",{className:"thumbnail-col"},s.createElement("div",{className:"thumbnail-wrapper"},s.createElement(o,{type:"artist",context:this.props.context,showOptions:!0,data:this.props.data})),this._renderCaption()))},_renderCaption:function(){return this.props.options.length>0?s.createElement("article",{className:"thumbnail-caption"},this._renderName(),this._renderFans(),this._renderFavorite()):void 0},_renderName:function(){return this.props.options.indexOf("name")>-1?s.createElement("h4",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/artist/"+this.props.data.ART_ID,className:"evt-click",title:this.props.data.ART_NAME},this.props.data.ART_NAME)):void 0},_renderFans:function(){return this.props.options.indexOf("fans")>-1?s.createElement("h5",{className:"heading-4-sub ellipsis"},this.props.data.NB_FAN?window.breakUpThousands(this.props.data.NB_FAN)+" "+i("fan","fans",{count:this.props.data.NB_FAN}):" "):void 0},_renderFavorite:function(){return this.props.options.indexOf("favorite")>-1?s.createElement("p",{className:"thumbnail-button"},s.createElement(l,{id:Number(this.props.data.ART_ID),type:"artist",size:"block"})):void 0},_getRewritingName:function(e){return window.rewriting(e).toLowerCase()}});t.exports=c},{"../../../../core/i18n":255,"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],141:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../../../core/i18n"),i=r.gettext,o=e("@deezer/components/_mixins/tracking"),l=e("@deezer/components/common/Thumbnail"),c=e("@deezer/components/common/StatesButton"),p=s.createClass({displayName:"Album",propTypes:{data:s.PropTypes.object.isRequired,context:s.PropTypes.string.isRequired,index:s.PropTypes.number,options:s.PropTypes.array,tracking:s.PropTypes.bool,hidden:s.PropTypes.bool},mixins:[o],getDefaultProps:function(){return{data:null,context:"album_page",index:0,options:[],tracking:!1,hidden:!1}},getTrackingParams:function(){return{type:"thumbnail"}},render:function(){var e=n({"thumbnail-hidden":this.props.hidden});return s.createElement("li",{className:e,key:"album_"+this.props.data.ALB_ID},s.createElement("div",{className:"thumbnail-col"},s.createElement("div",{className:"thumbnail-wrapper"},s.createElement(l,{type:"album",play:"on",preview:"on",playLink:this.props.options.indexOf("play_link")>-1,context:this.props.context,sticker:this.props.options.indexOf("sticker")>-1,showOptions:!0,data:this.props.data})),this._renderCaption()))},_renderCaption:function(){return this.props.options.length>0?s.createElement("article",{className:"thumbnail-caption"},this._renderType(),this._renderName(),this._renderArtist(),this._renderReleaseDate(),this._renderFavorite()):void 0},_renderType:function(){return this.props.options.indexOf("type")>-1?s.createElement("h4",{className:"sticker sticker-gray sticker-small"},s.createElement("span",null,this.props.data.ALB_TYPE)):void 0},_renderName:function(){return this.props.options.indexOf("name")>-1?s.createElement("h4",{className:"heading-4 ellipsis"},s.createElement("a",{href:"/album/"+this.props.data.ALB_ID,"data-position":this.props.index,onClick:this._onLink,title:this.props.data.ALB_TITLE},this.props.data.ALB_TITLE)):void 0},_renderArtist:function(){if(this.props.options.indexOf("artist")>-1&&this.props.data.ART_NAME){var e=[];return this.props.data.ARTISTS?this.props.data.ARTISTS.map(function(t,a){(0===Number(t.ROLE_ID)||5===Number(t.ROLE_ID))&&e.push(a>0?", ":"",s.createElement("a",{key:"artist_"+a,href:"/artist/"+t.ART_ID,onClick:this._onLink,title:t.ART_NAME},t.ART_NAME))}.bind(this)):e.push(s.createElement("a",{key:"artistLink",href:"/artist/"+this.props.data.ART_ID,onClick:this._onLink,title:this.props.data.ART_NAME},this.props.data.ART_NAME)),s.createElement("h5",{className:"heading-4-sub ellipsis"},s.createElement("span",{key:"artistLabel"},i("par")+" "),e)}},_renderFavorite:function(){return this.props.options.indexOf("favorite")>-1?s.createElement("p",{className:"thumbnail-button"},s.createElement(c,{id:Number(this.props.data.ALB_ID),type:"album",size:"block"})):void 0},_renderReleaseDate:function(){return this.props.options.indexOf("release_date")>-1?s.createElement("h5",{className:"heading-5 release"},i("Sorti le")," ",formatDate(this.props.data.PHYSICAL_RELEASE_DATE)):void 0},_onLink:function(e){e.preventDefault(),www.navigate(e.currentTarget.getAttribute("href")),this.props.tracking&&this.tracking("discography_click",e.currentTarget);},_getRewritingName:function(e){return window.rewriting(e).toLowerCase()}});t.exports=p},{"../../../../core/i18n":255,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,classnames:"classnames",react:"react"}],119:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=e("../../../../core/i18n"),i=e("@deezer/components/common/DropDown"),o=s.createClass({displayName:"Sorter",propTypes:{onSort:s.PropTypes.func.isRequired,sortType:s.PropTypes.string},mixins:[n],render:function(){var e=this._items.map(function(e,t){return s.createElement(i.Item,{key:t,label:e.label},s.createElement("a",{onClick:this._onSort.bind(this,e.type),href:"#","data-sort":e.type},e.label))}.bind(this));return s.createElement(i,{selected:this._getSelected()},e)},_onSort:function(e,t){t.preventDefault(),this.props.onSort(e,t)},_items:[{label:r.gettext("Type"),type:"type"},{label:r.gettext("A - Z"),type:"name"},{label:r.gettext("Date de sortie"),type:"release"},{label:r.gettext("Les plus écoutés"),type:"top"}],_default:0,_getSelected:function(){if("function"==typeof this._items.findIndex){var e=this._items.findIndex(this._predicate,this);return-1===e?this._default:e}for(var t=0,a=this._items.length;a>t;t++)if(this._predicate(this._items[t]))return t;return this._default},_predicate:function(e){return this.props.sortType===e.type}});t.exports=o},{"../../../../core/i18n":255,"@deezer/components/common/DropDown":124,react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],118:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../core/i18n"),r=e("@deezer/components/_mixins/tracking"),i=e("@deezer/components/common/Thumbnail"),o=e("@deezer/components/common/StatesButton"),l=e("@deezer/components/common/DataGrid"),c=s.createClass({displayName:"Album",propTypes:{id:s.PropTypes.number.isRequired,data:s.PropTypes.object.isRequired,songs:s.PropTypes.array.isRequired,producerLine:s.PropTypes.bool,addFavorite:s.PropTypes.bool,limit:s.PropTypes.number,total:s.PropTypes.number,index:s.PropTypes.number,tracking:s.PropTypes.bool,context:s.PropTypes.string},childContextTypes:{id:s.PropTypes.number,name:s.PropTypes.string.isRequired},mixins:[r],getDefaultProps:function(){return{limit:10,total:0,index:0,tracking:!1,context:"card",producerLine:!0,addFavorite:!0}},getChildContext:function(){return{id:this.props.id,name:"artist_discography"}},getTrackingParams:function(){return{type:this.props.context}},render:function(){return s.createElement("div",{className:"catalog-tab-box album-row"},s.createElement("div",{className:"album-thumbnail"},this._renderThumbnail(),this._renderProducerLine()),s.createElement("div",{className:"album-infos"},this._renderTitle(),this._renderReleaseDate(),this._renderDatagrid(),this._renderViewMore()))},_renderThumbnail:function(){return s.createElement("div",{className:"thumbnail-container"},s.createElement(i,{type:"album",width:200,height:200,bordered:!0,play:"force",playLink:!0,preview:"on",context:"artist_discography",showOptions:!0,data:this.props.data}),this.props.addFavorite?s.createElement(o,{id:Number(this.props.data.ALB_ID),type:"album",size:"block"}):null)},_renderProducerLine:function(){return this.props.producerLine?s.createElement("div",{className:"album-legal"},this.props.data.PRODUCER_LINE):void 0},_renderTitle:function(){return s.createElement("h2",{className:"heading-2 ellipsis"},s.createElement("a",{href:"/album/"+this.props.data.ALB_ID,onClick:this._onLink,"data-position":this.props.index},this.props.data.ALB_TITLE))},_renderReleaseDate:function(){return s.createElement("div",{className:"album-release"},formatDate(this.props.data.PHYSICAL_RELEASE_DATE))},_renderDatagrid:function(){return s.createElement(l,{type:"discographyArtist",items:this.props.songs})},_renderViewMore:function(){return this.props.limit<this.props.total?s.createElement("div",{className:"view-more-container"},s.createElement("button",{className:"btn btn-block btn-view-more",href:"/album/"+this.props.data.ALB_ID,onClick:this._onLink,"data-position":this.props.index,type:"button"},s.createElement("span",{className:"label ellipsis"},n.gettext("Accéder à la fiche album complète (%s titres)",{sprintf:[this.props.total]})))):void 0},_onLink:function(e){e.preventDefault(),www.navigate(e.currentTarget.getAttribute("href")),this.props.tracking&&this.tracking("discography_click",e.currentTarget)}});t.exports=c},{"../../../../core/i18n":255,"@deezer/components/_mixins/tracking":46,"@deezer/components/common/DataGrid":97,"@deezer/components/common/StatesButton":134,"@deezer/components/common/Thumbnail":138,react:"react"}],97:[function(e,t,a){"use strict";var s=e("./DataGrid");s.FullPage=e("./FullPage"),t.exports=s},{"./DataGrid":65,"./FullPage":66}],66:[function(e,t,a){"use strict";var s=e("react"),n=e("./DataGrid"),r=e("./utils"),i=r.getContextName,o=40,l=2e3,c=s.createClass({displayName:"DataGridFullPage",propTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),type:s.PropTypes.string.isRequired,items:s.PropTypes.array.isRequired,itemsTotal:s.PropTypes.number,context:s.PropTypes.string},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string},childContextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string.isRequired},getInitialState:function(){return this._itemsSize=Math.max(this.props.items.length,o),this._itemsTotal=this.props.itemsTotal||l,{id:this.props.id||this.context&&this.context.id,context:this.props.context||this.context&&this.context.name||i(this.props.type)}},getChildContext:function(){return{id:this.state.id,name:this.state.context}},componentDidMount:function(){Events.subscribeOnce(Events.layout.infiniteScroll,this._loadMore),Events.subscribe(Events.datagrid.allTracksSelected,this._loadAll),infinite_scroll.active()},componentWillUnmount:function(){Events.unsubscribe(Events.datagrid.allTracksSelected,this._loadAll)},render:function(){return s.createElement(n,{ref:"datagrid",type:this.props.type,items:this.props.items,onSort:this._loadAll,onFilter:this._loadAll})},_isLoadingAll:!1,_loadMore:function(){if(this.isMounted()&&(infinite_scroll.disable(),!(null!==this._itemsTotal&&this._itemsSize>=this._itemsTotal))){var e=this._getRequestArgs(this.props.type,o),t=e.method,a=e.parameters;api.call({method:t,data:a,success:this._update})}},_loadAll:function(e,t){if(t="function"==typeof e?e:t,t=t||function(){},null!==this._itemsTotal&&this._itemsSize>=this._itemsTotal)return void window.setZeroTimeout(t);if(!this._isLoadingAll){infinite_scroll.disable();var a=this._getRequestArgs(this.props.type,l),s=a.method,n=a.parameters;this._isLoadingAll=!0,api.call({method:s,data:n,success:function(e){this.isMounted()&&(e=e.SONGS||e,this._itemsSize=e.total,this._itemsTotal=e.total,this.refs.datagrid.addItems(e.data),t())}.bind(this)})}},_update:function(e){e=e.SONGS||e,this.isMounted()&&0!==e.count&&(this._itemsSize=this._itemsSize+o,this._itemsTotal=e.total,this.refs.datagrid.addItems(e.data),Events.subscribeOnce(Events.layout.infiniteScroll,this._loadMore),infinite_scroll.active())},_getRequestArgs:function(e,t){var a,s;switch(e){case"loved":a="favorite_song.getList",s={user_id:this.state.id,start:this._itemsSize,nb:t};break;case"history":a="user.getSongsHistory",s={start:this._itemsSize,nb:t};break;case"personal_song":a="personal_song.getList",s={start:this._itemsSize,nb:t};break;case"search":a="search.music",s={query:this.context.id,filter:"ALL",output:"TRACK",start:this._itemsSize,nb:t};break;case"playlist":case"curatorPlaylist":case"personalPlaylist":a="deezer.pagePlaylist",s={playlist_id:this.state.id,lang:SETTING_LANG,start:this._itemsSize,nb:t,header:!1,tags:!1};break;case"downloads":a="store.getList",s={start:this._itemsSize,nb:t,order:7};break;case"artistTopTracks":a="artist.getTopTrack",s={art_id:this.state.id,start:this._itemsSize,nb:t};break;default:throw new Error('Items of type "'+e+'" are not handled by the DataGrid.FullPage component.')}return{method:a,parameters:s}}});t.exports=c},{"./DataGrid":65,"./utils":116,react:"react"}],65:[function(e,t,a){"use strict";var s=e("babel-runtime/core-js/object/assign")["default"],n=e("react"),r=e("react-dom"),i=e("classnames"),o=e("../../../core/i18n"),l=o.gettext,c=e("../../../models/track"),p=e("@deezer/components/common/Infinite"),d=e("./_elements/ColGroup"),u=e("./_elements/Toolbar"),m=e("./_elements/Header"),h=e("./_elements/Line"),_=e("./_elements/DragImage"),y=e("./_elements/cells"),g=e("./store"),f=e("./utils"),b=f.getContextName,v=f.isItemAvailable,E=f.getItemId,T=f.getItem,S=f.getContributor,A=f.getSort,N=f.setSort,P=f.getItemUniqId,k=[];for(var I in y)y.hasOwnProperty(I)&&"undefined"!=typeof y[I].filter&&k.push(y[I].filter);var x=n.createClass({displayName:"Datagrid",propTypes:{type:n.PropTypes.oneOf(["curatorPlaylist","personalPlaylist","playlist","history","loved","favorite","search","personal_song","downloads","album","discography","topArtist","talkShow","talkEpisodes","discographyArtist","artistTopTracks","talkShow","talkEpisodes"]).isRequired,items:n.PropTypes.array.isRequired,id:n.PropTypes.number,context:n.PropTypes.string,options:n.PropTypes.shape({add:n.PropTypes.bool,cdNumber:n.PropTypes.bool,changeOrder:n.PropTypes.bool,cells:n.PropTypes.arrayOf(n.PropTypes.oneOf(["Unseen","Love","Play","Title","Actions","Artist","Album","Duration","Popularity","Download","AddDate","ListenDate","Checkbox","EpisodeTitle"])),editMp3:n.PropTypes.bool,fallback:n.PropTypes.bool,fanOnly:n.PropTypes.bool,filter:n.PropTypes.bool,header:n.PropTypes.bool,infiniteScroll:n.PropTypes.bool,lyrics:n.PropTypes.bool,multiArtist:n.PropTypes.bool,toolbar:n.PropTypes.oneOf([!1,"top","bottom"]),playAll:n.PropTypes.bool,remove:n.PropTypes.bool,reverseBackground:n.PropTypes.bool,selectAll:n.PropTypes.bool,share:n.PropTypes.bool,trackNumber:n.PropTypes.bool,trackIndex:n.PropTypes.bool,video:n.PropTypes.bool}),scrollingContainer:n.PropTypes.object,onSort:n.PropTypes.func,onFilter:n.PropTypes.func},contextTypes:{id:n.PropTypes.oneOfType([n.PropTypes.number,n.PropTypes.string]),name:n.PropTypes.string},childContextTypes:{id:n.PropTypes.oneOfType([n.PropTypes.number,n.PropTypes.string]),name:n.PropTypes.string,store:n.PropTypes.object},getDefaultProps:function(){return{id:0}},getInitialState:function(){var e=c.hydrate(this.props.items),t=e.map(function(e){return E(T(e))});this._store=(new g).fill(t);var a=A(this.context.id,this.props.type),s=a.cell,n=a.order;return{id:this.props.id||this.context&&this.context.id,type:this.props.type,items:e,options:this._getOptions(this.props.options,this.props.type),sortCell:s,sortOrder:n,filter:"",dragItems:null,dragDivider:null,displayedContributors:this._store.getDisplayedContributors()}},getChildContext:function(){return{id:this.props.id||this.context&&this.context.id,name:this.props.context||this.context&&this.context.name||b(this.props.type),store:this._store}},componentWillMount:function(){this._filteredItems=this._filterItems(this.state.items,this.state.filter),this._filteredItems=this._sortItems(this._filteredItems,this.state.sortCell,this.state.sortOrder)},componentDidMount:function(){this._store.onChange(this._updateContributors),Events.subscribe(Events.user.addFavorite,this._onAddFavorite),Events.subscribe(Events.user.deleteFavorite,this._onRemoveFavorite),Events.subscribe(Events.user.addPersonalSong,this._onAddPersonalSong),Events.subscribe(Events.user.updatePersonalSong,this._onUpdatePersonalSong),Events.subscribe(Events.playlist.addSong,this._onAddSong),Events.subscribe(Events.playlist.removeSong,this._onRemoveSong),this.state.options.infiniteScroll===!0&&this.forceUpdate()},componentWillReceiveProps:function(e){var t=c.hydrate(e.items),a=t.map(function(e){return E(T(e))});this._store.fill(a),this.setState({id:e.id,type:e.type,items:t,context:e.context,options:this._getOptions(e.options,e.type),displayedContributors:this._store.getDisplayedContributors()})},componentWillUpdate:function(e,t){this._filteredItems=this._filterItems(t.items,t.filter),this._filteredItems=this._sortItems(this._filteredItems,t.sortCell,t.sortOrder),t.options.infiniteScroll===!0&&(this.fillerHeight=this._getFillerHeight(e.scrollingContainer))},componentWillUnmount:function(){this._store.offChange(this._updateContributors),Events.unsubscribe(Events.user.addFavorite,this._onAddFavorite),Events.unsubscribe(Events.user.deleteFavorite,this._onRemoveFavorite),Events.unsubscribe(Events.user.sendPersonalSong,this._onSendPersonalSong),Events.unsubscribe(Events.user.progressPersonalSong,this._onProgressPersonalSong),Events.unsubscribe(Events.user.addPersonalSong,this._onAddPersonalSong),Events.unsubscribe(Events.user.updatePersonalSong,this._onUpdatePersonalSong),Events.unsubscribe(Events.playlist.addSong,this._onAddSong),Events.unsubscribe(Events.playlist.removeSong,this._onRemoveSong)},presets:e("./presets"),defaultOptions:{add:!1,availableOnly:!1,cdNumber:!1,changeOrder:!1,cells:["Love","Play","Title","Artist","Album","Duration"],download:!1,editMp3:!1,fallback:!1,fanOnly:!1,filter:!1,header:!1,infiniteScroll:!1,lyrics:!1,multiArtist:!1,offline:!1,playAll:!1,playlistAssistant:!1,remove:!1,replace:!1,reverseBackground:!1,selectAll:!1,share:!1,sorter:!1,toolbar:"top",trackNumber:!1,trackIndex:!1,video:!1},toolbarHeight:48,headerHeight:30,itemsHeight:30,fillerHeight:0,addItems:function(e){e=Array.isArray(e)?e:[e];var t=function(t){if(this.isMounted()&&("number"!=typeof t.count||t.count===e.length)){t=t.data||t,e=t.map(function(e){return e.DATE_ADD||(e.DATE_ADD=Date.now()),e}),e=c.hydrate(e),e=this.state.items.concat(e);var a=e.map(function(e){return E(T(e))});this._store.fill(a),this.setState({items:e}),Events.trigger(Events.datagrid.addedItems,{items:e})}}.bind(this);return"number"==typeof e[0]?(e=e.map(function(e){return[e,0]}),void api.call({method:"song.getListAllData",data:{sng_ids:e},success:t})):void t(e)},removeItems:function(e){e=Array.isArray(e)?e:[e],e=e.map(function(e){return Number(Array.isArray(e)?e[0]:e)}),e=this.state.items.filter(function(t){return-1===e.indexOf(Number(t.SNG_ID))}),this.setState({items:e})},updateItem:function(e,t){for(var a=this.state.items.slice(0),n=0,r=a.length;r>n;n++)if(Number(a[n].SNG_ID)===e){a[n]=s({},a[n],t);break}this.setState({items:c.hydrate(a)},this._forceListUpdate)},render:function(){var e=i({datagrid:!0,"datagrid-alt":this.state.options.reverseBackground});return n.createElement("div",{ref:"datagrid",className:e},this._renderToolbar(this._filteredItems,"top"),n.createElement("table",{className:"datagrid-table"},n.createElement(d,{cells:y,options:this.state.options}),this._renderHeader(),this._renderBody(this._filteredItems)),this._renderToolbar(this._filteredItems,"bottom"),this._renderPlaylistAssistant(),this._renderDragImage())},_renderToolbar:function(e,t){return t!==this.state.options.toolbar?null:n.createElement(u,{type:this.state.type,items:e,options:this.state.options,onFilter:this._onFilter,filter:this.state.filter,sortOrder:this.state.sortOrder,sortCell:this.state.sortCell,onSort:this._onSort})},_renderHeader:function(){return this.state.options.header?n.createElement(m,{cells:y,options:this.state.options,sortOrder:this.state.sortOrder,sortCell:this.state.sortCell,onSort:this._onSort}):null},_renderBody:function(e){return this.state.options.infiniteScroll===!1?n.createElement("tbody",null,this._renderLines(e)):n.createElement(p,{ref:"list",containerType:"tbody",spacerType:"tr",elementHeight:this.itemsHeight,scrollingContainer:this.props.scrollingContainer},this._renderLines(e))},_renderLines:function(e){var t,a,s,r,i,o,l,c,p=[],d=[];this.state.options.changeOrder&&null===this.state.sortCell&&(s=!0,i=this._drop,o=this._dragOver,l=this._dragEnd);for(var u=0,m=e.length;m>u;++u)t=T(e[u]),a=E(t),(this.state.options.availableOnly!==!0||v(e[u])!==!1)&&(this.state.dragDivider&&this.state.dragDivider[0]===a&&"before"===this.state.dragDivider[1]&&p.push(n.createElement("tr",{key:"divider",className:"divider"})),this.state.options.changeOrder&&null===this.state.sortCell&&(r=this._dragStart.bind(this,t)),this.state.options.cdNumber&&t.DISK_NUMBER!==c&&(d.push(u),c=t.DISK_NUMBER),p.push(n.createElement(h,{type:this.state.type,items:e,item:e[u],filter:this.state.filter,sortCell:this.state.sortCell,sortOrder:this.state.sortOrder,options:this.state.options,index:u,draggable:s,onDragStart:r,onDrop:i,onDragOver:o,onDragEnd:l,key:P(e[u])})),-1!==this.state.displayedContributors.indexOf(a)&&p.push(n.createElement("tr",{key:"item-contributors-"+a,className:"contributors"},this._renderContributorsLine(t))),this.state.dragDivider&&this.state.dragDivider[0]===a&&"after"===this.state.dragDivider[1]&&p.push(n.createElement("tr",{key:"divider",className:"divider"})));return this.state.options.cdNumber&&d.length>1&&d.forEach(function(e,t){var a=String(t+1),s=e+t;p.splice(s,0,n.createElement("tr",{key:"cd-"+a,className:"caption"},n.createElement("td",{colSpan:"8"},n.createElement("div",{className:"wrapper"},n.createElement("span",{className:"icon icon-datagrid icon-album"}),"CD ",a))))}),this.state.options.infiniteScroll===!1?p:(this.fillerHeight>0&&p.push(n.createElement("tr",{key:"filler",style:{height:this.fillerHeight}})),p)},_renderContributorsLine:function(e){var t=[],a=S(e.SNG_CONTRIBUTORS,"author"),s=S(e.SNG_CONTRIBUTORS,"composer"),r=S(e.SNG_CONTRIBUTORS,"misc");""!==a&&t.push(l("Auteur :")+" "+a),""!==s&&t.push(l("Compositeur :")+" "+s),""!==r&&t.push(l("Autres contributeurs :")+" "+r),t=t.join(" / ");var i=this.state.options.cells.length+2,o=this.state.options.cells.indexOf("Title")+1,c=i-o;return[n.createElement("td",{key:"spacer",colSpan:o}),n.createElement("td",{key:"contributors",colSpan:c},n.createElement("div",{className:"wrapper"},t))]},_renderDragImage:function(){return n.createElement(_,{ref:"dragImage",items:this.state.dragItems})},_renderPlaylistAssistant:function(){return this.state.options.playlistAssistant===!1||0!==this.state.items.length?null:n.createElement("button",{className:"btn empty-datagrid-add-track",type:"button",onClick:this._onPlaylistAssistantClick},n.createElement("span",{className:"btn btn-primary btn-icon"},n.createElement("span",{className:"icon icon-add"})),n.createElement("span",{className:"label"},l("Me suggérer des titres")))},_onSort:function(e,t){if(null===e||"undefined"!=typeof y[e]&&"function"==typeof y[e].sort){var a=this._updateSort.bind(this,e,t);return"function"==typeof this.props.onSort?void this.props.onSort(a):void window.setZeroTimeout(a)}},_onFilter:function(e){var t=this._updateFilter.bind(this,e);return"function"==typeof this.props.onFilter?void this.props.onFilter(t):void window.setZeroTimeout(t)},_onAddSong:function(e,t){if(this.state.id===Number(t.playlist_id)&&"personalPlaylist"===this.props.type){var a=t.song.map(function(e){return Number(Array.isArray(e)?e[0]:e)});this.addItems(a)}},_onRemoveSong:function(e,t){this.state.id===Number(t.playlist_id)&&-1!==["personalPlaylist","personal_song"].indexOf(this.props.type)&&this.removeItems(t.song)},_onAddFavorite:function(e,t){this.state.id===window.USER.USER_ID&&"loved"===this.props.type&&"song"===t.type&&this.addItems(Number(t.id))},_onRemoveFavorite:function(e,t){this.state.id===window.USER.USER_ID&&"loved"===this.props.type&&this.removeItems(Number(t.id))},_onAddPersonalSong:function(e,t){this.state.id===window.USER.USER_ID&&"personal_song"===this.props.type&&this.addItems(Number(t))},_onUpdatePersonalSong:function(e,t){this.state.id===window.USER.USER_ID&&"personal_song"===this.props.type&&this.updateItem(t.id,t.item)},_onSendPersonalSong:function(e,t){var a=new Date;a=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDay(),this.addItems({SNG_ID:-t[0],DURATION:0,USER_ID:window.USER.USER_ID,FILESIZE:t[0],FILESIZE_MP3_MISC:t[0],ART_ID:0,ART_NAME:l("En cours"),ALB_ID:0,SNG_TITLE:t[1],ALB_TITLE:"",TYPE:1,RIGHTS:{STREAM_ADS:a,STREAM_SUB:a},FAN_ONLY:0,__TYPE__:"song"})},_onProgressPersonalSong:function(e,t){return t[2]>=100?void this.removeItems(-t[0]):void this.updateItem(-t[0],{ART_NAME:l("En cours")+" ("+t[2]+"%)"})},_onPlaylistAssistantClick:function(){modal.open("/lightbox/playlist_assistant?type=add_song&playlist_id="+this.context.id)},_filteredItems:[],_dragDebounce:0,_updateContributors:function(e){"contributors"===e&&this.setState({displayedContributors:this._store.getDisplayedContributors()})},_forceListUpdate:function(){"undefined"!=typeof this.refs&&"undefined"!=typeof this.refs.list&&this.refs.list.forceUpdate()},_getOptions:function(e,t){e=e||{};var a,s,n={};for(var r in this.defaultOptions)this.defaultOptions.hasOwnProperty(r)&&(a=e[r],s=this.presets[t]&&this.presets[t][r],"undefined"!=typeof a?n[r]=a:"undefined"!=typeof s?n[r]=s:n[r]=this.defaultOptions[r]);return n},_updateSort:function(e,t){"undefined"==typeof t&&(t=this.state.sortCell===e&&"asc"===this.state.sortOrder?"desc":"asc"),N(this.context.id,this.state.type,{cell:e,order:t}),(this.state.sortOrder!==t||this.state.sortCell!==e)&&this.setState({sortOrder:t,sortCell:e},this._forceListUpdate)},_updateFilter:function(e){this.state.filter!==e&&this.setState({filter:e},this._forceListUpdate)},_sortItems:function(e,t,a){return"undefined"==typeof y[t]||"function"!=typeof y[t].sort?e:(e=e.slice(),e.sort(y[t].sort),"asc"===a?e:e.reverse())},_filterItems:function(e,t){return""===t?e:e.filter(function(e){return k.some(function(a){return a(t,e)})})},_getFillerHeight:function(e){var t=(e||document.querySelector(".page-scroll")||document.body).offsetHeight,a=this.refs.datagrid.getBoundingClientRect().top,s=this.toolbarHeight+this.headerHeight+this._filteredItems.length*this.itemsHeight;return Math.max(0,t-a-s)},_dragStart:function(e,t){var a,s=[];this._store.select(E(e));for(var n=0,i=this.state.items.length;i>n;n++)a=E(T(this.state.items[n])),this._store.isSelected(a)&&s.push(this.state.items[n]);this.setState({dragItems:s}),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",""),"setDragImage"in t.dataTransfer&&t.dataTransfer.setDragImage(r.findDOMNode(this.refs.dragImage),-10,-10)},_drop:function(){var e,t,a=this.state.items.slice(0);for(e=0,t=this.state.dragItems.length;t>e;e++){var s=this._getIndexes(this.state.dragItems[e],this.state.dragDivider);this._moveItem(a,s.src,s.dest)}var n=[];for(e=0,t=a.length;t>e;e++)n.push(E(a[e]));switch(this.props.type){case"personalPlaylist":api.call("playlist.updateOrder",{playlist_id:this.context.id,position:"0",order:n});break;case"loved":api.call("favorite_song.updateOrder",{position:"0",order:n})}this.setState({items:a},this._forceListUpdate),this._cleanAfterDrag()},_dragEnd:function(){this._cleanAfterDrag()},_dragOver:function(e){e.preventDefault();var t=Date.now();if(!(t-this._dragDebounce<150)){this._dragDebounce=t;var a=Number(e.currentTarget.getAttribute("data-key")),s=e.currentTarget.getBoundingClientRect(),n=e.clientY-s.top<this.itemsHeight/2?"before":"after";this.state.dragDivider&&a===this.state.dragDivider[0]&&n===this.state.dragDivider[1]||this.setState({dragDivider:[a,n]},this._forceListUpdate)}},_cleanAfterDrag:function(){if(null!==this.state.dragDivider){var e,t,a;for(e=0,t=this.state.items.length;t>e;e++)a=E(this.state.items[e]),this._store.unselect(a);this.setState({dragItems:null,dragDivider:null},this._forceListUpdate)}},_getIndexes:function(e,t){var a,s,n,r,i,o=E(e),l=t[0],c=t[1];for(a=0,s=this.state.items.length;s>a&&(n=E(this.state.items[a]),o===n&&(r=a),l===n&&(i=a),!r||!i);a++);return i>r&&"before"===c?i-=1:r>i&&"after"===c&&(i+=1),{src:r,dest:i}},_moveItem:function(e,t,a){var s,n=e[t];if(a>t)for(s=t;a>s;s++)e[s]=e[s+1];else for(s=t;s>a;s--)e[s]=e[s-1];e[a]=n}});t.exports=x},{"../../../core/i18n":255,"../../../models/track":262,"./_elements/ColGroup":67,"./_elements/DragImage":68,"./_elements/Header":69,"./_elements/Line":70,"./_elements/Toolbar":79,"./_elements/cells":96,"./presets":106,"./store":115,"./utils":116,"@deezer/components/common/Infinite":129,"babel-runtime/core-js/object/assign":305,classnames:"classnames",react:"react","react-dom":"react-dom"}],129:[function(e,t,a){"use strict";t.exports=e("./infinite")},{"./infinite":130}],130:[function(e,t,a){"use strict";var s=e("react"),n=function(e,t){return"undefined"!=typeof e[t]&&("number"!=typeof e[t]||e[t]%1!==0||e[t]<1)?new Error("Warning: "+t+" must be a positive integer."):void 0},r=function(e,t,a){return"undefined"==typeof e[t]?new Error("Warning: Required prop `"+t+"` was not specified in `"+a+"`."):n(e,t,a)},i=s.createClass({displayName:"Infinite",propTypes:{batchSize:n,containerType:s.PropTypes.string,containerClassName:s.PropTypes.string,spacerType:s.PropTypes.string.isRequired,elementHeight:r,scrollingContainer:s.PropTypes.object,bufferSize:n,stateTTL:n,children:s.PropTypes.array},getDefaultProps:function(){return{containerType:"div",spacerType:"div",stateTTL:150}},getInitialState:function(){var e=this.props.scrollingContainer||document.querySelector(".page-scroll")||document.body,t=e.offsetHeight,a=this.props.batchSize||t/2,s=this.props.bufferSize||t;return{start:0,end:Math.ceil((a+s)/this.props.elementHeight),numberOfChildren:this.props.children.length,containerHeight:t,batchSize:a,isScrolling:!1,bufferSize:s,scrollingContainer:e}},componentDidMount:function(){this.state.scrollingContainer.addEventListener("scroll",this._onScroll,!1)},componentWillReceiveProps:function(e){var t=e.scrollingContainer||this.state.scrollingContainer,a=t.offsetHeight;this.setState({numberOfChildren:e.children.length,containerHeight:a,batchSize:e.batchSize||Math.ceil(a/2),bufferSize:e.bufferSize||a,scrollingContainer:t},this._updateState)},shouldComponentUpdate:function(e,t){return this.state.start!==t.start||this.state.end!==t.end||this.state.numberOfChildren!==t.numberOfChildren||this.state.containerHeight!==t.containerHeight||this.state.isScrolling!==t.isScrolling||this.state.numberOfChildren>0&&this.props.children[this.state.numberOfChildren-1].key!==e.children[this.state.numberOfChildren-1].key},componentWillUnmount:function(){this.state.scrollingContainer.removeEventListener("scroll",this._onScroll,!1)},render:function(){var e=this.props.children.slice(this.state.start,this.state.end);return s.createElement(this.props.containerType,{style:{pointerEvents:this.state.isScrolling?"none":"auto"},className:this.props.containerClassName},this._renderTopSpacer(),e,this._renderBottomSpacer())},_renderTopSpacer:function(){return s.createElement(this.props.spacerType,{key:"topSpacer",style:{height:this.state.start*this.props.elementHeight}})},_renderBottomSpacer:function(){return s.createElement(this.props.spacerType,{key:"bottomSpacer",style:{height:Math.max(0,(this.state.numberOfChildren-this.state.end)*this.props.elementHeight)}})},_onScroll:function(){this.scrollingTimeout&&clearTimeout(this.scrollingTimeout),this._updateState(!0),this.scrollingTimeout=setTimeout(this._updateStateFinal,this.props.stateTTL)},_updateState:function(e){var t=this.state.scrollingContainer.scrollTop,a=Math.floor(t/this.state.batchSize),s=this.state.batchSize*a,n=s+this.state.batchSize,r=Math.floor(Math.max(0,s-this.state.bufferSize)/this.props.elementHeight),i=Math.ceil(Math.min(this.props.elementHeight*this.state.numberOfChildren,n+this.state.bufferSize)/this.props.elementHeight);this.setState({start:r,end:i,isScrolling:Boolean(e)})},_updateStateFinal:function(){this.setState({isScrolling:!1})}});t.exports=i},{react:"react"}],115:[function(e,t,a){"use strict";var s=e("../../../core/Store"),n=function(){return new s({items:{},defaultSelection:!1,fill:function(e){for(var t=[],a=0,s=e.length;s>a;a++)t[e[a]]=this.items[e[a]]||{selected:this.defaultSelection,displayContributors:!1};return this.items=t,this.emitChange(),this},reset:function(){return this.defaultSelection=!1,this.items={},this.emitChange(),this},setDefaultSelection:function(e){return this.defaultSelection=e,this},selectAll:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].selected=!0);return this.emitChange("selection"),this},unselectAll:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].selected=!1);return this.emitChange("selection"),this},toggleSelection:function(e){return"undefined"==typeof this.items[e]?this:(this.items[e].selected=!this.items[e].selected,this.emitChange("selection"),this)},select:function(e){return"undefined"==typeof this.items[e]?this:(this.items[e].selected=!0,this.emitChange("selection"),this)},unselect:function(e){return"undefined"==typeof this.items[e]?this:(this.items[e].selected=!1,this.emitChange("selection"),this)},isSelected:function(e){return this.items[e]&&this.items[e].selected},hasOneSelected:function(){for(var e in this.items)if(this.items.hasOwnProperty(e)&&this.items[e].selected===!0)return!0;return!1},toggleContributors:function(e){if("undefined"==typeof this.items[e])return this;var t=this.items[e].displayContributors;return this.hideAllContributors(),t===!1&&(this.items[e].displayContributors=!0),this.emitChange("contributors"),this},displayContributors:function(e){return"undefined"==typeof this.items[e]?this:(this.items[e].displayContributors=!0,this.emitChange("contributors"),this)},hideContributors:function(e){return"undefined"==typeof this.items[e]?this:(this.items[e].displayContributors=!1,this.emitChange("contributors"),this)},hasDisplayedContributors:function(e){return this.items[e]&&this.items[e].displayContributors},getDisplayedContributors:function(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&this.items[t].displayContributors&&e.push(Number(t));return e},hideAllContributors:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].displayContributors=!1);return this.emitChange("contributors"),this}})};t.exports=n},{"../../../core/Store":251}],251:[function(e,t,a){"use strict";var s=e("./util"),n=e("./EventDispatcher"),r=function(e){this.uniq_id=s.uniqid(),this.parent={},this.callbacks={},this.eventDispatcher=new n,this.emitChange=function(e){this.eventDispatcher.trigger(e)}.bind(this),this.onChange=function(e){this.eventDispatcher.subscribe(e)}.bind(this),this.offChange=function(e){this.eventDispatcher.unSubscribe(e)}.bind(this);for(var t in e)e.hasOwnProperty(t)&&(this.hasOwnProperty(t)&&(this.parent[t]=this[t]),this[t]=e[t])};t.exports=r},{"./EventDispatcher":250,"./util":260}],250:[function(e,t,a){"use strict";var s=e("./util"),n=function(){this.uniq_id=s.uniqid(),this.callbacks={},this.subscribe=function(e){e.uniq_id=s.uniqid(),this.callbacks[e.uniq_id]=e}.bind(this),this.unSubscribe=function(e){if(!e.hasOwnProperty("uniq_id"))return!1;var t=e.uniq_id;return"undefined"==typeof this.callbacks[t]?!1:void delete this.callbacks[t]}.bind(this),this.trigger=function(e){for(var t in this.callbacks)this.callbacks.hasOwnProperty(t)&&this.callbacks[t](e)}.bind(this)};t.exports=n},{"./util":260}],106:[function(e,t,a){"use strict";t.exports={album:e("./album"),curatorPlaylist:e("./curatorPlaylist"),discography:e("./discography"),favorite:e("./favorite"),history:e("./history"),personal_song:e("./personal_song"),loved:e("./loved"),personalPlaylist:e("./personalPlaylist"),playlist:e("./playlist"),downloads:e("./downloads"),search:e("./search"),talkShow:e("./talkShow"),talkEpisodes:e("./talkEpisodes"),topArtist:e("./topArtist"),discographyArtist:e("./discographyArtist"),artistTopTracks:e("./artistTopTracks")}},{"./album":98,"./artistTopTracks":99,"./curatorPlaylist":100,"./discography":101,"./discographyArtist":102,"./downloads":103,"./favorite":104,"./history":105,"./loved":107,"./personalPlaylist":108,"./personal_song":109,"./playlist":110,"./search":111,"./talkEpisodes":112,"./talkShow":113,"./topArtist":114}],114:[function(e,t,a){arguments[4][102][0].apply(a,arguments)},{dup:102}],113:[function(e,t,a){t.exports={cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","EpisodeDuration","EpisodeReleaseDate"],playAll:!0,share:!0}},{}],112:[function(e,t,a){t.exports={cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","EpisodeDuration","EpisodeReleaseDate"],playAll:!0}},{}],111:[function(e,t,a){t.exports={add:!0,cells:["Love","Play","Title","Artist","Album","Duration","Popularity","Checkbox"],header:!0,infiniteScroll:!0,lyrics:!0,share:!0,toolbar:"top",video:!0}},{}],110:[function(e,t,a){t.exports={add:!0,availableOnly:!0,cells:["Love","Play","Title","Artist","Album","Duration","Popularity","Checkbox"],fanOnly:!0,filter:!0,header:!0,infiniteScroll:!0,lyrics:!0,offline:!0,playAll:!0,share:!0,sorter:!0,video:!0}},{}],109:[function(e,t,a){t.exports={add:!0,checkbox:!0,cells:["Love","Play","Title","Artist","Album","Duration","Checkbox"],editMp3:!0,filter:!0,header:!0,infiniteScroll:!0,lyrics:!0,playAll:!0,remove:!0,share:!0,video:!0}},{}],108:[function(e,t,a){t.exports={add:!0,changeOrder:!0,cells:["Love","Play","Title","Artist","Album","Duration","AddDate","Checkbox"],editMp3:!0,fanOnly:!0,filter:!0,header:!0,infiniteScroll:!0,lyrics:!0,offline:!0,playAll:!0,remove:!0,replace:!0,share:!0,sorter:!0,video:!0,playlistAssistant:!0}},{}],107:[function(e,t,a){t.exports={add:!0,changeOrder:!0,cells:["Love","Play","Title","Artist","Album","Duration","AddDate","Checkbox"],fanOnly:!0,filter:!0,header:!0,infiniteScroll:!0,lyrics:!0,playAll:!0,remove:!0,replace:!0,share:!0,sorter:!0,video:!0}},{}],105:[function(e,t,a){t.exports={add:!0,cells:["Love","Play","Title","Artist","Album","Duration","Checkbox"],fanOnly:!0,filter:!0,header:!0,infiniteScroll:!0,listenDate:!0,lyrics:!0,playAll:!0,share:!0,video:!0}},{}],104:[function(e,t,a){t.exports={add:!0,cells:["Love","Play","Title","Artist","Album","Duration","AddDate","Checkbox"],fanOnly:!0,filter:!0,header:!0,infiniteScroll:!0,lyrics:!0,playAll:!0,share:!0,sorter:!0,video:!0}},{}],103:[function(e,t,a){t.exports={add:!0,checkbox:!0,cells:["Love","Play","Title","Artist","Album","Duration","Download","Checkbox"],download:!0,filter:!0,header:!0,infiniteScroll:!0,lyrics:!0,playAll:!0,video:!0}},{}],102:[function(e,t,a){t.exports={add:!0,cells:["Love","Play","Title","Duration"],fanOnly:!0,lyrics:!0,reverseBackground:!0,toolbar:!1,share:!0,trackIndex:!0,video:!0}},{}],101:[function(e,t,a){t.exports={add:!0,cells:["Love","Play","Title","Artist","Album","Duration","Popularity","Checkbox"],fallback:!0,lyrics:!0,multiArtist:!0,toolbar:"bottom",playAll:!0,share:!0,trackNumber:!0,video:!0}},{}],100:[function(e,t,a){t.exports={add:!0,availableOnly:!0,cells:["Love","Play","Title","Artist","Album","Duration","AddDate","Checkbox"],fanOnly:!0,filter:!0,header:!0,infiniteScroll:!0,lyrics:!0,offline:!0,playAll:!0,share:!0,sorter:!0,video:!0}},{}],99:[function(e,t,a){t.exports={add:!0,cells:["Love","Play","Title","Artist","Album","Popularity","Duration","Checkbox"],header:!0,playAll:!0,fanOnly:!0,lyrics:!0,download:!1,share:!0,trackIndex:!0,video:!0,filter:!0}},{}],98:[function(e,t,a){t.exports={add:!0,cdNumber:!0,cells:["Love","Play","Title","Duration","Popularity","Checkbox"],fallback:!0,lyrics:!0,multiArtist:!0,offline:!0,playAll:!0,selectAll:!0,share:!0,trackNumber:!0,video:!0}},{}],79:[function(e,t,a){"use strict";t.exports=e("./Toolbar")},{"./Toolbar":78}],78:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=e("./PlayButton"),i=e("./OfflineButton"),o=e("./PlaylistAssistant"),l=e("./Actions"),c=e("./Filter"),p=e("./Sorter"),d=e("../SelectAll"),u=s.createClass({displayName:"Toolbar",propTypes:{type:s.PropTypes.string.isRequired,items:s.PropTypes.array.isRequired,options:s.PropTypes.object.isRequired,onFilter:s.PropTypes.func.isRequired,onSort:s.PropTypes.func.isRequired,filter:s.PropTypes.string,sortOrder:s.PropTypes.string,sortCell:s.PropTypes.string},mixins:[n],render:function(){return s.createElement("div",{className:"datagrid-toolbar",id:"naboo_datagrid_options"},this._renderPlay(),this._renderOffline(),this._renderPlaylistAssistant(),this._renderSelectAll(),this._renderActions(),this._renderFilter(),this._renderSorter())},_renderPlay:function(){return this.props.options.playAll===!1?null:s.createElement(r,{type:this.props.type,items:""!==this.props.filter||null!==this.props.sortCell?this.props.items:void 0})},_renderOffline:function(){return this.props.options.offline===!1?null:s.createElement(i,{type:this.props.type,items:this.props.items})},_renderPlaylistAssistant:function(){return this.props.options.playlistAssistant===!1?null:s.createElement(o,{type:this.props.type,items:this.props.items})},_renderActions:function(){return s.createElement(l,{type:this.props.type,items:this.props.items,add:this.props.options.add,download:this.props.options.download,remove:this.props.options.remove})},_renderFilter:function(){return this.props.options.filter===!1?null:s.createElement(c,{type:this.props.type,onFilter:this.props.onFilter})},_renderSorter:function(){return this.props.options.sorter===!1?null:s.createElement(p,{onSort:this.props.onSort,sortOrder:this.props.sortOrder,sortCell:this.props.sortCell})},_renderSelectAll:function(){return this.props.options.selectAll===!1?null:s.createElement("div",{className:"toolbar-group pull-right"},s.createElement("div",{className:"toolbar-checkbox"},s.createElement(d,null)))}});t.exports=u},{"../SelectAll":71,"./Actions":72,"./Filter":73,"./OfflineButton":74,"./PlayButton":75,"./PlaylistAssistant":76,"./Sorter":77,react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],77:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=e("../../../../../core/i18n"),i=r.gettext,o=e("@deezer/components/common/DropDown"),l=s.createClass({displayName:"Sorter",propTypes:{onSort:s.PropTypes.func.isRequired,sortOrder:s.PropTypes.string,sortCell:s.PropTypes.string},mixins:[n],render:function(){var e=this._items.map(function(e,t){return s.createElement(o.Item,{key:t,label:e.label},s.createElement("a",{onClick:this._onSort.bind(this,e.cell,e.order),href:"#"},e.label))}.bind(this));return s.createElement("div",{className:"toolbar-group pull-right"},s.createElement("div",{className:"btn-group"},s.createElement(o,{selected:this._getSelected()},e)))},_onSort:function(e,t,a){a.preventDefault(),this.props.onSort(e,t)},_items:[{label:i("Ajoutés récemment"),cell:"AddDate",order:"desc"},{label:i("A - Z (titre)"),cell:"Title",order:"asc"},{label:i("A - Z (artiste)"),cell:"Artist",order:"asc"},{label:i("A - Z (album)"),cell:"Album",order:"asc"},{label:i("Manuel"),cell:null,order:"asc"}],_default:4,_getSelected:function(){if("function"==typeof this._items.findIndex){var e=this._items.findIndex(this._predicate,this);return-1===e?this._default:e}for(var t=0,a=this._items.length;a>t;t++)if(this._predicate(this._items[t]))return t;return this._default},_predicate:function(e){return this.props.sortOrder===e.order&&this.props.sortCell===e.cell}});t.exports=l},{"../../../../../core/i18n":255,"@deezer/components/common/DropDown":124,react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],76:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=e("../../../../../core/i18n"),i=r.gettext,o=e("../../../../../core/modal"),l=s.createClass({displayName:"PlaylistAssistant",contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired},mixins:[n],render:function(){return s.createElement("div",{className:"toolbar-group"},s.createElement("button",{onClick:this._onPlaylistAssistantClick,className:"btn btn-primary",id:"naboo_datagrid_add_track",type:"button"},s.createElement("span",{className:"icon icon-add"}),s.createElement("span",{className:"label"},i("Me suggérer des titres"))))},_onPlaylistAssistantClick:function(){o.open("/lightbox/playlist_assistant?type=add_song&playlist_id="+this.context.id)}});t.exports=l},{"../../../../../core/i18n":255,"../../../../../core/modal":257,react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],75:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=e("@deezer/components/common/StatesButton"),i=s.createClass({displayName:"PlayButton",propTypes:{type:s.PropTypes.string.isRequired,items:s.PropTypes.array},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string.isRequired},mixins:[n],render:function(){return s.createElement("div",{className:"toolbar-group"},s.createElement(r,{id:Number(this.context.id),type:"personalPlaylist"===this.props.type||"curatorPlaylist"===this.props.type?"playlist":this.props.type,items:this.props.items,action:"play",wording_type:"full",play_context:this.context.name}))}});t.exports=i},{"@deezer/components/common/StatesButton":134,react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],134:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("../../core/favorite"),i=e("@deezer/components/common/DataGrid/utils"),o=i.getContextName,l=s.createClass({displayName:"StatesButton",propTypes:{id:s.PropTypes.number.isRequired,type:s.PropTypes.oneOf(["show","artist","album","playlist","radio","user","talkEpisodes","loved","history","personal_song","downloads","topArtist","discographyArtist","artistTopTracks","song"]).isRequired,action:s.PropTypes.oneOf(["favorite","play"]).isRequired,color:s.PropTypes.oneOf(["default","primary"]).isRequired,items:s.PropTypes.array,wording_type:s.PropTypes.oneOf(["standard","full"]),play_context:s.PropTypes.string,size:s.PropTypes.oneOf(["","block"]),disabled:s.PropTypes.bool},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string},childContextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string},getDefaultProps:function(){return{id:0,type:"",action:"favorite",color:"default",wording_type:"standard",play_context:"",size:"",disabled:!1}},getInitialState:function(){return this._getStateFromStore()},getChildContext:function(){return{id:this.state.id,name:this.state.context}},componentDidMount:function(){this._handleEvents("subscribe"),Events.ready(Events.user.userReady,function(){this.isMounted()&&this.setState(this._getStateFromStore())}.bind(this))},shouldComponentUpdate:function(e,t){return this.props.id!==e.id||this.props.disabled!==e.disabled||this.state.status!==t.status||this.state.active!==t.active},componentWillUnmount:function(){this._handleEvents("unsubscribe")},render:function(){var e={"btn btn-action":!0,"btn-default":"default"===this.props.color,"btn-primary":"primary"===this.props.color,active:this.state.active,paused:!this.state.active&&"play"===this.props.action&&"resume"===this.state.status};return e["btn-"+this.props.action]=!0,e["btn-"+this.props.size]=this.props.size,e=n(e),s.createElement("button",{className:e,type:"button",onClick:this._handleClick,disabled:this.props.disabled},this._renderContent())},_renderContent:function(){var e={icon:!0};e["icon-"+this._getIcon(this.state.status)]=!0;var t=this.state.status;"resume"!==t&&(t=this.state.active?"hover":"default");var a={icon:!0};a["icon-"+this._getIcon(t)]=!0;var r=[s.createElement("div",{key:"default",className:"action action-default"},s.createElement("span",{key:"icon",className:n(e)},this._getAnimatedIcon()),s.createElement("span",{key:"label",className:"label"},this._getWording("default"))),s.createElement("div",{key:"active",className:"action action-active"},s.createElement("span",{key:"icon",className:n(e)},this._getAnimatedIcon()),s.createElement("span",{key:"label",className:"label"},this._getWording("active"))),s.createElement("div",{key:"hover",className:"action action-hover"},s.createElement("span",{key:"icon",className:n(a)}),s.createElement("span",{key:"label",className:"label"},this._getWording("hover")))];return"play"===this.props.action&&r.push(s.createElement("div",{key:"resume",className:"action action-resume"},s.createElement("span",{key:"icon",className:n(e)},this._getAnimatedIcon()),s.createElement("span",{key:"label",className:"label"},this._getWording("resume")))),r},_onFavoriteStatusChange:function(e,t){if("undefined"==typeof t||this.props.type!==t.type||Number(this.props.id)!==Number(t.id)||!this.isMounted())return!1;var a=userData.isFavorite(this.props.type,this.props.id);this.setState({status:a?"active":"default",active:a})},_onPlayStatusChange:function(e,t){return this.state.active||t?this._hasSameContext()?void this.setState({status:this.state.active&&t===!1?"resume":"active",active:t}):(this.setState({status:"default",active:!1}),!0):!1},_onPlayClick:function(){return this._hasSameContext()?(dzPlayer.control.togglePause(),!0):void dzPlayer.play({type:this.props.type,id:this.props.id,data:this.props.items,radio:"artist_smartradio"===this.props.play_context||"profile_user_radio"===this.props.play_context,context:{TYPE:this.props.play_context,ID:this.props.id}})},_onFavoriteClick:function(){r.action(null,{id:this.props.id,type:this.props.type})},_handleEvents:function(e){for(var t=this._getData("events_subscription"),a=t.length,s=0;a>s;s++)Events[e](t[s].event_name,this[t[s].event_callback])},_handleClick:function(){this.props.disabled||this[this._getData("onclick")]()},_getData:function(e){var t={play:{events_subscription:[{event_name:Events.player.playing,event_callback:"_onPlayStatusChange"}],icon_mapping:{"default":"play-circle",active:"default"===this.props.color?" equalizer equalizer-dark equalizer-16":" equalizer equalizer-inverse equalizer-16",hover:"pause-circle",resume:"play-circle"},onclick:"_onPlayClick"},favorite:{events_subscription:[{event_name:Events.user.addFavorite,event_callback:"_onFavoriteStatusChange"},{event_name:Events.user.deleteFavorite,event_callback:"_onFavoriteStatusChange"}],icon_mapping:{"default":"love",active:"love",hover:"cancel",default_user:"add",active_user:"check",hover_user:"cancel"},onclick:"_onFavoriteClick"}};return t[this.props.action]?t[this.props.action][e]:null},_hasSameContext:function(){var e=dzPlayer.getContext();return null===e?!1:LOG_CONTEXT[o(e.TYPE)]===LOG_CONTEXT[this.context.name]&&e.ID===this.context.id},_getIcon:function(e){var t="user"===this.props.type&&"favorite"===this.props.action?"_user":"";return this._getData("icon_mapping")[e+t]},_getAnimatedIcon:function(){return"play"!==this.props.action||"active"!==this.state.status?null:[s.createElement("span",{key:"equalizer_bar_1",className:"equalizer-bar equalizer-bar-1"}),s.createElement("span",{key:"equalizer_bar_2",className:"equalizer-bar equalizer-bar-2"}),s.createElement("span",{key:"equalizer_bar_3",className:"equalizer-bar equalizer-bar-3"})]},_getWording:function(e){return"none"===this.props.wording_type?"":button_multi_state.trad[this.props.wording_type][e+"_"+this.props.action+"_"+this.props.type]?button_multi_state.trad[this.props.wording_type][e+"_"+this.props.action+"_"+this.props.type]:button_multi_state.trad[this.props.wording_type][e+"_"+this.props.action]?button_multi_state.trad[this.props.wording_type][e+"_"+this.props.action]:button_multi_state.trad[this.props.wording_type][e]},_getStateFromStore:function(){var e="default";return"favorite"===this.props.action&&userData.isFavorite(this.props.type,this.props.id)&&(e="active"),"play"===this.props.action&&this._hasSameContext()&&(e=dzPlayer.isPaused()?"resume":dzPlayer.isPlaying()?"active":"default"),{status:e,active:"active"===e}}});t.exports=l},{"../../core/favorite":253,"@deezer/components/common/DataGrid/utils":116,classnames:"classnames",react:"react"}],74:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=e("../../../../../core/i18n"),i=r.gettext,o=e("@deezer/components/common/Tooltip"),l=s.createClass({displayName:"OfflineButton",propTypes:{type:s.PropTypes.string.isRequired,items:s.PropTypes.array.isRequired},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired},mixins:[n],render:function(){return"Mac"!==window.BrowserDetect.OS&&"Windows"!==window.BrowserDetect.OS?null:s.createElement("div",{className:"toolbar-group"},s.createElement("div",{className:"btn-group",id:"naboo_datagrid_offline"},s.createElement("label",{className:"btn btn-label"},s.createElement("span",{className:"label"},i("Mode hors connexion"))),s.createElement(o,{text:i("sur mon ordinateur")},s.createElement("button",{onClick:this._onOfflineClick,className:"btn btn-default",id:"naboo_datagrid_offline_local",type:"button","data-target":"offline-local"},s.createElement("span",{className:"icon icon-laptop"})))))},_onOfflineClick:function(){0!==this.props.items.length&&window.dzoffline.display(this.props.type+"/"+this.context.id)}});t.exports=l},{"../../../../../core/i18n":255,"@deezer/components/common/Tooltip":151,react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],73:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("react-addons-pure-render-mixin"),i=e("../../../../../core/i18n"),o=i.gettext,l=e("../cells"),c=[];for(var p in l)l.hasOwnProperty(p)&&"undefined"!=typeof l[p].filter&&c.push(l[p].filter);var d=s.createClass({displayName:"Toolbar",propTypes:{type:s.PropTypes.string.isRequired,onFilter:s.PropTypes.func.isRequired},mixins:[r],getInitialState:function(){return{filter:""}},render:function(){var e={downloads:o("Rechercher dans mes achats"),playlist:o("Rechercher dans la playlist"),personalPlaylist:o("Rechercher dans la playlist"),personal_song:o("Rechercher dans mes MP3"),folder:o("Rechercher dans le dossier"),favorite:o("Rechercher parmi les titres"),loved:o("Rechercher parmi les titres"),history:o("Rechercher dans l'historique")},t=e[this.props.type]||o("Rechercher dans les résultats"),a=n({"form-control":!0,clear:""!==this.state.filter});return s.createElement("div",{className:"toolbar-group pull-right"},s.createElement("form",{role:"search",className:"toolbar-search form-inline",method:"post",onSubmit:this._onFilterSubmit},s.createElement("input",{ref:"filter",className:a,id:"naboo_datagrid_filter_text",placeholder:t,onChange:this._onFilterChange,value:this.state.filter,type:"search"}),s.createElement("a",{className:"reset",onClick:this._onFilterClear,id:"naboo_datagrid_filter_clear",href:"#"},s.createElement("span",{className:"icon icon-cancel"}))))},_onFilterSubmit:function(e){e.preventDefault()},_onFilterChange:function(e){var t=window.rewriting(e.target.value.toLowerCase());this.setState({filter:e.target.value}),this.props.onFilter(t)},_onFilterClear:function(e){e.preventDefault(),this.setState({filter:""},function(){this.refs.filter.focus()}),this.props.onFilter("")}});t.exports=d},{"../../../../../core/i18n":255,"../cells":96,classnames:"classnames",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],72:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=e("../../../../../core/i18n"),i=r.gettext,o=r.ngettext,l=e("../../utils"),c=l.getItem,p=l.getContextName,d=l.getItemId,u=l.downloadItems,m=e("@deezer/components/common/Tooltip"),h=s.createClass({displayName:"Actions",propTypes:{type:s.PropTypes.string.isRequired,items:s.PropTypes.array.isRequired,add:s.PropTypes.bool.isRequired,download:s.PropTypes.bool.isRequired,remove:s.PropTypes.bool.isRequired},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),store:s.PropTypes.object.isRequired},mixins:[n],getInitialState:function(){return{hasOneSelected:this.context.store.hasOneSelected()}},componentDidMount:function(){this.context.store.onChange(this._updateSelection)},componentWillUnmount:function(){this.context.store.offChange(this._updateSelection)},render:function(){if(this.state.hasOneSelected===!1)return null;var e=[];return this.props.add===!0&&e.push(s.createElement(m,{key:"add",text:i("Ajouter")},s.createElement("button",{onClick:this._addMusicBox,className:"btn btn-default",id:"naboo_datagrid_add",type:"button"},s.createElement("span",{className:"icon icon-add"})))),this.props.download===!0&&e.push(s.createElement(m,{key:"download",text:i("Télécharger")},s.createElement("button",{onClick:this._onDownloadClick,className:"btn btn-default",type:"button"},s.createElement("span",{className:"icon icon-download"})))),this.props.remove===!0&&e.push(s.createElement(m,{key:"remove",text:i("Supprimer")},s.createElement("button",{onClick:this._onRemoveClick,className:"btn btn-default",id:"naboo_datagrid_remove",type:"button"},s.createElement("span",{className:"icon icon-trash"})))),0===e.length?null:s.createElement("div",{className:"toolbar-group pull-right"},s.createElement("div",{className:"btn-group"},e))},_onDownloadClick:function(){var e=this.props.items.filter(function(e){return this.context.store.isSelected(d(c(e)))},this);e=e.map(function(e){return d(e)}),0!==e.length&&u(e)},_onRemoveClick:function(){var e=this.props.items.filter(function(e){return this.context.store.isSelected(d(c(e)))},this);if(e=e.map(function(e){var t=d(e);return[t,t>0?0:1]}),0!==e.length&&confirm(o("Êtes-vous sûr de vouloir supprimer le titre sélectionné ?","Êtes-vous sûr de vouloir supprimer les titres sélectionnés ?",{count:e.length}))){var t,a;switch(this.props.type){case"loved":var s=[];for(t=0;t<e.length;t++)s.push(e[t][0]);api.call("favorite_song.removeMulti",{SNG_IDS:s},this._onRemoved,{sng_list:e});break;case"personalPlaylist":a={playlist_id:this.context.id,songs:e},api.call("playlist.deleteSongs",a,this._onRemoved,{sng_list:e});break;case"personal_song":for(t=0;t<e.length;t++)a={upload_id:e[t][0]},api.call("personal_song.delete",a,this._onRemoved,{sng_list:[e[t][0]]})}}},_onRemoved:function(e,t){if(this.isMounted()&&e===!0){userData.removePlaylistSong(this.context.id,t.sng_list);for(var a=0,s=t.sng_list.length;s>a;a++){var n="object"==typeof t.sng_list[a]?t.sng_list[a][0]:t.sng_list[a];this.context.store.unselect(n),"loved"===this.props.type&&userData.isFavorite("song",n)&&userData.deleteFavorite({type:"song",id:n})}}},_addMusicBox:function(e){e.preventDefault();var t;switch(this.props.type){case"discography":case"topArtist":t="artist";break;case"personalPlaylist":t="playlist";break;default:t=this.props.type}for(var a,s,n=[],r=[],i=0,o=this.props.items.length;o>i;i++)a=c(this.props.items[i]),s=d(a),this.context.store.isSelected(s)&&(n.push(s),r.push(a));Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,position:"left",type:"track",data:{SONG:1===r.length?r[0]:{},PLAYLIST_ID:"playlist"===this.props.type||"personalPlaylist"===this.props.type?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===this.props.type},id:n,context:t,listen_context:{TYPE:p(this.props.type),ID:this.context.id}})},_updateSelection:function(e){"selection"===e&&this.setState({hasOneSelected:this.context.store.hasOneSelected()})}});t.exports=h},{"../../../../../core/i18n":255,"../../utils":116,"@deezer/components/common/Tooltip":151,react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],70:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("@deezer/components/common/Tooltip"),i=e("./cells"),o=e("../utils"),l=o.getContextName,c=o.isItemAvailable,p=o.getPlayerOptions,d=o.getItemId,u=o.getItemRightMessage,m=o.isItemUnseen,h=o.isItemActive,_=s.createClass({displayName:"Line",propTypes:{type:s.PropTypes.string.isRequired,item:s.PropTypes.object.isRequired,items:s.PropTypes.array.isRequired,filter:s.PropTypes.string,sortCell:s.PropTypes.string,sortOrder:s.PropTypes.string,options:s.PropTypes.object.isRequired,index:s.PropTypes.number.isRequired,draggable:s.PropTypes.bool,onDragStart:s.PropTypes.func,onDrop:s.PropTypes.func,onDragOver:s.PropTypes.func,onDragEnd:s.PropTypes.func},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),name:s.PropTypes.string,lastSeen:s.PropTypes.number},getInitialState:function(){return{trackActive:h(this.props.item,this.context.name),trackPaused:!dzPlayer.isPlaying()}},componentDidMount:function(){Events.subscribe(Events.player.play,this._onPlay),Events.subscribe(Events.player.paused,this._onPause),Events.subscribe(Events.player.playerLoaded,this._updateTrack)},shouldComponentUpdate:function(e,t){return this.props.filter!==e.filter||this.props.sortCell!==e.sortCell||this.props.sortOrder!==e.sortOrder||this.state.trackActive!==t.trackActive||this.state.trackPaused!==t.trackPaused||this.props.draggable!==e.draggable||this.props.item.ART_NAME!==e.item.ART_NAME||this.props.item.ALB_TITLE!==e.item.ALB_TITLE||this.props.item.SNG_TITLE!==e.item.SNG_TITLE},componentWillUnmount:function(){Events.unsubscribe(Events.player.play,this._onPlay),Events.unsubscribe(Events.player.paused,this._onPause),Events.unsubscribe(Events.player.playerLoaded,this._updateTrack)},render:function(){for(var e,t=[s.createElement("td",{key:"first",className:"first"})],a=d(this.props.item),o=n({song:"talkShow"!==this.props.type,show:"talkShow"===this.props.type,unavailable:c(this.props.item)===!1,active:this.state.trackActive,paused:this.state.trackPaused,unseen:m(this.props.item,this.context.lastSeen)}),l=0,p=this.props.options.cells.length;p>l;l++)e=this.props.options.cells[l],"undefined"!=typeof i[e]?t.push(s.createElement("td",{key:e,className:i[e].className?i[e].className:e},s.createFactory(i[e])({type:this.props.type,item:this.props.item,items:this.props.items,options:this.props.options,filter:this.props.filter,sortCell:this.props.sortCell,index:this.props.index}))):t.push(s.createElement("td",{key:e}));t.push(s.createElement("td",{key:"last",className:"last"}));var h=u(this.props.item),_=s.createElement("tr",{className:o,"data-key":a,key:"item-"+a,draggable:this.props.draggable,onDragStart:this.props.onDragStart,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver,onDragEnd:this.props.onDragEnd,onContextMenu:"talkShow"!==this.props.type?this._contextMenu:void 0,onDoubleClick:this._play},t);return""!==h?s.createElement(r,{key:"item-tooltip-"+a,text:h,relativeTo:".track .title"},_):_},_onPlay:function(){var e=h(this.props.item,this.context.name);(this.state.trackActive!==e||this.state.trackPaused!==!1)&&this.setState({trackActive:e,trackPaused:!1})},_onPause:function(){var e=!dzPlayer.isPlaying();this.state.trackPaused!==e&&this.setState({trackPaused:e})},_updateTrack:function(){var e=h(this.props.item,this.context.name),t=!dzPlayer.isPlaying();(this.state.trackActive!==e||this.state.trackPaused!==t)&&this.setState({trackActive:e,trackPaused:t})},_play:function(e){if(e.preventDefault(),c(this.props.item)!==!1){if(h(this.props.item,this.context.name))return void dzPlayer.control.togglePause();var t=p(this.props,this.context);dzPlayer.play(t)}},_contextMenu:function(e){e.preventDefault();var t;switch(this.props.type){case"discography":case"topArtist":t="artist";break;case"personalPlaylist":t="playlist";break;default:t=this.props.type}Events.trigger(Events.menu.contextMenuOpen,{target:e.target,position:{left:e.pageX+1,top:e.pageY+1},type:"track",data:{SONG:this.props.item,PLAYLIST_ID:"playlist"===t?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===this.props.type},id:this.props.item.SNG_ID,context:t,listen_context:{TYPE:l(this.props.type),ID:this.context.id}})}});t.exports=_},{"../utils":116,"./cells":96,"@deezer/components/common/Tooltip":151,classnames:"classnames",react:"react"}],96:[function(e,t,a){"use strict";t.exports={AddDate:e("./AddDate"),Album:e("./Album"),Artist:e("./Artist"),Checkbox:e("./Checkbox"),Download:e("./Download"),Duration:e("./Duration"),EpisodeDuration:e("./EpisodeDuration"),EpisodeHeard:e("./EpisodeHeard"),EpisodeInformation:e("./EpisodeInformation"),EpisodeReleaseDate:e("./EpisodeReleaseDate"),EpisodeTitle:e("./EpisodeTitle"),Love:e("./Love"),Play:e("./Play"),Popularity:e("./Popularity"),Title:e("./Title")}},{"./AddDate":80,"./Album":81,"./Artist":82,"./Checkbox":84,"./Download":85,"./Duration":86,"./EpisodeDuration":87,"./EpisodeHeard":88,"./EpisodeInformation":89,"./EpisodeReleaseDate":90,"./EpisodeTitle":91,"./Love":92,"./Play":93,"./Popularity":94,"./Title":95}],95:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("classnames"),i=e("../../../../../core/modal"),o=e("../../../../../core/i18n"),l=o.gettext,c=e("@deezer/components/common/Tooltip"),p=e("../../utils"),d=p.isDeezerTrack,u=p.getContextName,m=p.getItem,h=p.downloadItems,_=p.isItemActive,y=p.getItemId,g=p.isItemAvailable,f=p.hasContributors,b=p.getPlayerOptions,v=s.createClass({displayName:"Title",propTypes:{type:s.PropTypes.string.isRequired,item:s.PropTypes.object.isRequired,items:s.PropTypes.array.isRequired,filter:s.PropTypes.string,sortCell:s.PropTypes.string,options:s.PropTypes.object.isRequired,index:s.PropTypes.number.isRequired},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired,name:s.PropTypes.string.isRequired,store:s.PropTypes.object.isRequired},statics:{label:l("Titre"),className:"track",sort:function(e,t){return e.SNG_TITLE.toLowerCase()<t.SNG_TITLE.toLowerCase()?-1:1},filter:function(e,t){return-1!==window.rewriting(t.SNG_TITLE.toLowerCase()).indexOf(e)}},shouldComponentUpdate:function(e){var t=y(this.props.item),a=y(e.item);return t!==a||this.context.store.hasDisplayedContributors(t)!==this.context.store.hasDisplayedContributors(a)},render:function(){return s.createElement("div",null,s.createElement("div",{className:"icons"},this._renderLyrics(),this._renderAdd()),s.createElement("div",{className:"icons hover"},this._renderContributors(),this._renderEdit(),this._renderDownload(),this._renderLink()),s.createElement("div",{className:"icons replace"},this._renderReplace()),s.createElement("div",{className:"wrapper ellipsis"},s.createElement("a",{role:"button",onClick:this._play,className:"title link-gray"},this._getTitle()),this._renderMultiArtist()))},_renderContributors:function(){if(g(this.props.item)===!1||f(this.props.item)===!1)return null;var e=this.context.store.hasDisplayedContributors(y(this.props.item)),t=r({"icon icon-datagrid":!0,"icon-chevron-down":e===!1,"icon-chevron-up":e===!0});return s.createElement(c,{text:l("Voir les contributeurs")},s.createElement("a",{role:"button",onClick:this._toggleContributors},s.createElement("span",{className:t})))},_renderLyrics:function(){return g(this.props.item)===!1||"undefined"==typeof this.props.item.LYRICS_ID||0===this.props.item.LYRICS_ID?null:s.createElement(c,{text:l("Écouter avec les paroles")},s.createElement("a",{role:"button",onClick:this._onLyricsClick},s.createElement("span",{className:"icon icon-datagrid icon-lyrics"})))},_renderAdd:function(){return s.createElement("a",{role:"button",onClick:this._addMusicBox},s.createElement("span",{className:"icon icon-datagrid icon-options"}))},_renderEdit:function(){return d(this.props.item)===!0||this.props.options.editMp3===!1?null:s.createElement(c,{text:l("Editer")},s.createElement("a",{role:"button",onClick:this._onEditClick},s.createElement("span",{className:"icon icon-datagrid icon-edit"})))},_renderDownload:function(){return d(this.props.item)===!1||this.props.options.download!==!0?null:s.createElement(c,{text:l("Télécharger le titre acheté")},s.createElement("a",{role:"button",onClick:this._onDownloadClick},s.createElement("span",{className:"icon icon-datagrid icon-download"})))},_renderLink:function(){return"undefined"==typeof this.props.item.FALLBACK||this.props.options.fallback!==!0?null:s.createElement(c,{text:l("Afficher la source de ce titre")},s.createElement("a",{role:"button",className:"evt-click",href:"/album/"+this.props.item.FALLBACK.ALB_ID},s.createElement("span",{className:"icon icon-datagrid icon-link"})))},_renderReplace:function(){return this.props.options.replace===!1||g(this.props.item)?null:s.createElement("a",{id:"btn_replace_"+this.props.item.ART_ID+"_"+this.props.item.SNG_ID,role:"button",onClick:this._onReplaceClick,"data-hovercard":"/ajax/hovercard/page.php?card=replace&art_id="+this.props.item.ART_ID+"&sng_id="+this.props.item.SNG_ID+"&playlist_id="+this.context.id+"&art_name="+encodeURIComponent(this.props.item.ART_NAME)+"&sng_name="+encodeURIComponent(this.props.item.SNG_TITLE)},s.createElement("span",{className:"icon icon-datagrid icon-replace"}))},_renderMultiArtist:function(){if(!this.props.options.multiArtist||!Array.isArray(this.props.item.ARTISTS)||0===this.props.item.ARTISTS.length)return null;var e=this.props.item.ARTISTS.map(function(e,t,a){var n=t===a.length-1?"":", ";return[s.createElement("a",{className:"evt-click",href:"/artist/"+e.ART_ID},e.ART_NAME),n]});return s.createElement("span",{className:"featuring"},e)},_onDownloadClick:function(e){e.preventDefault(),h(y(m(this.props.item)))},_onReplaceClick:function(e){e.preventDefault(),hovercard.init(n(e.currentTarget),0)},_onEditClick:function(e){e.preventDefault(),i.open("/lightbox/edit_personal_song.php?sng_id="+this.props.item.SNG_ID)},_onLyricsClick:function(e){e.preventDefault(),Events.subscribeOnce(Events.player.tracklist_changed,function(){dzPlayer.control.nextSong(),Events.trigger(Events.menu.togglePanel,"lyrics")});var t=b(this.props,this.context);t.radio=!1,t.addNext="radio"!==dzPlayer.getPlayerType()?!0:void 0,dzPlayer.play(t)},_play:function(){if(g(this.props.item)!==!1){if(_(this.props.item,this.context.name))return void dzPlayer.control.togglePause();var e=b(this.props,this.context);dzPlayer.play(e)}},_addMusicBox:function(e){e.preventDefault();var t;switch(this.props.type){case"discography":case"topArtist":t="artist";break;case"personalPlaylist":t="playlist";break;default:t=this.props.type}var a=m(this.props.item);Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,position:"left",type:"track",data:{SONG:a,PLAYLIST_ID:"playlist"===this.props.type||"personalPlaylist"===this.props.type?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===this.props.type},id:y(a),context:t,listen_context:{TYPE:u(this.props.type),ID:this.context.id},image:a.ALB_PICTURE})},_getTitle:function(){var e=[];return"undefined"!=typeof this.props.item.SNG_CONTRIBUTORS&&"undefined"!=typeof this.props.item.SNG_CONTRIBUTORS.abbreviated_composer&&""!==this.props.item.SNG_CONTRIBUTORS.abbreviated_composer&&e.push(this.props.item.SNG_CONTRIBUTORS.abbreviated_composer),e.push(this.props.item.SNG_TITLE),e=e.join(" | "),"string"==typeof this.props.item.VERSION&&""!==this.props.item.VERSION&&(e+=" "+this.props.item.VERSION),e},_toggleContributors:function(e){e.preventDefault(),this.context.store.toggleContributors(y(this.props.item))}});t.exports=v},{"../../../../../core/i18n":255,"../../../../../core/modal":257,"../../utils":116,"@deezer/components/common/Tooltip":151,classnames:"classnames",jquery:"jquery",react:"react"}],94:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../../core/i18n"),r=n.gettext,i=e("@deezer/components/common/Tooltip"),o=s.createClass({displayName:"Popularity",propTypes:{item:s.PropTypes.object.isRequired},statics:{label:r("Pop."),className:"popularity",sort:function(e,t){return e.RANK_SNG-t.RANK_SNG}},render:function(){var e=this.props.item.RANK_SNG/1e5;return s.createElement(i,{text:r("Popularité : ")+e.toFixed(2)+" / 10",position:"left"},s.createElement("span",{className:"popularity"},s.createElement("span",{className:"note note-"+Math.round(e),"data-target":"note"})))}});t.exports=o},{"../../../../../core/i18n":255,"@deezer/components/common/Tooltip":151,react:"react"}],93:[function(e,t,a){"use strict";var s=e("react"),n=e("../../utils"),r=n.getPlayerOptions,i=n.isItemAvailable,o=n.isItemUnseen,l=n.isItemActive,c=s.createClass({displayName:"Play",propTypes:{type:s.PropTypes.string.isRequired,item:s.PropTypes.object.isRequired,items:s.PropTypes.array.isRequired,options:s.PropTypes.object.isRequired,index:s.PropTypes.number,filter:s.PropTypes.string,sortCell:s.PropTypes.string},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired,name:s.PropTypes.string.isRequired,lastSeen:s.PropTypes.number},statics:{label:null,className:"position"},shouldComponentUpdate:function(){return!1},render:function(){var e=o(this.props.item,this.context.lastSeen)?s.createElement("span",{className:"picto-unseen"}):null,t=this.props.options.trackNumber?s.createElement("span",{className:"number"},window.pad(this.props.item.TRACK_NUMBER,2)):null,a=this.props.options.trackIndex?s.createElement("span",{className:"number"},window.pad(Number(this.props.index)+1,2)):null;return s.createElement("div",null,e,a,t,s.createElement("a",{role:"button",className:"play hover","data-target":"play",onClick:this._play,href:"#"},s.createElement("span",{className:"play-icon play-default icon-datagrid"},s.createElement("span",{className:"icon icon-play"})),s.createElement("span",{className:"play-icon play-hover icon-datagrid"},s.createElement("span",{className:"icon icon-pause"})),s.createElement("span",{className:"play-icon play-active"},s.createElement("span",{className:"equalizer equalizer-default equalizer-16"},s.createElement("span",{className:"equalizer-bar equalizer-bar-1"}),s.createElement("span",{className:"equalizer-bar equalizer-bar-2"}),s.createElement("span",{className:"equalizer-bar equalizer-bar-3"})))))},_play:function(e){if(e.preventDefault(),i(this.props.item)!==!1){if(l(this.props.item,this.context.name))return void dzPlayer.control.togglePause();var t=r(this.props,this.context);dzPlayer.play(t)}}});t.exports=c},{"../../utils":116,react:"react"}],92:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../Favorite"),r=s.createClass({displayName:"Love",propTypes:{item:s.PropTypes.object.isRequired},contextTypes:{name:s.PropTypes.string.isRequired},statics:{label:null,className:"loved"},shouldComponentUpdate:function(e){return this.props.item.SNG_ID!==e.item.SNG_ID},render:function(){return s.createElement(n,{type:"song",style:"heart_datagrid",id:String(this.props.item.SNG_ID),context:this.context.name})}});t.exports=r},{"../../../Favorite":125,react:"react"}],125:[function(e,t,a){"use strict";var s=e("babel-runtime/helpers/extends")["default"],n=e("react"),r=e("classnames"),i=e("jquery"),o=e("../../core/i18n"),l=o.gettext,c=n.createClass({displayName:"Favorite",propTypes:{id:n.PropTypes.string.isRequired,type:n.PropTypes.string,style:n.PropTypes.oneOf(["star","heart_small","heart","heart_medium","heart_large","heart_datagrid"]),overlay:n.PropTypes.bool,context:n.PropTypes.string,display_share:n.PropTypes.bool,share_context:n.PropTypes.string,tooltip:n.PropTypes.bool,tooltip_gravity:n.PropTypes.string,onClickCallback:n.PropTypes.func,elId:n.PropTypes.string},getDefaultProps:function(){return{type:"album",style:"heart_small",overlay:!0,context:"",elId:null,display_share:!1,share_context:null,tooltip:!1,tooltip_gravity:"s",onClickCallback:function(){}}},getInitialState:function(){return{share_button_display:!1,active:userData.isFavorite(this.props.type,this.props.id)}},componentDidMount:function(){Events.ready(Events.user.userReady,this._setActiveStatus),Events.subscribe(Events.modal.close,this._setShareButtonStatus),Events.subscribe(Events.user.addFavorite,this._onFavoriteToggle),Events.subscribe(Events.user.deleteFavorite,this._onFavoriteToggle)},componentWillReceiveProps:function(e){var t={active:userData.isFavorite(e.type,e.id)};this._timeout_id&&e.id!==this.props.id&&(t.share_button_display=!1,clearTimeout(this._timeout_id)),this.setState(t)},shouldComponentUpdate:function(e,t){return this.state.active!==t.active||this.state.share_button_display!==t.share_button_display||this.props.id!==e.id},componentWillUnmount:function(){Events.unsubscribe(Events.modal.close,this._setShareButtonStatus),Events.unsubscribe(Events.user.addFavorite,this._onFavoriteToggle),Events.unsubscribe(Events.user.deleteFavorite,this._onFavoriteToggle)},render:function(){var e=r({"evt-over evt-out":this.props.tooltip,active:this.state.active,selected:"heart_datagrid"===this.props.style&&this.state.active}),t=r({icon:!0,"icon-datagrid":"heart_datagrid"===this.props.style,"icon-love":!this.state.share_button_display,"icon-share":this.state.share_button_display,active:!this.state.share_button_display&&this.state.active}),a={};if(this.props.tooltip&&(a={"data-tooltip":"1","data-tooltip-gravity":this.props.tooltip_gravity,"data-tooltip-delay":"400",title:this.state.share_button_display?l("Partager"):this._getTooltip()}),"heart"===this.props.style||"heart_medium"===this.props.style||"heart_large"===this.props.style){e=r({"icon icon-love":"heart_small"===this.props.style,"icon icon-favorite":"star"===this.props.style,"evt-over evt-out":this.props.tooltip,action:!0});var i=r({"icon-32":"heart"===this.props.style,"icon-52":"heart_medium"===this.props.style,"icon-64":"heart_large"===this.props.style,"icon-stack-hover":this.props.overlay,"icon-stack icon-stack-circle":!0});return t=r({icon:!0,"icon-datagrid":"heart_datagrid"===this.props.style,"icon-love":!this.state.share_button_display,"icon-share":this.state.share_button_display,active:!this.state.share_button_display&&this.state.active}),n.createElement("a",s({role:"button",className:e,id:this.props.elId,onClick:this.state.share_button_display?this._onShareClick:this._onClick,"data-tooltip-offset":"2"},a),n.createElement("span",{className:i},n.createElement("span",{className:t})))}return n.createElement("a",s({role:"button",className:e,id:this.props.elId,onClick:this._onClick},a),n.createElement("span",{className:t}))},_onClick:function(e){e.stopPropagation();try{i(e.target).tipsy("hide")}catch(t){}var a=this.state.active?"remove":"add";favorite[a]({type:this.props.type,id:this.props.id,context:this.props.context}),this.props.onClickCallback(this.props.type,this.props.id,!this.state.active)},_onShareClick:function(){this._sharebox_id=sharebox.load(0,this.props.id,this.props.share_context)},_onFavoriteToggle:function(e,t){var a=Number(this.props.id),s=Number(t.id);if(a===s&&this.isMounted()){var n=userData.isFavorite(this.props.type,a),r=userData.isDisliked(a);this.setState({share_button_display:this.props.display_share&&n&&!r,active:n}),this._timeout_id=window.setTimeout(this._hideShareButton,5e3)}},_timeout_id:null,_sharebox_id:0,_hideShareButton:function(){clearTimeout(this._timeout_id),this.isMounted()&&this.setState({share_button_display:!1})},_setActiveStatus:function(){var e=userData.isFavorite(this.props.type,this.props.id);this.state.active!==e&&this.isMounted()&&this.setState({active:e})},_setShareButtonStatus:function(e,t){return t!==this._sharebox_id?!1:void this._hideShareButton()},_getTooltip:function(){return"song"===this.props.type?button_multi_state.getWording({type:this.props.type,action:"favorite"},this.state.active?"hover":"add","full"):""}});t.exports=c},{"../../core/i18n":255,"babel-runtime/helpers/extends":314,classnames:"classnames",jquery:"jquery",react:"react"}],91:[function(e,t,a){"use strict";var s=e("react"),n=e("jquery"),r=e("../../../../../core/i18n"),i=r.gettext,o=e("@deezer/components/common/Tooltip"),l=e("../../utils"),c=l.getContextName,p=l.isItemActive,d=l.getPlayerOptions,u=s.createClass({displayName:"EpisodeTitle",propTypes:{type:s.PropTypes.string.isRequired,item:s.PropTypes.object.isRequired,items:s.PropTypes.array.isRequired,filter:s.PropTypes.string,sortCell:s.PropTypes.string,options:s.PropTypes.object.isRequired},contextTypes:{id:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired,name:s.PropTypes.string.isRequired},statics:{className:"episode",sort:function(e,t){return e.EPISODE_TITLE.toLowerCase()<t.EPISODE_TITLE.toLowerCase()?-1:1}},render:function(){var e="talkEpisodes"===this.props.type?this.props.item.SHOW_NAME+" | ":"";return e+=this.props.item.EPISODE_TITLE,s.createElement("div",null,s.createElement("div",{className:"icons hover"},this._renderAdd()),s.createElement("div",{className:"wrapper ellipsis"},s.createElement("a",{className:"link-gray evt-click",onClick:this._play,href:"#"},e)))},_renderLink:function(){return"undefined"==typeof this.props.item.FALLBACK||this.props.options.fallback!==!0?null:s.createElement(o,{text:i("Afficher la source de ce titre")},s.createElement("a",{role:"button",className:"evt-click",href:"/show/"+this.props.item.EPISODE_ID,"data-target":"icon-link"},s.createElement("span",{className:"icon icon-datagrid icon-link"})))},_renderAdd:function(){return s.createElement("a",{role:"button","data-target":"icon-add",onClick:this._addTalkBox},s.createElement("span",{className:"icon icon-datagrid icon-options"}))},_renderReplace:function(){return s.createElement("a",{id:"btn_replace_"+this.props.item.ART_ID+"_"+this.props.item.ART_ID,href:"#",onClick:this._onReplaceClick,"data-target":"icon-replace","data-hovercard":"/ajax/hovercard/page.php?card=replace&art_id="+this.props.item.ART_ID+"&sng_id="+this.props.item.SNG_ID+"&playlist_id="+this.context.id+"&art_name="+encodeURIComponent(this.props.item.ART_NAME)+"&sng_name="+encodeURIComponent(this.props.item.EPISODE_TITLE)},s.createElement("span",{className:"icon icon-datagrid icon-replace"}))},_onReplaceClick:function(e){hovercard.init(n(e.currentTarget),0)},_addTalkBox:function(e){e.preventDefault();var t="talkShow";Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,position:"left",type:"episode",cover_type:"talk",data:this.props.item,id:this.props.item.EPISODE_ID,context:t,listen_context:{TYPE:c(this.props.type),ID:this.context.id}})},_play:function(){if(p(this.props.item,this.context.name))return void dzPlayer.control.togglePause();var e=d(this.props,this.context);dzPlayer.play(e)}});t.exports=u},{"../../../../../core/i18n":255,"../../utils":116,"@deezer/components/common/Tooltip":151,jquery:"jquery",react:"react"}],90:[function(e,t,a){"use strict";var s=e("react"),n=s.createClass({displayName:"EpisodeReleaseDate",propTypes:{item:s.PropTypes.object.isRequired},statics:{className:"added",sort:function(e,t){return e.DATE_ADD-t.DATE_ADD}},getInitialState:function(){return{time:this.props.item.EPISODE_PUBLISHED_TIMESTAMP}},componentDidMount:function(){this.updateInterval=setInterval(this._updateTime,1e3)},shouldComponentUpdate:function(e,t){return this.state.time!==t.time},componentWillUnmount:function(){clearInterval(this.updateInterval)},updateInterval:null,render:function(){return s.createElement("div",{className:"wrapper ellipsis",title:this.props.item.EPISODE_PUBLISHED_TIMESTAMP},window.formatDate(this.props.item.EPISODE_PUBLISHED_TIMESTAMP.split(" ")[0],"/"))}});t.exports=n},{react:"react"}],89:[function(e,t,a){"use strict";var s=e("react"),n=s.createClass({displayName:"EpisodeInformation",propTypes:{item:s.PropTypes.object.isRequired},contextTypes:{name:s.PropTypes.string.isRequired,panel_name:s.PropTypes.string},statics:{className:"info",sort:function(e,t){return e.DATE_ADD-t.DATE_ADD}},render:function(){return s.createElement("span",{className:"icon icon-before icon-info hover",onClick:this._onClick,id:"episode_"+this.props.item.EPISODE_ID,context:this.context.name})},_onClick:function(e){Events.trigger(Events.menu.contextMenuOpen,{target:e.currentTarget,id:"talk_"+this.props.item.EPISODE_ID,type:"episode",has_episode_description:!0,data:this.props.item,position:"left",context:this.context.panel_name,cover_type:"talk",listen_context:{TYPE:"show",ID:this.props.item.EPISODE_ID}})}});t.exports=n},{react:"react"}],88:[function(e,t,a){"use strict";var s=e("react"),n=s.createClass({displayName:"EpisodeHeard",propTypes:{item:s.PropTypes.object.isRequired},statics:{className:"heard",sort:function(e,t){return e.IS_HEARD-t.IS_HEARD}},getInitialState:function(){return{heard:this.props.item.IS_HEARD}},componentDidMount:function(){Events.subscribe(Events.talk.bookmarkSet,this._updateHeard,"bookmark"),Events.ready(Events.user.userReady,this._initHeard,"bookmark")},shouldComponentUpdate:function(e,t){return this.state.heard!==t.heard},componentWillUnmount:function(){Events.unsubscribe(Events.talk.bookmarkSet,this._updateHeard)},render:function(){var e={width:this._getCircleWidth()};return s.createElement("span",{className:"heard-icon"},s.createElement("span",{className:"heard-circle"}),s.createElement("span",{className:"heard-status",style:e}))},_getCircleWidth:function(){var e="100%";return"1"===this.state.heard?e="0%":"0.5"===this.state.heard&&(e="50%"),e},_initHeard:function(){if(this.isMounted()){var e=window.bookmark.getEpisodeBookmark(this.props.item.EPISODE_ID,this.props.item.DURATION);this.setState({heard:e.IS_HEARD})}},_updateHeard:function(e,t){this.props.item.EPISODE_ID===t.EPISODE_ID&&this.setState({heard:t.ISHEARD})}});t.exports=n},{react:"react"}],87:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=s.createClass({displayName:"EpisodeDuration",propTypes:{item:s.PropTypes.object.isRequired},mixins:[n],statics:{className:"duration",sort:function(e,t){return e.DURATION<t.DURATION?-1:1}},render:function(){return s.createElement("span",null,window.secToMin(this.props.item.DURATION))}});t.exports=r},{react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],86:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../../core/i18n"),r=n.gettext,i=s.createClass({displayName:"Duration",propTypes:{item:s.PropTypes.object.isRequired},statics:{label:r("D."),className:"length",sort:function(e,t){return e.DURATION-t.DURATION}},shouldComponentUpdate:function(e){return this.props.item.DURATION!==e.item.DURATION},render:function(){return s.createElement("span",null,window.secToMin(this.props.item.DURATION))}});t.exports=i},{"../../../../../core/i18n":255,react:"react"}],85:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../../core/i18n"),r=n.gettext,i=e("@deezer/components/common/Tooltip"),o=e("../../utils"),l=o.getItemId,c=o.getItem,p=o.downloadItems,d=s.createClass({displayName:"Download",propTypes:{item:s.PropTypes.object.isRequired},statics:{label:r("MP3"),className:"download"},shouldComponentUpdate:function(e){return this.props.item.SNG_ID!==e.item.SNG_ID},render:function(){return s.createElement(i,{text:r("Télécharger")},s.createElement("button",{className:"btn btn-default btn-small",type:"button",onClick:this._onDownloadClick},s.createElement("span",{className:"icon icon-datagrid icon-download"})))},_onDownloadClick:function(){p(l(c(this.props.item)))}});t.exports=d},{"../../../../../core/i18n":255,"../../utils":116,"@deezer/components/common/Tooltip":151,react:"react"}],151:[function(e,t,a){"use strict";t.exports=e("./Tooltip")},{"./Tooltip":150}],84:[function(e,t,a){"use strict";t.exports=e("./Checkbox")},{"./Checkbox":83}],83:[function(e,t,a){"use strict";var s=e("react"),n=e("../../SelectAll"),r=e("../../../utils"),i=r.getItemId,o=r.getItem,l=s.createClass({displayName:"Checkbox",propTypes:{item:s.PropTypes.object.isRequired},contextTypes:{store:s.PropTypes.object.isRequired},statics:{label:s.createElement(n,null),className:"check"},getInitialState:function(){return{selected:this.context.store.isSelected(i(o(this.props.item)))}},componentDidMount:function(){this.context.store.onChange(this._updateSelection)},shouldComponentUpdate:function(e,t){return this.state.selected!==t.selected},componentWillUnmount:function(){this.context.store.offChange(this._updateSelection)},render:function(){return s.createElement("input",{"data-target":"check",type:"checkbox",checked:this.state.selected,onDoubleClick:this._onDoubleClick,onChange:this._onSelect})},_onDoubleClick:function(e){e.stopPropagation()},_onSelect:function(){this.context.store[this.state.selected?"unselect":"select"](i(o(this.props.item))),this._updateSelection("selection")},_updateSelection:function(e){"selection"===e&&this.setState({selected:this.context.store.isSelected(i(o(this.props.item)))})}});t.exports=l},{"../../../utils":116,"../../SelectAll":71,react:"react"}],116:[function(e,t,a){"use strict";function s(e){var t={playlist:"playlist_page",search:"search_page",personal_song:"personalsong_page",downloads:"downloads_page",album:"album_page",topArtist:"artist_top",discographyArtist:"artist_discography",exclusivityArtist:"artist_exclu",discography:"artist_discography",favorite:"loved_page",loved:"loved_page",history:"history_page",talkShow:"show_page",talkEpisodes:"show_page",curatorPlaylist:"playlist_page",personalPlaylist:"playlist_page",artistTopTracks:"artist_top",menu_panel_playlist:"playlist_page",menu_panel_album:"album_page",suggest_playlist:"playlist_page",suggest_album:"album_page",search_playlist:"playlist_page",search_album:"album_page",artist_discography:"album_page",artist_similar_playlist:"playlist_page",history_playlist:"playlist_page",history_album:"album_page"};return t[e]||e}function n(e){return Number(e.SNG_ID||e.EPISODE_ID)}function r(e){return e.hasFallback()?e.getFallback():e}function i(e,t){for(var a=n(r(e)),s=0,i=t.length;i>s;s++){var o=n(r(t[s]));if(a===o&&e.TS===t[s].TS)return s}return-1}function o(e){return"episode"===e.__TYPE__||right.checkSongAvailable(r(e))===right.READABLE}function l(e){if("episode"===e.__TYPE__)return"";var t=right.checkSongAvailable(r(e));return right.getMessage(t)}function c(e,t){return"undefined"!=typeof e&&t in e?e[t].join(" - "):""}function p(e){return e=r(e),"undefined"!=typeof e.SNG_CONTRIBUTORS&&(e.SNG_CONTRIBUTORS.author instanceof Array||e.SNG_CONTRIBUTORS.composer instanceof Array||e.SNG_CONTRIBUTORS.misc instanceof Array)?!0:!1}function d(e){return e.SNG_ID>0}function u(e,t){for(var a=0,s=t.length;s>a;a++){var i=r(t[a]);if(n(i)===e)return i}return null}function m(e,t){return storage.get(t.toUpperCase()+"_SORT_"+e,{cell:null,order:"asc"})}function h(e,t,a){storage.set(t.toUpperCase()+"_SORT_"+e,a)}function _(e,t){return t&&e.hasOwnProperty("DATE_ADD")?e.DATE_ADD>t:!1}function y(e,t){if(null===dzPlayer.getContext()||null===dzPlayer.getCurrentSong())return!1;var a=n(dzPlayer.getCurrentSong())===n(r(e)),s=t?dzPlayer.getContext().TYPE===t||LOG_CONTEXT[dzPlayer.getContext().TYPE]===LOG_CONTEXT[t]:!0,i=e.TS?e.TS===dzPlayer.getCurrentSong().TS:!0;return a&&s&&i}function g(e){e=Array.isArray(e)?e:[e],api.call("store.getDownloadUrl",{songs:e},function(e){var t=e+"";document.location.assign(t)})}function f(e){var t=n(e),a=e.TS?"-"+e.TS:"";return"item-"+t+a}function b(e,t){var a=e.options.infiniteScroll===!0,n=""!==e.filter||null!==e.sortCell||e.items.length<v,r="topArtist"===e.type,o=a&&!n||r?void 0:e.items;return{id:t.id,type:e.type,data:o,index:i(e.item,e.items),context:{TYPE:s(e.type),ID:t.id}}}var v=40;t.exports={getContextName:s,getItemIndex:i,isItemAvailable:o,isItemUnseen:_,isItemActive:y,getItemRightMessage:l,getItemId:n,getItem:r,getContributor:c,hasContributors:p,isDeezerTrack:d,getItemById:u,getSort:m,setSort:h,downloadItems:g,getItemUniqId:f,getPlayerOptions:b}},{}],71:[function(e,t,a){"use strict";var s=e("react"),n=e("react-addons-pure-render-mixin"),r=s.createClass({displayName:"SelectAll",contextTypes:{store:s.PropTypes.object.isRequired},mixins:[n],getInitialState:function(){return{selected:!1}},render:function(){return s.createElement("input",{type:"checkbox",onChange:this._onSelect})},_onSelect:function(){var e=!this.state.selected;this.context.store.setDefaultSelection(e),this.context.store[e?"selectAll":"unselectAll"](),e===!0&&Events.trigger(Events.datagrid.allTracksSelected),this.setState({selected:e})}});t.exports=r},{react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],82:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../../core/i18n"),r=n.gettext,i=s.createClass({displayName:"Artist",propTypes:{item:s.PropTypes.object.isRequired},statics:{label:r("Artiste"),className:"artist",sort:function(e,t){return e.ART_NAME.toLowerCase()<t.ART_NAME.toLowerCase()?-1:1},filter:function(e,t){return-1!==window.rewriting(t.ART_NAME.toLowerCase()).indexOf(e)}},shouldComponentUpdate:function(e){return this.props.item.ART_ID!==e.item.ART_ID||this.props.item.ART_NAME!==e.item.ART_NAME},render:function(){var e;return e=0===Number(this.props.item.ART_ID)?this.props.item.ART_NAME:s.createElement("a",{className:"evt-click",href:"/artist/"+this.props.item.ART_ID},this.props.item.ART_NAME),s.createElement("div",{className:"wrapper ellipsis"},e)}});t.exports=i},{"../../../../../core/i18n":255,react:"react"}],81:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../../core/i18n"),r=n.gettext,i=s.createClass({displayName:"Album",propTypes:{item:s.PropTypes.object.isRequired},statics:{label:r("Album"),className:"album",sort:function(e,t){return e.ALB_TITLE.toLowerCase()<t.ALB_TITLE.toLowerCase()?-1:1},filter:function(e,t){return-1!==window.rewriting(t.ALB_TITLE.toLowerCase()).indexOf(e)}},shouldComponentUpdate:function(e){return this.props.item.ALB_ID!==e.item.ALB_ID||this.props.item.ALB_TITLE!==e.item.ALB_TITLE},render:function(){var e;return e=0===this.props.item.ALB_ID?this.props.item.ALB_TITLE:s.createElement("a",{className:"evt-click",href:"/album/"+this.props.item.ALB_ID},this.props.item.ALB_TITLE),s.createElement("div",{className:"wrapper ellipsis"},e)}});t.exports=i},{"../../../../../core/i18n":255,react:"react"}],80:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../../core/i18n"),r=n.gettext,i=s.createClass({displayName:"AddDate",propTypes:{item:s.PropTypes.object.isRequired},statics:{label:r("Ajouté"),className:"added",sort:function(e,t){return e.DATE_ADD-t.DATE_ADD}},getInitialState:function(){return{time:this._calculateTime(this.props.item.DATE_ADD)}},componentDidMount:function(){this.updateInterval=setInterval(this._updateTime,1e3)},shouldComponentUpdate:function(e,t){return this.state.time!==t.time},componentWillUnmount:function(){clearInterval(this.updateInterval)},updateInterval:null,render:function(){return s.createElement("div",{className:"wrapper ellipsis",title:this.state.time},this.state.time)},_calculateTime:function(e){return 0===e?"-":getAgoTime(window.SERVER_TIMESTAMP-e)},_updateTime:function(){window.SESSION_DURATION%30===0&&this.setState({time:this._calculateTime(this.props.item.DATE_ADD)})}});t.exports=i},{"../../../../../core/i18n":255,react:"react"}],69:[function(e,t,a){"use strict";var s=e("react"),n=e("classnames"),r=e("react-addons-pure-render-mixin"),i=s.createClass({displayName:"Header",propTypes:{cells:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired,sortCell:s.PropTypes.string,sortOrder:s.PropTypes.string,onSort:s.PropTypes.func.isRequired},mixins:[r],render:function(){for(var e=[s.createElement("th",{key:"first",className:"first"})],t=0,a=this.props.options.cells.length;a>t;t++)e.push(this._renderHeader(this.props.options.cells[t]));return e.push(s.createElement("th",{key:"last",className:"last"})),s.createElement("thead",null,s.createElement("tr",null,e))},_renderHeader:function(e){if("undefined"==typeof this.props.cells[e])return null;var t=this.props.cells[e],a={sortable:"function"==typeof t.sort};a[t.className?t.className:e]=!0,a=n(a);var r=this.props.onSort&&this.props.cells[e].sort?this._onSort.bind(this,e):void 0;return s.createElement("th",{key:e,className:a,onClick:r},this._renderLabel(e))},_renderLabel:function(e){return this.props.cells[e].label?s.createElement("span",{className:"label"},this.props.cells[e].label,this._renderSortIcon(e)):null},_renderSortIcon:function(e){if("function"!=typeof this.props.cells[e].sort)return null;var t=n({sort:!0,"sort-asc":this.props.sortCell===e&&"asc"===this.props.sortOrder,"sort-desc":this.props.sortCell===e&&"desc"===this.props.sortOrder});return s.createElement("span",{className:t},s.createElement("span",{className:"icon icon-sort"}),s.createElement("span",{className:"icon icon-sort-asc"}),s.createElement("span",{className:"icon icon-sort-desc"}))},_onSort:function(e){this.props.onSort(e)}});t.exports=i},{classnames:"classnames",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],68:[function(e,t,a){"use strict";var s=e("react"),n=e("../../../../core/i18n"),r=n.ngettext,i=s.createClass({displayName:"DragImage",propTypes:{items:s.PropTypes.array},defaultImage:window.SETTING_DOMAIN_IMG+"/cover/d41d8cd98f00b204e9800998ecf8427e/30x30-000000-80-0-0.jpg",styles:{position:"fixed",zIndex:-1},render:function(){return null===this.props.items?this._renderPlaceholder():1===this.props.items.length?this._renderDragImageSingle():this._renderDragImageMultiple()},_renderPlaceholder:function(){return s.createElement("div",{className:"datagrid-ghost",id:"naboo_datagrid_ghost_single",style:this.styles},s.createElement("img",{className:"picture",src:this.defaultImage}))},_renderDragImageSingle:function(){var e=this.props.items[0],t=e.RANK_SNG/1e5;return s.createElement("div",{"aria-grabbed":!0,"aria-dropeffect":"move",className:"datagrid-ghost",id:"naboo_datagrid_ghost_single",style:this.styles},s.createElement("div",{className:"wrapper-table"},s.createElement("span",{className:"cell cell-thumbnail"},s.createElement("figure",{className:"thumbnail thumbnail-bordered"},s.createElement("img",{className:"picture",src:this.defaultImage}))),s.createElement("span",{className:"cell cell-track"},s.createElement("div",{className:"ellipsis"},s.createElement("strong",null,e.SNG_TITLE)),s.createElement("div",{className:"ellipsis"},e.ALB_TITLE)),s.createElement("span",{className:"cell cell-length"},window.secToMin(e.DURATION)),s.createElement("span",{className:"cell cell-popularity"},s.createElement("span",{className:"note note-"+Math.round(t)}))))},_renderDragImageMultiple:function(){var e=this.props.items.length;return s.createElement("div",{"aria-grabbed":!0,"aria-dropeffect":"move",className:"datagrid-ghost multiple",id:"naboo_datagrid_ghost_multi",style:this.styles},s.createElement("div",{className:"wrapper-table"},s.createElement("span",{className:"cell cell-thumbnail"},s.createElement("figure",{className:"thumbnail thumbnail-bordered"},s.createElement("img",{className:"picture",src:this.defaultImage}))),s.createElement("span",{className:"cell"},s.createElement("strong",null,e+" "+r("titre","titres",{count:e})))))}});t.exports=i},{"../../../../core/i18n":255,react:"react"}],67:[function(e,t,a){"use strict";var s=e("react"),n=s.createClass({displayName:"colgroup",propTypes:{cells:s.PropTypes.object.isRequired,options:s.PropTypes.object.isRequired},render:function(){for(var e,t,a=[s.createElement("col",{key:"first",className:"first"})],n=0,r=this.props.options.cells.length;r>n;n++)e=this.props.options.cells[n],t=this.props.cells[e]&&this.props.cells[e].className?this.props.cells[e].className:e,a.push(s.createElement("col",{key:e,className:t}));return a.push(s.createElement("col",{key:"last",className:"last"})),s.createElement("colgroup",null,a)}});t.exports=n},{react:"react"}],263:[function(e,t,a){"use strict";var s=e("jquery"),n={display:function(e){if(artist.data.BIO===!1)return!1;var t=s("#tab_biography_content");s('[data-target="intro"]',t).html(artist.data.BIO.RESUME),s('[data-target="title"]',t).html(artist.data.DATA.ART_NAME),s('[data-target="text"]',t).html(artist.data.BIO.BIO),Events.trigger(Events.navigation.tab_displayed,{type:e.type,id:e.id})}};t.exports=n},{jquery:"jquery"}]},{},[3]);;
(function(){'use strict';if(window.PLATFORM==='web'){var detectFlashCallback=function(){var player=document.getElementById('audioPlayerSWF');util.detectFlash(player,function(err){if(err){modal.open('/lightbox/flash_detect?type='+
encodeURIComponent(err)+'&browser='+encodeURIComponent(BrowserDetect.browser)+'&os='+encodeURIComponent(BrowserDetect.OS),true);}else{Events.unsubscribe(Events.player.play,detectFlashCallback);$('.page-sidebar').off('click',detectFlashCallback);$(document).off('click','#flash_detect a');}});};$(window).load(function(){setTimeout(function(){$(document).on('click','#flash_detect a',function(){var type=$(this).data('type');var clickType=$(this).data('click-type');if(type&&clickType){tracking.track('navigation',{event:'onClick',properties:{notification:'flash_detect',message:type}});}
modal.close();});Events.subscribe(Events.player.play,detectFlashCallback);$('.page-sidebar').on('click',detectFlashCallback);detectFlashCallback();},5000);});}})();;
(function(){'use strict';var comment_feed={type_id:{artist:1,album:2,user:3,playlist:4,radio:5,video:6},remove:function(data,callback){if(typeof data!=='object'){return false;}
var type_id=comment_feed.type_id[data.type]||0;api.call({method:'comment.delete',data:{comment_id:data.id,type:type_id,element_id:data.elementId},success:callback});},flag:function(data,callback){if(typeof data!=='object'){return false;}
var type_id=comment_feed.type_id[data.type]||0;api.call({method:'comment.flag',data:{comment_id:data.id,type:type_id},success:callback});},post:function(data,callback){if(typeof data!=='object'){return false;}
var type_id=comment_feed.type_id[data.type]||0;api.call({method:'comment.add',data:{comment:data.comment_txt,element_id:data.element_id,type:type_id,lang:SETTING_LANG},success:callback});},display:function(data,callback){if(typeof data!=='object'){return false;}
var type_id=comment_feed.type_id[data.type]||0;api.call({method:'comment.getList',data:{element_id:data.element_id,type:type_id,start:data.start,nb:data.nb},success:callback});},getData:function(data,callback){if(typeof data!=='object'){return false;}
api.call({method:'comment.getData',data:{comment_id:data.comment_id},success:callback});}};window.comment_feed=comment_feed;})();;
(function(){'use strict';var replace={sng_id:0,div:'',playlist_id:0,songs_list:[],current_selected_id:0,init:function(sng_id,playlist_id,songs,div){try{replace.sng_id=sng_id;replace.playlist_id=playlist_id;replace.songs_list=songs;replace.div=div;window.setTimeout(function(){$('#hovercard_content_tracks').tinyscrollbar();},100);return true;}catch(e){error.log(e);}},replaceTrack:function(){try{if(replace.current_selected_id===0||typeof replace.sng_id==='undefined'||typeof replace.playlist_id==='undefined'){return false;}
var params={new_sng_id:replace.current_selected_id,old_sng_id:replace.sng_id,playlist_id:replace.playlist_id};api.call('playlist.recoverSong',params,replace.replaceTrackCallback);return true;}catch(e){error.log(e);}},replaceTrackCallback:function(result){try{if(result===true){window.track_list.component.replaceItem(replace.sng_id,replace.getNewSongInfo(Number(replace.current_selected_id)));hovercard.remove();}
return true;}catch(e){error.log(e);}},deleteTrack:function(){try{if(confirm(gettext('Voulez-vous vraiment effacer ce morceau ?'))){if(typeof replace.sng_id==='undefined'){return false;}
if(typeof replace.playlist_id==='undefined'){return false;}
api.call('playlist.deleteSongs',{playlist_id:replace.playlist_id,songs:[[replace.sng_id,0]]},replace.deleteTrackCallback);}
return true;}catch(e){error.log(e);}},deleteTrackCallback:function(result){try{if(result===true){window.track_list.component.removeItems([replace.sng_id]);hovercard.remove();userData.removePlaylistSong(replace.playlist_id,[{SNG_ID:replace.sng_id}]);}
return true;}catch(e){error.log(e);}},getNewSongInfo:function(sngId){try{if(replace.songs_list===0){return false;}
for(var t=0;t<replace.songs_list.length;t++){if(Number(replace.songs_list[t].SNG_ID)===Number(sngId)){return replace.songs_list[t];}}
return true;}catch(e){error.log(e);}},play:function(sngId){try{dzPlayer.play({data:[replace.getNewSongInfo(sngId)]});return true;}catch(e){error.log(e);}},selectTrack:function($line){try{replace.current_selected_id=$line.attr('data-id');$line.parents('dl').parent().children('dl').removeClass('selected');$line.parents('dl').addClass('selected');$('#hovercard_replace_button').show();return true;}catch(e){error.log(e);}}};window.replace=replace;})();;
var advertising={call:function(element_type,args){try{if(typeof USER!=='undefined'&&USER.OPTIONS.ads_display===false){return false;}
if(!dzPlayer.isAdvertisingAllowed()){return false;}
var element_id=args.element_id||0;var element_data=args.element_data||'';var ord=parseInt(Math.random()*10000000000000000,10);switch(element_type){case'home':ads.callAds('15829/114873/6955/S/'+ord+'/');ads.callAds('15829/114873/19632/S/'+ord+'/');ads.callAds('15829/114873/27374/S/'+ord+'/');break;case'feed':ads.callAds('15829/605946/6955/S/'+ord+'/');ads.callAds('15829/605946/19632/S/'+ord+'/');ads.callAds('15829/605946/27374/S/'+ord+'/');break;case'multiple_feed':ads.callAds('15829/114873/22283/M/'+ord+'/element_type=;element_id='+element_id);break;case'explore':ads.callAds('15829/274132/6955/M/'+ord+'/element_type=;element_id='+element_id);ads.callAds('15829/274132/27374/S/'+ord+'/element_type=;element_id='+element_id);break;case'tops':ads.callAds('15829/274126/6955/M/'+ord+'/element_type=tops;element_id='+element_id);ads.callAds('15829/274126/27374/S/'+ord+'/element_type=tops;element_id='+element_id);break;case'radio':ads.callAds('15829/115070/6955/M/'+ord+'/element_type=;element_id='+element_id);ads.callAds('15829/115070/27374/S/'+ord+'/element_type=;element_id='+element_id);break;case'talk':ads.callAds('15829/555138/6955/M/'+ord+'/element_type=;element_id='+element_id);ads.callAds('15829/555138/27374/S/'+ord+'/element_type=;element_id='+element_id);break;case'talkshow':ads.callAds('15829/555137/6955/M/'+ord+'/element_type=;element_id='+element_id);ads.callAds('15829/555137/27374/S/'+ord+'/element_type=;element_id='+element_id);break;case'moods':ads.callAds('15829/614467/6955/M/'+ord+'/element_type=;element_id='+element_id);ads.callAds('15829/614467/27374/S/'+ord+'/element_type=;element_id='+element_id);break;case'profile':ads.callAds('15829/115081/6955/M/'+ord+'/element_type=profile;element_id='+element_id+';element_style='+element_data);ads.callAds('15829/115081/27374/S/'+ord+'/element_type=profile;element_id='+element_id+';element_style='+element_data);break;case'loved':ads.callAds('15829/274137/6955/M/'+ord+'/element_type=loved;element_id='+element_id);ads.callAds('15829/274137/27374/S/'+ord+'/element_type=loved;element_id='+element_id);break;case'artist':ads.callAds('15829/115069/6955/M/'+ord+'/element_type=artist;element_id='+element_id);ads.callAds('15829/115069/27374/S/'+ord+'/element_type=artist;element_id='+element_id);break;case'album':ads.callAds('15829/115066/6955/M/'+ord+'/element_type=album;element_id='+element_id);ads.callAds('15829/115066/27374/S/'+ord+'/element_type=album;element_id='+element_id);break;case'playlist':ads.callAds('15829/115067/6955/M/'+ord+'/element_type=playlist;element_id='+element_id);ads.callAds('15829/115067/27374/S/'+ord+'/element_type=playlist;element_id='+element_id);break;case'search':ads.callAds('15829/115072/6955/M/'+ord+'/element_type=result;element_id='+element_id+';element_style='+element_data);ads.callAds('15829/115072/27374/S/'+ord+'/element_type=result;element_id='+element_id+';element_style='+element_data);break;case'track':ads.callAds('15829/487686/6955/M/'+ord+'/element_type=;element_id='+element_id);ads.callAds('15829/487686/27374/S/'+ord+'/element_type=;element_id='+element_id);break;case'lyrics':$('body').removeClass('has-lyrics-ads-bottom');ads.callAds('15829/548730/27374/S/'+ord+'/element_type=;element_id='+element_id);break;}
return true;}catch(e){error.log(e);}}};;
if(typeof app=='undefined'){var app={id:0,template:'naboo/app',actual_page:null,last_page:null,base_page:null,loaded:false,iframe:null,url_id:null,alias:null,display:function(args){if(args.action=='login'){return app.displayLogin(args);}
if(typeof args.app_id!=='string'){return false;}
app.id=app.app_id=args.app_id;var deep_link='';if(typeof args.deep_link==='string'){deep_link=args.deep_link;}
if(typeof args.dzq=='string'){deep_link+='?dzq='+args.dzq;}
var page_splitted=deep_link.split('?');deep_link=page_splitted[0];if(page_splitted.length>1){var search=page_splitted[1];search=search.split('&');for(var i=0;i<search.length;i++){var param=search[i].split('=');if(param.length==2&&param[0]=='dzq'){deep_link+='?'+hex2bin(param[1]);break;}}}
if(typeof args.data==='object'){return app.launch({app_data:args.data,deep_link:deep_link});}
api.call('application.getPublicData',{app_id:app.id},function(result){app.launch({app_data:result,deep_link:deep_link});});},onPageChanged:function(args){app.loadPage(args.deep_link);naboo.afterLoad();},sendRequest:function(user_id_to,app_id,message){api.call('application.sendRequest',{user_ids_to:[user_id_to],app_id:app_id,message:message},function(result){$.facebox.close(false);});},displayLogin:function(args){try{if(typeof args.redirect_app_id==='undefined'){naboo.afterLoad(true);app.redirect_appstudio();return true;}
if(typeof args.data==='object'){app.displayLoginCallback(args.data,args);return true;}
api.call('application.getPublicData',{app_id:args.redirect_app_id},function(response){app.displayLoginCallback(response,args);});return true;}catch(e){error.log(e);}},displayLoginCallback:function(result,args){var redirect_app_id=args.redirect_app_id||'';var redirect_link=typeof args.redirect_link!=='undefined'?decodeURIComponent('/'+args.redirect_link):('/app/'+request.APP_ID);templating.load('naboo/app_login');$('#app_picture').attr('src',SETTING_DOMAIN_IMG+'/misc/'+result.APP_PICTURE+'/120x120-000000-80-0-0.jpg');$('#app_name').text(result.NAME);$('#h2_app_name').text(result.NAME);$('#app_description').text(result.DESCRIPTION);$('#btn_login').click(function(){modal.open('/lightbox/login.php?redirect_type=refresh&redirect_link='+encodeURIComponent(redirect_link)+'&app_id='+redirect_app_id);}).attr('onclick','');$('#btn_register').click(function(){modal.open('/lightbox/register.php?redirect_type=refresh&redirect_link='+encodeURIComponent(redirect_link)+'&app_id='+redirect_app_id);}).attr('onclick','');naboo.afterLoad(true);Events.ready(Events.user.loaded,function(){loadBox(redirect_link);});},redirect_appstudio:function(){window.setTimeout(function(){loadBox('/appstudio');},300);},filterDzParams:function(query_string){var filter=['dzpage','dzlang','dzcountry','dzhash'];var qs=query_string.split('&');query_string=[];for(var i=0;i<qs.length;i++){var filter_this=false;for(var j=0;j<filter.length;j++){if(qs[i].substr(0,filter[j].length+1)==filter[j]+'='){filter_this=true;break;}}
if(filter_this){continue;}
query_string.push(qs[i]);}
return query_string.join('&');},setPage:function(page){if(typeof page!=='object'||typeof page.href==='undefined'){return;}
if(typeof page.pathname==='undefined'){return;}
var dzq='';if(typeof page.search==='string'&&page.search!==''){dzq=page.search.substr(1);dzq=app.filterDzParams(dzq);if(dzq!==''){dzq='?dzq='+bin2hex(dzq);}}
var a=document.createElement('a');a.href=app.app_data.INAPP_URL_WEB;page.pathname=ltrim(page.pathname,'/');var new_page_link;if(app.loadPageMode=='ajax'){new_page_link='/'+page.pathname;}else{var origin=app.app_data.INAPP_URL_WEB.split(a.host)[0]+a.host+'/'+page.pathname;new_page_link='/'+origin.substr(app.app_data.INAPP_URL_WEB.length);}
new_page_link+=dzq;app.actual_page=new_page_link;var actual_page=trim(www.getCurrentPath(),'/ ');new_page_link=trim(new_page_link,'/');var address='app/'+app.url_id+'/'+new_page_link;if(actual_page!=address){www.setCurrentPath(address,true);}
Events.trigger(Events.navigation.page_displayed,{path:naboo.getCurrentPath()});return;},loadPageMode:'basic',loadPage:function(page){if(!app.loaded){return false;}
if(app.actual_page!=page){app.actual_page=page;var loadPage=app.actual_page;if(app.actual_page.indexOf('?')!=-1){var url=app.actual_page.split('?');var qs=url[1].split('&');var dzq=null;for(var i=0;i<qs.length;i++){if(qs[i].substr(0,4)=='dzq='){dzq=qs[i].substr(4);break;}}
if(dzq!==null){loadPage=url[0]+'?'+hex2bin(dzq);}}
if(app.loadPageMode=='ajax'){DZ.communication.callAppMethod('DZ.navigation.pageChanged',{evt:'PAGE_CHANGED',val:loadPage});}else{app.loadIframe(loadPage);}}},clear:function(){if(app.loaded){DZ.clearDeezer();}
if(app.iframe!==null){app.iframe.attr('id','dzapp_old').attr('name','dzapp_old').remove();}
dzPlayer.setApp({id:0,type:''});playercontrol.setBlindTestMode(false);app.current_height=0;app.app_id=0;app.alias=null;app.name='';app.channel_url='';app.url_id=null;app.launch_options={};app.actual_page=null;app.loadPageMode='basic';app.last_page=null;app.base_page=null;app.loaded=false;},app_id:0,userDataLoaded:function(){if(!userData.isFavorite('application',app.app_id)){if(typeof USER!='undefined'&&typeof USER.SETTING!='undefined'){app.addToFav.show();app.iframeContainer.addClass('has-favorite');}}},launch_options:{},launch:function(options){var app_data=options.app_data;app.url_id=app.id;if(app.id==app_data.INAPP_ALIAS){app.url_id=app_data.INAPP_ALIAS;}
var the_app_id=app_data.APP_ID;var newNotifs=notifications.list_unread;var to_remove=[];for(var key in newNotifs){if(!newNotifs.hasOwnProperty(key)){continue;}
var notif=newNotifs[key];if(typeof notif.ACTION!='undefined'&&notif.ACTION=='APPLICATION_NOTIFICATION'&&typeof notif.APP_ID!='undefined'){if(notif.APP_ID==the_app_id){to_remove.push(key);}}}
notifications.read(to_remove);if(USER.USER_ID===0&&app_data.NEED_LOGIN){naboo.afterLoad(true);var base_href=(app_data.INAPP_ALIAS===''?app_data.APP_ID:app_data.INAPP_ALIAS);var link=document.createElement('a');link.href='/app/'+base_href+decodeURIComponent(options.deep_link);var dzq=link.search.substr(1);dzq=app.filterDzParams(dzq);if(dzq!==''){dzq='?dzq='+bin2hex(dzq);}
link=encodeURIComponent(link.pathname.substr(1)+dzq);window.setTimeout(function(){loadBox('/app/login?app_id='+app_data.APP_ID+'&redirect_app_id='+app_data.APP_ID+'&redirect_link='+link);},300);return false;}
app.app_data=app_data;options={app_id:app_data.APP_ID,alias:app_data.INAPP_ALIAS,channel_url:app_data.INAPP_CHANNEL_URL,name:app_data.NAME,deep_link:typeof options.deep_link=='undefined'?null:options.deep_link};if(options.deep_link===null){delete options.deep_link;}
if(typeof DZ!='undefined'){DZ.inapploadedCount=0;}
if(typeof options.deep_link!='undefined'){options.deep_link=decodeURIComponent(options.deep_link);}
if(typeof options.deep_link=='undefined'||options.deep_link=='/'){options.deep_link='';}
if(options.deep_link!==''){var deep_link=options.deep_link.split('?');if(deep_link.length>1){deep_link[1]=app.filterDzParams(deep_link[1]);options.deep_link=deep_link.join('?');}}
app.launch_options=options;app.app_id=options.app_id;app.alias=options.alias;app.channel_url=options.channel_url;app.name=options.name;app.base_page='app/'+options.app_id+options.deep_link;app.actual_page=options.deep_link;getScripts(RESSOURCES.dz,function(){app.loadDom();app.loadDZ();app.loadIframe(options.deep_link);});naboo.afterLoad(true);app.loaded=true;return true;},leave:function(){app.clear();},loadDZ:function(){if(ENV=='DEV'){DZ.SETTING_HOST_SITE=SETTING_HOST_SITE;DZ.SETTING_HOST_CONNECT=SETTING_HOST_CONNECT;DZ.SETTING_HOST_API=SETTING_HOST_API;DZ.DEBUG=true;}
if(ENV=='PREPROD'){DZ._override_pp();}
DZ.init({appId:app.app_id,channelUrl:app.channel_url,inapp:true});},loadDom:function(){var naboo=$('#naboo_content');var draggable=$('<div class="inapp-draggable-element" id="inapp_draggable_element"></div>');var appfavorite=$('<button class="btn btn-primary type="button"><span class="icon icon-add"></span><span class="label">'+gettext('Ajouter à mes applis')+'</span></button>');naboo.html('');naboo.append('<div id="dz-root"></div>');naboo.append(draggable);app.iframeContainer=$('<div id="inapp_iframe_container"></div>');app.addToFav=$('<div class="inapp-add-favorite"></div>').appendTo(naboo);$('#inapp_draggable_element').draggable({helper:function(){return'<div class="inapp-draggable-helper">music draggable !</div>';},appendTo:'body',refreshPositions:true,cursorAt:{top:0,left:0},start:function(event,ui){$('#inapp_draggable_element').attr({'data-value':JSON.stringify([[$('#inapp_draggable_element').attr('data-id'),'0']]),'element-type':'0'});}});app.addToFav.hide();appfavorite.click(function(){favorite.add({type:'application',id:app.app_id});}).appendTo(app.addToFav);Events.ready(Events.user.userReady,app.userDataLoaded);Events.addEvent('DZ',Events.user.addFavorite,function(evt,params){if(params.id==app.app_id){app.addToFav.hide();app.iframeContainer.removeClass('has-favorite');}});Events.addEvent('DZ',Events.user.deleteFavorite,function(evt,params){if(params.id==app.app_id){app.addToFav.show();app.iframeContainer.addClass('has-favorite');}});app.iframeContainer.append('<div id="inapp_iframe_overlay"></div>');naboo.append(app.iframeContainer);return true;},onResize:function(evt,args){app.setSize(0,true);},nbIframes:0,loadIframe:function(deep_link){app.nbIframes++;if(typeof deep_link=='undefined'||deep_link===null){deep_link='';}
deep_link=ltrim(deep_link,'/ ');if(deep_link===''&&typeof DZ!='undefined'){DZ.inapploadedCount=0;}
var container=$('#inapp_iframe_container');var iframe_url=PROTOCOL_HTTP+SETTING_HOST+'/app/launcher.php?app_id='+app.app_id+'&inapp_page='+encodeURIComponent(deep_link);var iframe=$('#dzapp'+(app.nbIframes-1));if(iframe.length>0){iframe.remove();}
app.iframe=$('<iframe id="dzapp'+app.nbIframes+'" name="dzapp'+app.nbIframes+'" frameBorder="0" allowTransparency="true" src="'+iframe_url+'" '+' style="width:100%;height:100%;border: 0;"'+'></iframe>');container.append(app.iframe);},current_height:0,setSize:function(height,fromResize){return true;},scrollTop:function(){$(document.body).scrollTop(0);},hideInappOverlay:function(){$('#inapp_iframe_overlay').hide();window.setTimeout(function(){$(document).unbind('mouseup',app.hideInappOverlay);},0);},showInappOverlay:function(){$('#inapp_iframe_overlay').show();$(document).bind('mouseup',app.hideInappOverlay);},startDragElement:function(type,id){$('#inapp_iframe_overlay').show();$(document).bind('mouseup',app.hideInappOverlay);var evt=document.createEvent('MouseEvents');evt.initMouseEvent('mousedown',true,true,window,0,0,0,0,0,false,false,false,false,0,null);var element=document.getElementById('inapp_draggable_element');var data_type=0;switch(type){case'track':data_type=0;break;default:break;}
$(element).attr('data-type',data_type).attr('data-id',id);element.dispatchEvent(evt);}};};
var tabs={loaded:false,$container_naboo:null,$container_active:null,$container:null,$links:null,$panels:null,selected:null,list_tabs:{},destroy:function(){for(var key in tabs.list_tabs){if(!tabs.list_tabs.hasOwnProperty(key)){continue;}
if(typeof window[key]==='undefined'){delete tabs.list_tabs[key];continue;}
var component=window[key];if(typeof component.destroy=='function'){component.destroy();}
delete tabs.list_tabs[key];}
if(tabs.selected!=null){Events.unsubscribeAll(tabs.selected);}
Events.unsubscribeAll('tabs');tabs.loaded=false;tabs.selected=null;tabs.list_tabs={};tabs.$container=null;tabs.$nav_bar=null;tabs.$links=null;tabs.$panels=null;tabs.$more=null;},init:function($container,list_tabs){tabs.$container_naboo=$('#naboo_content');tabs.$container=$container;tabs.$nav_bar=$('.navbar',tabs.$container);tabs.$links=$('.navbar > ul',tabs.$container);tabs.$panels=$('.nav-tabs-panel',tabs.$container);tabs.$more=$('[data-target="more"]',tabs.$links);tabs.list_tabs={};for(var type in list_tabs){if(!list_tabs.hasOwnProperty(type)){continue;}
if(typeof window[type]!=='object'){throw new Error(type+' is not a valid component for tabs !');}
var component=list_tabs[type];component.cached=false;if(typeof component.disabled==='boolean'&&component.disabled){$('#tab_'+type+'_link',tabs.$container).remove();continue;}
$('#tab_'+type+'_link',tabs.$container).data('width',$('#tab_'+type+'_link',tabs.$container).outerWidth(true));if(typeof component.selected=='boolean'&&component.selected){tabs.selected=type;}
tabs.list_tabs[type]=component;}
Events.subscribe(Events.layout.resize,function(){clearTimeout(tabs.resize_delay);tabs.resize_delay=setTimeout(tabs.resizeMenu,500);},naboo.getCurrentClass());Events.subscribe(Events.layout.adsBackground,function(){tabs.resizeMenu();},naboo.getCurrentClass());tabs.resizeMenu();$('.dropdown',tabs.$links).on('click',tabs.toggleMoreMenu).on('mouseup',function(){return false;}).on('mousedown',function(){$('body').unbind('mouseup',tabs.toggleMoreMenu);return false;});tabs.loaded=true;if(tabs.selected!==null){tabs.display(tabs.selected);}},navClick:function($tab){if(!tabs.loaded){return false;}
var type=$tab.attr('data-tabs');if(typeof tabs.list_tabs[type]!=='undefined'&&typeof tabs.list_tabs[type].url!=='undefined'){loadBox(tabs.list_tabs[type].url);}
tabs.display(type);return true;},display:function(type,auto_scroll){if(!tabs.loaded){return false;}
if(typeof auto_scroll==='undefined'){auto_scroll=false;}
if(typeof tabs.list_tabs[type]==='undefined'){return false;}
if(tabs.selected!=null){Events.unsubscribeAll(tabs.selected);}
Events.subscribeOnce(Events.navigation.tab_displayed,function(){tabs.$container_active.height('auto');});tabs.selected_previous=tabs.selected;tabs.selected=type;var args=tabs.list_tabs[type].args||{type:type,id:naboo.id};var tab=type;$tab=$('#tab_'+tab+'_link > a');tabs.$container_active=$('#tab_'+tab+'_content',tabs.$container);tabs.$container_active.addClass('active');if(!tabs.list_tabs[tab].cached){tabs.$container_active.height(tabs.$container_naboo.height());}
var $tab_link_active=$('#tab_'+tab+'_link',tabs.$container);$tab_link_active.addClass('active');if(tabs.selected_previous!==tabs.selected){$('#tab_'+tabs.selected_previous+'_link',tabs.$container).removeClass('active');$('#tab_'+tabs.selected_previous+'_content',tabs.$container).removeClass('active');}
$('.badge',$tab_link_active).text(0).hide();infinite_scroll.disable();if(auto_scroll){var div_position=tabs.$container.position();if(div_position.top!=null){$('#page_content').scrollTop(yscroll+div_position.top);}}
if(tabs.list_tabs[tab].cached){if(typeof window[tab].onDisplay=='function'){window[tab].onDisplay();}
Events.trigger(Events.navigation.tab_displayed,args);return true;}
window[tab].display(args);tabs.list_tabs[tab].cached=true;return;},resizeMenu:function(evt){try{if(typeof tabs.$links!=='undefined'){tabs.$links.children('li').last().show();}
if(tabs.$more.hasClass('opened')){tabs.toggleMoreMenu();}
var usedItemsSize=tabs.getTabsMenuWidth();if(tabs.$nav_bar.width()<usedItemsSize){var elt=tabs.$links.children('li[data-tab]').last().clone(true);tabs.$links.children('li[data-tab]').last().remove();tabs.$more.prepend(elt);tabs.resizeMenu();return true;}
var nbMoreItems=tabs.$more.children().children().length;var addItemSize=tabs.$more.children().first().data('width');var addItemInMainBar=(nbMoreItems>1&&tabs.$nav_bar.width()>usedItemsSize+addItemSize);var addLastItemInMainBar=(nbMoreItems===1&&tabs.$nav_bar.width()>(addItemSize+usedItemsSize-tabs.$more.parent().outerWidth()));if(addItemInMainBar||addLastItemInMainBar){var elt=tabs.$more.children().first().clone(true);tabs.$more.children().first().remove();elt.insertBefore(tabs.$links.children('li').last());if(nbMoreItems>1){tabs.resizeMenu();}else{tabs.$links.children('li').last().hide();}
return true;}
if(nbMoreItems===0){tabs.$links.children('li').last().hide();}
return false;}catch(e){error.log(e);}},getTabsMenuWidth:function(){try{var totalWidth=0;tabs.$links.children('li:visible').each(function(){totalWidth+=$(this).outerWidth(true);});return totalWidth;}catch(e){error.log(e);}},toggleMoreMenu:function(e){try{if(typeof e==='object'){e.preventDefault();}
var dropdown=tabs.$more.closest('.dropdown');if(!dropdown.hasClass('opened')){dropdown.addClass('opened');$('body').trigger('mouseup');$('body').bind('mouseup',tabs.toggleMoreMenu);}else{dropdown.removeClass('opened');$('body').unbind('mouseup',tabs.toggleMoreMenu);}}catch(e){error.log(e);}}};;
if(typeof setting==='undefined'){var setting={removeApp:function(appId){var data='app_id='+encodeURIComponent(appId)+'&checkForm='+encodeURIComponent(checkForm);var request=sendRequest('/ajax/action.php','text','type=setting_removeApp&'+data);if(request==false){return;}
var result=JSON.parse(request);if(result.error.length>0){return;}
loadBox(www.getCurrentPath());return;},updateEmail:function(){try{var actionDone=false;var email=$('#info_new_mail').val()||'';if($('#info_new_mail').length===1){email=$('#info_new_mail').val();}
var password='';if($('#info_pwd').length===1){password=$('#info_pwd').val();}
var email2='';if($('#info_new_mail2').length===1){email2=$('#info_new_mail2').val();}
var old_email='';if($('#info_old_mail').length===1){old_email=$('#info_old_mail').val();}
var checkForm='';if($('#checkForm').length===1){checkForm=$('#checkForm').val();}
var error_message='';if(email==email2){var data='email='+encodeURIComponent(email);data+='&password='+encodeURIComponent(password);data+='&old_email='+encodeURIComponent(old_email);data+='&checkForm='+encodeURIComponent(checkForm);var request=sendRequest('/ajax/action.php','text','type=user_updateEmail&'+data);if(request==false){return;}
var result=JSON.parse(request);if(result.error.REQUEST_ERROR!==undefined){actionDone=false;if(result.error.REQUEST_ERROR==='Email already exists'){error_message=gettext('Cette adresse email est indisponible.');}else if(result.error.REQUEST_ERROR==='Invalid email domain'){error_message=gettext('Le nom de domaine \'%s\' n\'est pas autorisé.',{sprintf:[result.payload.domain]});}else{error_message=gettext('Votre adresse email n\'a pas été mise à jour.');}}else{actionDone=true;}}else{error_message=gettext('Vos adresses email ne correspondent pas. Veuillez réessayer.');}
if(actionDone==false){$('#update_email_result').html(error_message).show();}else{$('#info_save_form').hide();$('#info_save_email_confirm').show();loadBox(www.getCurrentPath());}}catch(e){error.log(e);}},updatePassword:function(){try{var actionDone=false;var password='';if($('#info_new_pwd').length===1){password=$('#info_new_pwd').val();}
var password2='';if($('#info_new_pwd2').length===1){password2=$('#info_new_pwd2').val();}
var old_password='';if($('#info_old_pwd').length===1){old_password=$('#info_old_pwd').val();}
var checkForm='';if($('#checkForm').length===1){checkForm=$('#checkForm').val();}
if(password==password2&&password!=''){var data='password='+encodeURIComponent(password);data+='&old_password='+encodeURIComponent(old_password);data+='&checkForm='+encodeURIComponent(checkForm);var request=sendRequest('/ajax/action.php','text','type=user_updatePassword&'+data);if(request==false){return;}
var result=JSON.parse(request);if(result.error.length>0){actionDone=false;}else{actionDone=true;}}
if(actionDone==false){$('#update_password_result').html(gettext('Votre mot de passe n\'a pas été mis à jour.')).show();}else{$('#info_save_form').hide();$('#info_save_password_confirm').show();loadBox(www.getCurrentPath());}}catch(e){error.log(e);}},saveData:function(){try{$('#check_nom').empty();$('#check_prenom').empty();$('#check_sexe').empty();$('#check_naissance').empty();$('#check_adresse').empty();$('#check_cp').empty();$('#check_ville').empty();$('#check_pays').empty();$('#check_mobile').empty();$('#blog_name').empty();$('#adresse').removeClass();$('#ville').removeClass();$('#pays').removeClass();$('#mobile').removeClass();var sexe='M';if($('#sexe_f').is(':checked')){sexe='F';}
var date_naissance_jour=0;if($('#date_naissance_jour').length===1){date_naissance_jour=$('#date_naissance_jour').val();}
var date_naissance_mois=0;if($('#date_naissance_mois').length===1){date_naissance_mois=$('#date_naissance_mois').val();}
var date_naissance_annee=0;if($('#date_naissance_annee').length===1){date_naissance_annee=$('#date_naissance_annee').val();}
var adresse='';if($('#adresse').length===1){adresse=$('#adresse').val();}
var nom='';if($('#nom').length===1){nom=trim($('#nom').val());}
var prenom='';if($('#prenom').length===1){prenom=trim($('#prenom').val());}
var cp='';if($('#cp').length===1){cp=$('#cp').val();}
var ville='';if($('#ville').length===1){ville=$('#ville').val();}
var pays='';if($('#pays').length===1){pays=$('#pays').val();}
var mobile='';if($('#mobile').length===1){mobile=$('#mobile').val();}
var blog_name='';if($('#blog_name').length===1){blog_name=trim($('#blog_name').val());}
var checkForm='';if($('#checkForm').length===1){checkForm=$('#checkForm').val();}
var data='sexe='+encodeURIComponent(sexe);data+='&date_naissance='+encodeURIComponent(date_naissance_annee)+'-'+encodeURIComponent(date_naissance_mois)+'-'+encodeURIComponent(date_naissance_jour);data+='&adresse='+encodeURIComponent(adresse);data+='&nom='+encodeURIComponent(nom);data+='&prenom='+encodeURIComponent(prenom);data+='&cp='+encodeURIComponent(cp);data+='&ville='+encodeURIComponent(ville);data+='&pays='+encodeURIComponent(pays);data+='&mobile='+encodeURIComponent(mobile);data+='&blog_name='+encodeURIComponent(blog_name);data+='&checkForm='+encodeURIComponent(checkForm);var request=sendRequest('/ajax/action.php','text','type=user_setData&'+data);if(request==false){return;}
var result=JSON.parse(request);if(result.error.length>0){if(result.error==='error'){www.drawFormResult('data_result','form_error','<div class="data_result_nok">'+gettext('Une erreur est survenue, merci de réessayer plus tard.')+'</div>');}else{for(var i=0;i<result.error.length;i++){if(result.error[i]==='sexe'){$('#check_sexe').html('<img src="'+SETTING_STATIC+'/img/common/form_nok.png" alt="" />');}else if(result.error[i]==='naissance'){$('#check_naissance').html('<img src="'+SETTING_STATIC+'/img/common/form_nok.png" alt="" />');}else if(result.error[i]==='blog_name'){$('#check_blog_name').html('<img src="'+SETTING_STATIC+'/img/common/form_nok.png" alt="" />');}}
www.drawFormResult('data_result','form_error','<div class="data_result_nok">'+gettext('Vos données n\'ont pas été mises à jour. Veuillez corriger les champs rouges.')+'</div>');}}else{www.drawFormResult('data_result','form_success','<div class="data_result_ok">'+gettext('Vos données ont été mises à jour.')+'</div>');USER.LASTNAME=nom;USER.FIRSTNAME=prenom;USER.USER_AGE=return_age(date_naissance_annee+'-'+date_naissance_mois+'-'+date_naissance_jour);Events.trigger(Events.user.updateName,{lastname:nom,firstname:prenom});}
$('#data_result').delay(3000).fadeOut();}catch(e){error.log(e);}},initShare:function(){$('#setting_settings .icon-24.icon-mail, #setting_settings .icon-24.icon-phone, #page_account_share .social').tipsy({gravity:'s'});Events.ready(Events.googleplus.ready,function(){googleplus.renderGGPlus('hp_create_account_gp');});setting.$userSetting=$('#share_notification, #share_newsletter');if(setting.$userSetting.length===0){return;}
setting.$userSetting.on('click','input[type=checkbox]',function(){var settings={};var namespace=this.getAttribute('data-namespace');settings[namespace]={};settings[namespace][this.id]=this.checked;userSetting.set(settings,true);});},deleteAccount:function(){try{var password='';if($('#delete_account').length===1){password=$('#delete_account').val();}
var checkForm='';if($('#checkForm').length===1){checkForm=$('#checkForm').val();}
var data='&password='+encodeURIComponent(password)+'&checkForm='+encodeURIComponent(checkForm);var request=sendRequest('/ajax/action.php','text','type=user_delete&'+data);if(request==false){return;}
var result=JSON.parse(request);if(result.error.length>0){www.drawFormResult('delete_result','msg_error',gettext('Veuillez vérifier votre mot de passe.'));}else{www.drawFormResult('delete_result','msg_succes',gettext('Un email vient de vous être envoyé.'));}
$('#delete_result').delay(3000).fadeOut();return true;}catch(e){error.log(e);}},confirmUnsubscribeStep1:function(){var form=$('#form_unsubscribe');var radio_btn=$(':radio:checked',form);var err_form=$('#msg_error',form);var err_input=$('#msg_error_input',form);var err_status=false;var message=[];$(err_form,err_input).hide();radio_btn.each(function(){var input=$(this).closest('li').find(':input').not(':radio');if(input.data('force')===true&&input.val().length===0){err_input.show();err_status=true;}
message.push({type:$(this).attr('id'),detail:input.val()});});if(err_status===true){return false;}
if(radio_btn.length===0){err_form.show();return false;}
api.call('feedback.save',{type:'premium',message:message});modal.open('/lightbox/unsubscribe.php?step=2',true);return true;},confirmUnsubscribeStep2:function(){var form=$('#form_unsubscribe');var pwd=$('#user_password',form).val();var err=$('#msg_error',form);if(pwd.length===0){err.show();return false;}
var data='password='+encodeURIComponent(pwd)+'&checkForm='+encodeURIComponent(checkForm);var request=sendRequest('/ajax/action.php','text','type=order_unsubscribe&'+data);if(request==false){return;}
var result=JSON.parse(request);var nb_error=0;if(typeof result.error==='object'){for(var i in result.error){if(!result.error.hasOwnProperty(i)){continue;}
nb_error=nb_error+1;}}
if(nb_error==0){modal.open('/lightbox/unsubscribe.php?step=3',true);return true;}
if(typeof result.error.ERROR==='string'){if(result.error.ERROR==='PASSWORD'){err.show();}
if(result.error.ERROR==='PAYPAL_OLD_SUBSCRIBE_CANCEL'){loadBox('/payment/paypal_unsubscribe.php');}
if(result.error.ERROR==='PAYPAL_SUBSCRIBE_CANCEL'){www.drawFormResult('delete_premium_result','form_error',gettext('Veuillez vous rendre sur Paypal afin de couper votre paiement récurrent'));$('#delete_premium_result').delay(3000).fadeOut();}}},confirmUnsubscribeStep3:function(){user.refreshPageAfterLogin({type:'page',link:'account/subscription'});return true;},resetDeviceSerial:function(user_device_serial_id,device_serial){try{if(typeof user_device_serial_id!='undefined'&&user_device_serial_id>0){var checkForm='';if($('#checkForm').length===1){checkForm=$('#checkForm').val();}
var request=sendRequest('/ajax/action.php','text','type=user_resetDeviceSerial&device_serial_id='+encodeURIComponent(user_device_serial_id)+'&checkForm='+encodeURIComponent(checkForm));if(request==false){return;}
var result=JSON.parse(request);if(result.error.length===0){if($('#device_serial_'+user_device_serial_id).length>0){$('#device_serial_'+user_device_serial_id).hide();}
www.drawFormResult('reset_device_serial','form_success','<div style="background:#F1F1F1;width:391px;padding:10px;margin-top:5px">'+gettext('Votre ancien mobile a été désactivé.')+'</div>');$('#reset_device_serial').delay(3000).fadeOut();}}}catch(e){error.log(e);}},reactivatear:function(){var request=sendRequest('/ajax/action.php','text','type=renewal_reactivate');if(request==false){return;}
var result=JSON.parse(request);var nb_error=0;if(typeof result.error==='object'){for(var i in result.error){if(!result.error.hasOwnProperty(i)){continue;}
nb_error=nb_error+1;}}
if(nb_error==0){document.location.href='/account/subscription?lb=reactive_ar';return true;}
www.drawFormResult('delete_premium_result','form_error',gettext('Impossible de réactiver votre abonnement.'));}};};
var loading_bar={init:function(){loading_bar.content=$('#loading_bar');loading_bar.content_bar=loading_bar.content.children('div');var interval=null;var timeout_interval=null;var is_loading=false;loading_bar.content_bar.css('width','0%');Events.subscribe(Events.navigation.page_changed,function(){if(is_loading){return;}
is_loading=true;var width=20+(Math.random()*55);loading_bar.content.addClass('opened');loading_bar.content_bar.addClass('has-transition').css('width',width+'%');timeout_interval=window.setTimeout(function(){var interval_fct=function(){width+=5;loading_bar.content_bar.css('width',width+'%');if(width>=95){window.clearInterval(interval);}};interval_fct();interval=window.setInterval(interval_fct,1000);},1000);});Events.subscribe(Events.navigation.page_displayed,function(){if(!is_loading){return;}
if(timeout_interval!=null){window.clearTimeout(timeout_interval);timeout_interval=null;}
if(interval!=null){window.clearInterval(interval);interval=null;}
loading_bar.content_bar.removeClass('has-transition');loading_bar.content_bar.css('width','100%');window.setTimeout(function(){loading_bar.content.on('transitionend',function(e){loading_bar.content_bar.css('width','0%');$(this).off('transitionend');}).removeClass('opened');is_loading=false;},500);});}};;