function bindMsFuncyMod(e){function t(e,t){return function(){var r=d(arguments);return function(){return w(r,g(e,d(arguments)),t)}}}{var r=e.isArray=Array.isArray||function(e){return e instanceof Array},n=function(e){return function(t){return typeof t===e}},i=(e.isBool=n("boolean"),e.isFunc=n("function")),o=(e.isNumber=n("number"),e.isString=n("string")),s=e.isUndef=n("undefined"),u=e.isNull=function(e){return null===e},a=n("object"),c=(e.isObject=function(e){return!u(e)&&a(e)},e.isUndefOr=function(e){return function(t){return s(t)||e(t)}},e.isNullOrWhitespace=function(e){return s(e)||u(e)||o(e)&&!c(e)},e.trim=function(e){return i(e.trim)?e.trim():e.replace(/^\s+|\s+$/g,"")}),l=e.apply=function(e,t,r){return e.apply(t,r||[])},f=e.argn=function(e){return function(){return arguments[e]}},p=e.arg=f(0),h=e.skip=function(e,t){for(var r=[],n=e.length,i=t;n>i;i++)r.push(e[i]);return r},d=e.toArray=function(e){return r(e)?e:h(e,0)},m=e.splat=function(e){return function(t){return l(e,this,t)}},g=(e.unsplat=function(e){return function(){return e.call(this,d(arguments))}},e.bind=function(e){var t=h(arguments,1);return function(){var r=arguments.length,n=r>0?b(t,d(arguments)):t;return l(e,this,n)}}),v=e.wrap=function(e){return r(e)?e:[e]},b=e.cat=function(e,t){return v(e).concat(v(t))},y=(e.cbind=function(e,t){var r=h(arguments,2);return function(){return l(e,t,b(r,d(arguments)))}},e.lateBind=function(){var e=d(arguments);return function(t){return l(t,this,e.concat(h(arguments,1)))}},e.k=function(e){return function(){return e}}),w=(e.falser=g(y,!1),e.aggregate=function(e,t,r){for(var n=r,i=e.length,o=0;i>o;o++)n=t(e[o],n);return n}),x=e.pipe=function(){var e=d(arguments),t=e.length;return function(r){for(var n=0;t>n;n++)r=e[n].call(this,r);return r}},S=e.falsy=function(e){return!e},_=(e.falsyer=function(e){return function(){return S(l(e,this,d(arguments)))}},e.has=function(e,t){return e in t}),E=(e.haser=g(g,_),e.get=function(e,t){return t[e]}),R=e.cget=function(e){return E(e,this)},T=e.getter=function(e){return function(t){return t[e]}},D=(e.cgetter=g(g,R),e.getLength=T("length")),C=e.collect=t(function(e,t,r){return r.concat([l(t,this,e)])},[]),P=(e.select=t(function(e,t,r){return r[t]=e[0][t],r},{}),e.alias=function(e,t,r){return r[t]=r[e],r},e.first=function(e,t){if(!i(e))return E(0,e);if(1===D(arguments))return g(P,e);for(var r,n=0,o=D(t);o>n;n++)if(r=t[n],e(r))return r}),O=(e.last=function(e){return E(D(e)-1,e)},e.tamper=function(){return x(l(g(C,p),this,d(arguments)),P)},e.when=function(){var e=arguments,t=D(e);return function(){for(var r=0,n=d(arguments);t>r&&e[r].apply(this,n);r++);}},e.traverse=function(e,t,r){return w(t,e,r)}),I=e.map=function(e,t){for(var r=t.length,n=[],i=0;r>i;i++)n.push(e.call(this,t[i]));return n},N=e.max=m(Math.max),M=e.maxProp=function(e,t){return N(I(e,t))},A=e.maxLength=g(M,D),k=(e.maxArg=function(){var t=e.map(D,arguments);return Math.max.apply(Math,t)},e.min=m(Math.min)),q=e.minProp=function(e,t){return k(I(e,t))},L=(e.minLength=g(q,D),e.minArg=function(){var t=e.map(D,arguments);return Math.min.apply(Math,t)},e.zip=function(){for(var e=A(arguments),t=[],r=0;e>r;r++)t[r]=I(T(r),arguments);return t}),F=(e.interleave=function(){return l(Array.prototype.concat,[],m(L)(arguments))},e.indexOf=function(e,t,r){return e.indexOf?e.indexOf(t,r):function(){r=Math.abs(+r||0);for(var n=r;n<e.length;n++)if(e[n]===t)return n;return-1}()}),U=(e.lastIndexOf=function(e,t){return e.lastIndexOf?e.lastIndexOf(t):function(){for(var r=e.length;r>=0&&e[r]!==t;r--);return r}()},e.contains=function(e,t){return-1!==F(e,t)}),W=function(e,t){return t?I(o(t)?T(t):t,e):e},j=(e.distinct=function(e,t){for(var r=W(e,t),n=[],i=[],o=0;o<e.length;o++)U(i,r[o])||(i.push(r[o]),n.push(e[o]));return n},e.difference=function(e,t,r){for(var n=W(e,r),i=W(t,r),o=[],s=0;s<e.length;s++)U(i,n[s])||o.push(e[s]);return o},e.filter=function(e,t){if(Array.prototype.filter&&t.filter===Array.prototype.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n])&&r.push(t[n]);return r},e.compact=function(){return r(arguments[0])?arguments[0].filter(function(e){return!s(e)&&!u(e)}):arguments[0]},e.ns=function(e){var t={};return w(e.split("."),function(e,t){return t[e]={}},t),t},e.extract=function(e,t,n){var i=r(t)?t:[t],o=w(i,function(e,t){return t.push(E(e,n)),t},[]);return e.apply(this,o)}),z=(e.extractor=g(g,j),e.set=function(e,t,r){return(r||this)[e]=t,r||this}),H=(e.setter=g(g,z),e.refine=function(e,t){var r={};for(var n in e)z(n,E(n,e).call(this,t),r);return r},e.thr=function(e){throw o(e)?B(e):e}),B=(e.createError=function(e,t){var r=new Error(t);return r.number=e,r},e.throwError=function(t,r){throw e.createError(t,r)},e.handleOrRethrow=function(e,t){return function(r){return e(r)&&!void t(r)||H(r)}},e.thrower=g(g,H),e.err=function(e){return new Error(e)}),Q=(e.explain=function(e,t){return function(){try{return l(t,this,d(arguments))}catch(r){H(z("inner",r,B(e+": "+r.message)))}}},e.always=function(e,t){return function(){return l(t,this,d(arguments)),e}}),V=(e.fact=g(Q,!0),e.lose=g(Q,void 0),e.fork=function(){var e=d(arguments),t=e.length;return function(){for(var r=[],n=0;t>n;n++)r.push(e[n].call(this,arguments[n]));return r}}),J=(e.pre=function(){var e=d(arguments),t=e.length-1,r=l(V,this,e.slice(0,t)),n=e[t];return function(){return l(n,this,l(r,this,d(arguments)))}},e.asrt=function(e,t,r){return!e.call(this,r)&&H(B(t))||r}),G=(e.asrtion=g(g,J),e.dflt=function(e,t){return function(){var r=l(t,this,d(arguments));return"undefined"==typeof r?e:r}},e._qp=[{p:/^\[\s*(\w+)\s*=\s*(\d+)\s*]$/,f:function(e,t){return P(x(T(e[1]),K(parseInt(e[2],10))),t)}},{p:/^\[\s*(\w+)\s*=\s*'([^']*)'\s*]$/,f:function(e,t){return P(x(T(e[1]),K(e[2])),t)}}]),$=G.length,X=e.qget=function(e,t){if("["!==e[0])return E(e,t);for(var r,n,i=0;$>i;i++)if(n=G[i],r=n.p.exec(e))return n.f(r,t)},K=(e.oquery=function(e,t){return O(X,e,t)},e.eq=function(e,t){return 1===arguments.length?function(t){return K(e,t)}:e===t}),Z=e.keys=function(e){var t,r=[];for(t in e)r.push(t);return r};e.values=function(e,t){t=t||Z(e);for(var r=t.length,n=[],i=0;r>i;i++)n.push(e[t[i]]);return n},e.extend=function(){for(var e=arguments[0],t=1;t<arguments.length;t++){var r=arguments[t]||{};for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e},e.concatUnique=function(e,t){for(var r=e.concat(t),n=0;n<r.length;++n)for(var i=n+1;i<r.length;++i)r[n].docid&&r[i].docid&&r[n].docid===r[i].docid&&r.splice(i--,1);return r},e.indexBy=function(e,t){return w(e,function(e,r){return z(t(e),e,r)},{})},e.sort=function(){var e=1,t=function(e){return e},n=arguments[arguments.length-1];if(!r(n))throw"Must have an array to sort.";switch(arguments.length){case 2:i(arguments[0])?t=arguments[0]:e=arguments[0]?-1:1;break;case 3:e=arguments[0]?-1:1,t=arguments[1]}return n.sort(function(r,n){return t(r)>t(n)?e:-e})},e.each=function(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e)}}return e}define=function(e){function t(){define=e,e("rx",[],arguments[arguments.length-1])}return t.amd={},t}(define);var Rx;!function(e,t){function r(){}function n(e){return e}function i(){return(new Date).getTime()}function o(e,t){return e===t}function s(e,t){return e-t}function u(e){return e.toString()}function a(e){throw e}function c(){if(this.isDisposed)throw new Error(w)}function l(e,t){return 1===e.length&&Array.isArray(e[t])?e[t]:x.call(e)}function f(e,t){this.scheduler=e,this.disposable=t,this.isDisposed=!1}function p(e,t,r,n,i){this.scheduler=e,this.state=t,this.action=r,this.dueTime=n,this.comparer=i||s,this.disposable=new A}function h(e,t){return new wt(function(r){var n=new A,i=new k;return i.setDisposable(n),n.setDisposable(e.subscribe(r.onNext.bind(r),function(e){var n,o;try{o=t(e)}catch(s){return void r.onError(s)}n=new A,i.setDisposable(n),n.setDisposable(o.subscribe(r))},r.onCompleted.bind(r))),i})}function d(e,t){var r=this;return new wt(function(n){var i=0,o=e.length;return r.subscribe(function(r){if(o>i){var s,u=e[i++];try{s=t(r,u)}catch(a){return void n.onError(a)}n.onNext(s)}else n.onCompleted()},n.onError.bind(n),n.onCompleted.bind(n))})}function m(e){return this.select(e).mergeObservable()}var g="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(e=global),exports),v={Internals:{}},b="Sequence contains no elements.",y="Argument out of range",w="Object has been disposed";Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,r=x.call(arguments,1),n=function(){function i(){}if(this instanceof n){i.prototype=t.prototype;var o=new i,s=t.apply(o,r.concat(x.call(arguments)));return Object(s)===s?s:o}return t.apply(e,r.concat(x.call(arguments)))};return n});var x=Array.prototype.slice,S={}.hasOwnProperty,_=v.Internals.inherits=function(e,t){function r(){this.constructor=e}for(var n in t)"prototype"!==n&&S.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.super_=t.prototype,e},E=v.Internals.addProperties=function(e){for(var t=x.call(arguments,1),r=0,n=t.length;n>r;r++){var i=t[r];for(var o in i)e[o]=i[o]}},R=v.Internals.addRef=function(e,t){return new wt(function(r){return new O(t.getDisposable(),e.subscribe(r))})},T=v.Internals.arrayInitialize=function(e,t){for(var r=new Array(e),n=0;e>n;n++)r[n]=t();return r};Array.prototype.every||(Array.prototype.every=function(e){for(var t=Object(this),r=0,n=t.length>>>0;n>r;r++)if(r in t&&!e.call(arguments[1],t[r],r,t))return!1;return!0}),Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array(r),i=arguments.length>=2?arguments[1]:void 0,o=0;r>o;o++)o in t&&(n[o]=e.call(i,t[o],o,t));return n}),Array.prototype.filter||(Array.prototype.filter=function(e){for(var t,r=[],n=new Object(this),i=0,o=n.length>>>0;o>i;i++)t=n[i],i in n&&e.call(arguments[1],t,i,n)&&r.push(t);return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&1/0!=n&&n!=-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);r>i;i++)if(i in t&&t[i]===e)return i;return-1});var D=function(e,t){this.id=e,this.value=t};D.prototype.compareTo=function(e){var t=this.value.compareTo(e.value);return 0===t&&(t=this.id-e.id),t};var C=function(e){this.items=new Array(e),this.length=0},P=C.prototype;P.isHigherPriority=function(e,t){return this.items[e].compareTo(this.items[t])<0},P.percolate=function(e){if(!(e>=this.length||0>e)){var t=e-1>>1;if(!(0>t||t===e)&&this.isHigherPriority(e,t)){var r=this.items[e];this.items[e]=this.items[t],this.items[t]=r,this.percolate(t)}}},P.heapify=function(e){if(e===t&&(e=0),!(e>=this.length||0>e)){var r=2*e+1,n=2*e+2,i=e;if(r<this.length&&this.isHigherPriority(r,i)&&(i=r),n<this.length&&this.isHigherPriority(n,i)&&(i=n),i!==e){var o=this.items[e];this.items[e]=this.items[i],this.items[i]=o,this.heapify(i)}}},P.peek=function(){return this.items[0].value},P.removeAt=function(e){this.items[e]=this.items[--this.length],delete this.items[this.length],this.heapify()},P.dequeue=function(){var e=this.peek();return this.removeAt(0),e},P.enqueue=function(e){var t=this.length++;this.items[t]=new D(C.count++,e),this.percolate(t)},P.remove=function(e){for(var t=0;t<this.length;t++)if(this.items[t].value===e)return this.removeAt(t),!0;return!1},C.count=0;var O=v.CompositeDisposable=function(){this.disposables=l(arguments,0),this.isDisposed=!1,this.length=this.disposables.length};O.prototype.add=function(e){this.isDisposed?e.dispose():(this.disposables.push(e),this.length++)},O.prototype.remove=function(e){var t=!1;if(!this.isDisposed){var r=this.disposables.indexOf(e);-1!==r&&(t=!0,this.disposables.splice(r,1),this.length--,e.dispose())}return t},O.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.disposables.slice(0);this.disposables=[],this.length=0;for(var t=0,r=e.length;r>t;t++)e[t].dispose()}},O.prototype.clear=function(){var e=this.disposables.slice(0);this.disposables=[],this.length=0;for(var t=0,r=e.length;r>t;t++)e[t].dispose()},O.prototype.contains=function(e){return-1!==this.disposables.indexOf(e)},O.prototype.toArray=function(){return this.disposables.slice(0)};var I=v.Disposable=function(e){this.isDisposed=!1,this.action=e};I.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var N=I.create=function(e){return new I(e)},M=I.empty={dispose:r},A=v.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};A.prototype.disposable=function(e){return e?this.setDisposable(e):this.getDisposable()},A.prototype.getDisposable=function(){return this.current},A.prototype.setDisposable=function(e){if(this.current)throw new Error("Disposable has already been assigned");var t=this.isDisposed;t||(this.current=e),t&&e&&e.dispose()},A.prototype.dispose=function(){var e;this.isDisposed||(this.isDisposed=!0,e=this.current,this.current=null),e&&e.dispose()};var k=v.SerialDisposable=function(){this.isDisposed=!1,this.current=null};k.prototype.getDisposable=function(){return this.current},k.prototype.setDisposable=function(e){var t,r=this.isDisposed;r||(t=this.current,this.current=e),t&&t.dispose(),r&&e&&e.dispose()},k.prototype.disposable=function(e){return e?void this.setDisposable(e):this.getDisposable()},k.prototype.dispose=function(){var e;this.isDisposed||(this.isDisposed=!0,e=this.current,this.current=null),e&&e.dispose()};var q=v.RefCountDisposable=function(){function e(e){this.disposable=e,this.disposable.count++,this.isInnerDisposed=!1}function t(e){this.underlyingDisposable=e,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return e.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?M:new e(this)},t}();f.prototype.dispose=function(){var e=this;this.scheduler.schedule(function(){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())})},p.prototype.invoke=function(){this.disposable.disposable(this.invokeCore())},p.prototype.compareTo=function(e){return this.comparer(this.dueTime,e.dueTime)},p.prototype.isCancelled=function(){return this.disposable.isDisposed},p.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var L=v.Scheduler=function(){function t(e,t,r,n){this.now=e,this._schedule=t,this._scheduleRelative=r,this._scheduleAbsolute=n}function r(e,t){var r=t.first,n=t.second,i=new O,o=function(t){n(t,function(t){var r=!1,n=!1,s=e.scheduleWithState(t,function(e,t){return r?i.remove(s):n=!0,o(t),M});n||(i.add(s),r=!0)})};return o(r),i}function n(e,t,r){var n=t.first,i=t.second,o=new O,s=function(t){i(t,function(t,n){var i=!1,u=!1,a=e[r].call(e,t,n,function(e,t){return i?o.remove(a):u=!0,s(t),M});u||(o.add(a),i=!0)})};return s(n),o}function o(e,t){return t(),M}var s=t.prototype;return s.catchException=function(e){return new H(this,e)},s.schedulePeriodic=function(e,t){return this.schedulePeriodicWithState(null,e,function(){t()})},s.schedulePeriodicWithState=function(t,r,n){var i=t,o=e.setInterval(function(){i=n(i)},r);return N(function(){e.clearInterval(o)})},s.schedule=function(e){return this._schedule(e,o)},s.scheduleWithState=function(e,t){return this._schedule(e,t)},s.scheduleWithRelative=function(e,t){return this._scheduleRelative(t,e,o)},s.scheduleWithRelativeAndState=function(e,t,r){return this._scheduleRelative(e,t,r)},s.scheduleWithAbsolute=function(e,t){return this._scheduleAbsolute(t,e,o)},s.scheduleWithAbsoluteAndState=function(e,t,r){return this._scheduleAbsolute(e,t,r)},s.scheduleRecursive=function(e){return this.scheduleRecursiveWithState(e,function(e,t){e(function(){t(e)})})},s.scheduleRecursiveWithState=function(e,t){return this.scheduleWithState({first:e,second:t},function(e,t){return r(e,t)})},s.scheduleRecursiveWithRelative=function(e,t){return this.scheduleRecursiveWithRelativeAndState(t,e,function(e,t){e(function(r){t(e,r)})})},s.scheduleRecursiveWithRelativeAndState=function(e,t,r){return this._scheduleRelative({first:e,second:r},t,function(e,t){return n(e,t,"scheduleWithRelativeAndState")})},s.scheduleRecursiveWithAbsolute=function(e,t){return this.scheduleRecursiveWithAbsoluteAndState(t,e,function(e,t){e(function(r){t(e,r)})})},s.scheduleRecursiveWithAbsoluteAndState=function(e,t,r){return this._scheduleAbsolute({first:e,second:r},t,function(e,t){return n(e,t,"scheduleWithAbsoluteAndState")})},t.now=i,t.normalize=function(e){return 0>e&&(e=0),e},t}(),F="Scheduler is not allowed to block the thread",U=L.immediate=function(){function e(e,t){return t(this,e)}function t(e,t,r){if(t>0)throw new Error(F);return r(this,e)}function r(e,t,r){return this.scheduleWithRelativeAndState(e,t-this.now(),r)}return new L(i,e,t,r)}(),W=L.currentThread=function(){function e(){o=new C(4)}function t(e,t){return this.scheduleWithRelativeAndState(e,0,t)}function r(t,r,n){var i,s=this.now()+L.normalize(r),u=new p(this,t,n,s);if(o)o.enqueue(u);else{i=new e;try{o.enqueue(u),i.run()}finally{i.dispose()}}return u.disposable}function n(e,t,r){return this.scheduleWithRelativeAndState(e,t-this.now(),r)}var o;e.prototype.dispose=function(){o=null},e.prototype.run=function(){for(var e;o.length>0;)if(e=o.dequeue(),!e.isCancelled()){for(;e.dueTime-L.now()>0;);e.isCancelled()||e.invoke()}};var s=new L(i,t,r,n);return s.scheduleRequired=function(){return null===o},s.ensureTrampoline=function(e){return null===o?this.schedule(e):e()},s}(),j=function(){function e(e,t){t(0,this._period);try{this._state=this._action(this._state)}catch(r){throw this._cancel.dispose(),r}}function t(e,t,r,n){this._scheduler=e,this._state=t,this._period=r,this._action=n}return t.prototype.start=function(){var t=new A;return this._cancel=t,t.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,e.bind(this))),t},t}();v.VirtualTimeScheduler=function(){function e(){return this.toDateTimeOffset(this.clock)}function t(e,t){return this.scheduleAbsoluteWithState(e,this.clock,t)}function r(e,t,r){return this.scheduleRelativeWithState(e,this.toRelative(t),r)}function n(e,t,r){return this.scheduleRelativeWithState(e,this.toRelative(t-this.now()),r)}function i(e,t){return t(),M}function o(i,s){this.clock=i,this.comparer=s,this.isEnabled=!1,this.queue=new C(1024),o.super_.constructor.call(this,e,t,r,n)}return _(o,L),E(o.prototype,{schedulePeriodicWithState:function(e,t,r){var n=new j(this,e,t,r);return n.start()},scheduleRelativeWithState:function(e,t,r){var n=this.add(this.clock,t);return this.scheduleAbsoluteWithState(e,n,r)},scheduleRelative:function(e,t){return this.scheduleRelativeWithState(t,e,i)},start:function(){var e;if(!this.isEnabled){this.isEnabled=!0;do e=this.getNext(),null!==e?(this.comparer(e.dueTime,this.clock)>0&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1;while(this.isEnabled)}},stop:function(){this.isEnabled=!1},advanceTo:function(e){var t,r=this.comparer(this.clock,e);if(this.comparer(this.clock,e)>0)throw new Error(y);if(0!==r&&!this.isEnabled){this.isEnabled=!0;do t=this.getNext(),null!==t&&this.comparer(t.dueTime,e)<=0?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1;while(this.isEnabled);this.clock=e}},advanceBy:function(e){var t=this.add(this.clock,e),r=this.comparer(this.clock,t);if(r>0)throw new Error(y);return 0!==r?this.advanceTo(t):void 0},sleep:function(e){var t=this.add(this.clock,e);if(this.comparer(this.clock,t)>=0)throw new Error(y);this.clock=t},getNext:function(){for(var e;this.queue.length>0;){if(e=this.queue.peek(),!e.isCancelled())return e;this.queue.dequeue()}return null},scheduleAbsolute:function(e,t){return this.scheduleAbsoluteWithState(t,e,i)},scheduleAbsoluteWithState:function(e,t,r){var n=this,i=function(e,t){return n.queue.remove(o),r(e,t)},o=new p(n,e,i,t,n.comparer);return n.queue.enqueue(o),o.disposable}}),o}(),v.HistoricalScheduler=function(){function e(t,r){var n=null==t?0:t,i=r||s;e.super_.constructor.call(this,n,i)}_(e,v.VirtualTimeScheduler);var t=e.prototype;return t.add=function(e,t){return e+t},t.toDateTimeOffset=function(e){return new Date(e).getTime()},t.toRelative=function(e){return e},e}();var z=L.timeout=function(){function t(e,t){var r=this,n=new A,i=s(function(){n.setDisposable(t(r,e))});return new O(n,N(function(){u(i)}))}function n(t,r,n){var i=this,o=L.normalize(r);if(0===o)return i.scheduleWithState(t,n);var s=new A,u=e.setTimeout(function(){s.setDisposable(n(i,t))},o);return new O(s,N(function(){e.clearTimeout(u)}))}function o(e,t,r){return this.scheduleWithRelativeAndState(e,t-this.now(),r)}var s,u,a=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,c=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame;return"undefined"!=typeof e.process&&"function"==typeof e.process.nextTick?(s=e.process.nextTick,u=r):"function"==typeof e.setImmediate?(s=e.setImmediate,u=e.clearImmediate):"function"==typeof a?(s=a,u=c):(s=function(t){return e.setTimeout(t,0)},u=e.clearTimeout),new L(i,t,n,o)}(),H=function(){function e(){return this._scheduler.now()}function t(e,t){return this._scheduler.scheduleWithState(e,this._wrap(t))}function r(e,t,r){return this._scheduler.scheduleWithRelativeAndState(e,t,this._wrap(r))}function n(e,t,r){return this._scheduler.scheduleWithAbsoluteAndState(e,t,this._wrap(r))}function i(o,s){this._scheduler=o,this._handler=s,this._recursiveOriginal=null,this._recursiveWrapper=null,i.super_.constructor.call(this,e,t,r,n)}return _(i,L),i.prototype._clone=function(e){return new i(e,this._handler)},i.prototype._wrap=function(e){var t=this;return function(r,n){try{return e(t._getRecursiveWrapper(r),n)}catch(i){if(!t._handler(i))throw i;return M}}},i.prototype._getRecursiveWrapper=function(e){if(!this._recursiveOriginal!==e){this._recursiveOriginal=e;var t=this._clone(e);t._recursiveOriginal=e,t._recursiveWrapper=t,this._recursiveWrapper=t}return this._recursiveWrapper},i.prototype.schedulePeriodicWithState=function(e,t,r){var n=this,i=!1,o=new A;return o.setDisposable(this._scheduler.schedulePeriodicWithState(e,t,function(e){if(i)return null;try{return r(e)}catch(t){if(i=!0,!n._handler(t))throw t;return o.dispose(),null}})),o},i}(),B=v.Notification=function(){function e(){}return E(e.prototype,{accept:function(e,t,r){return arguments.length>1||"function"==typeof e?this._accept(e,t,r):this._acceptObservable(e)},toObservable:function(e){var t=this;return e=e||U,new wt(function(r){return e.schedule(function(){t._acceptObservable(r),"N"===t.kind&&r.onCompleted()})})},hasValue:!1,equals:function(e){var t=null==e?"":e.toString();return this.toString()===t}}),e}(),Q=B.createOnNext=function(){function e(e){this.value=e,this.hasValue=!0,this.kind="N"}return _(e,B),E(e.prototype,{_accept:function(e){return e(this.value)},_acceptObservable:function(e){return e.onNext(this.value)},toString:function(){return"OnNext("+this.value+")"}}),function(t){return new e(t)}}(),V=B.createOnError=function(){function e(e){this.exception=e,this.kind="E"}return _(e,B),E(e.prototype,{_accept:function(e,t){return t(this.exception)},_acceptObservable:function(e){return e.onError(this.exception)},toString:function(){return"OnError("+this.exception+")"}}),function(t){return new e(t)}}(),J=B.createOnCompleted=function(){function e(){this.kind="C"}return _(e,B),E(e.prototype,{_accept:function(e,t,r){return r()},_acceptObservable:function(e){return e.onCompleted()},toString:function(){return"OnCompleted()"}}),function(){return new e}}(),G=v.Internals.Enumerator=function(e,t,r){this.moveNext=e,this.getCurrent=t,this.dispose=r},$=G.create=function(e,t,n){var i=!1;return n||(n=r),new G(function(){if(i)return!1;var t=e();return t||(i=!0,n()),t},function(){return t()},function(){i||(n(),i=!0)})},X=v.Internals.Enumerable=function(){function e(e){this.getEnumerator=e}return e.prototype.concat=function(){var e=this;return new wt(function(t){var r=e.getEnumerator(),n=!1,i=new k,o=U.scheduleRecursive(function(e){var o,s,u=!1;if(!n){try{u=r.moveNext(),u?o=r.getCurrent():r.dispose()}catch(a){s=a,r.dispose()}if(s)return void t.onError(s);if(!u)return void t.onCompleted();var c=new A;i.setDisposable(c),c.setDisposable(o.subscribe(t.onNext.bind(t),t.onError.bind(t),function(){e()}))}});return new O(i,o,N(function(){n=!0,r.dispose()}))})},e.prototype.catchException=function(){var e=this;return new wt(function(t){var r,n=e.getEnumerator(),i=!1,o=new k,s=U.scheduleRecursive(function(e){var s,u,a;if(a=!1,!i){try{a=n.moveNext(),a&&(s=n.getCurrent())}catch(c){u=c}if(u)return void t.onError(u);if(!a)return void(r?t.onError(r):t.onCompleted());var l=new A;o.setDisposable(l),l.setDisposable(s.subscribe(t.onNext.bind(t),function(t){r=t,e()},t.onCompleted.bind(t)))}});return new O(o,s,N(function(){i=!0}))})},e}(),K=X.repeat=function(e,r){return r===t&&(r=-1),new X(function(){var t,n=r;return $(function(){return 0===n?!1:(n>0&&n--,t=e,!0)},function(){return t})})},Z=X.forEach=function(e,t){return t||(t=n),new X(function(){var r,n=-1;return $(function(){return++n<e.length?(r=t(e[n],n),!0):!1},function(){return r})})},Y=v.Observer=function(){};Y.prototype.toNotifier=function(){var e=this;return function(t){return t.accept(e)}},Y.prototype.asObserver=function(){return new nt(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))},Y.prototype.checked=function(){return new it(this)};var et=Y.create=function(e,t,n){return e||(e=r),t||(t=a),n||(n=r),new nt(e,t,n)};Y.fromNotifier=function(e){return new nt(function(t){return e(Q(t))},function(t){return e(V(t))},function(){return e(J())})};var tt,rt=v.Internals.AbstractObserver=function(){function e(){this.isStopped=!1}return _(e,Y),e.prototype.onNext=function(e){this.isStopped||this.next(e)},e.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.error(e))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(){return this.isStopped?!1:(this.isStopped=!0,this.error(!0),!0)},e}(),nt=v.AnonymousObserver=function(){function e(t,r,n){e.super_.constructor.call(this),this._onNext=t,this._onError=r,this._onCompleted=n}return _(e,rt),e.prototype.next=function(e){this._onNext(e)},e.prototype.error=function(e){this._onError(e)},e.prototype.completed=function(){this._onCompleted()},e}(),it=function(){function e(e){this._observer=e,this._state=0}return _(e,Y),e.prototype.onNext=function(e){this.checkAccess();try{this._observer.onNext(e)}finally{this._state=0}},e.prototype.onError=function(e){this.checkAccess();try{this._observer.onError(e)}finally{this._state=2}},e.prototype.onCompleted=function(){this.checkAccess();try{this._observer.onCompleted()}finally{this._state=2}},e.prototype.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(),ot=v.Internals.ScheduledObserver=function(){function e(t,r){e.super_.constructor.call(this),this.scheduler=t,this.observer=r,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new k}return _(e,rt),e.prototype.next=function(e){var t=this;this.queue.push(function(){t.observer.onNext(e)})},e.prototype.error=function(e){var t=this;this.queue.push(function(){t.observer.onError(e)})},e.prototype.completed=function(){var e=this;this.queue.push(function(){e.observer.onCompleted()})},e.prototype.ensureActive=function(){var e=!1,t=this;!this.hasFaulted&&this.queue.length>0&&(e=!this.isAcquired,this.isAcquired=!0),e&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(e){var r;if(!(t.queue.length>0))return void(t.isAcquired=!1);r=t.queue.shift();try{r()}catch(n){throw t.queue=[],t.hasFaulted=!0,n}e()}))},e.prototype.dispose=function(){e.super_.dispose.call(this),this.disposable.dispose()},e}(),st=function(){function e(){e.super_.constructor.apply(this,arguments)}return _(e,ot),e.prototype.next=function(t){e.super_.next.call(this,t),this.ensureActive()},e.prototype.error=function(t){e.super_.error.call(this,t),this.ensureActive()},e.prototype.completed=function(){e.super_.completed.call(this),this.ensureActive()},e}(),ut=v.Observable=function(){function e(e){this._subscribe=e}return tt=e.prototype,tt.finalValue=function(){var e=this;return new wt(function(t){var r,n=!1;return e.subscribe(function(e){n=!0,r=e},t.onError.bind(t),function(){n?(t.onNext(r),t.onCompleted()):t.onError(new Error(b))})})},tt.subscribe=function(e,t,r){var n;return n=0===arguments.length||arguments.length>1||"function"==typeof e?et(e,t,r):e,this._subscribe(n)},tt.toArray=function(){function e(e,t){var r=e.slice(0);return r.push(t),r}return this.scan([],e).startWith([]).finalValue()},e}();ut.start=function(e,t){return at(e,t)()};var at=ut.toAsync=function(e,t,r){return t||(t=z),function(){var n=x.call(arguments,0),i=new Rt;return t.schedule(function(){var t;try{t=e.apply(r,n)}catch(o){return void i.onError(o)}i.onNext(t),i.onCompleted()}),i.asObservable()}};tt.observeOn=function(e){var t=this;return new wt(function(r){return t.subscribe(new st(e,r))})},tt.subscribeOn=function(e){var t=this;return new wt(function(r){var n=new A,i=new k;return i.setDisposable(n),n.setDisposable(e.schedule(function(){i.setDisposable(new f(e,t.subscribe(r)))})),i})},ut.create=function(e){return new wt(function(t){return N(e(t))})},ut.createWithDisposable=function(e){return new wt(e)};var ct=ut.defer=function(e){return new wt(function(t){var r;try{r=e()}catch(n){return dt(n).subscribe(t)}return r.subscribe(t)})},lt=ut.empty=function(e){return e||(e=U),new wt(function(t){return e.schedule(function(){t.onCompleted()})})},ft=ut.fromArray=function(e,t){return t||(t=W),new wt(function(r){var n=0;return t.scheduleRecursive(function(t){n<e.length?(r.onNext(e[n++]),t()):r.onCompleted()})})};ut.generate=function(e,t,r,n,i){return i||(i=W),new wt(function(o){var s=!0,u=e;return i.scheduleRecursive(function(e){var i,a;try{s?s=!1:u=r(u),i=t(u),i&&(a=n(u))}catch(c){return void o.onError(c)}i?(o.onNext(a),e()):o.onCompleted()})})};var pt=ut.never=function(){return new wt(function(){return M})};ut.range=function(e,t,r){return r||(r=W),new wt(function(n){return r.scheduleRecursiveWithState(0,function(r,i){t>r?(n.onNext(e+r),i(r+1)):n.onCompleted()})})},ut.repeat=function(e,r,n){return n||(n=W),r==t&&(r=-1),ht(e,n).repeat(r)};var ht=ut.returnValue=function(e,t){return t||(t=U),new wt(function(r){return t.schedule(function(){r.onNext(e),r.onCompleted()})})},dt=ut.throwException=function(e,t){return t||(t=U),new wt(function(r){return t.schedule(function(){r.onError(e)})})};ut.using=function(e,t){return new wt(function(r){var n,i,o=M;try{n=e(),n&&(o=n),i=t(n)}catch(s){return new O(dt(s).subscribe(r),o)}return new O(i.subscribe(r),o)})},tt.amb=function(e){var t=this;return new wt(function(r){function n(){o||(o=s,c.dispose())}function i(){o||(o=u,a.dispose())}var o,s="L",u="R",a=new A,c=new A;return a.setDisposable(t.subscribe(function(e){n(),o===s&&r.onNext(e)},function(e){n(),o===s&&r.onError(e)},function(){n(),o===s&&r.onCompleted()})),c.setDisposable(e.subscribe(function(e){i(),o===u&&r.onNext(e)},function(e){i(),o===u&&r.onError(e)},function(){i(),o===u&&r.onCompleted()})),new O(a,c)})},ut.amb=function(){function e(e,t){return e.amb(t)
}for(var t=pt(),r=l(arguments,0),n=0,i=r.length;i>n;n++)t=e(t,r[n]);return t},tt.catchException=function(e){return"function"==typeof e?h(this,e):mt([this,e])};var mt=ut.catchException=function(){var e=l(arguments,0);return Z(e).catchException()};tt.combineLatest=function(){var e=x.call(arguments);return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),gt.apply(this,e)};var gt=ut.combineLatest=function(){var e=x.call(arguments),t=e.pop();return Array.isArray(e[0])&&(e=e[0]),new wt(function(r){function n(e){var n;if(u[e]=!0,a||(a=u.every(function(e){return e}))){try{n=t.apply(null,l)}catch(i){return void r.onError(i)}r.onNext(n)}else c.filter(function(t,r){return r!==e}).every(function(e){return e})&&r.onCompleted()}function i(e){c[e]=!0,c.every(function(e){return e})&&r.onCompleted()}for(var o=function(){return!1},s=e.length,u=T(s,o),a=!1,c=T(s,o),l=new Array(s),f=new Array(s),p=0;s>p;p++)!function(t){f[t]=new A,f[t].setDisposable(e[t].subscribe(function(e){l[t]=e,n(t)},r.onError.bind(r),function(){i(t)}))}(p);return new O(f)})};tt.concat=function(){var e=x.call(arguments,0);return e.unshift(this),vt.apply(this,e)};var vt=ut.concat=function(){var e=l(arguments,0);return Z(e).concat()};tt.concatObservable=tt.concatAll=function(){return this.merge(1)},tt.merge=function(e){if("number"!=typeof e)return bt(this,e);var t=this;return new wt(function(r){var n=0,i=new O,o=!1,s=[],u=function(e){var t=new A;i.add(t),t.setDisposable(e.subscribe(r.onNext.bind(r),r.onError.bind(r),function(){var e;i.remove(t),s.length>0?(e=s.shift(),u(e)):(n--,o&&0===n&&r.onCompleted())}))};return i.add(t.subscribe(function(t){e>n?(n++,u(t)):s.push(t)},r.onError.bind(r),function(){o=!0,0===n&&r.onCompleted()})),i})};var bt=ut.merge=function(){var e,t;return arguments[0]?arguments[0].now?(e=arguments[0],t=x.call(arguments,1)):(e=U,t=x.call(arguments,0)):(e=U,t=x.call(arguments,1)),Array.isArray(t[0])&&(t=t[0]),ft(t,e).mergeObservable()};tt.mergeObservable=tt.mergeAll=function(){var e=this;return new wt(function(t){var r=new O,n=!1,i=new A;return r.add(i),i.setDisposable(e.subscribe(function(e){var i=new A;r.add(i),i.setDisposable(e.subscribe(function(e){t.onNext(e)},t.onError.bind(t),function(){r.remove(i),n&&1===r.length&&t.onCompleted()}))},t.onError.bind(t),function(){n=!0,1===r.length&&t.onCompleted()})),r})},tt.onErrorResumeNext=function(e){if(!e)throw new Error("Second observable is required");return yt([this,e])};var yt=ut.onErrorResumeNext=function(){var e=l(arguments,0);return new wt(function(t){var r=0,n=new k,i=U.scheduleRecursive(function(i){var o,s;r<e.length?(o=e[r++],s=new A,n.setDisposable(s),s.setDisposable(o.subscribe(t.onNext.bind(t),function(){i()},function(){i()}))):t.onCompleted()});return new O(n,i)})};tt.skipUntil=function(e){var t=this;return new wt(function(r){var n=!1,i=new O(t.subscribe(function(e){n&&r.onNext(e)},r.onError.bind(r),function(){n&&r.onCompleted()})),o=new A;return i.add(o),o.setDisposable(e.subscribe(function(){n=!0,o.dispose()},r.onError.bind(r),function(){o.dispose()})),i})},tt.switchLatest=function(){var e=this;return new wt(function(t){var r=!1,n=new k,i=!1,o=0,s=e.subscribe(function(e){var s=new A,u=++o;r=!0,n.setDisposable(s),s.setDisposable(e.subscribe(function(e){o===u&&t.onNext(e)},function(e){o===u&&t.onError(e)},function(){o===u&&(r=!1,i&&t.onCompleted())}))},t.onError.bind(t),function(){i=!0,r||t.onCompleted()});return new O(s,n)})},tt.takeUntil=function(e){var t=this;return new wt(function(n){return new O(t.subscribe(n),e.subscribe(n.onCompleted.bind(n),n.onError.bind(n),r))})},tt.zip=function(){if(Array.isArray(arguments[0]))return d.apply(this,arguments);var e=this,t=x.call(arguments),r=t.pop();return t.unshift(e),new wt(function(n){function i(e){u[e]=!0,u.every(function(e){return e})&&n.onCompleted()}for(var o=t.length,s=T(o,function(){return[]}),u=T(o,function(){return!1}),a=function(t){var i,o;if(s.every(function(e){return e.length>0})){try{o=s.map(function(e){return e.shift()}),i=r.apply(e,o)}catch(a){return void n.onError(a)}n.onNext(i)}else u.filter(function(e,r){return r!==t}).every(function(e){return e})&&n.onCompleted()},c=new Array(o),l=0;o>l;l++)!function(e){c[e]=new A,c[e].setDisposable(t[e].subscribe(function(t){s[e].push(t),a(e)},n.onError.bind(n),function(){i(e)}))}(l);return new O(c)})},tt.asObservable=function(){var e=this;return new wt(function(t){return e.subscribe(t)})},tt.bufferWithCount=function(e,r){return r===t&&(r=e),this.windowWithCount(e,r).selectMany(function(e){return e.toArray()}).where(function(e){return e.length>0})},tt.dematerialize=function(){var e=this;return new wt(function(t){return e.subscribe(function(e){return e.accept(t)},t.onError.bind(t),t.onCompleted.bind(t))})},tt.distinctUntilChanged=function(e,t){var r=this;return e||(e=n),t||(t=o),new wt(function(n){var i,o=!1;return r.subscribe(function(r){var s,u=!1;try{s=e(r)}catch(a){return void n.onError(a)}if(o)try{u=t(i,s)}catch(a){return void n.onError(a)}o&&u||(o=!0,i=s,n.onNext(r))},n.onError.bind(n),n.onCompleted.bind(n))})},tt.doAction=function(e,t,r){var n,i=this;return"function"==typeof e?n=e:(n=e.onNext.bind(e),t=e.onError.bind(e),r=e.onCompleted.bind(e)),new wt(function(e){return i.subscribe(function(t){try{n(t)}catch(r){e.onError(r)}e.onNext(t)},function(r){if(t){try{t(r)}catch(n){e.onError(n)}e.onError(r)}else e.onError(r)},function(){if(r){try{r()}catch(t){e.onError(t)}e.onCompleted()}else e.onCompleted()})})},tt.finallyAction=function(e){var t=this;return new wt(function(r){var n=t.subscribe(r);return N(function(){try{n.dispose()}finally{e()}})})},tt.ignoreElements=function(){var e=this;return new wt(function(t){return e.subscribe(r,t.onError.bind(t),t.onCompleted.bind(t))})},tt.materialize=function(){var e=this;return new wt(function(t){return e.subscribe(function(e){t.onNext(Q(e))},function(e){t.onNext(V(e)),t.onCompleted()},function(){t.onNext(J()),t.onCompleted()})})},tt.repeat=function(e){return K(this,e).concat()},tt.retry=function(e){return K(this,e).catchException()},tt.scan=function(){var e,t,r=!1;2===arguments.length?(e=arguments[0],t=arguments[1],r=!0):t=arguments[0];var n=this;return ct(function(){var i,o=!1;return n.select(function(n){return o?i=t(i,n):(i=r?t(e,n):n,o=!0),i})})},tt.skipLast=function(e){var t=this;return new wt(function(r){var n=[];return t.subscribe(function(t){n.push(t),n.length>e&&r.onNext(n.shift())},r.onError.bind(r),r.onCompleted.bind(r))})},tt.startWith=function(){var e,r,n=0;return arguments.length>0&&null!=arguments[0]&&arguments[0].now!==t?(r=arguments[0],n=1):r=U,e=x.call(arguments,n),Z([ft(e,r),this]).concat()},tt.takeLast=function(e,t){return this.takeLastBuffer(e).selectMany(function(e){return ft(e,t)})},tt.takeLastBuffer=function(e){var t=this;return new wt(function(r){var n=[];return t.subscribe(function(t){n.push(t),n.length>e&&n.shift()},r.onError.bind(r),function(){r.onNext(n),r.onCompleted()})})},tt.windowWithCount=function(e,t){var r=this;if(0>=e)throw new Error(y);if(null==t&&(t=e),0>=t)throw new Error(y);return new wt(function(n){var i=new A,o=new q(i),s=0,u=[],a=function(){var e=new Et;u.push(e),n.onNext(R(e,o))};return a(),i.setDisposable(r.subscribe(function(r){for(var n,i=0,o=u.length;o>i;i++)u[i].onNext(r);var c=s-e+1;c>=0&&c%t===0&&(n=u.shift(),n.onCompleted()),s++,s%t===0&&a()},function(e){for(;u.length>0;)u.shift().onError(e);n.onError(e)},function(){for(;u.length>0;)u.shift().onCompleted();n.onCompleted()})),o})},tt.defaultIfEmpty=function(e){var r=this;return e===t&&(e=null),new wt(function(t){var n=!1;return r.subscribe(function(e){n=!0,t.onNext(e)},t.onError.bind(t),function(){n||t.onNext(e),t.onCompleted()})})},tt.distinct=function(e,t){var r=this;return e||(e=n),t||(t=u),new wt(function(n){var i={};return r.subscribe(function(r){var o,s,u,a=!1;try{o=e(r),s=t(o)}catch(c){return void n.onError(c)}for(u in i)if(s===u){a=!0;break}a||(i[s]=null,n.onNext(r))},n.onError.bind(n),n.onCompleted.bind(n))})},tt.groupBy=function(e,t,r){return this.groupByUntil(e,t,function(){return pt()},r)},tt.groupByUntil=function(e,t,i,o){var s=this;return t||(t=n),o||(o=u),new wt(function(n){var u={},a=new O,c=new q(a);return a.add(s.subscribe(function(s){var l,f,p,h,d,m,g,v,b,y,w;try{g=e(s),v=o(g)}catch(x){for(w in u)u[w].onError(x);return void n.onError(x)}d=!1;try{y=u[v],y||(y=new Et,u[v]=y,d=!0)}catch(x){for(w in u)u[w].onError(x);return void n.onError(x)}if(d){m=new St(g,y,c),f=new St(g,y);try{l=i(f)}catch(x){for(w in u)u[w].onError(x);return void n.onError(x)}n.onNext(m),b=new A,a.add(b),h=function(){v in u&&(delete u[v],y.onCompleted()),a.remove(b)},b.setDisposable(l.take(1).subscribe(r,function(e){for(w in u)u[w].onError(e);n.onError(e)},function(){h()}))}try{p=t(s)}catch(x){for(w in u)u[w].onError(x);return void n.onError(x)}y.onNext(p)},function(e){for(var t in u)u[t].onError(e);n.onError(e)},function(){for(var e in u)u[e].onCompleted();n.onCompleted()})),c})},tt.select=tt.map=function(e){var t=this;return new wt(function(r){var n=0;return t.subscribe(function(t){var i;try{i=e(t,n++)}catch(o){return void r.onError(o)}r.onNext(i)},r.onError.bind(r),r.onCompleted.bind(r))})},tt.selectMany=tt.flatMap=function(e,t){return t?this.selectMany(function(r){return e(r).select(function(e){return t(r,e)})}):"function"==typeof e?m.call(this,e):m.call(this,function(){return e})},tt.skip=function(e){if(0>e)throw new Error(y);var t=this;return new wt(function(r){var n=e;return t.subscribe(function(e){0>=n?r.onNext(e):n--},r.onError.bind(r),r.onCompleted.bind(r))})},tt.skipWhile=function(e){var t=this;return new wt(function(r){var n=0,i=!1;return t.subscribe(function(t){if(!i)try{i=!e(t,n++)}catch(o){return void r.onError(o)}i&&r.onNext(t)},r.onError.bind(r),r.onCompleted.bind(r))})},tt.take=function(e,t){if(0>e)throw new Error(y);if(0===e)return lt(t);var r=this;return new wt(function(t){var n=e;return r.subscribe(function(e){n>0&&(n--,t.onNext(e),0===n&&t.onCompleted())},t.onError.bind(t),t.onCompleted.bind(t))})},tt.takeWhile=function(e){var t=this;return new wt(function(r){var n=0,i=!0;return t.subscribe(function(t){if(i){try{i=e(t,n++)}catch(o){return void r.onError(o)}i?r.onNext(t):r.onCompleted()}},r.onError.bind(r),r.onCompleted.bind(r))})},tt.where=tt.filter=function(e){var t=this;return new wt(function(r){var n=0;return t.subscribe(function(t){var i;try{i=e(t,n++)}catch(o){return void r.onError(o)}i&&r.onNext(t)},r.onError.bind(r),r.onCompleted.bind(r))})};var wt=v.Internals.AnonymousObservable=function(){function e(t){var r=function(e){var r=new xt(e);if(W.scheduleRequired())W.schedule(function(){try{r.disposable(t(r))}catch(e){if(!r.fail(e))throw e}});else try{r.disposable(t(r))}catch(n){if(!r.fail(n))throw n}return r};e.super_.constructor.call(this,r)}return _(e,ut),e}(),xt=function(){function e(t){e.super_.constructor.call(this),this.observer=t,this.m=new A}return _(e,rt),e.prototype.next=function(e){var t=!1;try{this.observer.onNext(e),t=!0}finally{t||this.dispose()}},e.prototype.error=function(e){try{this.observer.onError(e)}finally{this.dispose()}},e.prototype.completed=function(){try{this.observer.onCompleted()}finally{this.dispose()}},e.prototype.disposable=function(e){return this.m.disposable(e)},e.prototype.dispose=function(){e.super_.dispose.call(this),this.m.dispose()},e}(),St=function(){function e(e){return this.underlyingObservable.subscribe(e)}function t(r,n,i){t.super_.constructor.call(this,e),this.key=r,this.underlyingObservable=i?new wt(function(e){return new O(i.getDisposable(),n.subscribe(e))}):n}return _(t,ut),t}(),_t=function(e,t){this.subject=e,this.observer=t};_t.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1),this.observer=null}};var Et=v.Subject=function(){function e(e){return c.call(this),this.isStopped?this.exception?(e.onError(this.exception),M):(e.onCompleted(),M):(this.observers.push(e),new _t(this,e))}function t(){t.super_.constructor.call(this,e),this.isDisposed=!1,this.isStopped=!1,this.observers=[]}return _(t,ut),E(t.prototype,Y,{onCompleted:function(){if(c.call(this),!this.isStopped){var e=this.observers.slice(0);this.isStopped=!0;for(var t=0,r=e.length;r>t;t++)e[t].onCompleted();this.observers=[]}},onError:function(e){if(c.call(this),!this.isStopped){var t=this.observers.slice(0);this.isStopped=!0,this.exception=e;for(var r=0,n=t.length;n>r;r++)t[r].onError(e);this.observers=[]}},onNext:function(e){if(c.call(this),!this.isStopped)for(var t=this.observers.slice(0),r=0,n=t.length;n>r;r++)t[r].onNext(e)},dispose:function(){this.isDisposed=!0,this.observers=null}}),t.create=function(e,t){return new Tt(e,t)},t}(),Rt=v.AsyncSubject=function(){function e(e){if(c.call(this),!this.isStopped)return this.observers.push(e),new _t(this,e);var t=this.exception,r=this.hasValue,n=this.value;return t?e.onError(t):r?(e.onNext(n),e.onCompleted()):e.onCompleted(),M}function t(){t.super_.constructor.call(this,e),this.isDisposed=!1,this.isStopped=!1,this.value=null,this.hasValue=!1,this.observers=[],this.exception=null}return _(t,ut),E(t.prototype,Y,{onCompleted:function(){var e,t,r;if(c.call(this),!this.isStopped){var n=this.observers.slice(0);this.isStopped=!0;var i=this.value,o=this.hasValue;if(o)for(t=0,r=n.length;r>t;t++)e=n[t],e.onNext(i),e.onCompleted();else for(t=0,r=n.length;r>t;t++)n[t].onCompleted();this.observers=[]}},onError:function(e){if(c.call(this),!this.isStopped){var t=this.observers.slice(0);this.isStopped=!0,this.exception=e;for(var r=0,n=t.length;n>r;r++)t[r].onError(e);this.observers=[]}},onNext:function(e){c.call(this),this.isStopped||(this.value=e,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),t}(),Tt=function(){function e(e){return this.observable.subscribe(e)}function t(r,n){t.super_.constructor.call(this,e),this.observer=r,this.observable=n}return _(t,ut),E(t.prototype,Y,{onCompleted:function(){this.observer.onCompleted()},onError:function(e){this.observer.onError(e)},onNext:function(e){this.observer.onNext(e)}}),t}();return"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.Rx=v,define(function(){return v})):void(g?"object"==typeof module&&module&&module.exports==g?module.exports=v:g=v:e.Rx=v)}(this),define=function(e){function t(){define=e,e("msfuncy",[],arguments[arguments.length-1])}return t.amd={},t}(define),function(e){e.msf=bindMsFuncyMod({}),e.define&&define(e.msf)}(this),define=function(e){function t(){define=e,e("oil.flightmanager",["require","exports"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports"],function(e,t){function r(e){if(null!=e)for(var t in e)i[e[t]]=!0}function n(e){return i[e]?!0:!1}var i={};t.addFlights=r,t.isFlightActive=n}),define=function(e){function t(){define=e,e("oil.msg",["require","exports","msfuncy"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy"],function(e,t,r){function n(e,t){if(!t)throw new Error("Parameter "+e+" must be specified.")}var i=function(){function e(){}return e.logMessage="logMessage",e.errorMessage="errorMessage",e.signalMessage="signalMessage",e.relatedPeopleMessage="relatedPeopleMessage",e.topRelatedPeopleMessage="topRelatedPeopleMessage",e.sitesIFollowMessage="SitesIFollowData",e.sharedWithMeMessage="sharedWithMeData",e.mountedFoldersMessageType="MountedFoldersData",e.myPropertiesMessageType="MyUserProfileData",e}();t.MessageTypes=i;var o=function(){function e(e,t,r){n("type",e),n("source",t),n("data",r),this._type=e,this._source=t,this._data=r}return e.prototype.getType=function(){return this._type},e.prototype.getSource=function(){return this._source},e.prototype.getData=function(){return this._data},e}();t.Message=o,function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(t.LogLevel||(t.LogLevel={}));var s=t.LogLevel,u=function(){function e(){}return e.itemFetched="itemFetched",e.fetchAborted="fetchAborted",e.fetchPending="fetchPending",e.cacheLookup="cacheLookup",e.inFeedFetched="inFeedFetched",e}();t.LogType=u,t.LogMessage=function(e,t,n,u){var a=(new Date).getTime(),c=u||{};return new o(i.logMessage,e,{getLevel:r.k(n),getType:r.k(t),getTimestamp:r.k(a),getProperties:r.k(u),serialize:r.k(JSON.stringify(r.extend({},c,{msoilSource:e.getId(),msoilType:t,msoilTimestamp:a,msoilLevel:s[n]})))})},t.logMessage=t.LogMessage}),define=function(e){function t(){define=e,e("oil.map",["require","exports","msfuncy","rx"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","rx"],function(e,t,r,n){function i(e){return r.distinct(r.aggregate(r.map(function(e){return e.getSources()},e),r.cat,[])).sort().join(",")}var o=r.asrtion(function(e){return r.isArray(e)||r.isString(e)},"must be string or array"),s=r.asrtion(function(e){return r.getLength(e)>0},"length must be greater than zero");t.propMap=r.explain("map",r.pre(r.explain("source",r.pipe(o,s)),r.explain("[target]",r.asrtion(r.isUndefOr(r.isString),"must be string if specified")),r.explain("[converter]",r.dflt(r.arg,r.asrtion(r.isUndefOr(r.isFunc),"must be function if specified"))),function(e,t,n){var i=r.wrap(e),o=t||i[0],s=r.isArray(e)?r.unsplat(n):n;return r.pipe(r.setter("getSources",r.k(i.slice(0))),r.setter("getTarget",r.k(o)),r.setter("getMapper",r.k(n)))(r.explain("Map source members '"+i.join("', '")+"' into target member '"+o+"'",function(e,t){return r.set(o,r.extract(s,i,e),t)}))})),t.getSourceNames=i,n.Observable.prototype.propmap=function(e){var t=this,r=e.filter(function(e){return e.subscribe}),i=e.filter(function(e){return!e.subscribe}),o=n.Observable;return o.createWithDisposable(function(e){return t.selectMany(function(e){return o.merge(r).merge(o.fromArray(i)).scan({},function(t,r){return r(e,t)}).takeLast(1)}).subscribe(e)})}}),define=function(e){function t(){define=e,e("rx.html",["rx","exports"],arguments[arguments.length-1])}return t.amd={},t}(define),function(e,t){var r="object"==typeof exports&&exports&&("object"==typeof e&&e&&e==e.global&&(window=e),exports);if("function"==typeof define&&define.amd)define(["./rx","exports"],function(r,n){return e.Rx=t(e,n,r),e.Rx});else if("object"==typeof module&&module&&module.exports==r){var n=t(e,module.exports,require("./rx"));module.exports=n.Rx}else e.Rx=t(e,{},e.Rx)}(this,function(e,t){function r(e,t){return t&&h[e]||e}function n(e,t,n,i){if(e.addEventListener)return e.addEventListener(t,n,i),c(function(){e.removeEventListener(t,n,i)});if(e.attachEvent){var o=r(t,i);return e.attachEvent("on"+o,n),c(function(){e.detachEvent("on"+o,n)})}var o=r(t,i);return e["on"+o]=n,c(function(){e["on"+o]=null})}function i(t,r,o,s){var u=new l;if(t&&t.nodeName||t===e)u.add(n(t,r,o,s));else if(t&&t.length)for(var a=0,c=t.length;c>a;a++)u.add(i(t[a],r,o,s));return u}function o(){if(e.XMLHttpRequest)return new e.XMLHttpRequest;try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}var s=("object"==typeof exports&&exports&&("object"==typeof e&&e&&e==e.global&&(window=e),exports),e.Rx),u=s.Observable,a=(u.prototype,u.createWithDisposable),c=s.Disposable.create,l=s.CompositeDisposable,f=s.RefCountDisposable,p=s.AsyncSubject,h={focus:"focusin",blur:"focusout"};u.fromEvent=function(e,t,r){return a(function(n){function o(e){n.onNext(e)}return i(e,t,o,"boolean"==typeof r||!1)}).select(function(e){return e.target=e.target||e.srcElement,e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e})};var d=function(){var e=document.createElement("div");return function(t){e.appendChild(t),e.innerHTML=""}}();u.getJSONPRequest=function(){var r=0;return function(n){var i=new p,o=document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script"),u="rxjscallback"+r++,n=n.replace("=JSONPCallback","="+u);e[u]=function(e){i.onNext(e),i.onCompleted()},s.src=n,s.async=!0,s.onload=s.onreadystatechange=function(r,n){(n||!s.readyState||/loaded|complete/.test(s.readyState))&&(s.onload=s.onreadystatechange=null,o&&s.parentNode&&d(s),s=t,delete e[u])},o.insertBefore(s,o.firstChild);var h=new f(c(function(){/loaded|complete/.test(s.readyState)||(s.abort(),s.onload=s.onreadystatechange=null,o&&s.parentNode&&d(s),s=t,delete e[u],i.onError(new Error("The script has been aborted")))}));return a(function(e){return new l(i.subscribe(e),h.getDisposable())})}}();var m=u.ajax=function(e){"string"==typeof e&&(e={method:"GET",url:e,async:!0}),"undefined"==typeof e.async&&(e.async=!0);var t=new p,r=o();try{if(e.user?r.open(e.method,e.url,e.async,e.user,e.password):r.open(e.method,e.url,e.async),e.headers){var n=e.headers;for(var i in n)r.setRequestHeader(i,n[i])}r.onreadystatechange=r.onload=function(){if(4===r.readyState){var e=r.status;e>=200&&300>=e||0===e||""===e?(t.onNext(r),t.onCompleted()):t.onError(r)}},r.onerror=r.onabort=function(){t.onError(r)},r.send(e.body||null)}catch(s){t.onError(s)}var u=new f(c(function(){4!==r.readyState&&(r.abort(),t.onError(r))}));return a(function(e){return new l(t.subscribe(e),u.getDisposable(),u)})};u.post=function(e,t){return m({url:e,body:t,method:"POST",async:!0})};var g=u.get=function(e){return m({url:e,method:"GET",async:!0})};return JSON&&JSON.parse&&(u.getJSON=function(e){return g(e).select(function(e){return JSON.parse(e.responseText)})}),s}),define=function(e){function t(){define=e,e("oil.utils",["require","exports","msfuncy","rx","rx.html"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","rx","rx.html"],function(e,t,r,n){function i(e){if("string"!=typeof e)throw new Error("Parameter str must be specified.");return e.trim?e.trim():e.replace(P,"")}function o(e){if(e){var t=e.match(/^https?:\/\/[^\/]*/)[0];if(t)return t.substr(0,t.length)}return null}function s(e){return e.substring(0,e.lastIndexOf("/"))}function u(){return(new Date).valueOf()}function a(){try{return sessionStorage&&sessionStorage||{}}catch(e){}return{}}function c(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(r){}}function l(e){try{var t=sessionStorage.getItem(e);return JSON.parse(t)}catch(r){}}function f(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function p(e){if("string"!=typeof e)throw new Error("Parameter text must be of type String.");return e.replace(/^\s+|\s+$|\s+(?=\s)/g,"")}function h(e){return m(e,encodeURIComponent)}function d(e){return m(e,encodeURI)}function m(e,t){return e&&"string"==typeof e?t(e).replace(/'/g,"%27").replace(/&#(0*(74|106)|x0*(4A|6A))[;]?/gi,"j").replace(/&#(0*(65|97)|x0*(41|61))[;]?/gi,"a").replace(/&#(0*(86|118)|x0*(56|76))[;]?/gi,"v").replace(/&#(0*(83|115)|x0*(53|73))[;]?/gi,"s").replace(/&#(0*(67|99)|x0*(43|63))[;]?/gi,"c").replace(/&#(0*(82|114)|x0*(52|72))[;]?/gi,"r").replace(/&#(0*(73|105)|x0*(49|69))[;]?/gi,"i").replace(/&#(0*(80|112)|x0*(50|70))[;]?/gi,"p").replace(/&#(0*(84|116)|x0*(54|74))[;]?/gi,"t").replace(/&#(0*(66|98)|x0*(42|62))[;]?/gi,"b").replace(/&#(0*58|x0*3A)[;]?/gi,":").replace(/&#x?0*9[;]?/gi,"").replace(/&#(0*10|x0*A)[;]?/gi,"").replace(/&#(0*13|x0*D)[;]?/gi,"").replace(/javascript:/gi,"").replace(/vbscript:/gi,""):""}function g(e){return e&&"string"==typeof e?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function v(){for(var e="",t=0;32>t;t++){var r=Math.floor(16*Math.random());switch(t){case 8:e+="-";break;case 12:r=4,e+="-";break;case 16:r=3&r|8,e+="-";break;case 20:e+="-"}e+=O[r]}return e}function b(){for(var e,t={},r=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=r.exec(n);)t[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return t}function y(e){var t;for(var r in e)e.hasOwnProperty(r)&&(t=t?t+"&":"",t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));t&&(window.location.hash=t)}function w(e,r){if("string"!=typeof e)throw new Error("Parameter words must be of type String.");if(2===arguments.length){if("boolean"!=typeof r)throw new Error("Parameter state must be of type Boolean.")}else r=!0;var n=t.etrim(e),i={};if(!n)return i;for(var o=n.split(" "),s=o.length,u=0;s>u;u++)i[o[u]]=r;return i}function x(e){if(!e||"object"!=typeof e)throw new Error("Parameter flags must be an object instance.");var t,r=[];for(t in e)e[t]&&r.push(t);return r.join(" ")}function S(){return navigator.userLanguage}function _(e){var t=/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3})(\d*)([A-Za-z])?$/.exec(e);if(t&&4===t.length){var r=t[1];return t[3]?t[1].concat(t[3]):r}return e}function E(e){r.asrt(r.isArray,"Charcodes must be in an array",e);for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(e[n]);return t.join("")}function R(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t}function T(e){function t(e){return 10>e?"0"+e:e}return Date.prototype.toISOString?e.toISOString():this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}function D(e){var r=t.loadFromSessionStorage(t.msoilUser);r!==e&&t.clearDataFromSessionStorage()}function C(){var e=t.getAllDataInSessionStorage();for(var r in e)(0===r.indexOf("ms-oil")||0===r.indexOf("ms-querybox"))&&delete e[r]}var P=/^\s*|\s*$/g;t.msoilUser="msoilUser",t.trim=i,t.getServerUrl=o,t.chopUrl=s,t.now=u,t.getAllDataInSessionStorage=a,t.saveToSessionStorage=c,t.loadFromSessionStorage=l,t.doc=document,t.escapeRegExp=f,t.etrim=p,t.makeSafeUrlComponent=h,t.makeSafeUrl=d,t.htmlEncode=g;var O=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];t.newGuid=v,t.getFragmentParams=b,t.setFragmentParams=y,t.wordsToFlags=w,t.flagsToWords=x,t.getNavigatorUserLanguage=S,t.serialize=JSON.stringify,t.deserialize=JSON.parse,t.reduceISO8601Millisecs=_,t.charCodesToString=E,t.stringToCharCodes=R,t.dateToISO=T,t.clearDataFromSessionStorageIfUserIsNot=D,t.clearDataFromSessionStorage=C,n.Observable.prototype.postJSON=function(e){function t(e){return JSON.parse(e.responseText)}var i={method:"POST",headers:{ACCEPT:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"},async:!0};return this.select(function(t){var o=r.extend(i,e,t);return n.Observable.ajax(o)}).selectMany(function(e){return e}).select(t)},n.Observable.prototype.not=function(){return this.select(function(e){return!e})}}),define=function(e){function t(){define=e,e("msnorm",["require","exports"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports"],function(e,t){function r(e){if(null===u&&i(),e&&!t.isNormalized(e))for(var r in u)e=e.replace(u[r],r);return e}function n(e){null===s&&o();var t=s.test(e.toLowerCase());return!t}function i(){u={};for(var e in a)u[e]=new RegExp("["+a[e]+"]","g")}function o(){var e="[";for(var t in a)e+=a[t];e+="]",s=new RegExp(e)}t.normalize=r,t.isNormalized=n;var s=null,u=null,a={a:"AÀÁÂÃÄÅàáâãäåĀāĂăĄąǍǎǞǟǠǡǺǻȀȁȂȃȦȧᴀḀḁẠạẢảẤấẦầẨẩẪẫẬậẮắẰằẲẳẴẵẶặÅⒶⓐＡ",b:"BƀƁƂƃɃʙḂḃḄḅḆḇⒷⓑＢ",c:"CÇçĆćĈĉĊċČčƇƈᴄḈḉⒸⓒＣ",d:"DÐðĎďĐđƉƊƋƌȡᴅḊḋḌḍḎḏḐḑḒḓⒹⓓＤ",e:"EÈÉÊËèéêëĒēĔĕĖėĘęĚěȄȅȆȇȨȩᴇḔḕḖḗḘḙḚḛḜḝẸẹẺẻẼẽẾếỀềỂểỄễỆệⒺⓔＥ",f:"FƑƒḞḟⒻⓕＦ",g:"GĜĝĞğĠġĢģƓǤǥǦǧǴǵɢḠḡⒼⓖＧ",h:"HĤĥĦħȞȟʜʰḢḣḤḥḨḩḪḫẖⒽⓗＨ",i:"IÌÍÎÏìíîïĨĩĪīĬĭĮįİıƗǏǐȈȉȊȋɪḬḭḮḯỈỉỊịⒾⓘＩ",j:"JĴĵǰʲᴊⒿⓙＪ",k:"KĶķƘƙǨǩᴋḰḱḲḳḴḵKⓀⓚＫ",l:"LĹĺĻļĽľŁłƚȴȽʟḶḷḸḹḺḻḼḽⓁⓛＬ",m:"MᴍḾḿṀṁṂṃⓂⓜＭ",n:"NÑñŃńŅņŇňƝƞǸǹȠȵɴṄṅṆṇṈṉṊṋⓃⓝＮ",o:"OÒÓÔÕÖØòóôõöøŌōŎŏŐőƟƠơǑǒǪǫǬǭǾǿȌȍȎȏȪȫȬȭȮȯȰȱᴏṌṍṎṏṐṑṒṓỌọỎỏỐốỒồỔổỖỗỘộỚớỜờỞởỠỡỢợⓄⓞＯ",p:"PƤƥᴘṔṕṖṗⓅⓟＰ",q:"QⓆⓠＱ",r:"RŔŕŖŗŘřȐȑȒȓʀʳṘṙṚṛṜṝṞṟⓇⓡＲ",s:"SŚśŜŝŞşŠšſȘșṠṡṢṣṤṥṦṧṨṩẛⓈⓢＳ",t:"TŢţŤťŦŧƫƬƭƮȚțᴛṪṫṬṭṮṯṰṱⓉⓣＴ",u:"UÙÚÛÜùúûüŨũŪūŬŭŮůŰűŲųƯưǓǔǕǖǗǘǙǚǛǜȔȕȖȗᴜṲṳṴṵṶṷṸṹṺṻỤụỦủỨứỪừỬửỮữỰựⓊⓤＵ",v:"VƲᴠṼṽṾṿⓋⓥＶ",w:"WŴŵʷᴡẀẁẂẃẆẇẈẉⓌⓦＷ",x:"XƳƴẊẋⓍⓧＸ",y:"YÝýÿŶŷŸƵƶȲȳʏʸẎẏỲỳỴỵỶỷỸỹⓎⓨＹ",z:"ZŹźŻżŽžȤȥᴢẐẑẒẓẔẕⓏⓩＺ",2:"²②",3:"³③","μ":"µΜ",1:"¹①",ae:"ÆæǢǣǼǽ",th:"Þþ",ss:"ßẞ","ŋ":"Ŋ",oe:"Œœ","ƅ":"Ƅ","ɔ":"Ɔᴐ","ǝ":"Ǝ","ə":"Ə","ɛ":"Ɛ","ɣ":"Ɣ","ɩ":"Ɩ","ɯ":"Ɯ","ƣ":"Ƣ","ʀ":"Ʀ","ƨ":"Ƨ","ʃ":"Ʃ","ʊ":"Ʊ","ʒ":"ƷǮǯᴣ","ƹ":"Ƹ","ƽ":"Ƽ","ƕ":"Ƕ","ƿ":"Ƿ","ȝ":"Ȝ","ȣ":"Ȣ","ⱥ":"Ⱥ","ȼ":"Ȼ","ⱦ":"Ⱦ","ʔ":"Ɂɂ","ʉ":"Ʉ","ʌ":"Ʌ","ɇ":"Ɇ","ɉ":"Ɉ","ɋ":"Ɋ","ɍ":"Ɍ","ɏ":"Ɏ","œ":"ɶ","ɠ":"ʛ","ɦ":"ʱ","ɹ":"ʴ","ɻ":"ʵ","ʁ":"ʶ","ͱ":"Ͱ","ͳ":"Ͳ","ͷ":"Ͷ","α":"ΆΑάἀἁἂἃἄἅἆἇἈἉἊἋἌἍἎἏὰάᾀᾁᾂᾃᾄᾅᾆᾇᾈᾉᾊᾋᾌᾍᾎᾏᾰᾱᾲᾳᾴᾶᾷᾸᾹᾺΆᾼ","ε":"ΈΕέϵἐἑἒἓἔἕἘἙἚἛἜἝὲέῈΈ","η":"ΉΗήἠἡἢἣἤἥἦἧἨἩἪἫἬἭἮἯὴήᾐᾑᾒᾓᾔᾕᾖᾗᾘᾙᾚᾛᾜᾝᾞᾟῂῃῄῆῇῊΉῌ","ι":"ΊΙίἰἱἲἳἴἵἶἷἸἹἺἻἼἽἾἿὶίιῐῑῖῘῙῚΊ","ο":"ΌΟόὀὁὂὃὄὅὈὉὊὋὌὍὸόῸΌ","υ":"ΎΥύϒϓϔὐὑὒὓὔὕὖὗὙὛὝὟὺύῠῡῦῨῩῪΎ","ω":"ΏΩώὠὡὢὣὤὥὦὧὨὩὪὫὬὭὮὯὼώᾠᾡᾢᾣᾤᾥᾦᾧᾨᾩᾪᾫᾬᾭᾮᾯῲῳῴῶῷῺΏῼΩ","ϊ":"ΐΪῒΐῗ","β":"Βϐ","γ":"Γᴦ","δ":"Δ","ζ":"Ζ","θ":"Θϑϴ","κ":"Κϰ","λ":"Λᴧ","ν":"Ν","ξ":"Ξ","π":"Πϖᴨ","ρ":"ΡϱᴩῤῥῬ","σ":"ΣςϹ","τ":"Τ","φ":"Φϕ","χ":"Χ","ψ":"Ψᴪ","ϋ":"Ϋΰῢΰῧ","ϙ":"Ϙ","ϛ":"Ϛ","ϝ":"Ϝ","ϟ":"Ϟ","ϡ":"Ϡ","ϣ":"Ϣ","ϥ":"Ϥ","ϧ":"Ϧ","ϩ":"Ϩ","ϫ":"Ϫ","ϭ":"Ϭ","ϯ":"Ϯ","ς":"ϲ","ϸ":"Ϸ","ϻ":"Ϻ","е":"ЀЁЕѐёӖӗ","ђ":"Ђ","г":"ЃГѓ","є":"Є","ѕ":"Ѕ","і":"І","ї":"Ї","ј":"Ј","љ":"Љ","њ":"Њ","ћ":"Ћ","к":"ЌКќ","и":"ЍИЙйѝӢӣ","у":"ЎУўӮӯӲӳ","џ":"Џ","а":"АӐӑ","б":"Б","в":"В","д":"Д","ж":"ЖӁӂ","з":"З","л":"Лᴫ","м":"М","н":"Н","о":"О","п":"П","р":"Р","с":"С","т":"Т","ф":"Ф","х":"Х","ц":"Ц","ч":"Ч","ш":"Ш","щ":"Щ","ъ":"Ъ","ы":"Ы","ь":"Ь","э":"Э","ю":"Ю","я":"Я","ѡ":"Ѡ","ѣ":"Ѣ","ѥ":"Ѥ","ѧ":"Ѧ","ѩ":"Ѩ","ѫ":"Ѫ","ѭ":"Ѭ","ѯ":"Ѯ","ѱ":"Ѱ","ѳ":"Ѳ","ѵ":"ѴѶѷ","ѹ":"Ѹ","ѻ":"Ѻ","ѽ":"Ѽ","ѿ":"Ѿ","ҁ":"Ҁ","ҋ":"Ҋ","ҍ":"Ҍ","ҏ":"Ҏ","ґ":"Ґ","ғ":"Ғ","ҕ":"Ҕ","җ":"Җ","ҙ":"Ҙ","қ":"Қ","ҝ":"Ҝ","ҟ":"Ҟ","ҡ":"Ҡ","ң":"Ң","ҥ":"Ҥ","ҧ":"Ҧ","ҩ":"Ҩ","ҫ":"Ҫ","ҭ":"Ҭ","ү":"Ү","ұ":"Ұ","ҳ":"Ҳ","ҵ":"Ҵ","ҷ":"Ҷ","ҹ":"Ҹ","һ":"Һ","ҽ":"Ҽ","ҿ":"Ҿ","ӄ":"Ӄ","ӆ":"Ӆ","ӈ":"Ӈ","ӊ":"Ӊ","ӌ":"Ӌ","ӎ":"Ӎ","ӓ":"Ӓ","ӕ":"Ӕ","ә":"Ә","ӛ":"Ӛ","ӝ":"Ӝ","ӟ":"Ӟ","ӡ":"Ӡ","ӥ":"Ӥ","ӧ":"Ӧ","ө":"Ө","ӫ":"Ӫ","ӭ":"Ӭ","ӱ":"Ӱ","ӵ":"Ӵ","ӷ":"Ӷ","ӹ":"Ӹ","ӻ":"Ӻ","ӽ":"Ӽ","ӿ":"Ӿ","ԁ":"Ԁ","ԃ":"Ԃ","ԅ":"Ԅ","ԇ":"Ԇ","ԉ":"Ԉ","ԋ":"Ԋ","ԍ":"Ԍ","ԏ":"Ԏ","ԑ":"Ԑ","ԓ":"Ԓ","ԕ":"Ԕ","ԗ":"Ԗ","ԙ":"Ԙ","ԛ":"Ԛ","ԝ":"Ԝ","ԟ":"Ԟ","ԡ":"Ԡ","ԣ":"Ԣ","ԥ":"Ԥ","ԧ":"Ԧ","ա":"Ա","բ":"Բ","գ":"Գ","դ":"Դ","ե":"Ե","զ":"Զ","է":"Է","ը":"Ը","թ":"Թ","ժ":"Ժ","ի":"Ի","լ":"Լ","խ":"Խ","ծ":"Ծ","կ":"Կ","հ":"Հ","ձ":"Ձ","ղ":"Ղ","ճ":"Ճ","մ":"Մ","յ":"Յ","ն":"Ն","շ":"Շ","ո":"Ո","չ":"Չ","պ":"Պ","ջ":"Ջ","ռ":"Ռ","ս":"Ս","վ":"Վ","տ":"Տ","ր":"Ր","ց":"Ց","ւ":"Ւ","փ":"Փ","ք":"Ք","օ":"Օ","ֆ":"Ֆ","ا":"آأإ","و":"ؤ","ي":"ئى","ه":"ة","ە":"ۀ","ہ":"ۂ","ے":"ۓ","न":"ऩ","र":"ऱ","ळ":"ऴ","क":"क़","ख":"ख़","ग":"ग़","ज":"ज़","ड":"ड़","ढ":"ढ़","फ":"फ़","य":"य़","ড":"ড়","ঢ":"ঢ়","য":"য়","ਲ":"ਲ਼","ਸ":"ਸ਼","ਖ":"ਖ਼","ਗ":"ਗ਼","ਜ":"ਜ਼","ਫ":"ਫ਼","ଡ":"ଡ଼","ଢ":"ଢ଼","ஒ":"ஔ","ག":"གྷ","ཌ":"ཌྷ","ད":"དྷ","བ":"བྷ","ཛ":"ཛྷ","ཀ":"ཀྵ","ဥ":"ဦ","ⴀ":"Ⴀ","ⴁ":"Ⴁ","ⴂ":"Ⴂ","ⴃ":"Ⴃ","ⴄ":"Ⴄ","ⴅ":"Ⴅ","ⴆ":"Ⴆ","ⴇ":"Ⴇ","ⴈ":"Ⴈ","ⴉ":"Ⴉ","ⴊ":"Ⴊ","ⴋ":"Ⴋ","ⴌ":"Ⴌ","ⴍ":"Ⴍ","ⴎ":"Ⴎ","ⴏ":"Ⴏ","ⴐ":"Ⴐ","ⴑ":"Ⴑ","ⴒ":"Ⴒ","ⴓ":"Ⴓ","ⴔ":"Ⴔ","ⴕ":"Ⴕ","ⴖ":"Ⴖ","ⴗ":"Ⴗ","ⴘ":"Ⴘ","ⴙ":"Ⴙ","ⴚ":"Ⴚ","ⴛ":"Ⴛ","ⴜ":"Ⴜ","ⴝ":"Ⴝ","ⴞ":"Ⴞ","ⴟ":"Ⴟ","ⴠ":"Ⴠ","ⴡ":"Ⴡ","ⴢ":"Ⴢ","ⴣ":"Ⴣ","ⴤ":"Ⴤ","ⴥ":"Ⴥ","æ":"ᴁ","ð":"ᴆ","ł":"ᴌ","ḧ":"Ḧ","ẅ":"Ẅ","ẍ":"Ẍ","ỻ":"Ỻ","ỽ":"Ỽ","ỿ":"Ỿ",pts:"₧",tm:"™","ⅎ":"Ⅎ",4:"④",5:"⑤",6:"⑥",7:"⑦",8:"⑧",9:"⑨",10:"⑩",11:"⑪",12:"⑫",13:"⑬",14:"⑭",15:"⑮",16:"⑯",17:"⑰",18:"⑱",19:"⑲",20:"⑳",0:"⓪","ⰰ":"Ⰰ","ⰱ":"Ⰱ","ⰲ":"Ⰲ","ⰳ":"Ⰳ","ⰴ":"Ⰴ","ⰵ":"Ⰵ","ⰶ":"Ⰶ","ⰷ":"Ⰷ","ⰸ":"Ⰸ","ⰹ":"Ⰹ","ⰺ":"Ⰺ","ⰻ":"Ⰻ","ⰼ":"Ⰼ","ⰽ":"Ⰽ","ⰾ":"Ⰾ","ⰿ":"Ⰿ","ⱀ":"Ⱀ","ⱁ":"Ⱁ","ⱂ":"Ⱂ","ⱃ":"Ⱃ","ⱄ":"Ⱄ","ⱅ":"Ⱅ","ⱆ":"Ⱆ","ⱇ":"Ⱇ","ⱈ":"Ⱈ","ⱉ":"Ⱉ","ⱊ":"Ⱊ","ⱋ":"Ⱋ","ⱌ":"Ⱌ","ⱍ":"Ⱍ","ⱎ":"Ⱎ","ⱏ":"Ⱏ","ⱐ":"Ⱐ","ⱑ":"Ⱑ","ⱒ":"Ⱒ","ⱓ":"Ⱓ","ⱔ":"Ⱔ","ⱕ":"Ⱕ","ⱖ":"Ⱖ","ⱗ":"Ⱗ","ⱘ":"Ⱘ","ⱙ":"Ⱙ","ⱚ":"Ⱚ","ⱛ":"Ⱛ","ⱜ":"Ⱜ","ⱝ":"Ⱝ","ⱞ":"Ⱞ","ⱡ":"Ⱡ","ɫ":"Ɫ","ᵽ":"Ᵽ","ɽ":"Ɽ","ⱨ":"Ⱨ","ⱪ":"Ⱪ","ⱬ":"Ⱬ","ɑ":"Ɑ","ɱ":"Ɱ","ɐ":"Ɐ","ⱳ":"Ⱳ","ⱶ":"Ⱶ","ȿ":"Ȿ","ɀ":"Ɀ","ⲁ":"Ⲁ","ⲃ":"Ⲃ","ⲅ":"Ⲅ","ⲇ":"Ⲇ","ⲉ":"Ⲉ","ⲋ":"Ⲋ","ⲍ":"Ⲍ","ⲏ":"Ⲏ","ⲑ":"Ⲑ","ⲓ":"Ⲓ","ⲕ":"Ⲕ","ⲗ":"Ⲗ","ⲙ":"Ⲙ","ⲛ":"Ⲛ","ⲝ":"Ⲝ","ⲟ":"Ⲟ","ⲡ":"Ⲡ","ⲣ":"Ⲣ","ⲥ":"Ⲥ","ⲧ":"Ⲧ","ⲩ":"Ⲩ","ⲫ":"Ⲫ","ⲭ":"Ⲭ","ⲯ":"Ⲯ","ⲱ":"Ⲱ","ⲳ":"Ⲳ","ⲵ":"Ⲵ","ⲷ":"Ⲷ","ⲹ":"Ⲹ","ⲻ":"Ⲻ","ⲽ":"Ⲽ","ⲿ":"Ⲿ","ⳁ":"Ⳁ","ⳃ":"Ⳃ","ⳅ":"Ⳅ","ⳇ":"Ⳇ","ⳉ":"Ⳉ","ⳋ":"Ⳋ","ⳍ":"Ⳍ","ⳏ":"Ⳏ","ⳑ":"Ⳑ","ⳓ":"Ⳓ","ⳕ":"Ⳕ","ⳗ":"Ⳗ","ⳙ":"Ⳙ","ⳛ":"Ⳛ","ⳝ":"Ⳝ","ⳟ":"Ⳟ","ⳡ":"Ⳡ","ⳣ":"Ⳣ","ブ":"ヴ",21:"㉑",22:"㉒",23:"㉓",24:"㉔",25:"㉕",26:"㉖",27:"㉗",28:"㉘",29:"㉙",30:"㉚",31:"㉛",32:"㉜",33:"㉝",34:"㉞",35:"㉟","ㄱ":"㉠","ㄴ":"㉡","ㄷ":"㉢","ㄹ":"㉣","ㅁ":"㉤","ㅂ":"㉥","ㅅ":"㉦","ㅇ":"㉧","ㅈ":"㉨","ㅊ":"㉩","ㅋ":"㉪","ㅌ":"㉫","ㅍ":"㉬","ㅎ":"㉭","가":"㉮","나":"㉯","다":"㉰","라":"㉱","마":"㉲","바":"㉳","사":"㉴","아":"㉵","자":"㉶","차":"㉷","카":"㉸","타":"㉹","파":"㉺","하":"㉻","참고":"㉼","주의":"㉽","우":"㉾","一":"㊀","二":"㊁","三":"㊂","四":"㊃","五":"㊄","六":"㊅","七":"㊆","八":"㊇","九":"㊈","十":"㊉","月":"㊊","火":"㊋","水":"㊌","木":"㊍","金":"㊎","土":"㊏","日":"㊐","株":"㊑","有":"㊒","社":"㊓","名":"㊔","特":"㊕","財":"㊖","祝":"㊗","労":"㊘","秘":"㊙","男":"㊚","女":"㊛","適":"㊜","優":"㊝","印":"㊞","注":"㊟","項":"㊠","休":"㊡","写":"㊢","正":"㊣","上":"㊤","中":"㊥","下":"㊦","左":"㊧","右":"㊨","医":"㊩","宗":"㊪","学":"㊫","監":"㊬","企":"㊭","資":"㊮","協":"㊯","夜":"㊰",36:"㊱",37:"㊲",38:"㊳",39:"㊴",40:"㊵",41:"㊶",42:"㊷",43:"㊸",44:"㊹",45:"㊺",46:"㊻",47:"㊼",48:"㊽",49:"㊾",50:"㊿","1月":"㋀","2月":"㋁","3月":"㋂","4月":"㋃","5月":"㋄","6月":"㋅","7月":"㋆","8月":"㋇","9月":"㋈","10月":"㋉","11月":"㋊","12月":"㋋",hg:"㋌",erg:"㋍",ev:"㋎",ltd:"㋏","ア":"㋐","イ":"㋑","ウ":"㋒","エ":"㋓","オ":"㋔","カ":"㋕","キ":"㋖","ク":"㋗","ケ":"㋘","コ":"㋙","サ":"㋚","シ":"㋛","ス":"㋜","セ":"㋝","ソ":"㋞","タ":"㋟","チ":"㋠","ツ":"㋡","テ":"㋢","ト":"㋣","ナ":"㋤","ニ":"㋥","ヌ":"㋦","ネ":"㋧","ノ":"㋨","ハ":"㋩","ヒ":"㋪","フ":"㋫","ヘ":"㋬","ホ":"㋭","マ":"㋮","ミ":"㋯","ム":"㋰","メ":"㋱","モ":"㋲","ヤ":"㋳","ユ":"㋴","ヨ":"㋵","ラ":"㋶","リ":"㋷","ル":"㋸","レ":"㋹","ロ":"㋺","ワ":"㋻","ヰ":"㋼","ヱ":"㋽","ヲ":"㋾","アパート":"㌀","アルファ":"㌁","アンペア":"㌂","アール":"㌃","イニング":"㌄","インチ":"㌅","ウォン":"㌆","エスクード":"㌇","エーカー":"㌈","オンス":"㌉","オーム":"㌊","カイリ":"㌋","カラット":"㌌","カロリー":"㌍","ガロン":"㌎","ガンマ":"㌏","ギガ":"㌐","ギニー":"㌑","キュリー":"㌒","ギルダー":"㌓","キロ":"㌔","キログラム":"㌕","キロメートル":"㌖","キロワット":"㌗","グラム":"㌘","グラムトン":"㌙","クルゼイロ":"㌚","クローネ":"㌛","ケース":"㌜","コルナ":"㌝","コーポ":"㌞","サイクル":"㌟","サンチーム":"㌠","シリング":"㌡","センチ":"㌢","セント":"㌣","ダース":"㌤","デシ":"㌥","ドル":"㌦","トン":"㌧","ナノ":"㌨","ノット":"㌩","ハイツ":"㌪","パーセント":"㌫","パーツ":"㌬","バーレル":"㌭","ピアストル":"㌮","ピクル":"㌯","ピコ":"㌰","ビル":"㌱","ファラッド":"㌲","フィート":"㌳","ブッシェル":"㌴","フラン":"㌵","ヘクタール":"㌶","ペソ":"㌷","ペニヒ":"㌸","ヘルツ":"㌹","ペンス":"㌺","ページ":"㌻","ベータ":"㌼","ポイント":"㌽","ボルト":"㌾","ホン":"㌿","ポンド":"㍀","ホール":"㍁","ホーン":"㍂","マイクロ":"㍃","マイル":"㍄","マッハ":"㍅","マルク":"㍆","マンション":"㍇","ミクロン":"㍈","ミリ":"㍉","ミリバール":"㍊","メガ":"㍋","メガトン":"㍌","メートル":"㍍","ヤード":"㍎","ヤール":"㍏","ユアン":"㍐","リットル":"㍑","リラ":"㍒","ルピー":"㍓","ルーブル":"㍔","レム":"㍕","レントゲン":"㍖","ワット":"㍗","0点":"㍘","1点":"㍙","2点":"㍚","3点":"㍛","4点":"㍜","5点":"㍝","6点":"㍞","7点":"㍟","8点":"㍠","9点":"㍡","10点":"㍢","11点":"㍣","12点":"㍤","13点":"㍥","14点":"㍦","15点":"㍧","16点":"㍨","17点":"㍩","18点":"㍪","19点":"㍫","20点":"㍬","21点":"㍭","22点":"㍮","23点":"㍯","24点":"㍰",hpa:"㍱",da:"㍲",au:"㍳",bar:"㍴",ov:"㍵",pc:"㍶",dm:"㍷",dm2:"㍸",dm3:"㍹",iu:"㍺","平成":"㍻","昭和":"㍼","大正":"㍽","明治":"㍾","株式会社":"㍿",pa:"㎀㎩",na:"㎁","μa":"㎂",ma:"㎃",ka:"㎄",kb:"㎅",mb:"㎆㏔",gb:"㎇",cal:"㎈",kcal:"㎉",pf:"㎊",nf:"㎋","μf":"㎌","μg":"㎍",mg:"㎎",kg:"㎏",hz:"㎐",khz:"㎑",mhz:"㎒",ghz:"㎓",thz:"㎔","μℓ":"㎕","mℓ":"㎖","dℓ":"㎗","kℓ":"㎘",fm:"㎙",nm:"㎚","μm":"㎛",mm:"㎜",cm:"㎝",km:"㎞㏎",mm2:"㎟",cm2:"㎠",m2:"㎡",km2:"㎢",mm3:"㎣",cm3:"㎤",m3:"㎥",km3:"㎦",ms:"㎧㎳",ms2:"㎨",kpa:"㎪",mpa:"㎫",gpa:"㎬",rad:"㎭",rads:"㎮",rads2:"㎯",ps:"㎰",ns:"㎱","μs":"㎲",pv:"㎴",nv:"㎵","μv":"㎶",mv:"㎷㎹",kv:"㎸",pw:"㎺",nw:"㎻","μw":"㎼",mw:"㎽㎿",kw:"㎾","kω":"㏀","mω":"㏁",am:"㏂",bq:"㏃",cc:"㏄",cd:"㏅",ckg:"㏆",co:"㏇",db:"㏈",gy:"㏉",ha:"㏊",hp:"㏋","in":"㏌",kk:"㏍",kt:"㏏",lm:"㏐",ln:"㏑",log:"㏒",lx:"㏓",mil:"㏕",mol:"㏖",ph:"㏗",pm:"㏘",ppm:"㏙",pr:"㏚",sr:"㏛",sv:"㏜",wb:"㏝","1日":"㏠","2日":"㏡","3日":"㏢","4日":"㏣","5日":"㏤","6日":"㏥","7日":"㏦","8日":"㏧","9日":"㏨","10日":"㏩","11日":"㏪","12日":"㏫","13日":"㏬","14日":"㏭","15日":"㏮","16日":"㏯","17日":"㏰","18日":"㏱","19日":"㏲","20日":"㏳","21日":"㏴","22日":"㏵","23日":"㏶","24日":"㏷","25日":"㏸","26日":"㏹","27日":"㏺","28日":"㏻","29日":"㏼","30日":"㏽","31日":"㏾","ꙁ":"Ꙁ","ꙃ":"Ꙃ","ꙅ":"Ꙅ","ꙇ":"Ꙇ","ꙉ":"Ꙉ","ꙋ":"Ꙋ","ꙍ":"Ꙍ","ꙏ":"Ꙏ","ꙑ":"Ꙑ","ꙓ":"Ꙓ","ꙕ":"Ꙕ","ꙗ":"Ꙗ","ꙙ":"Ꙙ","ꙛ":"Ꙛ","ꙝ":"Ꙝ","ꙟ":"Ꙟ","ꙣ":"Ꙣ","ꙥ":"Ꙥ","ꙧ":"Ꙧ","ꙩ":"Ꙩ","ꙫ":"Ꙫ","ꙭ":"Ꙭ","ꚁ":"Ꚁ","ꚃ":"Ꚃ","ꚅ":"Ꚅ","ꚇ":"Ꚇ","ꚉ":"Ꚉ","ꚋ":"Ꚋ","ꚍ":"Ꚍ","ꚏ":"Ꚏ","ꚑ":"Ꚑ","ꚓ":"Ꚓ","ꚕ":"Ꚕ","ꚗ":"Ꚗ","ꜣ":"Ꜣ","ꜥ":"Ꜥ","ꜧ":"Ꜧ","ꜩ":"Ꜩ","ꜫ":"Ꜫ","ꜭ":"Ꜭ","ꜯ":"Ꜯ","ꜳ":"Ꜳ","ꜵ":"Ꜵ","ꜷ":"Ꜷ","ꜹ":"Ꜹ","ꜻ":"Ꜻ","ꜽ":"Ꜽ","ꜿ":"Ꜿ","ꝁ":"Ꝁ","ꝃ":"Ꝃ","ꝅ":"Ꝅ","ꝇ":"Ꝇ","ꝉ":"Ꝉ","ꝋ":"Ꝋ","ꝍ":"Ꝍ","ꝏ":"Ꝏ","ꝑ":"Ꝑ","ꝓ":"Ꝓ","ꝕ":"Ꝕ","ꝗ":"Ꝗ","ꝙ":"Ꝙ","ꝛ":"Ꝛ","ꝝ":"Ꝝ","ꝟ":"Ꝟ","ꝡ":"Ꝡ","ꝣ":"Ꝣ","ꝥ":"Ꝥ","ꝧ":"Ꝧ","ꝩ":"Ꝩ","ꝫ":"Ꝫ","ꝭ":"Ꝭ","ꝯ":"Ꝯ","ꝺ":"Ꝺ","ꝼ":"Ꝼ","ᵹ":"Ᵹ","ꝿ":"Ꝿ","ꞁ":"Ꞁ","ꞃ":"Ꞃ","ꞅ":"Ꞅ","ꞇ":"Ꞇ","ꞌ":"Ꞌ","ꞑ":"Ꞑ","ꞡ":"Ꞡ","ꞣ":"Ꞣ","ꞥ":"Ꞥ","ꞧ":"Ꞧ","ꞩ":"Ꞩ","י":"יִיּ","ײ":"ײַ","ש":"שׁשׂשּׁשּׂשּ","א":"אַאָאּ","ב":"בּבֿ","ג":"גּ","ד":"דּ","ה":"הּ","ו":"וּוֹ","ז":"זּ","ט":"טּ","ך":"ךּ","כ":"כּכֿ","ל":"לּ","מ":"מּ","נ":"נּ","ס":"סּ","ף":"ףּ","פ":"פּפֿ","צ":"צּ","ק":"קּ","ר":"רּ","ת":"תּ"}
}),define=function(e){function t(){define=e,e("oil.filter",["require","exports","msfuncy","oil.map","oil.utils","msnorm"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","oil.map","oil.utils","msnorm"],function(e,t,r,n,i,o){function s(e,t,r){if(!t)return null;var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i](r,t[i]));return n}function u(e,r,n){for(var i,o=[],s=0,u=n.length;u>s;s++)i=n[s],i&&o.push({score:t.scoreItem(e,i,r),data:i});return o}function a(e,t){for(var r,n=0,i=t.length,o=[];i>n;n++)r=t[n],e(r.score,r.data)&&o.push(r.data);return o}function c(e,t,n){for(var i,o=0,s=n.length,u=[];s>o;o++){i=r.extend({},n[o]);for(var a in e)e.hasOwnProperty(a)&&i[a]&&(i[a]=e[a](t,i[a]));u.push(i)}return u}function l(e,r){if(!e||!r)return!1;for(var n=0,i=e.length;i>n;n++)if(t.contains(e[n],r))return!0;return!1}function f(e){return function(r,n){if(!n||!r)return!1;var i={};"undefined"!=typeof e&&(i=e);for(var o=n.split(t.wordSeparatorRegExp),s=0;s<r.length;s++){i[r[s]]||(i[r[s]]=!1);for(var u=0;u<o.length;u++)t.begins(r[s],o[u])&&(i[r[s]]=!0)}var a=!0;for(var c in i)i[c]||(a=!1);return a}}function p(e,r){if(!r||!e)return!1;for(var n=r.split(t.wordSeparatorRegExp),i=0;i<e.length;i++)for(var o=0;o<n.length;o++)if(t.begins(e[i],n[o]))return!0;return!1}function h(e,t){return e&&t&&0==t.toLowerCase().indexOf(e.toLowerCase())?!0:!1}function d(e,t){return e&&t&&-1!==t.toLowerCase().indexOf(e.toLowerCase())?!0:!1}function m(e,r,n,i){if(e&&r){var s,u=o.normalize(r),a=e.map(function(e){return o.normalize(e)});if(1===e.length&&""===e[0])return r;s=t.getHighlightIndexes(a,u,i);for(var c=0;c<s.length;c++){var l=s[c].offset,f=s[c].word,p=r.slice(0,l),h=r.slice(l,l+f.length),d=r.slice(l+f.length);r=p+"<"+n+">"+h+"</"+n+">"+d}}return r}function g(e,r){return t.createHighlightedText(e,r,"mark",t.infixSearchRegExp)}function v(e){return new RegExp("(^|"+t.wordSeparators+")"+w(e),"ig")}function b(e){return new RegExp(w(e),"ig")}function y(e){return!e||""===e.replace(t.wordSeparatorRegExp,"")}function w(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function x(e,t,r){if(!e)return[];var n;t=t.toLowerCase();for(var i={},o=0;o<e.length&&e[o];o++)for(var s=r(e[o].toLowerCase());n=s.exec(t);)_(e[o],n,i);var u=E(i);return u.length>0&&S(u,t),u}function S(e,t){for(var r=e[e.length-1].offset+e[e.length-1].word.length,n=e.length-2;n>=0;n--){var i=e[n].offset+e[n].word.length-1;e[n].offset<r?i>r?e[n].offset<r&&(e[n].word=t.substring(r,e[n].offset+e[n].word.length),e[n].offset=r):e.splice(n,1):r=i}}function _(e,t,r){var n=t[1]&&t[1].length?t.index+t[1].length:t.index;(!r[n]||r[n].length<e.length)&&(r[n]=e)}function E(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push({offset:parseInt(r),word:e[r]});return t.sort(function(e,t){return t.offset-e.offset})}function R(e){return function(t){return i.etrim(t).split(e)}}function T(e,r,n){"undefined"==typeof n&&(n=!0);var i="i",o=t.prefixSearchRegExp,s=t.wordSeparatorTokenizer(e);return n||(s=[e],o=t.infixSearchRegExp),t.createHighlightedText(s,r,i,o)}function D(e,r){return t.createHighlightedText(e,r,"mark",t.prefixSearchRegExp)}function C(e,r){var n="i";return t.createHighlightedText([i.etrim(e)],r,n,t.infixSearchRegExp)}function P(e,r){var n="i",i=t.wordSeparatorTokenizer(e);return t.createHighlightedText(i,r,n,t.prefixSearchRegExp)}function O(e,i){return n.propMap(["term",e,"isPrefixSearch"],i,r.splat(t.createHighlightedTextUsingTagI))}function I(e,r,n){var i=t.wordSeparatorTokenizer(r);return e=t.search(n.searchSpec,i,e),e=t.filterScoredData(n.scorePredicate,e),t.highlightData(n.highlightSpec,i,e)}function N(e,r,n){if(t.termIsEmpty(e))return!0;var i=n,o=t.wordSeparatorTokenizer(e),s=t.scoreItem(i.searchSpec,r,o);return i.scorePredicate(s)}function M(e,r){return t.filterResults(e,r,new L)}function A(e,r){return t.filterResults(e,r,new F)}function k(e,t){return t=t?"<$1"+t+">":"",e&&r.isString(e)&&(e=e.replace(/\s*<ddd\/>/g,"...").replace(/<(\/?)c0>/g,t).replace(/[\r\n]+/g," ")),e}function q(e,r){var n=t.wordSeparatorTokenizer(r),i=new L;return t.highlightData(i.highlightSpec,n,e)}t.scoreItem=s,t.search=u,t.filterScoredData=a,t.highlightData=c,t.anyWord=l,t.prefixWord=f,t.prefixWordOr=p,t.begins=h,t.contains=d,t.createHighlightedText=m,t.wildcardHighlight=g,t.wordSeparators='[\\.\\:\\;\\,\\s-_\\(\\)\\/\\"\\u201c\\xab\\!\\#\\&\\+\\%\\¤\\<\\>\\@\\+\\=]',t.wordSeparatorRegExp=new RegExp(t.wordSeparators,"g"),t.prefixSearchRegExp=v,t.infixSearchRegExp=b,t.termIsEmpty=y,t.getHighlightIndexes=x,t.tokenizeByCharacter=R,t.whitespaceTokenizer=t.tokenizeByCharacter(" "),t.wordSeparatorTokenizer=function(e){return e.replace(new RegExp("^"+t.wordSeparators+"+|"+t.wordSeparators+"+$|"+t.wordSeparators+"+(?="+t.wordSeparators+")","g"),"").split(t.wordSeparatorRegExp)},t.createHighlightedTextUsingTagI=T,t.prefixHighlightUsingTagMark=D,t.infixHighlight=C,t.prefixHighlight=P,t.highlightMapper=O,t.filterResults=I,t.filterItem=N,t.filterPeopleSuggestions=M,t.filterTags=A,t.replaceServerHighlighting=k,t.highlightPeopleSuggestions=q;var L=function(){function e(){this.searchSpec={msoilNormalizedName:t.prefixWord()},this.highlightSpec={PreferredName:t.prefixHighlightUsingTagMark}}return e.prototype.scorePredicate=function(e){return e.msoilNormalizedName},e}();t.PeopleSuggestionsSearchSpec=L;var F=function(){function e(){this.searchSpec={name:t.prefixWord()},this.highlightSpec={highlightName:t.prefixHighlightUsingTagMark}}return e.prototype.scorePredicate=function(e){return e.name},e}();t.TagSearchSpec=F}),define=function(e){function t(){define=e,e("rx.binding",["rx","exports"],arguments[arguments.length-1])}return t.amd={},t}(define),function(e,t){var r="object"==typeof exports&&exports&&("object"==typeof e&&e&&e==e.global&&(window=e),exports);"function"==typeof define&&define.amd?define(["rx","exports"],function(r,n){return e.Rx=t(e,n,r),e.Rx}):"object"==typeof module&&module&&module.exports==r?module.exports=t(e,module.exports,require("./rx")):e.Rx=t(e,{},e.Rx)}(this,function(e,t,r){function n(){if(this.isDisposed)throw new Error(v)}var i=r.Observable,o=i.prototype,s=r.Internals.AnonymousObservable,u=r.Subject,a=r.AsyncSubject,c=r.Observer,l=r.Internals.ScheduledObserver,f=r.Disposable.create,p=r.Disposable.empty,h=r.CompositeDisposable,d=r.Scheduler.currentThread,m=r.Internals.inherits,g=r.Internals.addProperties,v="Object has been disposed";o.multicast=function(e,t){var r=this;return"function"==typeof e?new s(function(n){var i=r.multicast(e());return new h(t(i).subscribe(n),i.connect())}):new x(r,e)},o.publish=function(e){return e?this.multicast(function(){return new u},e):this.multicast(new u)},o.publishLast=function(e){return e?this.multicast(function(){return new a},e):this.multicast(new a)},o.publishValue=function(e,t){return 2===arguments.length?this.multicast(function(){return new y(t)},e):this.multicast(new y(e))},o.replay=function(e,t,r,n){return e?this.multicast(function(){return new w(t,r,n)},e):this.multicast(new w(t,r,n))};var b=function(e,t){this.subject=e,this.observer=t};b.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1),this.observer=null}};var y=r.BehaviorSubject=function(){function e(e){var t;return n.call(this),this.isStopped?(t=this.exception,t?e.onError(t):e.onCompleted(),p):(this.observers.push(e),e.onNext(this.value),new b(this,e))}function t(r){t.super_.constructor.call(this,e),this.value=r,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.exception=null}return m(t,i),g(t.prototype,c,{onCompleted:function(){if(n.call(this),!this.isStopped){var e=this.observers.slice(0);this.isStopped=!0;for(var t=0,r=e.length;r>t;t++)e[t].onCompleted();this.observers=[]}},onError:function(e){if(n.call(this),!this.isStopped){var t=this.observers.slice(0);this.isStopped=!0,this.exception=e;for(var r=0,i=t.length;i>r;r++)t[r].onError(e);this.observers=[]}},onNext:function(e){if(n.call(this),!this.isStopped){this.value=e;for(var t=this.observers.slice(0),r=0,i=t.length;i>r;r++)t[r].onNext(e)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null}}),t}(),w=r.ReplaySubject=function(){function e(e){var t=new l(this.scheduler,e),i=new r(this,t);n.call(this),this._trim(this.scheduler.now()),this.observers.push(t);for(var o=this.q.length,s=0,u=this.q.length;u>s;s++)t.onNext(this.q[s].value);return this.hasError?(o++,t.onError(this.error)):this.isStopped&&(o++,t.onCompleted()),t.ensureActive(o),i}function t(r,n,i){this.bufferSize=null==r?Number.MAX_VALUE:r,this.window=null==n?Number.MAX_VALUE:n,this.scheduler=i||d,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.super_.constructor.call(this,e)}var r=function(e,t){this.subject=e,this.observer=t};return r.prototype.dispose=function(){if(this.observer.dispose(),!this.subject.isDisposed){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1)}},m(t,i),g(t.prototype,c,{_trim:function(e){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&e-this.q[0].interval>this.window;)this.q.shift()},onNext:function(e){var t;if(n.call(this),!this.isStopped){var r=this.scheduler.now();this.q.push({interval:r,value:e}),this._trim(r);for(var i=this.observers.slice(0),o=0,s=i.length;s>o;o++)t=i[o],t.onNext(e),t.ensureActive()}},onError:function(e){var t;if(n.call(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;var r=this.scheduler.now();this._trim(r);for(var i=this.observers.slice(0),o=0,s=i.length;s>o;o++)t=i[o],t.onError(e),t.ensureActive();this.observers=[]}},onCompleted:function(){var e;if(n.call(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var r=this.observers.slice(0),i=0,o=r.length;o>i;i++)e=r[i],e.onCompleted(),e.ensureActive();this.observers=[]}},dispose:function(){this.isDisposed=!0,this.observers=null}}),t}(),x=function(){function e(t,r){var n={subject:r,source:t.asObservable(),hasSubscription:!1,subscription:null};this.connect=function(){return n.hasSubscription||(n.hasSubscription=!0,n.subscription=new h(n.source.subscribe(n.subject),f(function(){n.hasSubscription=!1}))),n.subscription};var i=function(e){return n.subject.subscribe(e)};e.super_.constructor.call(this,i)}return m(e,i),e.prototype.connect=function(){return this.connect()},e.prototype.refCount=function(){var e=null,t=0,r=this;return new s(function(n){var i,o;return t++,i=1===t,o=r.subscribe(n),i&&(e=r.connect()),f(function(){o.dispose(),t--,0===t&&e.dispose()})})},e}();return r}),define=function(e){function t(){define=e,e("rx.time",["rx","exports"],arguments[arguments.length-1])}return t.amd={},t}(define),function(e,t){var r="object"==typeof exports&&exports&&("object"==typeof e&&e&&e==e.global&&(window=e),exports);"function"==typeof define&&define.amd?define(["rx","exports"],function(r,n){return e.Rx=t(e,n,r),e.Rx}):"object"==typeof module&&module&&module.exports==r?module.exports=t(e,module.exports,require("./rx")):e.Rx=t(e,{},e.Rx)}(this,function(e,t,r,n){function i(e,t){return new h(function(r){return t.scheduleWithAbsolute(e,function(){r.onNext(0),r.onCompleted()})})}function o(e,t,r){var n=R(t);return new h(function(t){var i=0,o=e;return r.scheduleRecursiveWithAbsolute(o,function(e){var s;n>0&&(s=r.now(),o+=n,s>=o&&(o=s+n)),t.onNext(i++),e(o)})})}function s(e,t){var r=R(e);return new h(function(e){return t.scheduleWithRelative(r,function(){e.onNext(0),e.onCompleted()})})}function u(e,t,r){return e===t?new h(function(e){return r.schedulePeriodicWithState(0,t,function(t){return e.onNext(t),t+1})}):d(function(){return o(r.now()+e,t,r)})}function a(e,t){var r=this;return new h(function(n){var i,o=!1,s=new w,u=null,a=[],c=!1;return i=r.materialize().timestamp(t).subscribe(function(r){var i,l;"E"===r.value.kind?(a=[],a.push(r),u=r.value.exception,l=!c):(a.push({value:r.value,timestamp:r.timestamp+e}),l=!o,o=!0),l&&(null!==u?n.onError(u):(i=new y,s.disposable(i),i.disposable(t.scheduleRecursiveWithRelative(e,function(e){var r,i,s,l;if(null===u){c=!0;do s=null,a.length>0&&a[0].timestamp-t.now()<=0&&(s=a.shift().value),null!==s&&s.accept(n);while(null!==s);l=!1,i=0,a.length>0?(l=!0,i=Math.max(0,a[0].timestamp-t.now())):o=!1,r=u,c=!1,null!==r?n.onError(r):l&&e(i)}}))))}),new x(i,s)})}function c(e,t){var r=this;return d(function(){var n=e-t.now();return a.call(r,n,t)})}function l(e,t){return new h(function(r){function n(){s&&(s=!1,r.onNext(o)),i&&r.onCompleted()}var i,o,s;return new x(e.subscribe(function(e){s=!0,o=e},r.onError.bind(r),function(){i=!0}),t.subscribe(n,r.onError.bind(r),n))})}var f=r.Observable,p=f.prototype,h=r.Internals.AnonymousObservable,d=f.defer,m=f.empty,g=f.throwException,v=f.fromArray,b=r.Scheduler.timeout,y=r.SingleAssignmentDisposable,w=r.SerialDisposable,x=r.CompositeDisposable,S=r.RefCountDisposable,_=r.Subject,E=(r.Internals.BinaryObserver,r.Internals.addRef),R=r.Scheduler.normalize,T=f.interval=function(e,t){return t||(t=b),u(e,e,t)},D=f.timer=function(e,t,r){var a;return r||(r=b),t!==n&&"number"==typeof t?a=t:t!==n&&"object"==typeof t&&(r=t),e instanceof Date&&a===n?i(e.getTime(),r):e instanceof Date&&a!==n?(a=t,o(e.getTime(),a,r)):a===n?s(e,r):u(e,a,r)};return p.delay=function(e,t){return t||(t=b),e instanceof Date?c.call(this,e.getTime(),t):a.call(this,e,t)},p.throttle=function(e,t){t||(t=b);var r=this;return new h(function(n){var i,o=new w,s=!1,u=0,a=null;return i=r.subscribe(function(r){var i,c;s=!0,a=r,u++,i=u,c=new y,o.disposable(c),c.disposable(t.scheduleWithRelative(e,function(){s&&u===i&&n.onNext(a),s=!1}))},function(e){o.dispose(),n.onError(e),s=!1,u++},function(){o.dispose(),s&&n.onNext(a),n.onCompleted(),s=!1,u++}),new x(i,o)})},p.windowWithTime=function(e,t,r){var i,o=this;return t===n&&(i=e),r===n&&(r=b),"number"==typeof t?i=t:"object"==typeof t&&(i=e,r=t),new h(function(t){var n,s,u,a=i,c=e,l=[],f=new w,p=0;return s=new x(f),u=new S(s),n=function(){var e,o,s,h,d;s=new y,f.disposable(s),o=!1,e=!1,c===a?(o=!0,e=!0):a>c?o=!0:e=!0,h=o?c:a,d=h-p,p=h,o&&(c+=i),e&&(a+=i),s.disposable(r.scheduleWithRelative(d,function(){var r;e&&(r=new _,l.push(r),t.onNext(E(r,u))),o&&(r=l.shift(),r.onCompleted()),n()}))},l.push(new _),t.onNext(E(l[0],u)),n(),s.add(o.subscribe(function(e){var t,r;for(t=0;t<l.length;t++)r=l[t],r.onNext(e)},function(e){var r,n;for(r=0;r<l.length;r++)n=l[r],n.onError(e);t.onError(e)},function(){var e,r;for(e=0;e<l.length;e++)r=l[e],r.onCompleted();t.onCompleted()})),u})},p.windowWithTimeOrCount=function(e,t,r){var n=this;return r||(r=b),new h(function(i){var o,s,u,a,c=0,l=new w,f=0;return s=new x(l),u=new S(s),o=function(t){var n=new y;l.disposable(n),n.disposable(r.scheduleWithRelative(e,function(){var e;t===f&&(c=0,e=++f,a.onCompleted(),a=new _,i.onNext(E(a,u)),o(e))}))},a=new _,i.onNext(E(a,u)),o(0),s.add(n.subscribe(function(e){var r=0,n=!1;a.onNext(e),c++,c===t&&(n=!0,c=0,r=++f,a.onCompleted(),a=new _,i.onNext(E(a,u))),n&&o(r)},function(e){a.onError(e),i.onError(e)},function(){a.onCompleted(),i.onCompleted()})),u})},p.bufferWithTime=function(e,t,r){var i;return t===n&&(i=e),r||(r=b),"number"==typeof t?i=t:"object"==typeof t&&(i=e,r=t),this.windowWithTime(e,i,r).selectMany(function(e){return e.toArray()})},p.bufferWithTimeOrCount=function(e,t,r){return r||(r=b),this.windowWithTimeOrCount(e,t,r).selectMany(function(e){return e.toArray()})},p.timeInterval=function(e){var t=this;return e||(e=b),d(function(){var r=e.now();return t.select(function(t){var n=e.now(),i=n-r;return r=n,{value:t,interval:i}})})},p.timestamp=function(e){return e||(e=b),this.select(function(t){return{value:t,timestamp:e.now()}})},p.sample=function(e,t){return t||(t=b),"number"==typeof e?l(this,T(e,t)):l(this,e)},p.timeout=function(e,t,r){var n,i=this;return t||(t=g(new Error("Timeout"))),r||(r=b),n=e instanceof Date?function(e,t){r.scheduleWithAbsolute(e,t)}:function(e,t){r.scheduleWithRelative(e,t)},new h(function(r){var o,s=0,u=new y,a=new w,c=!1,l=new w;return a.disposable(u),o=function(){var i=s;l.disposable(n(e,function(){c=s===i;var e=c;e&&a.disposable(t.subscribe(r))}))},o(),u.disposable(i.subscribe(function(e){var t=!c;t&&(s++,r.onNext(e),o())},function(e){var t=!c;t&&(s++,r.onError(e))},function(){var e=!c;e&&(s++,r.onCompleted())})),new x(a,l)})},f.generateWithAbsoluteTime=function(e,t,r,n,i,o){return o||(o=b),new h(function(s){var u,a,c=!0,l=!1,f=e;return o.scheduleRecursiveWithAbsolute(o.now(),function(e){l&&s.onNext(u);try{c?c=!1:f=r(f),l=t(f),l&&(u=n(f),a=i(f))}catch(o){return void s.onError(o)}l?e(a):s.onCompleted()})})},f.generateWithRelativeTime=function(e,t,r,n,i,o){return o||(o=b),new h(function(s){var u,a,c=!0,l=!1,f=e;return o.scheduleRecursiveWithRelative(0,function(e){l&&s.onNext(u);try{c?c=!1:f=r(f),l=t(f),l&&(u=n(f),a=i(f))}catch(o){return void s.onError(o)}l?e(a):s.onCompleted()})})},p.delaySubscription=function(e,t){return t||(t=b),this.delayWithSelector(D(e,t),function(){return m()})},p.delayWithSelector=function(e,t){var r,n,i=this;return"function"==typeof e?n=e:(r=e,n=t),new h(function(e){var t=new x,o=!1,s=function(){o&&0===t.length&&e.onCompleted()},u=new w,a=function(){u.setDisposable(i.subscribe(function(r){var i;try{i=n(r)}catch(o){return void e.onError(o)}var u=new y;t.add(u),u.setDisposable(i.subscribe(function(){e.onNext(r),t.remove(u),s()},e.onError.bind(e),function(){e.onNext(r),t.remove(u),s()}))},e.onError.bind(e),function(){o=!0,u.dispose(),s()}))};return r?u.setDisposable(r.subscribe(function(){a()},e.onError.bind(onError),function(){a()})):a(),new x(u,t)})},p.timeoutWithSelector=function(e,t,r){e||(e=observableNever()),r||(r=g(new Error("Timeout")));var n=this;return new h(function(i){var o=new w,s=new w,u=new y;o.setDisposable(u);var a=0,c=!1,l=function(e){var t=a,n=function(){return a===t},u=new y;s.setDisposable(u),u.setDisposable(e.subscribe(function(){n()&&o.setDisposable(r.subscribe(i)),u.dispose()},function(e){n()&&i.onError(e)},function(){n()&&o.setDisposable(r.subscribe(i))}))};l(e);var f=function(){var e=!c;return e&&a++,e};return u.setDisposable(n.subscribe(function(e){if(f()){i.onNext(e);var r;try{r=t(e)}catch(n){return void i.onError(n)}l(r)}},function(e){f()&&i.onError(e)},function(){f()&&i.onCompleted()})),new x(o,s)})},p.throttleWithSelector=function(e){var t=this;return new h(function(r){var n,i=!1,o=new w,s=0,u=t.subscribe(function(t){var u;try{u=e(t)}catch(a){return void r.onError(a)}i=!0,n=t,s++;var c=s,l=new y;o.setDisposable(l),l.setDisposable(u.subscribe(function(){i&&s===c&&r.onNext(n),i=!1,l.dispose()},r.onError.bind(r),function(){i&&s===c&&r.onNext(n),i=!1,l.dispose()}))},function(e){o.dispose(),r.onError(e),i=!1,s++},function(){o.dispose(),i&&r.onNext(n),r.onCompleted(),i=!1,s++});return new x(u,o)})},p.skipLastWithTime=function(e,t){t||(t=b);var r=this;return new h(function(n){var i=[];return r.subscribe(function(r){var o=t.now();for(i.push({interval:o,value:r});i.length>0&&o-i[0].interval>=e;)n.onNext(i.shift().value)},n.onError.bind(n),function(){for(var r=t.now();i.length>0&&r-i[0].interval>=e;)n.onNext(i.shift().value);n.onCompleted()})})},p.takeLastWithTime=function(e,t,r){return this.takeLastBufferWithTime(e,t).selectMany(function(e){return v(e,r)})},p.takeLastBufferWithTime=function(e,t){var r=this;return t||(t=b),new h(function(n){var i=[];return r.subscribe(function(r){var n=t.now();for(i.push({interval:n,value:r});i.length>0&&n-i[0].interval>=e;)i.shift()},n.onError.bind(n),function(){for(var r=t.now(),o=[];i.length>0;){var s=i.shift();r-s.interval<=e&&o.push(s.value)}n.onNext(o),n.onCompleted()})})},p.takeWithTime=function(e,t){var r=this;return t||(t=b),new h(function(n){var i=t.scheduleWithRelative(e,function(){n.onCompleted()});return new x(i,r.subscribe(n))})},p.skipWithTime=function(e,t){var r=this;return t||(t=b),new h(function(n){var i=!1,o=t.scheduleWithRelative(e,function(){i=!0}),s=r.subscribe(function(e){i&&n.onNext(e)},n.onError.bind(n),n.onCompleted.bind(n));return new x(o,s)})},p.skipUntilWithTime=function(e,t){t||(t=b);var r=this;return new h(function(n){var i=!1,o=t.scheduleWithAbsolute(e,function(){i=!0}),s=r.subscribe(function(e){i&&n.onNext(e)},n.onError.bind(n),n.onCompleted.bind(n));return new x(o,s)})},p.takeUntilWithTime=function(e,t){t||(t=b);var r=this;return new h(function(n){return new x(t.scheduleWithAbsolute(e,function(){n.onCompleted()}),r.subscribe(n))})},r}),define=function(e){function t(){define=e,e("oil.sputils",["require","exports","msfuncy","rx","oil.msg","oil.map","oil.utils","oil.filter","rx.binding","rx.time","rx.html"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","rx","oil.msg","oil.map","oil.utils","oil.filter","rx.binding","rx.time","rx.html"],function(e,t,r,n,i,o,s,u){function a(e){return r.explain("Processing JSON response",r.pipe(r.getter("responseText"),r.explain("Parsing JSON",JSON.parse),r.explain("Traversing path '"+e.join(".")+"'",r.bind(r.oquery,e))))}function c(e){return r.explain("Processing result items",r.bind(r.map,r.pipe(r.bind(r.oquery,"Cells.results".split(".")),t.keyValuesToObject,function(t){return r.aggregate(e,r.lateBind(t),{})})))}function l(e,n){var i="d.query.PrimaryQueryResult".split("."),o="RelevantResults.Table.Rows.results".split(".");return r.pipe(r.explain("Traversing path '"+i.join(".")+"'",r.bind(r.oquery,i)),function(e){return e?(n&&(n.msoilQueryCorrelationId=e.QueryId),r.oquery(o,e)):[]},t.resultItemsProcessor(e))}function f(e){for(var t={},r=0;r<e.length;r++)t[e[r].Key]=e[r].Value;return t}function p(e){var t,r=[];for(var n in e)e.hasOwnProperty(n)&&(t=null===e[n]||void 0===e[n]?"null":e[n].toString(),r.push({__metadata:{type:"SP.KeyValue"},Key:n,Value:t,ValueType:"Edm.String"}));return r}function h(e){var t,n,i=e?r.map(s.trim,e.split("| ")):[],o={emailAddress:i.length>0&&i[0].indexOf("@")>-1?i[0]:"",preferredName:i.length>1?i[1]:"",profileId:"",accountName:"",userName:""};return i.length>2&&(t=i[2].split(" "),o.profileId=t[0],o.accountName=t[1]||"",n=o.accountName.split("|"),o.userName=n.length>2?n[2]:""),o}function d(e){var t=new RegExp("[\\s\\S]*<"+e+"[^>]*>([\\s\\S]*)</"+e+">[\\s\\S]*","i");return function(e){return e.replace(/\<t0\/\>/g,"").replace(t,"$1")}}function m(e){var t=e&&e.d;if(!t)return!1;if(t.postquery)t=t.postquery;else{if(!t.query)return!1;t=t.query}return t.PrimaryQueryResult&&t.PrimaryQueryResult.RelevantResults&&t.PrimaryQueryResult.RelevantResults.Table&&t.PrimaryQueryResult.RelevantResults.Table.Rows&&t.PrimaryQueryResult.RelevantResults.Table.Rows.results}function g(e){var t="undefined"!=typeof e.FileExtension&&null!==e.FileExtension,r=t?e.FileExtension:"";return r.toLowerCase()}function v(){return"undefined"==typeof _spPageContextInfo?"":_spPageContextInfo.siteServerRelativeUrl}function b(e){return t.getServerSiteRelativeUrl().replace(/\/$/,"")+e}function y(){return t.prependServerSiteRelativeUrl(t.postQueryUrl)}function w(){return t.prependServerSiteRelativeUrl(t.contextInfoUrl)}function x(e){return"/_api/search/query?querytext='*'&selectproperties='editorowsuser,authorowsuser,Filename,SPSiteURL,Title,ParentLink,ListItemID,ListID,contentclass, IsDocument, IsContainer,FileExtension,SecondaryFileExtension,OriginalPath,DefaultEncodingURL,ServerRedirectedURL,ServerRedirectedPreviewURL,LastModifiedTime,SharedWithUsersOWSUser,HitHighlightedSummary'&sortlist='LastModifiedTime:descending'&querytemplate='SharedWithUsersOWSUser:{User.PreferredName}'&SummaryLength="+t.summaryLength+"&RowLimit="+e}function S(e,r,n,i,o){var s={request:{__metadata:{type:"Microsoft.Office.Server.Search.REST.SearchRequest"},Querytext:r,QueryTemplate:e,SelectProperties:{results:["editorowsuser","authorowsuser","Filename","SPSiteURL","Title","ParentLink","ListItemID","ListID","contentclass","IsDocument","IsContainer","FileExtension","SecondaryFileExtension","OriginalPath","DefaultEncodingURL","ServerRedirectedURL","Path","ServerRedirectedPreviewURL","LastModifiedTime","SharedWithUsersOWSUser","ContentTypeId","HitHighlightedSummary"]},SummaryLength:t.summaryLength,SortList:{results:[{Property:"LastModifiedTime",Direction:"1"}]},ClientType:"QueryBoxSkyDrive",RowLimit:n}};return i||delete s.request.SortList,o&&(s.request.Culture=o),JSON.stringify(s)}function _(e){if(!t.validSearchResult(e))return[];var r=e.d;return r.postquery?r=r.postquery:r.query&&(r=r.query),r.PrimaryQueryResult.RelevantResults.Table.Rows.results}function E(e){return e&&"ui-ui"!==e.toLowerCase()?-1!==e.indexOf(",")?e.split(",")[0]:e:navigator.language||s.getNavigatorUserLanguage()}function R(e,t){for(var r=0;r<e.length;r++)if(e[r].Key===t)return e[r].Value;return""}function T(e){if(t.DateTime.SPRelativeDateTime){var r=!0,n=!1;return isNaN(e.getTime())?"":t.DateTime.SPRelativeDateTime.getRelativeDateTimeString(e,r,t.DateTime.SPCalendarType.none,n)}}function D(){return"undefined"==typeof _spPageContextInfo?"":_spPageContextInfo.siteAbsoluteUrl}function C(){return"undefined"==typeof _spPageContextInfo?"":_spPageContextInfo.webAbsoluteUrl}function P(e){return t._fileDescMap[e]||MS.QueryBox.Strings.unknown}function O(e){if(!e||"number"!=typeof e.length)throw new Error("Parameter sitesIFollow must be an array.");for(var t=[],r=0;r<e.length;r++)t.push(e[r].url);return t}function I(e){var t=r.splat(r.interleave)(e);return r.compact(t)}function N(e){return e&&"STS_ListItem_851"!==e.contentclass&&"true"===e.IsContainer&&"false"===e.IsDocument}function M(e,n){r.asrt(r.isString,"Target must be a string.",e),r.asrt(r.isObject,"Message source must be specified.",n);var s="Edges",u={getSources:r.k([s]),getTarget:r.k(e)},a=n.where(function(e){return e.getType()===i.MessageTypes.topRelatedPeopleMessage}).take(1).select(function(e){return r.indexBy(e.getData(),r.getter("msoilDocId"))}).select(function(n){return o.propMap(s,e,r.bind(t.processEdges,n))}).publishLast();return a.connect(),r.extend(a,u)}function A(e,t){if(!t)return t;var n=JSON.parse(t);return r.map(function(t){var n=t.Properties.Blob.length>0?JSON.parse(s.charCodesToString(t.Properties.Blob)):{};return n.ActorId&&e[n.ActorId]&&(t.Actor=r.extend({},e[n.ActorId])),n.ActorCount&&(t.ActorCount=n.ActorCount),t},n)}function k(e){var t="*";return e&&(u.wordSeparatorRegExp.test(e)&&(e=u.wordSeparatorTokenizer(e).join(" ")),e=e.replace(/\'/g,"''"),t=e.lastIndexOf("*")===e.length-1||e.lastIndexOf(" ")===e.length-1?s.etrim(e):"(("+e+") OR ("+e+"*))"),t}function q(){var e="";return"undefined"!=typeof _spPageContextInfo&&(e=_spPageContextInfo.userLoginName),e}t.summaryLength=100;var L=window;t.DateTime=L.SP&&L.SP.DateTimeUtil||{},t.jsonResponseProcessor=a,t.resultItemsProcessor=c,t.mapResults=l,t.keyValuesToObject=f,t.objectToKeyValues=p,t.parseOwsUserString=h,t.hitHighlightedPropertyExtractor=d,t.validSearchResult=m,t.getSearchItemFileExtension=g,t.getServerSiteRelativeUrl=v,t.prependServerSiteRelativeUrl=b,t.getPostQueryUrl=y,t.getContextInfoUrl=w,t.getSharedWithUserUrl=x,t.postQueryUrl="/_api/search/postquery",t.contextInfoUrl="/_api/contextinfo",t.getSearchPostBody=S,t.searchQueryFilter="(ContentTypeId:0x010100* OR ContentTypeId:0x012000*) -ContentClass=STS_List_* -ContentClass=STS_Site -ContentClass=STS_Web -ContentClass=STS_ListItem_544 -ContentClass=STS_ListItem_550",t.parseSearchResult=_,t.getMySearchLanguage=E,t.getQueryPropertyValue=R,t.getFriendlyDateTime=T,t.getServerSiteAbsoluteUrl=D,t.getServerWebAbsoluteUrl=C,t.getFileDescription=P,t.getSiteIFollowUrls=O,t.interleaveResults=I,t.isFolder=N;var F=window.MS&&MS.QueryBox&&MS.QueryBox.Strings||{};t._fileDescMap={asax:F.asax,ascx:F.ascx,asmx:F.asmx,asp:F.web,aspx:F.web,htm:F.web,html:F.web,icon:F.web,doc:F.doc,docm:F.doc,docx:F.doc,eml:F.eml,jpe:F.jpg,jpeg:F.jpg,jpg:F.jpg,js:F.js,jse:F.jse,log:F.log,mht:F.mht,mhtml:F.mht,mpp:F.mpp,mps:F.mps,mpt:F.mpt,mpw:F.mpw,mpx:F.mpx,msg:F.msg,one:F.one,onepkg:F.onepkg,onetoc2:F.onetoc2,png:F.png,ppt:F.ppt,pub:F.pub,pptm:F.pptm,pptx:F.pptx,pps:F.pps,rtf:F.rtf,txt:F.txt,wmv:F.wmv,xls:F.xls,xlsb:F.xlsb,xlsm:F.xlsm,xlsx:F.xlsx,xml:F.xml,xps:F.xps,xsd:F.xsd,xsl:F.xsl,xsn:F.xsn,xslt:F.xslt,zip:F.zip};var U=function(){function e(){}return e.getDigestSequence=function(){if(!e._requestDigestSequence){var r={url:t.getContextInfoUrl()},i=e.getRequestDigestFromPage(),o=i===e._emptyDigest?function(t){return t&&e._timeoutMilliSeconds}:function(){return e._timeoutMilliSeconds};e._requestDigestSequence=n.Observable.generateWithRelativeTime(0,e.condition,function(e){return e+1},function(e){return e},o,e._scheduler).postJSON(r).select(e.getRequestDigest).publishValue(i),e._requestDigestSequence.connect()}return e._requestDigestSequence.where(function(e){return!!e}).take(1)},e.condition=function(){return!0},e.getRequestDigestFromPage=function(){var t,r=e._emptyDigest;return"undefined"!=typeof document&&(t=e.getRequestDigestContainer(),t&&(r=t.value,this._latestDigest=r)),r},e.getRequestDigest=function(e){return e&&e.d&&e.d.GetContextWebInformation&&e.d.GetContextWebInformation.FormDigestValue&&(this._latestDigest=e.d.GetContextWebInformation.FormDigestValue),this._latestDigest},e.getRequestDigestContainer=function(){return document.getElementById(e._requestDigestName)},e._requestDigestName="__REQUESTDIGEST",e._requestDigestSequence=null,e._emptyDigest="",e._latestDigest="",e._timeoutMilliSeconds=179e4,e}();t.RequestDigest=U,t.edgesAsyncPropMap=M,t.processEdges=A,t.createPrefixQueryText=k,t.getCurrentUser=q,n.Observable.getJson=function(e,t){return n.Observable.ajax({url:e,method:"GET",headers:{ACCEPT:"application/json;odata=verbose"}}).doAction(function(e){t&&(t.msoilResultSize=e.responseText.length)}).select(r.explain("getJson: parsing responseText",r.pipe(r.getter("responseText"),JSON.parse)))}}),define=function(e){function t(){define=e,e("oil.errors",["require","exports","oil.msg","oil.sputils"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","oil.msg","oil.sputils"],function(e,t,r,n){function i(e){var t,r="error.message.value",i=n.jsonResponseProcessor(r.split("."));try{t=i(e)}catch(o){t=""}return t}function o(e){var r=s.UNKNOWN_ERROR,n=null;if(e instanceof u)return e;for(var i in t.errorDetectors)if(t.errorDetectors[i](e)){r=i;break}return e instanceof XMLHttpRequest&&(n=e,e=new Error("HTTP error")),"string"==typeof e&&(e=new Error(e)),new u(e,r,n)}var s=function(){function e(){}return e.UNKNOWN_ERROR="unknown_error",e.PROPS_TIMED_OUT="props_timed_out",e.HTTP_CLIENT_ERROR="http_client_error",e.HTTP_SERVER_ERROR="http_server_error",e.GRAPH_DISABLED_ERROR="graph_disabled_error",e.JSON_PARSE_ERROR="json_parse_error",e}();t.ErrorCodes=s,t.graphDisabledMessage="Graph queries currently disabled.",t.errorDetectors={http_client_error:function(e){return e.status&&e.status>=400&&e.status<500},http_server_error:function(e){return e.status&&e.status>=500&&e.status<600&&i(e)!==t.graphDisabledMessage},json_parse_error:function(e){return e instanceof SyntaxError},graph_disabled_error:function(e){return e.status&&500==e.status&&i(e)===t.graphDisabledMessage}},t.createOilErrorFromError=o;var u=function(){function e(e,t,r){this.originalError=e,this.errorCode=t,this.xhr=r}return e.prototype.createErrorMessage=function(e){return new r.Message(r.MessageTypes.errorMessage,e,this)},e}();t.OilError=u}),define=function(e){function t(){define=e,e("oil.core",["require","exports","msfuncy","rx","oil.flightmanager","oil.msg","oil.errors","oil.utils","rx.binding"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","rx","oil.flightmanager","oil.msg","oil.errors","oil.utils","rx.binding"],function(e,t,r,n,i,o,s,u){function a(e,t){for(var r=0;r<t.length;r++)if(t[r].getId()===e)return!0;return!1}function c(e){return d("Plugins argument must be an array.",e),function(t){return h("Progress argument must be an object.",t),-1!==e.indexOf(t.getSource().getId())}}function l(e,t){return function(r,n){var i=s.createOilErrorFromError(r);n&&(i.queryId=n),e.message().onNext(i.createErrorMessage(t))
}}var f=r.getter("source"),p=r.getter("sequence"),h=r.bind(r.asrt,r.isObject),d=r.bind(r.asrt,r.isArray),m=function(){function e(e,t){"undefined"==typeof t&&(t=null),this._props=e,this._qlSubject=new n.Subject,this._msgSubject=new n.ReplaySubject,i.addFlights(t)}return e.prototype.props=function(){return this._props},e.prototype.query=function(){return this._qlSubject},e.prototype.message=function(){return this._msgSubject},e.prototype.setQuery=function(e){var t=this,n=new g(e),i=t._prevQl;i&&(i._progressSubject.onNext(new o.Message("msoilNextQuery",{getId:r.k("msoilPluginService")},r.extend({toString:r.k("Next query")},e))),i.dispose()),t._qlSubject.onNext(n),n.mergeProgressSources(),t._prevQl=n},e}();t.PluginService=m;var g=function(){function e(e){this._observers=[],this._progressSources=[],this._isDisposed=!1,this._isMerged=!1,r.asrt(function(e){return e instanceof v},"Query must be specified.",e);var t=this;t._query=e;var i=t._progressSubject=new n.ReplaySubject;i.subscribe(null,null,function(){return t._isDisposed=!0})}return e.prototype.getId=function(){return this._query.getId()},e.prototype.getQuery=function(){return this._query},e.prototype.createProgressSource=function(e){h("Source must be specified.",e);var t=this;t._isMerged&&r.thr("Progress sources have been merged. The progress source must be created at an earlier stage.");var i=e.getId();!i&&r.thr("Specified source has no id."),a(i,r.map(f,t._progressSources))&&r.thr('There has already been created a progress source for source with id "'+i+'" for this query lifecycle.');var s=new n.ReplaySubject;return t._progressSources.push({source:e,sequence:s.select(function(t){return new o.Message("msoilProgress",e,t)})}),s},e.prototype.progress=function(t){var i=this;return t?n.Observable.create(function(n){return i._observers.push({observer:n,options:t}),i._isMerged&&e.createProgress(t,i._progressSources).subscribe(n),r.k(void 0)}):this._progressSubject},e.createProgress=function(e,t){h("Options must be an object.",e),d("Sources must be an array.",t);var i=r.filter(function(t){return-1!==r.indexOf(e.plugins,t.source.getId())},t),o=r.map(p,i);return n.Observable.merge(o)},e.prototype.mergeProgressSources=function(){var t=this;t._isMerged&&r.thr("Progress sources must not be merged more than once."),t._isMerged=!0;var i=t._progressSources,o=r.filter(function(e){return!e.observer.isStopped},t._observers);r.map(function(t){return e.createProgress(t.options,i).subscribe(t.observer)},o),t._mergeSubscription=n.Observable.merge(r.map(p,i)).subscribe(t._progressSubject)},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype.dispose=function(){var e=this;e._isDisposed||(e._isDisposed=!0,e._mergeSubscription.dispose(),e._progressSubject.onCompleted(),r.each(e._observers,function(e){return e.observer.onCompleted()}))},e.prototype.hasValidProperty=function(e){return e in this._query.getProperties()&&this._query.getProperties()[e]},e}();t.QueryLifecycle=g;var v=function(){function e(e){this._properties=e,this._guid=u.newGuid()}return e.prototype.getProperties=function(){return this._properties},e.prototype.getId=function(){return this._guid},e}();t.Query=v,t.pluginProgressFilter=c,t.errorMsgProxy=l}),define=function(e){function t(){define=e,e("oil.culture",["require","exports"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports"],function(e,t){function r(e){if(e){var t=e.toLowerCase();if(-1!==t.indexOf("zh")||-1!==t.indexOf("ja")||-1!==t.indexOf("ko")&&"kok-in"!==t||-1!==t.indexOf("th"))return!0}return!1}function n(e){if(e){var t=this.cultures[e];if(!t)for(var r in this.cultures)if(-1!==r.toLowerCase().indexOf(e.toLowerCase()))return this.cultures[r]}return t}t.cultures={"zh-TW":1028,"zh-CN":2052,"zh-HK":3076,"zh-SG":4100,"zh-MO":5124,"ja-JP":1041,"ko-KR":1042,"kok-IN":1111,"th-TH":1054},t.isCjkLanguage=r,t.getLcid=n}),define=function(e){function t(){define=e,e("oil.eventlogging",["require","exports","oil.msg"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","oil.msg"],function(e,t,r){var n=function(){function e(){}return e.ERROR="error",e}();t.LogEventTypes=n;var i=function(){function e(e,t,r,n){"undefined"==typeof t&&(t={}),"undefined"==typeof r&&(r=""),"undefined"==typeof n&&(n={}),this.TypeName=e,this.JsonData=t,this.EncodedData=r,this.CustomFields=n,this._timestamp=(new Date).valueOf()}return e.prototype.getTime=function(){return this._timestamp},e.createLogMessage=function(t,n,i,o,s){return new r.Message("LogEvent",t,new e(n,i,o,s))},e}();t.LogEvent=i;var o=function(){function e(e,t,r,n,i,o,s){this.EncodedData=e,this.JsonData=t,this.SessionId=r,this.SessionTime=n,this.TypeName=i,this.QueryId=o,this.ServerElapsedMillis=s}return e}();t.QueryBoxSLAPILogMessage=o;var s=function(){function e(e,t,r,n,i){this.pageinfo=e,this.clicktype=t,this.blocktype=r,this.clickedresultid=n,this.subresultindex=i}return e}();t.RecordClickLogMessage=s}),define=function(e){function t(){define=e,e("oil.p.myprops",["require","exports","rx","oil.core","oil.msg","oil.utils","oil.sputils","oil.culture","oil.eventlogging","oil.errors"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","rx","oil.core","oil.msg","oil.utils","oil.sputils","oil.culture","oil.eventlogging","oil.errors"],function(e,t,r,n,i,o,s,u,a,c){var l=function(){function e(e,t,r,n,i,o,s,a,c,l,f){this.myGUID=e,this.preferredName=t,this.personalSpace=r,this.personalServer=n,this.workEmail=i,this.searchLanguage=o,this.accountName=s,this.department=a,this.jobTitle=c,this.office=l,this.userName=f,this.personalServer=n||window.location.protocol+"//"+window.location.host,this.isCjkLanguage=u.isCjkLanguage(o),this.languageLcid=u.getLcid(o)}return e}();t.MyProperties=l;var f=function(){function e(){this._myPropertiesURL="/_api/SP.UserProfiles.PeopleManager/GetMyProperties?$select=UserProfileProperties",this._timeout=1e4}return e.prototype.getId=function(){return"mypropertiesplugin"},e.prototype.initialize=function(e){var t=this,s=e.message(),u="ms-oil-"+t.getId(),l=o.loadFromSessionStorage(u);return l?void s.onNext(new i.Message(i.MessageTypes.myPropertiesMessageType,t,l)):void r.Observable.defer(function(){return r.Observable.ajax({url:t._myPropertiesURL,method:"GET",headers:{ACCEPT:"application/json;odata=verbose"},async:!0})}).timeout(t._timeout,r.Observable.throwException(new c.OilError(new Error("The request to fetch my SharePoint properties timed out."),c.ErrorCodes.PROPS_TIMED_OUT)),t._scheduler).retry(2).select(t._parseGetMyProperties).where(function(e){return!!e}).subscribe(function(e){o.saveToSessionStorage(u,e),s.onNext(new i.Message(i.MessageTypes.myPropertiesMessageType,t,e));var r=new a.LogEvent("UserInformation",{language:e.searchLanguage},"");s.onNext(new i.Message("LogEvent",t,r))},function(r){return n.errorMsgProxy(e,t)(r)})},e.prototype._parseGetMyProperties=function(e){if(e&&200!==e.status)return null;var t=JSON.parse(e.responseText);if(t&&t.d&&t.d.UserProfileProperties&&t.d.UserProfileProperties.results){var r=t.d.UserProfileProperties.results,n=s.keyValuesToObject(r),i=o.getServerUrl(n.PictureURL),u=s.getMySearchLanguage(n["SPS-ContentLanguages"]),a=n["SPS-SavedAccountName"],c=n.Department,f=n["SPS-JobTitle"],p=n.Office,h=n.UserName;return new l(n.UserProfile_GUID,n.PreferredName,n.PersonalSpace,i,n.WorkEmail,u,a,c,f,p,h)}return null},e}();t.MyPropertiesPlugin=f}),define=function(e){function t(){define=e,e("sitesifollow",["require","exports","rx","oil.msg"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","rx","oil.msg"],function(e,t,r,n){var i=function(){function e(){this._apiURL="_api/web/lists/GetByTitle('social')/items?$select=Url,WebId&$filter=startswith(ContentTypeId,'0x01FC00533CDB8F4EAE447D941948EFAE32BFD5')"}return e.prototype.getId=function(){return"sitesifollow"},e.prototype.initialize=function(e){var t=this;t._messageSubscription=e.message().where(function(e){return"MyUserProfileData"===e.getType()}).take(1).subscribe(function(r){t._myProperties=r.getData(),t._sendRequestAndForwardResult(e)})},e.prototype._sendRequestAndForwardResult=function(e){{var t=this,i=t._myProperties.personalSpace+t._apiURL;r.Observable.ajax({url:i,method:"GET",headers:{ACCEPT:"application/json;odata=verbose"},async:!0}).select(function(e){return t._parseSitesIFollow(e)}).subscribe(function(r){var i=new n.Message("SitesIFollowData",t,r);e.message().onNext(i)},function(){return[]})}},e.prototype._parseSitesIFollow=function(e){if(null===e||200!==e.status)return[];var t=JSON.parse(e.responseText);return t&&t.d&&t.d.results?this._urlsFromSitesIFollow(t.d.results):[]},e.prototype._urlsFromSitesIFollow=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&null!==e[r].Url&&null!==e[r].WebId&&t.push({url:e[r].Url,webId:e[r].WebId});return t},e.sitesIFollowMessageType="SitesIFollowData",e}();return i}),define=function(e){function t(){define=e,e("sharedwithme",["require","exports","msfuncy","rx","oil.msg","oil.sputils"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","rx","oil.msg","oil.sputils"],function(e,t,r,n,i,o){var s=function(){function e(){}return e.prototype.getId=function(){return"sharedwithme"},e.prototype.initialize=function(e){var t=this,n=t._getSharedDocuments();n.subscribe(function(n){var s=r.map(function(e){return o.keyValuesToObject(e.Cells.results)},n),u=new i.Message(i.MessageTypes.sharedWithMeMessage,t,s);e.message().onNext(u)},function(r){e.message().onNext(new i.Message(i.MessageTypes.errorMessage,t,r))})},e.prototype._getSharedDocuments=function(){return n.Observable.ajax({url:e.sharedWithUserUrl,method:"GET",headers:{ACCEPT:"application/json;odata=verbose"},async:!0}).select(function(e){var t=[];if(200===e.status){var r=JSON.parse(e.responseText);t=o.parseSearchResult(r)}else console.log("Unexpected XHR status: "+String(e.status));return t})},e.numResults=100,e.sharedWithUserUrl=o.getSharedWithUserUrl(e.numResults),e}();return s}),define=function(e){function t(){define=e,e("dom",["require","exports","rx","msfuncy","oil.utils"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","../scripts/rx","../scripts/msfuncy","../scripts/oil.utils"],function(e,t,r,n,i){function o(e,r,o){if(3===arguments.length){if("string"!=typeof r)throw new Error("Parameter className must be of type String.");if("boolean"!=typeof o)throw new Error("Parameter state must be of type Boolean.");return void t.updateClass(e,i.wordsToFlags(r,o))}if(!e||"object"!=typeof e)throw new Error("Parameter element must be an HTML element.");if(!r||"object"!=typeof r)throw new Error("Parameter classState must be an object instance.");var s=e.className,u=n.extend(i.wordsToFlags(s),r),a=i.flagsToWords(u);s!==a&&(e.className=a)}function s(e,t){if(!e||"object"!=typeof e)throw new Error("Parameter element must be an element.");if("string"!=typeof t)throw new Error("Parameter className must be of type String.");return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function u(e,r){if(!e||"object"!=typeof e)throw new Error("Parameter element must be an element.");if("string"!=typeof r)throw new Error("Parameter className must be of type String.");if(t.hasClass(e,r))return e;for(;null!=e.parentNode;)if(e=e.parentNode,t.hasClass(e,r))return e;return null}function a(e,t,i,o,s){var u=r.Observable;return u.merge(u.returnValue(!1),u.fromEvent(e,t,o).select(n.k(t)),u.fromEvent(e,i,o).select(n.k(i))).throttle(0,s).select(function(e){return e===t}).distinctUntilChanged()}function c(e){return e.replace(/<\/?b>/gi,"")}function l(e){var n=document.querySelector("#s4-workspace");if(n)return t.focusStateForSharePoint(e);var i=new r.BehaviorSubject(!1);return t.eventState(e,"focus","blur",!0).subscribe(i),i}function f(e){function n(e){return e.offsetX>i.clientWidth&&e.offsetX<=i.offsetWidth}var i=document.querySelector("#s4-workspace"),o=document.querySelector(".ms-querybox-input"),s=r.Observable,u=!1,a=s.merge(s.fromEvent(i,"mousedown",!0),s.fromEvent(i,"mouseup",!0)).scan({},function(e,t){return{clickedInsideScrollBar:"mousedown"===t.type?n(t):e.clickedInsideScrollbar,eventType:t.type}});a.where(function(e){return"mouseup"===e.eventType&&e.clickedInsideScrollbar}).subscribe(function(){u&&o.focus()});var c=new r.BehaviorSubject(!1);return s.eventState(e,"focus","blur",!0).combineLatest(a.select(function(e){return"mousedown"===e.eventType&&e.clickedInsideScrollBar}).throttle(0),function(e,r){var n=t.closestElement(document.activeElement,"ms-querybox-control")?!0:!1;return n||e||r&&u}).distinctUntilChanged().doAction(function(e){u=e}).subscribe(c),c}function p(e,r,n,i){if("undefined"==typeof i&&(i=!0),!e)throw new Error("Parameter nodes must be specified.");if(null===r)return null;for(var o=e.length,s=0;o>s;s++)if(e[s]===r)return e[t.pickNextIndex(o,s,n,i)];return null}function h(e,t,r,n){if("undefined"==typeof n&&(n=!0),1>e)throw new Error("Parameter rangeLength must be greater than zero.");if(t>=e||0>t)throw new Error("Parameter currentIndex must be within range.");var i=0,o=e-1,s=t+r;if(!n)return s>o?o:i>s?i:s;var u=(t+r)%e;return u>=0?u:e+u}function d(){var e=t.doc.createElement("div").style;return"undefined"!=typeof e.webkitAnimation||"undefined"!=typeof e.animation}function m(e){return(t.win.getComputedStyle||function(e){return e.currentStyle})(e)}function g(e){return e?"rtl"===(e.dir||"").toLowerCase()||t.isRtl(e.parentNode):!1}function v(e,t){var r=document.createElement("div");return r.setAttribute("class",t),r.innerHTML="<h2>"+e+"</h2>",r}function b(){return window.location.protocol+"//"+window.location.host}t.updateClass=o,t.hasClass=s,t.closestElement=u,t.eventState=a,t.removeBolding=c,t.focusState=l,t.focusStateForSharePoint=f,t.pickNextNode=p,t.pickNextIndex=h,t.hasCssAnimationSupport=d,t.getComputedStyle=m,t.isRtl=g,t.createHeaderElement=v,t.getWindowOrigin=b,t.win=window,t.doc=document,r.Observable.eventState=t.eventState,r.Observable.focusState=t.focusState}),define=function(e){function t(){define=e,e("cssclasses",["require","exports"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports"],function(e,t){t.prefix="ms-querybox-",t.input=t.prefix+"input",t.selected=t.prefix+"selected",t.searchIcon=t.prefix+"search-icon",t.clearIcon=t.prefix+"clear-icon",t.title=t.prefix+"title",t.path=t.prefix+"path",t.summary=t.prefix+"summary",t.heroFooter=t.prefix+"hero-footer",t.editorImage=t.prefix+"editor-image",t.editorInfo=t.prefix+"editor-info",t.editorText=t.prefix+"editor-text",t.editorName=t.prefix+"editor-name",t.sectionHeader=t.prefix+"section-header",t.selected=t.prefix+"selected",t.result=t.prefix+"result",t.keyboardNavTarget=t.prefix+"keyboard-navigation-target",t.keyboardNavSubTarget=t.prefix+"keyboard-navigation-sub-target",t.hasTerm=t.prefix+"has-term",t.noTerm=t.prefix+"no-term",t.select=t.prefix+"select",t.myDocumentsSection=t.prefix+"mydocuments-section",t.selected=t.prefix+"selected",t.myDocumentsPlugin=t.prefix+"mydocuments-plugin",t.actionSection=t.prefix+"action-section",t.shareButton=t.prefix+"share-button",t.open=t.prefix+"open",t.viewLibrary=t.prefix+"viewlibrary",t.queryboxDisabled=t.prefix+"disabled",t.personAction=t.prefix+"person-action",t.shareIcon=t.prefix+"share-icon"}),define=function(e){function t(){define=e,e("documentbase",["require","exports","msfuncy","oil.utils","oil.sputils","dom","oil.filter","cssclasses"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","oil.utils","oil.sputils","dom","oil.filter","cssclasses"],function(e,t,r,n,i,o,s,u){var a=function(){function e(){}return e.prototype.getId=function(){return"documentbase"},e.prototype._getMyProperties=function(){return this._myProperties},e.prototype._setMyProperties=function(e){this._myProperties=e},e.prototype._setSitesIFollow=function(e){this._sitesIFollow=e},e.prototype._setMountedFolders=function(e){this._mountedFolders=e},e.prototype._getStrings=function(){return MS.QueryBox.Strings},e.prototype._setRequiresRawData=function(t){e.RequiresRawData=t},e.prototype._pathToArray=function(e){return e.split("/").filter(function(e){return e.length>0})},e.prototype._getSubfolders=function(e){var t=document.createElement("a");return t.href=e,this._pathToArray(t.pathname)},e.prototype._getFolderBreadcrumb=function(e,t){var r=this,s=[],a=[];if(!e&&!t)return"";if(e&&e.indexOf(this._myProperties.personalSpace)>0)s.push(r._getStrings().myDocuments),e=e.indexOf(this._myProperties.personalSpace+r._getStrings().documents)>0?e.replace(this._myProperties.personalSpace+r._getStrings().documents,""):e.replace(this._myProperties.personalSpace,"/"),e=n.chopUrl(e),e=r._stripForms(e),a=this._getSubfolders(e);else{if(t&&t.indexOf(this._myProperties.workEmail)>-1)return s.push(r._getStrings().sharedWithMe),r._asLiElements(s);var c=i.getSiteIFollowUrls(this._sitesIFollow).filter(function(t){return 0===e.indexOf(t)}).sort(function(e,t){return t.length-e.length})[0];if("undefined"==typeof c)return"";var l=this._getSubfolders(c);l.length>0&&s.push(l[l.length-1]),e=e.substring(c.length),e=n.chopUrl(e),e=r._stripForms(e),a=this._pathToArray(e)}a.length>2&&s.push("..."),a=a.slice(-2);for(var f=0;f<a.length;f++)s.push(a[f]);return o.isRtl(document.querySelector("."+u.myDocumentsSection))&&(s=s.reverse()),r._asLiElements(s)},e.prototype._getRawFolderBreadcrumb=function(e,t){var r=this,o=[],s=[];if(!e&&!t)return[];if(e&&e.indexOf(this._myProperties.personalSpace)>0)o.push("My Documents"),e=e.indexOf(this._myProperties.personalSpace+"Documents")>0?e.replace(this._myProperties.personalSpace+"Documents",""):e.replace(this._myProperties.personalSpace,"/"),e=n.chopUrl(e),e=r._stripForms(e),s=this._getSubfolders(e);else{if(t&&t.indexOf(this._myProperties.workEmail)>-1)return o.push("Shared with me"),o;var u=i.getSiteIFollowUrls(this._sitesIFollow).filter(function(t){return 0===e.indexOf(t)}).sort(function(e,t){return t.length-e.length})[0];if("undefined"==typeof u)return[];var a=this._getSubfolders(u);a.length>0&&o.push(a[a.length-1]),e=e.substring(u.length),e=n.chopUrl(e),e=r._stripForms(e),s=this._pathToArray(e)}for(var c=0;c<s.length;c++)o.push(s[c]);return o},e.prototype._stripForms=function(e){var t=e.toLowerCase().indexOf("/forms",e.length-6);return t>-1?e.substring(0,t):e},e.prototype._asLiElements=function(e){for(var t="",r=0;r<e.length;r++)t+='<li class="ms-querybox-folder">'+n.htmlEncode(decodeURIComponent(e[r]))+"</li>";return t},e.prototype._itemFileDesc=function(e){var t=i.getSearchItemFileExtension(e);return i._fileDescMap[t]||this._getStrings().unknown},e.prototype._rawItemFileDesc=function(e){var t=i.getSearchItemFileExtension(e);return i._fileDescMap[t]||"Unknown file type"},e.prototype._itemImage=function(t){if(i.isFolder(t))return e.O15_ICON_ROOT+"folder.gif";var r=i.getSearchItemFileExtension(t);return this.itemImageFromExtension(r)},e.prototype.itemImageFromExtension=function(t){var r,n={asax:"icasax.gif",ascx:"icascx.gif",asmx:"icasmx.gif",asp:"ichtm.gif",aspx:"ichtm.gif",css:"iccss.gif",htm:"ichtm.gif",html:"ichtm.gif",icon:"ichtm.gif",doc:"icdoc.png",docm:"icdocm.png",docx:"icdocx.png",eml:"iceml.gif",jpe:"icjpe.gif",jpeg:"icjpeg.gif",jpg:"icjpg.gif",js:"icjs.gif",jse:"icjse.gif",log:"iclog.gif",mht:"icmht.gif",mhtml:"icmht.gif",mpp:"icmpp.gif",mps:"icmps.gif",mpt:"icmpt.gif",mpw:"icmpw.gif",mpx:"icmpx.gif",msg:"icmsg.png",one:"icone.png",onepkg:"iconp.png",onetoc2:"icont.png",pdf:"icpdf.png",png:"icpng.gif",ppt:"icppt.png",pub:"icpub.gif",pptm:"icpptm.png",pptx:"icpptx.png",pps:"icpps.png",rtf:"icrtf.gif",ts:"icjs.gif",txt:"ictxt.gif",vsd:"icvsd.gif",vsdx:"icvsdx.gif",wmv:"icwmv.gif",xls:"icxls.png",xlsb:"icxlsb.png",xlsm:"icxlsm.png",xlsx:"icxlsx.png",xml:"icxml.gif",xps:"icxps.gif",xsd:"icxsd.gif",xsl:"icxsl.gif",xsn:"icxsn.gif",xslt:"icxslt.gif",zip:"iczip.gif"};return r=""!==t&&"undefined"!=typeof n[t]?n[t]:"icgen.gif",e.O15_ICON_ROOT+r},e.prototype._getThumbnailUrl=function(e){if(e){var t=["ppt","pptx","pptm","pps"],r=i.getSearchItemFileExtension(e),n="undefined"!=typeof e.ServerRedirectedPreviewURL&&null!==e.ServerRedirectedPreviewURL;if(n&&t.indexOf(r)>-1)return e.ServerRedirectedPreviewURL}return""},e.prototype.itemToIDocument=function(t,r){var u=this;t.clickurl=t.ServerRedirectedURL?decodeURI(t.ServerRedirectedURL):t.OriginalPath;var a=o.getWindowOrigin(),c=!0;t.FileExtension&&"aspx"===t.FileExtension.toLowerCase()&&t.SecondaryFileExtension&&(t.FileExtension=t.SecondaryFileExtension),t.SPSiteURL&&(t.SPSiteURL===a||t.SPSiteURL.substring(0,a.length)!==a),t.OriginParentLink=t.ParentLink,t.SharedWithUsersOWSUser&&u._myProperties&&t.SharedWithUsersOWSUser.indexOf(u._myProperties.workEmail)>-1&&(t.ParentLink=u._myProperties.personalServer+u._myProperties.personalSpace+"Documents/Forms/SharedWithMe.aspx");var l=t.OriginalPath;t.Title&&t.FileExtension&&t.Filename&&"dispform.aspx"===t.Filename.toLowerCase()&&(t.Filename=t.Title+"."+t.FileExtension,t.DefaultEncodingURL&&(l=t.clickurl=decodeURI(t.DefaultEncodingURL))),"true"===t.IsContainer&&(c=!1);var f="/PersonImmersive.aspx?accountname=",p=n.htmlEncode,h=n.makeSafeUrl,d=n.makeSafeUrlComponent,m=new Date(n.reduceISO8601Millisecs(t.LastModifiedTime)),g=i.getFriendlyDateTime(m),v=t.editorowsuser||t.authorowsuser,b=c?s.replaceServerHighlighting(t.HitHighlightedSummary):"",y=/.+RemoteSiteId.*/;t.ServerRedirectedURL&&t.ServerRedirectedURL.match(y)&&(t.IsContainer="true",t.IsDocument="false",t.Filename=t.Title,t.DefaultEncodingURL=t.ServerRedirectedURL,t.clickurl=t.ServerRedirectedURL,t.OriginalPath=t.ServerRedirectedURL);var w={FileExtension:p(t.FileExtension),Filename:p(t.Filename),Title:p(t.Title),editor:p(v),clickurl:h(t.clickurl),ParentLink:h(t.ParentLink),OriginParentLink:h(t.OriginParentLink),ListID:p(t.ListID),ListItemID:p(t.ListItemID),SPSiteURL:p(t.SPSiteURL),LastModifiedDateTime:p(t.LastModifiedTime),LastModifiedFriendlyDateTime:p(g),ServerRedirectedPreviewURL:p(t.ServerRedirectedPreviewURL),HitHighlightedSummary:p(t.HitHighlightedSummary),personImmersiveUrl:f+d(i.parseOwsUserString(v).accountName)},x=i.parseOwsUserString(w.editor),S=x.preferredName,_=w.LastModifiedFriendlyDateTime,E=w.Filename||w.Title,R={docid:t.DocId,fileextension:i.getSearchItemFileExtension(w),filedescription:"",title:E,rawTitle:E,image:h(u._itemImage(t)),editor:S,rawEditor:S,url:t.OriginalPath,clickurl:w.clickurl,parentlink:w.ParentLink,originparentlink:w.OriginParentLink,listid:w.ListID,listitemid:w.ListItemID,siteurl:w.SPSiteURL,lastediteddatetime:w.LastModifiedDateTime,lasteditedfriendlydatetime:_,folderbreadcrumb:"",thumbnailurl:u._getThumbnailUrl(w),isPrefixSearch:!this._getMyProperties().isCjkLanguage,term:"",searchResultId:t.piSearchResultId||"",summary:b,rawSummary:b,pictureurl:e.USER_PHOTO_ROOT+x.accountName,personImmersiveUrl:w.personImmersiveUrl,mail:x.emailAddress,pictureimnid:"imn_"+n.newGuid()+",type=smtp",statusimnid:"imn_"+n.newGuid()+",type=smtp",pageImpressionValue:r,editorImageAndStatusAria:"",editorNameAriaLabel:"",modifiedDateTime:""};return e.RequiresRawData?(R.folderbreadcrumb=u._getRawFolderBreadcrumb(l,t.SharedWithUsersOWSUser||""),R.filedescription=u._rawItemFileDesc(w),R):(R.editorImageAndStatusAria=u._getStrings().editorImageAndStatusAria.replace("{0}",S),R.editorNameAriaLabel=u._getStrings().editorNameAria.replace("{0}",S),R.modifiedDateTime=u._getStrings().modified.replace("{0}",_),R.folderbreadcrumb=u._getFolderBreadcrumb(l,t.SharedWithUsersOWSUser||""),R.filedescription=u._itemFileDesc(w),R)},e.prototype.highlightViewModel=function(e){var t=[];return e.title&&t.push(s.highlightMapper("title","title")),e.editor&&t.push(s.highlightMapper("editor","editor")),e.summary&&t.push(s.highlightMapper("summary","summary")),t.length>0?r.aggregate(t,r.lateBind(e),e):void 0},e.O15_ICON_ROOT="/_layouts/15/images/",e.O16_ICON_ROOT="/sites/tromsoesc/_catalogs/masterpage/querybox/o16icons/",e.USER_PHOTO_ROOT="/_layouts/15/userphoto.aspx?size=S&accountname=",e}();return a}),define=function(e){function t(){define=e,e("mydocuments",["require","exports","msfuncy","rx","oil.msg","oil.core","oil.utils","oil.sputils","oil.eventlogging","documentbase","sitesifollow"],arguments[arguments.length-1])}return t.amd={},t}(define);var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define(["require","exports","msfuncy","rx","oil.msg","oil.core","oil.utils","oil.sputils","oil.eventlogging","documentbase","sitesifollow"],function(e,t,r,n,i,o,s,u,a,c,l){var f=function(e){function t(t,r){"undefined"==typeof t&&(t=""),"undefined"==typeof r&&(r=150),e.call(this),this._pluginDependency="mrucompleted",this._inputTextThreshold=2,this._siteSearchScope="",this._cache={},this._maxNumberOfResults=6,this._postQueryUrl=u.getPostQueryUrl(),this._serverElapsedTime=-1;var n=this;n._throttleTimeout=r,n._sitesIFollow=[],n._foldersSharedWithMe=[],n._mountedFolders=[]}return __extends(t,e),t.prototype.getId=function(){return"mydocuments"},t.prototype.initialize=function(t){var r=this;this._sessionStorageId="ms-querybox-"+this.getId();var n=s.loadFromSessionStorage(this._sessionStorageId);this._cache=n?this.clearOldItemsFromCache(n):{},r.setupSubscriptions(t),r.startUpdateInterval(),t.query().subscribe(function(e){r.queryHandler(t,e)});var i=t.props();e.prototype._setRequiresRawData.call(this,i.requiresRawData)},t.prototype.startUpdateInterval=function(){var e=this;n.Observable.interval(6e4,e._scheduler).subscribe(function(){e._cache=e.updateSessionStorage(e._cache)})},t.prototype.queryHandler=function(r,i){var a,c,l=this,f=this,p=i.getQuery().getProperties(),h=p.term,d=s.newGuid(),m=null;c=i.createProgressSource(f),f._logTerm(r,h,d),f.subscription&&f.subscription.dispose();var g=f._pluginDependency?i.progress({plugins:["recentdocumentscacheplugin"]}).take(1).select(function(e){return e.getData()||[]}):n.Observable.returnValue([]);a=u.RequestDigest.getDigestSequence().delay(f._throttleTimeout,f._scheduler).select(function(e){var t={url:f._postQueryUrl,headers:{ACCEPT:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":e},body:f._createRequestBody(h)};return t}).postJSON().doAction(function(e){m=u.getQueryPropertyValue(e.d.postquery.Properties.results,t._pageImpression)}).doAction(function(e){f._serverElapsedTime=e.d.postquery.ElapsedTime?parseInt(e.d.postquery.ElapsedTime):-1}).select(function(e){return u.parseSearchResult(e)}).selectMany(function(e){return n.Observable.fromArray(e)}).where(function(e){return!!e.Cells&&!!e.Cells.results}).select(function(e){return e.Cells.results}).select(u.keyValuesToObject).select(function(e){return f._filterFolderWithoutTerm(e,h)}).where(function(e){return!!e}).select(function(t){var r=f.itemToIDocument(t,m);return r.term=h,e.prototype.highlightViewModel.call(l,r)}).toArray().doAction(function(e){e.inCache=!1,f._cache[h.toLowerCase()]={data:e,time:(new Date).valueOf()}});var v=f._inputTextThreshold;f._myProperties&&f._myProperties.isCjkLanguage&&(v=1);var b,y=n.Observable.returnValue(h).select(function(e){return f._cache[e.toLowerCase()]}).where(function(e){return!!e}).select(function(e){return e.data}).doAction(function(e){e.inCache=!0}),w=n.Observable.returnValue(h).where(function(e){return e.length<v}).select(function(){return[]});f.subscription=n.Observable.merge(w,y,a).take(1).combineLatest(g,function(e,t){return b=t,e}).select(function(e){return f._resultsToRender(r,e,b,d)}).subscribe(function(e){c.onNext(e),c.onCompleted()},function(e){o.errorMsgProxy(r,f)(e,i.getId()),c.onNext([]),c.onCompleted()})},t.prototype.setupSubscriptions=function(e){var t=this;t._messageSubscription=e.message().where(function(e){return e.getType()===i.MessageTypes.myPropertiesMessageType}).take(1).subscribe(function(e){t.setMyProperties(e.getData())}),t._sitesIFollowSubscription=e.message().where(function(e){return e.getType()===l.sitesIFollowMessageType}).take(1).subscribe(function(e){t.setSitesIFollow(e.getData())}),t._foldersSharedWithMeSubscription=e.message().where(function(e){return e.getType()===i.MessageTypes.sharedWithMeMessage}).take(1).subscribe(function(e){t.setFoldersSharedWithMe(e.getData())}),t._mountedFoldersSubscription=e.message().where(function(e){return e.getType()===i.MessageTypes.mountedFoldersMessageType}).take(1).subscribe(function(e){t.setMountedFolders(e.getData())})},t.prototype.updateSessionStorage=function(e){var t=this,r=t.clearOldItemsFromCache(e);return s.saveToSessionStorage(t._sessionStorageId,r),r},t.prototype.clearOldItemsFromCache=function(e){var t=(new Date).valueOf(),r=18e5,n={};for(var i in e)e.hasOwnProperty(i)&&t-e[i].time<r&&(n[i]=e[i]);return n},t.prototype.setMyProperties=function(t){e.prototype._setMyProperties.call(this,t)},t.prototype.setSitesIFollow=function(t){e.prototype._setSitesIFollow.call(this,t)},t.prototype.setFoldersSharedWithMe=function(e){var t=this;t._foldersSharedWithMe=r.map(function(e){return e.OriginalPath},r.filter(function(e){return u.isFolder(e)},e))},t.prototype.setMountedFolders=function(t){e.prototype._setMountedFolders.call(this,t)},t.prototype._createRequestBody=function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=" "+t+'"'+e[r]+'"';if(i.length+n.length>=c-l.length)break;i+=n}}var n=u.createPrefixQueryText(e),i="{searchTerms}",o=null,s=this._myProperties;if("undefined"==typeof s)i+=" (SharedWithUsersOWSUser:{User.PreferredName}";else{var a=s.personalServer+s.personalSpace;i+=" (path:"+a+" OR SharedWithUsersOWSUser:{User.PreferredName}",o=s.languageLcid}var c=4096,l=") "+u.searchQueryFilter,f=u.getServerSiteAbsoluteUrl();i+=f?' OR Path:"'+f+'"':"",t(this._mountedFolders,"OR path:"),t(this._foldersSharedWithMe,"OR path:"),t(r.map(r.getter("webId"),this._sitesIFollow),"OR WebId:"),i+=l;var p=!1;return u.getSearchPostBody(i,n,this._maxNumberOfResults,p,o)},t.prototype._resultsToRender=function(e,t,n,i){var o=[],s=this._maxNumberOfResults-n.length,u=r.aggregate(n,function(e,t){return t.concat(e.url)},[]);0!=t.length&&(t.inCache&&0===n.length||!t.inCache)&&this._logResult(e,t,i,t.inCache);for(var a=0;a<t.length&&o.length<s;a++){var c=t[a];c&&-1===u.indexOf(c.url)&&o.push(c)}return o},t.prototype._logTerm=function(e,t,r){var n={guid:r,queryLength:t.length},o={queryId:r},s=t,u=new a.LogEvent("MyDocumentsSearch",n,s,o);e.message().onNext(new i.Message("LogEvent",this,u))},t.prototype._logResult=function(e,t,r,n){var o=n?"FirstRender":"LastRender",s={guid:r,source:"MyDocuments"},u={queryId:r};n||(u.serverElapsedTime=this._serverElapsedTime);var c="",l=new a.LogEvent(o,s,c,u);e.message().onNext(new i.Message("LogEvent",this,l))},t.prototype._logResultItem=function(e,t,r,n,o){var s=o?"FirstRender":"LastRender",u={index:r,fileExtension:t.FileExtension,guid:n,source:"MyDocuments"},c=t.clickurl,l=new a.LogEvent(s,u,c);e.message().onNext(new i.Message("LogEvent",this,l))},t.prototype._filterFolderWithoutTerm=function(e,r){var n=new RegExp(s.escapeRegExp(r),"i"),i=u.parseOwsUserString(e.editorowsuser||e.authorowsuser);return!t.folderContentTypeIdFilter.test(e.ContentTypeId)||n.test(e.Filename)||n.test(i.preferredName)?e:null},t._pageImpression="piPageImpression",t.folderContentTypeIdFilter=/^0x012000/,t}(c);return f}),define=function(e){function t(){define=e,e("mountedfolders",["require","exports","rx","oil.msg"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","rx","oil.msg"],function(e,t,r,n){var i=function(){function e(){this._apiURL="_api/web/lists/GetByTitle('Documents')/GetMountedFolderUrls"}return e.prototype.getId=function(){return"mountedfolders"},e.prototype.initialize=function(e){var t=this;t._messageSubscription=e.message().where(function(e){return e.getType()===n.MessageTypes.myPropertiesMessageType}).take(1).subscribe(function(r){var n=r.getData();t._personalSpace=n.personalSpace,t._sendRequestAndForwardResult(e)})},e.prototype._sendRequestAndForwardResult=function(e){{var t=this,i=t._personalSpace+t._apiURL;
r.Observable.ajax({url:i,method:"GET",headers:{ACCEPT:"application/json;odata=verbose"},async:!0}).select(function(e){return t._parseMountedFolders(e)}).subscribe(function(r){var i=new n.Message(n.MessageTypes.mountedFoldersMessageType,t,r);e.message().onNext(i)},function(e){return console.log(e),[]})}},e.prototype._parseMountedFolders=function(e){if(null===e||200!==e.status)return[];var t=JSON.parse(e.responseText);return t&&t.d&&t.d.GetMountedFolderUrls&&t.d.GetMountedFolderUrls.results?this._urlsFromMountedFolders(t.d.GetMountedFolderUrls.results):[]},e.prototype._urlsFromMountedFolders=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&null!==e[r]&&t.push(e[r]);return t},e}();return i}),define=function(e){function t(){define=e,e("oil.p.export",["require","exports","msfuncy","rx","oil.msg","oil.core","oil.errors"],arguments[arguments.length-1])}return t.amd={},t}(define),define(["require","exports","msfuncy","rx","oil.msg","oil.core","oil.errors"],function(e,t,r,n,i,o,s){var u=function(){function e(e,t,r){this._data=new n.Subject,this._error=new n.Subject;var i=this;i._plugins=e,i._data.subscribe(t),i.error().subscribe(r)}return e.process=function(e,t){r.asrt(r.isObject,"Processors argument must be an object.",e),r.asrt(r.isObject,"Data argument must be an object.",t);var n,i,o={};for(n in t)i=e[n],i&&(r.asrt(r.isFunc,"Processors object must contain functions.",i),o[n]=i(t[n]));return o},e.prototype.getId=function(){return"export"},e.prototype.initialize=function(t){var s=this,u=o.pluginProgressFilter(s._plugins),a=function(t){e.process(t,this.data)},c=function(t){e.process(t,this.newData)};t.message().where(function(e){return e.getType()===i.MessageTypes.errorMessage}).select(function(e){return e.getData()}).subscribe(function(e){return s._error.onNext(e)}),t.query().subscribe(function(e){var t={queryId:e.getId(),first:!0,complete:!1,data:{},newData:{},processData:a,processNewData:c},i=!1,o=e.progress().where(u).doAction(function(e){return r.asrt(r.isArray,"Export plugin only accept arrays.",e.getData())}).scan(t,function(e,t){var r=t.getSource().getId(),n=t.getData(),i=e.data[r],o=e.newData[r];return e.data[r]=i?i.concat(n):n,e.newData[r]=o?o.concat(n):n,e});e.progress().where(function(e){return"msoilNextQuery"===e.getType()}).subscribe(function(){return i=!0}),n.Observable.returnValue(t).concat(o).throttle(10,s._scheduler).select(function(e){var t=r.extend({},e);return t.data=r.extend({},e.data),t}).doAction(function(){t.first=!1,t.newData={}}).subscribe(function(e){i||s._data.onNext(e)},function(e){return s._error.onNext(e)},function(){i||(t.complete=!0,t.newData={},s._data.onNext(t))})})},e.prototype.data=function(){return this._data},e.prototype.error=function(){return this._error.select(s.createOilErrorFromError)},e}();t.ExportPlugin=u}),(define=function(e){function t(){define=e,e("odm",["require","exports","oil.p.myprops","sitesifollow","sharedwithme","mydocuments","mountedfolders","oil.p.export","oil.core"],arguments[arguments.length-1])}return t.amd={},t}(define))(["require","exports","oil.p.myprops","sitesifollow","sharedwithme","mydocuments","mountedfolders","oil.p.export","oil.core"],function(e,t,r,n,i,o,s,u,a){window.MS={Oil:{ExportPlugin:u.ExportPlugin,MyPropertiesPlugin:r.MyPropertiesPlugin,SitesIFollowPlugin:n,SharedWithMePlugin:i,MountedFoldersPlugin:s,PluginService:a.PluginService,MyDocumentsPlugin:o,Query:a.Query}}});