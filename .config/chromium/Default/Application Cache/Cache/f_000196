define("odsp-next/controls/debugWindow/models/ClonedEventModel",["require","exports","odsp-utilities/logging/EventBase","odsp-utilities/logging/Manager","odsp-utilities/object/ObjectUtil"],function(e,t,n,i,o){var a=function(){function e(e){this.id=e.id,this.parentId=e.parentId,this.data=e.data,this.eventName=e.eventName,this.shortEventName=e.shortEventName,this.startTime=e.startTime,this.endTime=e.endTime,this.eventType=e.eventType,this.enabled=e.enabled,this.critical=e.critical,this.dataJsonString=o.safeSerialize(this.data),this.eventTypeString=this.getEventTypeString(),this.metadata=e.metadata,this.vector=e.vector,this.startTimeString=e.startTime?"+"+(e.startTime-i.Manager.startTime)+" ms":"NA",this.endTimeString=e.endTime?"+"+(e.endTime-i.Manager.startTime)+" ms ("+(e.endTime-e.startTime)+"ms)":"NA",this.eventTimeString=this.getEventTimeString()}return e.prototype.getEventTypeString=function(){var e="";switch(this.eventType){case n.ClonedEventType.End:e="End";break;case n.ClonedEventType.Single:e="Single";break;case n.ClonedEventType.Start:e="Start"}return e},e.prototype.getEventTimeString=function(){var e="";switch(this.eventType){case n.ClonedEventType.End:e=this.endTimeString;break;case n.ClonedEventType.Single:e=this.startTimeString;break;case n.ClonedEventType.Start:e=this.startTimeString}return e},e}();return a}),define("odsp-next/controls/debugWindow/models/EventListenerModel",["require","exports","knockout","odsp-utilities/logging/Manager","./ClonedEventModel"],function(e,t,n,i,o){var a=200,s=function(){function e(){this.events=n.observableArray().extend({rateLimit:250}),this.totalEvents=n.observable(0).extend({rateLimit:250}),this.init()}return e.prototype.init=function(){for(var e=this,t=i.Manager.addLogHandler(function(t){e.addEvent(t)}),n=0;n<t.length;n++)this.addEvent(t[n])},e.prototype.addEvent=function(e){this.events.unshift(new o(e)),this.totalEvents(this.totalEvents()+1),this.events().length>a&&this.events.pop()},e}();return s}),define("odsp-next/resources/DebugWindowResourceKeys",["require","exports","odsp-shared/utilities/resources/ResourceKey"],function(e,t,n){var i=function(){function e(){}return e.eventListener=n("eventListener"),e}();return i}),define("odsp-next/models/manifests/Manifest",["require","exports","knockout"],function(e,t,n){var i=function(){function e(){this._cdnObs=null}return e.prototype.toString=function(){return this.RowKey},e.prototype.getCdnObs=function(){var e=this;return null==e._cdnObs&&(e._cdnObs=n.observable(""),null!=e.Data&&(-1!==e.Data.indexOf("akamaihd.net")?e._cdnObs("Akamai"):-1!==e.Data.indexOf("msecnd.net")&&e._cdnObs("Azure")),e._cdnObs.subscribe(function(t){null!=e.Data&&("Azure"===t?e.Data=e.Data.replace("spoprod-a.akamaihd.net","az741266.vo.msecnd.net").replace("spoppe-a.akamaihd.net","az742526.vo.msecnd.net"):"Akamai"===t&&(e.Data=e.Data.replace("az741266.vo.msecnd.net","spoprod-a.akamaihd.net").replace("az742526.vo.msecnd.net","spoppe-a.akamaihd.net")),e._bumpCreateDate())})),e._cdnObs},e.prototype._bumpCreateDate=function(){var e=new Date(this.CreateDate);e.setSeconds(e.getSeconds()+2),this.CreateDate=e.toJSON()},e}();return i}),define("odsp-utilities/xhr/XHRPromise",["require","exports","./XHR","../async/Promise"],function(e,t,n,i){var o=function(){function e(){}return e.start=function(e){var t=new n(e);return new i.default(function(e,n){t.start(e,n)},function(){t.abort(!0)})},e.startAndPostProcess=function(e,t){var o=new n(e);return new i.default(function(e,n){o.start(function(n,i){e(t(n,i))},n)},function(){o.abort(!0)})},e}();return o}),define("odsp-next/dataSources/manifests/azure/ManifestsDataSource",["require","exports","knockout","../../../models/manifests/Manifest","odsp-utilities/xhr/XHRPromise"],function(e,t,n,i,o){var a=function(){function e(){this._serverUrl="https://manifestdwestus.cloudapp.net",this._authenticatedEndpoint="/api/auth/method/authenticated",this._signInEndpoint="/api/auth/method/signin",this._signOutEndpoint="/api/auth/method/signout",this._manifestEndPoint="/api/manifest"}return e.prototype.getManifestServerEndpoint=function(){return this._serverUrl},e.prototype.setManifestServerEndpoint=function(e){this._serverUrl=e},e.prototype.isAuthenticated=function(){return o.startAndPostProcess({url:this._serverUrl+this._authenticatedEndpoint,json:null,withCredentials:!0},function(e){return JSON.parse(e.responseText)})},e.prototype.getSignInEndpoint=function(){return this._serverUrl+this._signInEndpoint},e.prototype.getSignOutEndpoint=function(){return this._serverUrl+this._signOutEndpoint},e.prototype.getManifestsList=function(){return o.startAndPostProcess({url:this._serverUrl+this._manifestEndPoint+"/method/list",json:null},function(e){return JSON.parse(e.responseText)})},e.prototype.getManifest=function(e){return o.startAndPostProcess({url:this._serverUrl+this._manifestEndPoint+"/"+e+"/",json:null},function(e){var t=new i;return n.utils.extend(t,JSON.parse(e.responseText)),t})},e.prototype.saveManifest=function(e){var t={};return t["Content-Type"]="application/json",o.startAndPostProcess({url:this._serverUrl+this._manifestEndPoint+"/"+e.RowKey+"/",json:JSON.stringify(e),headers:t,method:"PUT",withCredentials:!0},function(e){return e.responseText})},e}();return a}),define("odsp-next/models/manifests/Build",["require","exports","knockout","odsp-utilities/async/Promise"],function(e,t,n,i){var o=function(){function e(e){this._provider=e,this.ManifestsKeys=new Array,this.ManifestsLoaded=n.observable(!1),this.Manifests=new Array}return e.prototype.toString=function(){return this.RowKey},e.prototype.loadManifests=function(){var e=this;if(!e.ManifestsLoaded()){for(var t=e.ManifestsKeys.length,n=new Array,o=0;t>o;o++){var a=e.ManifestsKeys[o],s=e._provider.getManifest(a);s.then(function(t){e.Manifests.push(t)}),n.push(s)}i.default.all(n).then(function(){e.ManifestsLoaded(!0)},function(){e.ManifestsLoaded(!0)})}},e}();return o}),define("odsp-next/providers/manifests/ManifestsProvider",["require","exports","odsp-utilities/async/Promise","../../models/manifests/Build"],function(e,t,n,i){var o=function(){function e(e){this.buildsHashKey="key-",this.dataSource=e}return e.prototype.getManifestServerEndpoint=function(){return this.dataSource.getManifestServerEndpoint()},e.prototype.setManifestServerEndpoint=function(e){return this.dataSource.setManifestServerEndpoint(e)},e.prototype.isAuthenticated=function(){return this.dataSource.isAuthenticated()},e.prototype.getSignInEndpoint=function(){return this.dataSource.getSignInEndpoint()},e.prototype.getSignOutEndpoint=function(){return this.dataSource.getSignOutEndpoint()},e.prototype.getBuilds=function(){var e,t=this,o=function(n,o){e=t.dataSource.getManifestsList(),e.then(function(e){for(var o=new Array,a=e.length,s=0;a>s;s++){var r=e[s],d=r.substr(0,r.lastIndexOf("-")),l=o[t.buildsHashKey+d];l||(l=new i(t),l.RowKey=d,o.push(l),o[t.buildsHashKey+d]=l),l.ManifestsKeys.push(r)}n(o)},function(e){o(e)})},a=function(){e&&e.cancel()};return new n.default(o,a)},e.prototype.getManifest=function(e){return this.dataSource.getManifest(e)},e.prototype.saveManifest=function(e){return this.dataSource.saveManifest(e)},e}();return o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/DebugWindowViewModel",["require","exports","knockout","odsp-shared/base/ViewModel","./models/EventListenerModel","../../resources/DebugWindowResourceKeys","./DebugWindowInit","../../dataSources/manifests/azure/ManifestsDataSource","../../providers/manifests/ManifestsProvider","../../resources/DataSourceResourceKeys","../../resources/ProviderResourceKeys","../../utilities/locale/Locale","../../resources/ControlResourceKeys"],function(e,t,n,i,o,a,s,r,d,l,u,p,c){var f=function(e){function t(t){var i=this;e.call(this,t),this.enabledPaneKey="DebugWindow_EnabledPane",this.fullScreenKey="DebugWindow_FullScreen",this.setIsActive=function(e){for(var t=i.panes(),n=0;n<t.length;n++){var o=t[n];o.isActive(e===o),o.isActive()&&(i.sessionStorage[i.enabledPaneKey]=o.component,i.paneType(o.component))}return!1};try{"sessionStorage"in window&&window.sessionStorage&&(this.sessionStorage=window.sessionStorage)}catch(p){this.sessionStorage={}}this.isVisible=this.resources.consume(c.isDebugWindowVisible)||n.observable(!0),this.eventListener=this.resources.expose(a.eventListener,new o);var f=new(this.managed(r));this.resources.expose(l.manifests,f),this.resources.expose(u.manifests,new(this.managed(d))(f));var m=[{name:"Events",component:"od-debug-window-panes-events",isActive:n.observable(!1)},{name:"Performance",component:"od-debug-window-panes-performance",isActive:n.observable(!1)}];m.push(window.Flight?{name:"Deployments",component:"od-debug-window-panes-deployments",isActive:n.observable(!1)}:{name:"Manifests",component:"od-debug-window-panes-manifests",isActive:n.observable(!1)}),this.panes=n.observableArray(m),this.paneType=n.observable(this.panes()[0].component);var h=this.panes()[0],b=this.sessionStorage[this.enabledPaneKey];if(b)for(var m=this.panes(),g=0;g<m.length;g++){var v=m[g];if(v.component===b){h=v;break}}this.setIsActive(h),this.events.on(document.body,"keyup",function(e){s.isOpenDebugWindowEvent(e)&&i.isVisible(!i.isVisible())}),this.isRtl=n.observable(this._isHtmlRootRtl()),this.isFullScreen=n.observable("true"===this.sessionStorage[this.fullScreenKey]),this.subscribe(this.isRtl,this._flipHtmlRootDir),this.subscribe(this.isFullScreen,function(e){i.sessionStorage[i.fullScreenKey]=e}),this.subscribe(this.isVisible,function(e){i.sessionStorage[s.AutoOpenSessionKey]=e}),this.sessionStorage[s.AutoOpenSessionKey]=this.isVisible()}return __extends(t,e),t.prototype._flipHtmlRootDir=function(){document.documentElement.setAttribute("dir",this._isHtmlRootRtl()?"ltr":"rtl"),p.invalidate()},t.prototype._isHtmlRootRtl=function(){return p.isRightToLeft},t}(i);return f}),define("odsp-next/controls/debugWindow/DebugWindow.html",[],function(){return'<div class="DebugWindow DebugWindow-Full" data-bind="css: { \'DebugWindow-is-visible\': isVisible, \'DebugWindow-is-fullScreen\': isFullScreen }"><div class=DebugWindow-Full-Container><span>RTL <input class=dir-flip type=checkbox data-bind="checked: isRtl"></span> <span>Fullscreen <input class=dir-flip type=checkbox data-bind="checked: isFullScreen"></span><div class=DebugWindow-Panes data-bind="foreach: panes"><a class=DebugWindow-Panes-Tab data-bind="css: { \'DebugWindow-Panes-Tab-is-active\': isActive }, text:name, click: $parent.setIsActive"></a></div><div class=DebugWindow-Pane data-bind="component: { name: paneType }"></div></div></div>'}),define("odsp-next/controls/debugWindow/DebugWindow.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles(".DebugWindow{position:fixed;left:5px;right:5px;bottom:5px;z-index:200000;background-color:#fff;border:2px solid #eaeaea;padding:5px;display:none;-webkit-touch-callout:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.DebugWindow-is-visible{display:block}.DebugWindow-Full{height:50%;top:50%}.DebugWindow-is-fullScreen{height:100%;top:0}.DebugWindow-Full-Container{height:100%;overflow-y:auto}.DebugWindow-Panes{border-bottom:1px solid #eaeaea;margin-bottom:2px}.DebugWindow-Panes-Tab{padding-left:10px;padding-right:10px;color:#333;font-family:'Segoe UI Semilight WestEuropean','Segoe UI Semilight','Segoe WP Semilight','Segoe UI','Segoe WP',Tahoma,Arial,sans-serif;font-size:17px;font-weight:400;cursor:pointer;border:none;background:0 0}.DebugWindow-Panes-Tab:active,.DebugWindow-Panes-Tab:focus{outline:0}.DebugWindow-Panes-Tab.DebugWindow-Panes-Tab-is-focused:not(.DebugWindow-Panes-Tab-is-active),.DebugWindow-Panes-Tab:hover:not(.DebugWindow-Panes-Tab-is-active){background:#c8c8c8}.DebugWindow-Panes-Tab.DebugWindow-Panes-Tab-is-active:hover{background:#88bded}.DebugWindow-Panes-Tab-is-active{background-color:#a8d1ef}.DebugWindow-Summary{padding:4px}")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/panes/EventsModel",["require","exports","knockout","odsp-shared/base/ViewModel","../../../resources/DebugWindowResourceKeys","odsp-utilities/logging/Manager","../../../utilities/locale/Locale"],function(e,t,n,i,o,a,s){var r=function(e){function t(t){var i=this;e.call(this,t),this.startTime=n.observable(a.Manager.startDate.toLocaleTimeString(s.language)),this.filter=n.observable(""),this.eventListener=this.resources.consume(o.eventListener),this.filteredEvents=this.createComputed(function(){return n.utils.arrayFilter(i.eventListener.events(),function(e){return!i.filter()||e.eventName&&e.eventName.toLowerCase().indexOf(i.filter().toLowerCase())>=0||e.dataJsonString&&e.dataJsonString.toLowerCase().indexOf(i.filter().toLowerCase())>=0})}),this.countSummary=this.createComputed(function(){return i.filteredEvents().length+" of "+i.eventListener.totalEvents()})}return __extends(t,e),t}(i);return r}),define("odsp-next/controls/debugWindow/panes/Events.html",[],function(){return'<div class=DebugWindow-Panes-Events><table class=DebugWindow-Panes-Events-Summary><tr><td class=DebugWindow-Panes-Events-Summary-Label>Start Time:</td><td class=DebugWindow-Panes-Events-Summary-Data data-bind="text: startTime"></td><td class=DebugWindow-Panes-Events-Summary-Label>Count:</td><td class=DebugWindow-Panes-Events-Summary-Data data-bind="text: countSummary"></td><td class=DebugWindow-Panes-Events-Summary-Label>Filter:</td><td class=DebugWindow-Panes-Events-Summary-Data><input type=text data-bind="textInput: filter"></td></tr></table><div class=DebugWindow-Panes-Events-List-Container><table class=DebugWindow-Panes-Events-List><thead><tr><th>Id</th><th>Enabled</th><th>Event Name</th><th>Event Type</th><th>Time</th><th>Data</th></tr></thead><tbody><!--ko foreach: filteredEvents--><tr><td data-bind="text: id"></td><td data-bind="text: enabled"></td><td data-bind="text: shortEventName"></td><td data-bind="text: eventTypeString"></td><td data-bind="text: eventTimeString"></td><td data-bind="text: dataJsonString"></td></tr><!--/ko--></tbody></table></div></div>'}),define("odsp-next/controls/debugWindow/panes/Events.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles(".DebugWindow-Panes-Events{height:100%}.DebugWindow-Panes-Events-Summary{margin-bottom:20px}.DebugWindow-Panes-Events-Summary-Label{font-weight:700;padding-right:10px}.DebugWindow-Panes-Events-Summary-Data{padding-right:20px}.DebugWindow-Panes-Events-Summary-Data input{width:350px}.DebugWindow-Panes-Events-List{width:100%}.DebugWindow-Panes-Events-List-Container{overflow-y:auto;height:calc(100% - 91px);width:calc(100% - 10px);position:absolute}.DebugWindow-Panes-Events-List td,.DebugWindow-Panes-Events-List th{text-align:left;padding-right:10px}.DebugWindow-Panes-Events-List tbody tr:nth-child(even){background-color:#e6f2fb}")}),define("odsp-next/controls/debugWindow/panes/Events",["require","exports","./EventsModel","odsp-shared/utilities/knockout/ComponentFactory","./Events.html","./Events.css"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window-panes-events",template:e("./Events.html"),viewModel:n,synchronous:!0});return o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/panes/PerformanceModel",["require","exports","knockout","odsp-shared/base/ViewModel","../../../utilities/performance/PerformanceCollection"],function(e,t,n,i,o){var a=function(e){function t(t){var i=this;e.call(this,t),this.name=n.observable(""),this.w3cResponseEnd=n.observable(0),this.appStart=n.observable(0),this.prefetchStart=n.observable(0),this.preRender=n.observable(0),this.dataFetch=n.observable(0),this.dataFetchServerTime=n.observable(0),this.postRender=n.observable(0),this.render=n.observable(0),this.plt=n.observable(0),this.pltWithUnload=n.observable(0),this.httpRequests=n.observable(0),this.httpRequestCollection=n.observableArray([]),this.httpRequestHeader=this.createComputed(function(){var e=i.httpRequestCollection();return"HTTP requests - "+(Boolean(e)?e.length:"")}),this.appCacheHit=n.observable(!1),this._refreshStats()}return __extends(t,e),t.prototype._refreshStats=function(){var e=this;this.name(o.summary.name),this.w3cResponseEnd(o.summary.w3cResponseEnd),this.appStart(o.summary.appStart),this.prefetchStart(o.summary.prefetchStart),this.preRender(o.summary.preRender),this.dataFetch(o.summary.dataFetch),this.dataFetchServerTime(o.summary.dataFetchServerTime),this.postRender(o.summary.postRender),this.render(o.summary.render),this.plt(o.summary.plt),this.pltWithUnload(o.summary.pltWithUnload),this.httpRequests(o.summary.httpRequests),this.httpRequestCollection(o.httpRequestCollection),this.appCacheHit(o.summary.appCacheHit),this.async.setTimeout(function(){e._refreshStats()},1e3)},t}(i);return a}),define("odsp-next/controls/debugWindow/panes/Performance.html",[],function(){return'<div class=DebugWindow-Panes-Performance><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td data-bind="text: name"></td><td>The name of the PLT event</td></tr><tr><td>w3cResponseEnd</td><td data-bind="text: w3cResponseEnd"></td><td>Time to get the aspx from the server</td></tr><tr><td>prefetchStart</td><td data-bind="text: prefetchStart"></td><td>Time it takes for our app to *start* prefetch</td></tr><tr><td>appStart</td><td data-bind="text: appStart"></td><td>Time it takes for our app to *start* running</td></tr><tr><td>preRender</td><td data-bind="text: preRender"></td><td>Time it takes for our app to make the relevant data fetch for this view</td></tr><tr><td>dataFetch</td><td data-bind="text: dataFetch"></td><td>Time it takes for our app to get data back from the server</td></tr><tr><td>dataFetchServerTime</td><td data-bind="text: dataFetchServerTime"></td><td>Time the dataFetch request spent on the server.</td></tr><tr><td>postRender</td><td data-bind="text: postRender"></td><td>Time it takes from appDataFetchEnd to PLT</td></tr><tr><td>render</td><td data-bind="text: render"></td><td>Post render plus pre render</td></tr><tr><td>plt</td><td data-bind="text: plt"></td><td>Time from fetchStart to list rendered</td></tr><tr><td>pltWithUnload</td><td data-bind="text: pltWithUnload"></td><td>Time from navigationStart to list rendered... Includes unload of previous page</td></tr><tr><td>httpRequests</td><td data-bind="text: httpRequests"></td><td>The count of http request till plt</td></tr><tr><td>appCacheHit</td><td data-bind=text:appCacheHit></td><td>Whether this page load is served from appCache</td></tr><tr><td></td><td></td><td></td></tr><tr><td colspan=3 data-bind="text: httpRequestHeader"></td></tr><tr><td colspan=3><table><thead><tr><th>StartTime</th><th>Url</th><th>Duration</th></tr></thead><tbody data-bind=foreach:httpRequestCollection><tr><td data-bind="text: startTime"></td><td data-bind="text: url" class=DebugWindow-Performance-Requests></td><td data-bind="text: duration"></td></tr></tbody></table></td></tr></tbody></table></div>'}),define("odsp-next/controls/debugWindow/panes/Performance.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles(".DebugWindow-Panes-Performance th{font-weight:700;padding:5px}.DebugWindow-Panes-Performance td{padding:5px}.DebugWindow-Performance-Requests{max-width:600px;word-break:break-all}.DebugWindow-Panes-Performance tbody tr:nth-child(even){background-color:#e6f2fb}")}),define("odsp-next/controls/debugWindow/panes/Performance",["require","exports","./PerformanceModel","odsp-shared/utilities/knockout/ComponentFactory","./Performance.html","./Performance.css"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window-panes-performance",template:e("./Performance.html"),viewModel:n,synchronous:!0});return o}),define("odsp-utilities/async/Semaphore",["require","exports","./Signal"],function(e,t,n){var i=function(){function e(e){this.concurrency=e||1,this._running=0,this._queue=[],this._promiseComplete=this._promiseComplete.bind(this)}return e.prototype.enqueue=function(e){var t;if(this._running<this.concurrency)this._running++,t=e(),t.done(this._promiseComplete,this._promiseComplete);else{var i={callback:e,signal:null,canceled:!1,result:null};i.signal=new n(function(){i.canceled=!0,i.result&&i.result.cancel()}),this._queue.push(i),t=i.signal.getPromise()}return t},e.prototype._promiseComplete=function(){var e=this;if(this._running--,this._running<this.concurrency&&this._queue.length){for(var t=this._queue.shift();t&&t.canceled;)t=this._queue.length?this._queue.shift():null;t&&(this._running++,t.result=t.callback(),t.result.done(function(n){t.signal.complete(n),e._promiseComplete()},function(n){t.signal.error(n),e._promiseComplete()}))}},e}();return i}),define("odsp-next/models/deployments/Manifest",["require","exports"],function(e,t){var n=function(){function e(e){this.ManifestId=e.ManifestId,this.Name=e.Name,this.Project=e.Project,this.CreateDate=e.CreateDate,this.Path=e.Path,this.Repository=e.Repository,this.Creator=e.Creator,this.Machine=e.Machine,this.Branch=e.Branch,this.BuildId=e.BuildId,this.BuildNumber=e.BuildNumber,this.Commit=e.Commit,this.BowerVersion=e.BowerVersion,this.Data=e.Data,this.WasAuthenticated=e.WasAuthenticated,this.AuthenicatedCreator=e.AuthenicatedCreator,this.AuthenicationType=e.AuthenicationType,this.ManifestData=JSON.parse(this.Data)}return e}();t.Manifest=n,t.default=n}),define("odsp-next/models/deployments/Deployment",["require","exports","./Manifest"],function(e,t,n){var i=function(){function e(e){this.DeploymentId=e.DeploymentId,this.FromManifestId=e.FromManifestId,this.FromManifest=new n.Manifest(e.FromManifest),this.ToManifestId=e.ToManifestId,this.ToManifest=new n.Manifest(e.ToManifest),this.ManifestName=e.ManifestName,this.ModifiedDate=e.ModifiedDate,this.MachineGroup=e.MachineGroup,this.UserGroup=e.UserGroup,this.Percentage=e.Percentage,this.StartDate=e.StartDate,this.EndDate=e.EndDate}return e.getBowerMerge=function(e,t){var n=[],i=e.ManifestData.bower||{},o=t.ManifestData.bower||{};for(var a in i){var s=o[a],r=i[a];s||(s={name:a,commit:"",version:"",dependencies:null}),n.push({fromBower:r,toBower:s})}for(var a in s)r||n.push({fromBower:{name:a,commit:"",version:"",dependencies:null},toBower:o[a]});return n},e}();t.Deployment=i,t.default=i}),define("odsp-next/dataSources/deployments/DeploymentsDataSource",["require","exports","odsp-utilities/async/Promise","odsp-utilities/async/Semaphore","../../models/deployments/Manifest","../../models/deployments/Deployment","odsp-utilities/xhr/XHRPromise"],function(e,t,n,i,o,a,s){!function(e){e[e.Prod=0]="Prod",e[e.Dogfood=1]="Dogfood"}(t.ManifestServerType||(t.ManifestServerType={}));var r=t.ManifestServerType,d=function(){function e(){this._serverUrl="https://manifestdwestus.cloudapp.net",this._authenticatedEndpoint="/api/auth/method/authenticated",this._signInEndpoint="/api/auth/method/signin",this._signOutEndpoint="/api/auth/method/signout",this._manifestEndPoint="/api/manifestv2"}return e.prototype.getManifestServerEndpoint=function(){return this._serverUrl},e.prototype.setManifestServerEndpoint=function(e){this._serverUrl=e},e.prototype.getManifestServerEndpointType=function(){return this._serverUrl.indexOf("manifestp")>0?r.Prod:r.Dogfood},e.prototype.getUserGroups=function(){switch(this.getManifestServerEndpointType()){case r.Dogfood:return["INT","DF"];case r.Prod:return["PROD"]}},e.prototype.isAuthenticated=function(){return s.startAndPostProcess({url:this._serverUrl+this._authenticatedEndpoint,json:null,withCredentials:!0},function(e){return JSON.parse(e.responseText)})},e.prototype.defaultMachineGroup=function(){return window.Flight?"ODC":"ODB"},e.prototype.getSignInEndpoint=function(){return this._serverUrl+this._signInEndpoint},e.prototype.getSignOutEndpoint=function(){return this._serverUrl+this._signOutEndpoint},e.prototype.getVSORootUrl=function(){return"https://onedrive.visualstudio.com/DefaultCollection/OneDriveWeb"},e.prototype.getManifests=function(e,t){t=t||50;for(var o=10,a=5,s=[],r=0;t>r;r+=o)s.push({count:o,skip:r});for(var d=[],l=new i(a),u=0;u<s.length;u++){var p=s[u];d.push(this.enqueueManifestRequest(e,p,l))}return n.default.all(d).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t=t.concat(i)}return t})},e.prototype.getManifestNames=function(){return s.startAndPostProcess({url:this._serverUrl+this._manifestEndPoint+"/method/manifestnames?creator=odbuild",json:null,requestTimeoutInMS:e.DEFAULT_TIMEOUT},function(e){return JSON.parse(e.responseText)}).then(function(e){return e})},e.prototype.getDeployments=function(){return s.startAndPostProcess({url:this._serverUrl+this._manifestEndPoint+"/method/deployments?machineGroup="+this.defaultMachineGroup(),json:null,requestTimeoutInMS:e.DEFAULT_TIMEOUT},function(e){return JSON.parse(e.responseText)}).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push(new a.Deployment(e[n]));return t})},e.prototype.createDeployment=function(t){return s.startAndPostProcess({headers:{"Content-Type":"application/json"},url:this._serverUrl+this._manifestEndPoint+"/method/deployment",json:JSON.stringify(t),withCredentials:!0,requestTimeoutInMS:e.DEFAULT_TIMEOUT},function(e){return JSON.parse(e.responseText)})},e.prototype.updateDeployment=function(t){return s.startAndPostProcess({headers:{"Content-Type":"application/json"},url:this._serverUrl+this._manifestEndPoint+"/method/updatedeployment",json:JSON.stringify(t),withCredentials:!0,requestTimeoutInMS:e.DEFAULT_TIMEOUT},function(e){return JSON.parse(e.responseText)})},e.prototype.enqueueManifestRequest=function(e,t,n){var i=this;return n.enqueue(function(){return s.startAndPostProcess({url:""+i._serverUrl+i._manifestEndPoint+"?count="+t.count+"&skip="+t.skip+(e?"&name="+e:""),json:null},function(e){return JSON.parse(e.responseText)}).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push(new o.Manifest(e[n]));return t})})},e.DEFAULT_TIMEOUT=6e4,e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=d}),define("odsp-next/bindings/boolean/BooleanBinding",["require","exports","knockout"],function(e,t,n){var i=function(){function e(){}return e.init=function(e,t,i,o){var a=t(),s=n.pureComputed({read:function(){return o[a].toString()},write:function(e){o[a]="true"===e.toLowerCase()}});n.applyBindingsToNode(e,{value:s})},e}();return i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/panes/DeploymentsModel",["require","exports","knockout","odsp-shared/base/ViewModel","../../../dataSources/deployments/DeploymentsDataSource","../../../bindings/boolean/BooleanBinding"],function(e,t,n,i,o,a){var s=409600,r=6,d=.15,l=1024,u=1048576,p=1073741824,c=function(e){function t(i){var s=this;e.call(this,i),this.toSelectedManifest=n.observable(null),this.manifestsLoaded=n.observable(!1),this.manifestsError=n.observable(""),this.deploymentsLoaded=n.observable(!1),this.deploymentsError=n.observable(""),this.isAuthenticated=n.observable(!1),this.availableManifests=n.observable(null),this.availableDeployments=n.observable(null),this.saveOrUpdateError=n.observable(""),this.savingOrUpdating=n.observable(!1),this.refreshingDeployments=n.observable(!1),this.dataSource=new o.default,this.manifestNamesError=n.observable(""),this.selectedManifestBranch=n.observable(""),this.newDeploymentPercentage=n.observable(0),this.updateMode=n.observable(!1),this.selectedManifestName=n.observable(null),this.selectedUserGroup=n.observable(null),this.manifestNames=n.observableArray([]),this.userGroups=n.observableArray([]),this.addBindingHandlers({booleanValue:a}),this._setEndPoint(),this._getUserGroups(),this._getDeployments(),this._getManifestNames(),this._getIsAuthenticatedState(),this.events.on(window,"message",this._onReceivedMessage),this.isAuthenticated()||(this._popupInterval=this.async.setInterval(function(){s._loginPopup&&s._loginPopup.postMessage("updating reference of parent to support navigations in login popup","*")},500)),this.updateDeployment=function(){var e=s.warnings();s.savingOrUpdating(!0),(0===e.length||confirm("There are warnings are you sure you want to update?"))&&(s.updateMode()?s.dataSource.updateDeployment({DeploymentId:s.selectedDeployment().DeploymentId,ToManifestId:s.toSelectedManifest().ManifestId,FromManifestId:s.selectedDeployment().ToManifestId,Percentage:s.newDeploymentPercentage()}).then(function(){s._refreshDeploymentsAfterUpdateOrSave()},function(e){s.savingOrUpdating(!1),s.saveOrUpdateError(JSON.stringify(e))}):s.dataSource.updateDeployment({DeploymentId:s.selectedDeployment().DeploymentId,ToManifestId:s.selectedDeployment().ToManifestId,FromManifestId:s.selectedDeployment().FromManifestId,Percentage:s.newDeploymentPercentage()}).then(function(){s._refreshDeploymentsAfterUpdateOrSave()},function(e){s.savingOrUpdating(!1),s.saveOrUpdateError(JSON.stringify(e))}))},this.createDeployment=function(){var e=s.warnings();s.savingOrUpdating(!0),(0===e.length||confirm("There are warnings are you sure you want to create?"))&&s.dataSource.createDeployment({ToManifestId:s.toSelectedManifest().ManifestId,FromManifestId:s.toSelectedManifest().ManifestId,UserGroup:s.selectedUserGroup(),MachineGroup:s.dataSource.defaultMachineGroup(),Percentage:s.newDeploymentPercentage()}).then(function(){s._refreshDeploymentsAfterUpdateOrSave()},function(e){s.savingOrUpdating(!1),s.saveOrUpdateError(JSON.stringify(e))})},this.currentManifest=this.createPureComputed(function(){var e=s.selectedUserGroup(),t=s.selectedManifestName();if(e&&t){var n=s.availableDeployments();if(n)for(var i=0;i<n.length;i++){var o=n[i];if(o.UserGroup===e&&o.ManifestName===t)return o.ToManifest}}return null}),this.createMode=this.createComputed(function(){return s.availableDeployments()&&null===s.currentManifest()}),this.selectedDeployment=this.createComputed(function(){var e=s.selectedUserGroup(),t=s.selectedManifestName();if(e&&t){var n=s.availableDeployments();if(n)for(var i=0;i<n.length;i++){var o=n[i];if(o.UserGroup===e&&o.ManifestName===t)return o}}return null}),this.diffFromManifest=this.createPureComputed(function(){if(s.createMode())return s.toSelectedManifest();if(s.updateMode())return s.currentManifest();var e=s.selectedDeployment();return e?e.FromManifest:null}),this.diffToManifest=this.createPureComputed(function(){return s.updateMode()||s.createMode()?s.toSelectedManifest():s.currentManifest()}),this.scenariosPerformance=this.createComputed(function(){var e=s.diffToManifest(),t=s.diffFromManifest();if(t&&e){for(var n=[],i=Object.create(null),o=t.ManifestData.resources.scenarios,a=e.ManifestData.resources.scenarios,r=0;r<o.length;r++){var d=o[r];i[d.name]||(i[d.name]={from:null,to:null}),i[d.name].from=d}for(var l=0;l<a.length;l++){var d=a[l];i[d.name]||(i[d.name]={from:null,to:null}),i[d.name].to=d}for(var u in i){var p=i[u],c=p.from?p.from.zipSize||0:0,f=p.to?p.to.zipSize||0:0,m=p.from&&p.from.bundles?p.from.bundles:[],h=p.to&&p.to.bundles?p.to.bundles:[],b=m.length,g=h.length,v=0,D=f-c;0!==D&&0!==c&&(v=s._twoDecimalPlaces(100*D/c));var w=g-b+" file count diff - "+s._sizeToDownloadString(D);n.push({name:u,fromSizeString:s._sizeToString(c),toSizeString:s._sizeToString(f),fromDownloadString:s._sizeToDownloadString(c),toDownloadString:s._sizeToDownloadString(f),fromTotalTimeString:s._sizeToTotalTimeString(c,b),toTotalTimeString:s._sizeToTotalTimeString(f,g),sizeChangeString:s._sizeToString(D),percentageChange:v,extraDownloadInformation:w,bundlesDiff:s._diffBundles(m,h,t,e)})
}return n}return null}),this.removedRamps=this.createComputed(function(){var e=s.diffToManifest(),t=s.diffFromManifest();if(t&&e){var n=t.ManifestData.rampInfo,i=e.ManifestData.rampInfo,o=[];for(var a in n)i[a]||o.push({rampInfo:n[a],name:a});return o}return null}),this.addedRamps=this.createComputed(function(){var e=s.diffToManifest(),t=s.diffFromManifest();if(t&&e){var n=t.ManifestData.rampInfo,i=e.ManifestData.rampInfo,o=[];for(var a in i)n[a]||o.push({rampInfo:i[a],name:a});return o}return null}),this.sortedManifestBranches=this.createComputed(function(){var e=[],n=s.availableManifests();if(n){for(var i=0;i<n.length;i++){var o=n[i];e.indexOf(o.Branch)<0&&e.push(o.Branch)}return e=e.sort(t.sortBranchVersions)}return null}),this.filteredAvailableManifests=this.createComputed(function(){var e=s.selectedManifestBranch(),t=s.availableManifests();if(e&&t){for(var n=[],i=0;i<t.length;i++){var o=t[i];o.Branch===e&&n.push(o)}return n}return null}),this.toggleUpdateMode=function(){s.updateMode(!s.updateMode())},this.subscribe(this.selectedDeployment,function(e){e&&s.newDeploymentPercentage(e.Percentage)}),this.subscribe(this.updateMode,function(e){e?s.newDeploymentPercentage(0):s.selectedDeployment()&&s.newDeploymentPercentage(s.selectedDeployment().Percentage)}),this.subscribe(this.createMode,function(e){e?s.newDeploymentPercentage(0):s.selectedDeployment()&&s.newDeploymentPercentage(s.selectedDeployment().Percentage)}),this.subscribe(this.selectedManifestName,function(e){s._getManifests(e)}),this.warnings=this.createComputed(function(){return s._getWarnings()})}return __extends(t,e),t.sortBranchVersions=function(e,t){return"master"===e?1:"master"===t?-1:e>t?-1:1},t.sortBuildVersions=function(e,t){return"dev"===e?1:"dev"===t?-1:e>t?-1:1},t.prototype.login=function(){this._loginPopup=window.open(this.dataSource.getSignInEndpoint(),"_blank","width=500, height=500")},t.prototype.signOut=function(){window.open(this.dataSource.getSignOutEndpoint(),"_blank")},t.prototype._twoDecimalPlaces=function(e){return Math.round(100*e)/100},t.prototype._sizeToString=function(e){var t=0>e?"-":"";return e=Math.abs(e),l>e?""+t+e+" bytes":u>e?""+t+this._twoDecimalPlaces(e/l)+" KB":p>e?""+t+this._twoDecimalPlaces(e/u)+" MB":""+t+this._twoDecimalPlaces(e/p)+" GB"},t.prototype._sizeToDownloadString=function(e){var t=this._twoDecimalPlaces(e/s);return t+"s at "+this._sizeToString(s)+"/sec"},t.prototype._sizeToTotalTimeString=function(e,t){var n=e/s;return n+=Math.ceil(t/r)*d,t+" files - "+this._twoDecimalPlaces(n)+"s estimated total (RTT + Download)"},t.prototype._onReceivedMessage=function(){this._loginPopup&&(this._loginPopup.close(),this.async.clearInterval(this._popupInterval),this._getIsAuthenticatedState())},t.prototype._refreshDeploymentsAfterUpdateOrSave=function(){var e=this;this.refreshingDeployments(!0),this._getDeployments(),this._getDeploymentsPromise.then(function(){e.savingOrUpdating(!1),e.saveOrUpdateError(""),e.updateMode(!1),e.refreshingDeployments(!1)},function(){e.savingOrUpdating(!1),e.saveOrUpdateError(""),e.updateMode(!1),e.refreshingDeployments(!1)})},t.prototype._setEndPoint=function(){var e=this;this.endpoint=n.observable(this.dataSource.getManifestServerEndpoint()),this.endpoint.subscribe(function(t){e.manifestsLoaded(!1),e.deploymentsLoaded(!1),e.dataSource.setManifestServerEndpoint(t),e._getIsAuthenticatedState(),e.selectedManifestName(""),e._getUserGroups(),e._getDeployments(),e._getManifestNames()})},t.prototype._getManifests=function(e){var t=this;this.manifestsLoaded(!1),this.manifestsError(""),this._getManifestsPromise&&this._getManifestsPromise.cancel(),this._getManifestsPromise=this.dataSource.getManifests(e),this._getManifestsPromise.then(function(e){t.manifestsError(""),t.availableManifests(e),t.manifestsLoaded(!0),t.updateSelectedManifests()},function(e){t.manifestsError(JSON.stringify(e))})},t.prototype._getManifestNames=function(){var e=this;this.manifestNamesError(""),this._getManifestNamesPromise&&this._getManifestNamesPromise.cancel(),this._getManifestNamesPromise=this.dataSource.getManifestNames(),this._getManifestNamesPromise.then(function(t){e.manifestNamesError(""),e.manifestNames(t),!e.selectedManifestName()&&e.manifestNames().length>0&&e.selectedManifestName(e.manifestNames()[0]),e.updateSelectedManifests()},function(t){e.manifestNamesError(JSON.stringify(t))})},t.prototype._getDeployments=function(){var e=this;this.deploymentsLoaded(!1),this.deploymentsError(""),this._getDeploymentsPromise&&this._getDeploymentsPromise.cancel(),this._getDeploymentsPromise=this.dataSource.getDeployments(),this._getDeploymentsPromise.then(function(t){e.availableDeployments(t),e.deploymentsError(""),e.deploymentsLoaded(!0)},function(t){e.deploymentsError(JSON.stringify(t))})},t.prototype._getUserGroups=function(){this.userGroups(this.dataSource.getUserGroups()),this.selectedUserGroup(this.userGroups()[0])},t.prototype.updateSelectedManifests=function(){var e=this.selectedDeployment();if(e){var t=this.availableManifests();t&&t.length>0&&this.toSelectedManifest(t[0])}},t.prototype._bundlesToScripts=function(e,t){var n=[];if(t.ManifestData.resources&&t.ManifestData.resources.scripts)for(var i=0;i<e.length;i++)for(var o=e[i],a=0,s=t.ManifestData.resources.scripts;a<s.length;a++){var r=s[a];if(r.name===o){n.push(r);break}}return n},t.prototype._scriptToUrl=function(e,t){return e?""+t.ManifestData.cdns[0]+t.ManifestData.key+"/"+e.name+"-"+e.hash+".js":""},t.prototype._diffScripts=function(e,t,n,i){var o=e?e.name:t.name,a=e?e.zipSize||0:0,s=t?t.zipSize||0:0,r=0,d=s-a;return 0!==d&&0!==a&&(r=this._twoDecimalPlaces(100*d/a)),{name:o,fromSizeString:this._sizeToString(a),toSizeString:this._sizeToString(s),fromDownloadString:this._sizeToDownloadString(a),toDownloadString:this._sizeToDownloadString(s),sizeChangeString:this._sizeToString(d),percentageChange:r,fromScriptUrl:this._scriptToUrl(e,n),toScriptUrl:this._scriptToUrl(t,i)}},t.prototype._diffBundles=function(e,t,n,i){for(var o=[],a=this._bundlesToScripts(e,n),s=this._bundlesToScripts(t,i),r={},d=0;d<a.length;d++){for(var l=a[d],u=0;u<s.length;u++){var p=s[u];if(l.name===p.name){r[l.name]=!0,l.zipSize!==p.zipSize&&o.push(this._diffScripts(l,p,n,i));break}}r[l.name]||o.push(this._diffScripts(l,null,n,i))}for(var c=0;c<s.length;c++){var p=s[c];r[p.name]||o.push(this._diffScripts(null,p,n,i))}return o},t.prototype._getWarnings=function(){var e=[],n=this.diffFromManifest(),i=this.diffToManifest();if(n&&i){n.ManifestId!==i.ManifestId||this.createMode()||e.push("From and To manifests are the same.");var o=this.selectedDeployment();this.updateMode()&&o&&100!==o.Percentage&&e.push("Current deployment percentage is not at 100%, so this will make the current ToManifest possibly be enabled at 100%.\n                    ToManifest: Branch - "+o.ToManifest.Branch+"  BuildNumber - "+o.ToManifest.BuildNumber+"  BowerVersion - "+o.ToManifest.BowerVersion),"dev"===i.Branch.toLocaleLowerCase()&&e.push("To branch is a dev branch"),"dev"===i.Repository.toLocaleLowerCase()&&e.push("The build came from a dev build"),"master"===i.Branch.toLocaleLowerCase()&&e.push("To branch is the master branch");var a=[n.Branch,i.Branch];a.sort(t.sortBranchVersions),a[0]!==i.Branch&&a[1]!==n.Branch&&e.push("To branch is older than From branch");var s=[n.BuildNumber,i.BuildNumber];s.sort(t.sortBuildVersions),s[0]!==i.BuildNumber&&s[1]!==n.BuildNumber&&e.push("To build is older than From build");var r=this.scenariosPerformance();if(r)for(var d=0;d<r.length;d++){var l=r[d];l.percentageChange>.25&&e.push(l.name+" regressed by "+l.sizeChangeString+" ("+l.percentageChange+"%) - "+l.extraDownloadInformation+" - "+l.toTotalTimeString)}}return e},t.prototype._getIsAuthenticatedState=function(){var e=this;this.isAuthenticated(!1);var t=this.dataSource.isAuthenticated();t.then(function(t){e.isAuthenticated(t)})},t}(i);t.DeploymentsModel=c}),define("odsp-next/controls/debugWindow/panes/Deployments.html",[],function(){return'<div class=DebugWindow-Panes-Deployments><table><tbody><tr><th>Deployments Server:</th><td><input type=radio name=endpoint value=https://manifestdwestus.cloudapp.net data-bind="checked: endpoint">Dogfood / Int<br><input type=radio name=endpoint value=https://manifestpwestus.cloudapp.net data-bind="checked: endpoint">Production<br><input type=radio name=endpoint value=https://localhost:44300 data-bind="checked: endpoint">Localhost - for debugging<br></td></tr></tbody></table><!--ko if: !isAuthenticated()--><div class=DebugWindow-Panes-Deployments-Login><button class="ms-Button ms-Button--primary" data-bind="click: login">Login</button></div><!--/ko--><!--ko if: savingOrUpdating()--><div class=DebugWindow-Panes-Deployments-SavingOrUpdating><div class=DebugWindow-Panes-Deployments-SavingOrUpdating-Text><!--ko if: refreshingDeployments()-->Updating Deployments<!--/ko--><!--ko if: !refreshingDeployments()-->Saving<!--/ko--></div></div><!--/ko--><div class=DebugWindow-Panes-Deployments-BuildSelection><div class=DebugWindow-Panes-Deployments-Filter><label for=userGroups>UserGroups:</label><!--ko if: selectedUserGroup()--><select name=userGroups data-bind="options: userGroups, value: selectedUserGroup, disable: savingOrUpdating"></select><!--/ko--><!--ko if: !selectedUserGroup()--><select><option>Loading...</option></select><!--/ko--></div><div class=DebugWindow-Panes-Deployments-Filter><label for=manifestNames>Manifests:</label><!--ko if: selectedManifestName()--><select name=manifestNames data-bind="options: manifestNames, value: selectedManifestName, disable: savingOrUpdating"></select><!--/ko--><!--ko if: !selectedManifestName()--><select><option>Loading...</option></select><!--/ko--></div></div><div class=DebugWindow-Panes-Deployments-BuildManagement data-bind="css: { \'DebugWindow-Panes-Deployments-BuildManagement-UpdateMode\': updateMode }"><!--ko if: saveOrUpdateError()--><div class=DebugWindow-Panes-Deployments-BuildManagement-Error data-bind="text: saveOrUpdateError"></div><!--/ko--><!--ko if: deploymentsError()--><div class=DebugWindow-Panes-Deployments-BuildManagement-Error data-bind="text: deploymentsError"></div><!--/ko--><!--ko if: manifestNamesError()--><div class=DebugWindow-Panes-Deployments-BuildManagement-Error data-bind="text: manifestNamesError"></div><!--/ko--><!--ko if: !createMode()--><div class=DebugWindow-Panes-Deployments-CurrentBuild><div><h4>Current:&nbsp;<!--ko if: !updateMode()--><button class="ms-Button ms-Button--primary" data-bind="click: toggleUpdateMode, disable: savingOrUpdating">Change Target Build</button><!--/ko--></h4><div class=DebugWindow-Panes-Deployments-CurrentBuild-Details><!--ko if: currentManifest()--><od-debug-window-manifestinfo params="dataSource: dataSource, manifest: currentManifest"></od-debug-window-manifestinfo><!--/ko--><!--ko if: !currentManifest()--><h3>Loading...</h3><!--/ko--></div></div></div><!--/ko--><!--ko if: updateMode() || createMode()--><div class=DebugWindow-Panes-Deployments-UpdateBuild><div><!--ko if: !createMode()--><h4>Update To:&nbsp;<button class="ms-Button ms-Button--primary" data-bind="click: toggleUpdateMode">Cancel</button></h4><!--/ko--><!--ko if: createMode()--><h4>Create Deployment:</h4><!--/ko--><div class=DebugWindow-Panes-Deployments-UpdateBuild-Branches><label for=branches>Branches:</label><!--ko if: sortedManifestBranches()--><select name=branches data-bind="options: sortedManifestBranches, value: selectedManifestBranch"></select><!--/ko--><!--ko if: !sortedManifestBranches()--><select><option>Loading...</option></select><!--/ko--></div><od-debug-window-manifestlist params="selectedManifest: toSelectedManifest, manifestsLoaded: manifestsLoaded, manifestsError: manifestsError, dataSource: dataSource, availableManifests: filteredAvailableManifests"></od-debug-window-manifestlist></div></div><!--/ko--><div class=DebugWindow-Panes-Deployments-Clear></div><!--ko if: selectedDeployment() || createMode()--><div class=DebugWindow-Panes-Deployments-Percentage><h4><span>Percentage&nbsp;</span><input type=text data-bind="value: newDeploymentPercentage">%</h4><!--ko if: isAuthenticated() && !createMode()--><button class="ms-Button ms-Button--primary" data-bind="click: updateDeployment, disable: savingOrUpdating">Update</button><!--/ko--><!--ko if: isAuthenticated() && createMode()--><button class="ms-Button ms-Button--primary" data-bind="click: createDeployment, disable: savingOrUpdating">Create</button><!--/ko--></div><!--/ko--></div><div class=DebugWindow-Panes-Deployments-BuildDetails><div><h4>Details:</h4><div><!--ko if: diffFromManifest() && diffToManifest()--><!--ko if: warnings().length > 0--><h5>Warnings</h5><div class=DebugWindow-Panes-Deployments-BuildDetails-Section><ul data-bind="foreach: warnings"><li class=DebugWindow-Panes-Deployments-BuildDetails-Warning data-bind="text: $data"></li></ul></div><!--/ko--><h5>Changes in</h5><div class=DebugWindow-Panes-Deployments-BuildDetails-Section><div><a target=_blank data-bind="attr:{ href: dataSource.getVSORootUrl() + \'/_git/\'+diffFromManifest().Repository+\'/branches#baseVersion=GC\'+diffFromManifest().Commit+\'&targetVersion=GC\'+diffToManifest().Commit+\'&_a=commits\'}">Commits</a></div><div><a target=_blank data-bind="attr:{ href: dataSource.getVSORootUrl() + \'/_git/\'+diffFromManifest().Repository+\'/branches#baseVersion=GC\'+diffFromManifest().Commit+\'&targetVersion=GC\'+diffToManifest().Commit+\'&_a=files\'}">Files</a></div></div><h5>Manifests</h5><div class=DebugWindow-Panes-Deployments-BuildDetails-Section><h6 class=DebugWindow-Panes-Deployments-BuildDetails-Section-SubHeader>From</h6><od-debug-window-manifestinfo params="dataSource: dataSource, manifest: diffFromManifest"></od-debug-window-manifestinfo><h6 class=DebugWindow-Panes-Deployments-BuildDetails-Section-SubHeader>To</h6><od-debug-window-manifestinfo params="dataSource: dataSource, manifest: diffToManifest"></od-debug-window-manifestinfo><div class=DebugWindow-Panes-Deployments-Clear></div></div><!--ko if: scenariosPerformance() && scenariosPerformance().length > 0--><h5>Performance</h5><div class=DebugWindow-Panes-Deployments-BuildDetails-Section><ul data-bind="foreach: scenariosPerformance"><li class=DebugWindow-Panes-Deployments-BuildDetails-Ramp><span data-bind="text: $data.name"></span><ul><li>From:&nbsp;<span data-bind="text: $data.fromSizeString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.fromDownloadString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.fromTotalTimeString"></span></li><li>To:&nbsp;<span data-bind="text: $data.toSizeString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.toDownloadString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.toTotalTimeString"></span></li><li>Change:&nbsp;<span data-bind="text: $data.sizeChangeString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.percentageChange"></span>%&nbsp;-&nbsp;<span data-bind="text: $data.extraDownloadInformation"></span></li><!--ko if: $data.bundlesDiff && $data.bundlesDiff.length > 0--><li>Bundles<ul data-bind="foreach: $data.bundlesDiff"><li><span data-bind="text: $data.name"></span>&nbsp;-&nbsp;<a data-bind="attr: {href: $data.fromScriptUrl}">From</a>&nbsp;-&nbsp;<a data-bind="attr: {href: $data.toScriptUrl}">To</a><ul><li>From:&nbsp;<span data-bind="text: $data.fromSizeString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.fromDownloadString"></span></li><li>To:&nbsp;<span data-bind="text: $data.toSizeString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.toDownloadString"></span></li><li>Change:&nbsp;<span data-bind="text: $data.sizeChangeString"></span>&nbsp;-&nbsp;<span data-bind="text: $data.percentageChange"></span>%</li></ul></li></ul></li><!--/ko--></ul></li></ul></div><!--/ko--><!--ko if: addedRamps() && addedRamps().length > 0--><h5>Added Ramps</h5><div class=DebugWindow-Panes-Deployments-BuildDetails-Section><ul data-bind="foreach: addedRamps"><li class=DebugWindow-Panes-Deployments-BuildDetails-Ramp><span data-bind="text: $data.name"></span>&nbsp;-&nbsp;<span data-bind="text: $data.rampInfo.type"></span>&nbsp;-&nbsp; <a target=_blank data-bind="attr:{ href: \'https://storage.live-int.com/Rampage/Ramp/Get/\'+$data.name}">Int</a>&nbsp;-&nbsp; <a target=_blank data-bind="attr:{ href: \'https://df.storage.live.com/Rampage/Ramp/Get/\'+$data.name}">DF</a>&nbsp;-&nbsp; <a target=_blank data-bind="attr:{ href: \'https://storage.live.com/Rampage/Ramp/Get/\'+$data.name}">PROD</a><ul data-bind="foreach: $data.rampInfo.usages"><li data-bind="text: $data"></li></ul></li></ul></div><!--/ko--><!--ko if: removedRamps() && removedRamps().length > 0--><h5>Removed Ramps</h5><div class=DebugWindow-Panes-Deployments-BuildDetails-Section><ul data-bind="foreach: removedRamps"><li class=DebugWindow-Panes-Deployments-BuildDetails-Ramp><span data-bind="text: $data.name"></span>&nbsp;-&nbsp;<span data-bind="text: $data.rampInfo.type"></span>&nbsp;-&nbsp; <a target=_blank data-bind="attr:{ href: \'https://storage.live-int.com/Rampage/Ramp/Get/\'+$data.name}">Int</a>&nbsp;-&nbsp; <a target=_blank data-bind="attr:{ href: \'https://df.storage.live.com/Rampage/Ramp/Get/\'+$data.name}">DF</a>&nbsp;-&nbsp; <a target=_blank data-bind="attr:{ href: \'https://storage.live.com/Rampage/Ramp/Get/\'+$data.name}">PROD</a><ul data-bind="foreach: $data.rampInfo.usages"><li data-bind="text: $data"></li></ul></li></ul></div><!--/ko--><h5>Bower</h5><div class=DebugWindow-Panes-Deployments-BuildDetails-Section><od-debug-window-deploymentbowerdiff params="dataSource: dataSource, from: diffFromManifest, to: diffToManifest"></od-debug-window-deploymentbowerdiff><div class=DebugWindow-Panes-Deployments-Clear></div></div><!--/ko--><!--ko if: !diffFromManifest() && !diffToManifest()--><h3>Loading...</h3><!--/ko--></div></div></div><div class=DebugWindow-Panes-Deployments-Clear></div></div>'}),define("odsp-next/controls/debugWindow/panes/Deployments.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles(".DebugWindow-Panes-Deployments-BuildDetails-Warning,.DebugWindow-Panes-Deployments-BuildManagement-Error{color:red;font-weight:700}.DebugWindow-Panes-Deployments th{font-weight:700;padding:5px}.DebugWindow-Panes-Deployments-Clear{clear:both}.DebugWindow-Panes-Deployments td{padding:5px}.DebugWindow-Panes-Deployments tbody tr:nth-child(even){background-color:#e6f2fb}.DebugWindow-Panes-Deployments-Login{float:right}.DebugWindow-Panes-Deployments-CreateDeployment{width:100%}.DebugWindow-Panes-Deployments-CreateDeployment-Error{background-color:#f44!important}.DebugWindow-Panes-Deployments-Filter label{width:100px;padding-right:5px;font-weight:700;display:inline-block}.DebugWindow-Panes-Deployments-BuildDetails-Section-SubHeader{margin:0;clear:both}.DebugWindow-Panes-Deployments-BuildDetails,.DebugWindow-Panes-Deployments-BuildManagement,.DebugWindow-Panes-Deployments-UpdateBuild{margin-left:15px}html[dir=ltr] .DebugWindow-Panes-Deployments-BuildDetails,html[dir=ltr] .DebugWindow-Panes-Deployments-BuildManagement{float:left}html[dir=rtl] .DebugWindow-Panes-Deployments-BuildDetails,html[dir=rtl] .DebugWindow-Panes-Deployments-BuildManagement{float:right}.DebugWindow-Panes-Deployments-BuildManagement{width:500px}.DebugWindow-Panes-Deployments-BuildManagement-UpdateMode{width:1015px}.DebugWindow-Panes-Deployments-BuildDetails{border-left:#000 solid 1px;padding-left:15px;width:500px}.DebugWindow-Panes-Deployments-BuildDetails-Section{border-bottom:#000 solid 1px;margin-bottom:10px;padding-bottom:10px}.DebugWindow-Panes-Deployments-CurrentBuild,.DebugWindow-Panes-Deployments-UpdateBuild{width:500px}html[dir=ltr] .DebugWindow-Panes-Deployments-CurrentBuild,html[dir=ltr] .DebugWindow-Panes-Deployments-UpdateBuild{float:left}html[dir=rtl] .DebugWindow-Panes-Deployments-CurrentBuild,html[dir=rtl] .DebugWindow-Panes-Deployments-UpdateBuild{float:right}.DebugWindow-Panes-Deployments-UpdateBuild-Branches{padding-bottom:5px}.DebugWindow-Panes-Deployments-UpdateBuild-Branches label{padding-right:5px}.DebugWindow-Panes-Deployments-CurrentBuild-Details{border:1px solid #000;overflow:auto;padding:5px}.DebugWindow-Panes-Deployments-Percentage{width:100%;text-align:center}.DebugWindow-Panes-Deployments-Percentage input{text-align:right;width:30px}.DebugWindow-Panes-Deployments-SavingOrUpdating{width:100%;height:100%;position:fixed;top:0;left:0;background-color:rgba(0,0,0,.5)}.DebugWindow-Panes-Deployments-SavingOrUpdating-Text{background-color:#fff;text-align:center;top:50%;left:40%;position:fixed;padding:15px;font-weight:700;font-size:xx-large}.DebugWindow-Panes-Deployments-Login{width:100%;height:100%;text-align:center;background-color:#a8d1ef;padding:25px;margin-bottom:40px;margin-top:40px}.DebugWindow-Panes-Deployments button{color:#fff}")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/controls/manifestList/ManifestListViewModel",["require","exports","odsp-shared/base/ViewModel","../../../../bindings/boolean/BooleanBinding"],function(e,t,n,i){var o=0,a=function(e){function t(t){e.call(this,t),this.listId="manifestlist_"+o++,this.selectedManifest=t.selectedManifest,this.manifestsLoaded=t.manifestsLoaded,this.manifestsError=t.manifestsError,this.dataSource=t.dataSource,this.availableManifests=t.availableManifests,this.addBindingHandlers({booleanValue:i})}return __extends(t,e),t}(n);return a}),define("odsp-next/controls/debugWindow/controls/manifestList/ManifestList.html",[],function(){return'<div class=DebugWindow-ManifestList><!--ko if: !manifestsLoaded() && !manifestsError()--><div class=DebugWindow-ManifestList-dataContainer>Loading...</div><!--/ko--><!--ko if: manifestsError--><div class=DebugWindow-ManifestList-dataContainer data-bind="text: manifestsError"></div><!--/ko--><!--ko if: manifestsLoaded() && !manifestsError()--><div class=DebugWindow-ManifestList-dataContainer data-bind="foreach: availableManifests"><div class=DebugWindow-ManifestList-row data-bind="css: { \'DebugWindow-ManifestList-row-is-selected\': $parent.selectedManifest() == $data }"><input type=radio data-bind="checkedValue: $data, checked: $parent.selectedManifest, attr: { name: $parent.listId }"><od-debug-window-manifestinfo params="dataSource: $parent.dataSource, manifest: $data"></od-debug-window-manifestinfo><div class=DebugWindow-ManifestList-Clear></div></div></div><!--/ko--></div>'}),define("odsp-next/controls/debugWindow/controls/manifestList/ManifestList.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles(".DebugWindow-ManifestLists{font-weight:700}.DebugWindow-ManifestList-dataContainer{height:400px;overflow-y:auto;overflow-x:hidden}.DebugWindow-ManifestList-row-is-selected{background-color:#a8d1ef!important}.DebugWindow-ManifestList-row{border-bottom:#000 solid 1px;margin-bottom:10px;width:100%;overflow:auto;padding:5px}.DebugWindow-ManifestList-Clear{clear:both}")});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/controls/manifestInfo/ManifestInfoViewModel",["require","exports","odsp-shared/base/ViewModel","../../../../bindings/boolean/BooleanBinding","../../../../dataSources/deployments/DeploymentsDataSource","knockout"],function(e,t,n,i,o,a){var s=function(e){function t(t){e.call(this,t),this.dataSource=t.dataSource,this.isProd=this.dataSource.getManifestServerEndpointType()===o.ManifestServerType.Prod,this.manifest=this.createComputed(function(){return a.unwrap(t.manifest)}),this.addBindingHandlers({booleanValue:i})}return __extends(t,e),t}(n);return s}),define("odsp-next/controls/debugWindow/controls/manifestInfo/ManifestInfo.html",[],function(){return"<div class=DebugWindow-ManifestInfo><div class=DebugWindow-ManifestInfo-Section><div class=DebugWindow-ManifestInfo-Section-Name>Branch:</div><div class=DebugWindow-ManifestInfo-Section-Value data-bind=\"text: manifest().Branch\"></div></div><div class=DebugWindow-ManifestInfo-Section><div class=DebugWindow-ManifestInfo-Section-Name>Repository:</div><div class=DebugWindow-ManifestInfo-Section-Value data-bind=\"text: manifest().Repository\"></div></div><div class=DebugWindow-ManifestInfo-Section><div class=DebugWindow-ManifestInfo-Section-Name>Build Number:</div><div class=DebugWindow-ManifestInfo-Section-Value><a target=_blank data-bind=\"attr: {href: dataSource.getVSORootUrl() + '/_build#buildId='+manifest().BuildId+'&_a=summary', title:manifest().BuildNumber }, text:manifest().BuildNumber\"></a></div></div><div class=DebugWindow-ManifestInfo-Section><div class=DebugWindow-ManifestInfo-Section-Name>Commit:</div><div class=DebugWindow-ManifestInfo-Section-Value><a target=_blank data-bind=\"attr: {href: dataSource.getVSORootUrl() + '/_git/'+manifest().Repository+'/commit/'+manifest().Commit, title:manifest().Commit }, text:manifest().Commit\"></a></div></div><div class=DebugWindow-ManifestInfo-Section><div class=DebugWindow-ManifestInfo-Section-Name>BowerVersion:</div><div class=DebugWindow-ManifestInfo-Section-Value data-bind=\"text: manifest().BowerVersion\"></div></div><div class=DebugWindow-ManifestInfo-Section><div class=DebugWindow-ManifestInfo-Section-Name>CreateDate:</div><div class=DebugWindow-ManifestInfo-Section-Value data-bind=\"text: manifest().CreateDate\"></div></div><div class=DebugWindow-ManifestInfo-Section><div class=DebugWindow-ManifestInfo-Section-Name>Opt In:</div><div class=DebugWindow-ManifestInfo-Section-Value><!--ko if: isProd--><a target=_blank data-bind=\"attr: {href: 'https://onedrive.live.com/?devmanifestid='+manifest().ManifestId+'&devmanifestname='+manifest().Name}\">PROD</a>&nbsp;&nbsp;&nbsp;<!--/ko--><!--ko if: !isProd--><a target=_blank data-bind=\"attr: {href: 'https://onedrive.live.com/?devmanifestid='+manifest().ManifestId+'&devmanifestname='+manifest().Name}\">DF</a>&nbsp;&nbsp;&nbsp; <a target=_blank data-bind=\"attr: {href: 'https://onedrive.live-int.com/?devmanifestid='+manifest().ManifestId+'&devmanifestname='+manifest().Name}\">INT</a><!--/ko--></div></div></div>"}),define("odsp-next/controls/debugWindow/controls/manifestInfo/ManifestInfo.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles("html[dir=ltr] .DebugWindow-ManifestInfo-Section{float:left}html[dir=rtl] .DebugWindow-ManifestInfo-Section{float:right}.DebugWindow-ManifestInfo-Section-Name{width:150px;display:inline-block}.DebugWindow-ManifestInfo-Section-Value{width:300px;display:inline-block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}")}),define("odsp-next/controls/debugWindow/controls/manifestInfo/ManifestInfo",["require","exports","./ManifestInfoViewModel","odsp-shared/utilities/knockout/ComponentFactory","./ManifestInfo.html","./ManifestInfo.css"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window-manifestinfo",template:e("./ManifestInfo.html"),viewModel:n,synchronous:!0});return o}),define("odsp-next/controls/debugWindow/controls/manifestList/ManifestList",["require","exports","./ManifestListViewModel","odsp-shared/utilities/knockout/ComponentFactory","./ManifestList.html","./ManifestList.css","../manifestInfo/ManifestInfo"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window-manifestlist",template:e("./ManifestList.html"),viewModel:n,synchronous:!0});return o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/controls/deploymentBowerDiff/DeploymentBowerDiffViewModel",["require","exports","odsp-shared/base/ViewModel","../../../../models/deployments/Deployment","knockout"],function(e,t,n,i,o){var a=function(e){function t(t){e.call(this,t);var n=t.from,a=t.to;this.dataSource=t.dataSource,this.bowerMerge=this.createComputed(function(){return i.Deployment.getBowerMerge(o.unwrap(n),o.unwrap(a))})}return __extends(t,e),t}(n);return a}),define("odsp-next/controls/debugWindow/controls/deploymentBowerDiff/DeploymentBowerDiff.html",[],function(){return"<div class=DebugWindow-DeploymentBowerDiff><div class=DebugWindow-DeploymentBowerDiff-dataContainer><div data-bind=\"foreach: bowerMerge\"><div class=DebugWindow-DeploymentBowerDiff-diffwrapper><div class=DebugWindow-DeploymentBowerDiff-Section><div class=DebugWindow-DeploymentBowerDiff-BowerName data-bind=\"text: fromBower.name\">Branch:</div></div><!--ko if: fromBower.commit || toBower.commit--><div class=DebugWindow-DeploymentBowerDiff-Section><div class=DebugWindow-DeploymentBowerDiff-Name>Commit:</div><div class=DebugWindow-DeploymentBowerDiff-Value><div class=DebugWindow-DeploymentBowerDiff-Value-From><a target=_blank data-bind=\"attr: {href: $parent.dataSource.getVSORootUrl() + '/_git/'+fromBower.name+'/commit/'+fromBower.commit}, text:fromBower.commit\"></a></div>-<div class=DebugWindow-DeploymentBowerDiff-Value-To><a target=_blank data-bind=\"attr: {href: $parent.dataSource.getVSORootUrl() + '/_git/'+toBower.name+'/commit/'+toBower.commit}, text:toBower.commit\"></a></div></div></div><!--/ko--><div class=DebugWindow-DeploymentBowerDiff-Section><div class=DebugWindow-DeploymentBowerDiff-Name>BowerVersion:</div><div class=DebugWindow-DeploymentBowerDiff-Value><div class=DebugWindow-DeploymentBowerDiff-Value-From data-bind=\"text: fromBower.version\"></div>-<div class=DebugWindow-DeploymentBowerDiff-Value-To data-bind=\"text: toBower.version\"></div></div></div><!--ko if: fromBower.commit || toBower.commit--><div class=DebugWindow-DeploymentBowerDiff-Section><div class=DebugWindow-DeploymentBowerDiff-Name>Diff:</div><div class=DebugWindow-DeploymentBowerDiff-Value><div class=DebugWindow-DeploymentBowerDiff-Value-From><a target=_blank data-bind=\"attr:{ href: $parent.dataSource.getVSORootUrl() + '/_git/'+fromBower.name+'/branches#baseVersion=GC'+fromBower.commit+'&targetVersion=GC'+toBower.commit+'&_a=commits'}\">Commit</a></div>-<div class=DebugWindow-DeploymentBowerDiff-Value-To><a target=_blank data-bind=\"attr:{ href: $parent.dataSource.getVSORootUrl() + '/_git/'+fromBower.name+'/branches#baseVersion=GC'+fromBower.commit+'&targetVersion=GC'+toBower.commit+'&_a=files'}\">Files</a></div></div></div><!--/ko--></div></div></div></div>"}),define("odsp-next/controls/debugWindow/controls/deploymentBowerDiff/DeploymentBowerDiff.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles(".DebugWindow-DeploymentBowerDiff-BowerName{font-weight:700!important;width:480px;text-align:center}.DebugWindow-DeploymentBowerDiff-diffwrapper{border:1px solid #000;margin:2px;padding:5px}html[dir=ltr] .DebugWindow-DeploymentBowerDiff-diffwrapper{float:left}html[dir=rtl] .DebugWindow-DeploymentBowerDiff-diffwrapper{float:right}html[dir=ltr] .DebugWindow-DeploymentBowerDiff-Section{float:left}html[dir=rtl] .DebugWindow-DeploymentBowerDiff-Section{float:right}.DebugWindow-DeploymentBowerDiff-Name{width:150px;display:inline-block}.DebugWindow-DeploymentBowerDiff-Value{width:330px;display:inline-block}.DebugWindow-DeploymentBowerDiff-Value-From,.DebugWindow-DeploymentBowerDiff-Value-To{width:150px;display:inline-block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}html[dir=ltr] .DebugWindow-DeploymentBowerDiff-Value-From{float:left}html[dir=ltr] .DebugWindow-DeploymentBowerDiff-Value-To,html[dir=rtl] .DebugWindow-DeploymentBowerDiff-Value-From{float:right}.DebugWindow-DeploymentBowerDiff-Value-To{text-align:right}html[dir=rtl] .DebugWindow-DeploymentBowerDiff-Value-To{float:left}")}),define("odsp-next/controls/debugWindow/controls/deploymentBowerDiff/DeploymentBowerDiff",["require","exports","./DeploymentBowerDiffViewModel","odsp-shared/utilities/knockout/ComponentFactory","./DeploymentBowerDiff.html","./DeploymentBowerDiff.css"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window-deploymentbowerdiff",template:e("./DeploymentBowerDiff.html"),viewModel:n,synchronous:!0});
return o}),define("odsp-next/controls/debugWindow/panes/Deployments",["require","exports","./DeploymentsModel","odsp-shared/utilities/knockout/ComponentFactory","./Deployments.html","./Deployments.css","../controls/manifestList/ManifestList","../controls/manifestInfo/ManifestInfo","../controls/deploymentBowerDiff/DeploymentBowerDiff"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window-panes-deployments",template:e("./Deployments.html"),viewModel:n.DeploymentsModel,synchronous:!0});return o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("odsp-next/controls/debugWindow/panes/ManifestsModel",["require","exports","knockout","odsp-shared/base/ViewModel","../../../resources/ProviderResourceKeys","../../../utilities/uri/Uri","../../../bindings/boolean/BooleanBinding","cookies"],function(e,t,n,i,o,a,s,r){var d=function(t){function i(e){var i=this;t.call(this,e),i.selectedBuild=n.observable(null),i.buildsLoaded=n.observable(!1),i.isAuthenticated=n.observable(!1),i.provider=i.resources.consume(o.manifests),this.addBindingHandlers({booleanValue:s}),i._setEndPoint(),i._getBuilds(),i._getIsAuthenticatedState(),i._determineRowKey(),i.selectedBuild.subscribe(function(e){e.loadManifests()}),i.save=function(e){i._saveManifest(i,e)}}return __extends(i,t),i.prototype.activate=function(){var e=this.selectedBuild();this._setManifestCookies(e),this._refreshPage()},i.prototype.login=function(){window.open(this.provider.getSignInEndpoint(),"_new")},i.prototype.signout=function(){window.open(this.provider.getSignOutEndpoint(),"_new")},i.prototype.clear=function(){this._removeManifestCookies(),this._refreshPage()},i.prototype.saveAll=function(){var e=this;e.selectedBuild().Manifests.map(function(t){e._saveManifest(e,t)})},i.prototype._saveManifest=function(e,t){var n=e.provider.saveManifest(t);n.then(function(){alert("Saved: "+t.toString())},function(e){alert("Error occured for "+t.toString()+":"+e.responseText)})},i.prototype._removeManifestCookies=function(){r.expire("srr",{domain:".spoppe.com;",path:"/"}),r.expire("srr",{domain:".sharepoint.com;",path:"/"}),r.expire("nextserverhost",{path:"/"}),r.expire("nextdevhost",{path:"/"})},i.prototype._setManifestCookies=function(e){this._removeManifestCookies();var t=JSON.parse(e.Manifests[0].Data);r.set("srr",t.cdns[0]+e.RowKey+"/",{domain:".spoppe.com;",path:"/"}),r.set("srr",t.cdns[0]+e.RowKey+"/",{domain:".sharepoint.com;",path:"/"}),r.set("nextserverhost",t.cdns[0]+e.RowKey+"/",{path:"/"}),r.set("nextdevhost",t.cdns[0]+e.RowKey+"/",{path:"/"})},i.prototype._refreshPage=function(){var e=new a(document.location.href);e.setQueryParameter("r",Math.random().toString()),e.removeQueryParameter("nextserverhost"),e.removeQueryParameter("nextdevhost"),document.location.href=e.toString()},i.prototype._setEndPoint=function(){var e=this;e.endpoint=n.observable(e.provider.getManifestServerEndpoint()),e.endpoint.subscribe(function(t){e.buildsLoaded(!1),e._buildsPromise&&e._buildsPromise.cancel(),e.provider.setManifestServerEndpoint(t),e._getBuilds(),e._getIsAuthenticatedState()})},i.prototype._getBuilds=function(){var e=this;e.buildsLoaded(!1),this._buildsPromise=e.provider.getBuilds(),this._buildsPromise.then(function(t){e.availableBuilds=t,e.selectedBuild(t[0]),e.buildsLoaded(!0)})},i.prototype._getIsAuthenticatedState=function(){var e=this;e.isAuthenticated(!1);var t=e.provider.isAuthenticated();t.then(function(t){e.isAuthenticated(t)})},i.prototype._determineRowKey=function(){var t=e.toUrl(""),n="/files/",i=t.indexOf(n);this.rowKey=t.substr(i+n.length).replace("/","")},i}(i);return d}),define("odsp-next/controls/debugWindow/panes/Manifests.html",[],function(){return'<div class=DebugWindow-Panes-Manifests><div class=DebugWindow-Panes-Manifests-Login data-bind="ifnot: isAuthenticated"><button data-bind="click: login">Login</button></div><div class=DebugWindow-Panes-Manifests-Login data-bind="if: isAuthenticated"><button data-bind="click: signout">Sign Out</button></div><table><tbody><tr><th>Manifest Server:</th><td><input type=radio name=endpoint value=https://manifestdwestus.cloudapp.net data-bind="checked: endpoint"> Dogfood - master branch<br><input type=radio name=endpoint value=https://manifestpwestus.cloudapp.net data-bind="checked: endpoint"> Production - prod branch<br><input type=radio name=endpoint value=https://localhost:44300 data-bind="checked: endpoint"> Localhost - for debugging<br></td></tr><tr><th>Current Build:</th><td data-bind="text: rowKey"></td></tr><tr><th>Clear cookie?</th><td><button data-bind="click: clear">Clear</button></td></tr><tr><th>Builds:</th><td><div data-bind="if: buildsLoaded"><select data-bind="options: availableBuilds, value: selectedBuild"></select></div><div data-bind="ifnot: buildsLoaded"><select><option>Loading...</option></select></div></td></tr></tbody></table><table data-bind="if: selectedBuild"><thead><tr><th rowspan=2>Build Information</th></tr></thead><tbody><tr><th>Folder</th><td data-bind="text: selectedBuild().RowKey"></td></tr><tr><th>Machine</th><td data-bind="if: selectedBuild().ManifestsLoaded"><div data-bind="text: selectedBuild().Manifests[0].Machine"></div></td></tr><tr><th>Path</th><td data-bind="if: selectedBuild().ManifestsLoaded"><div data-bind="text: selectedBuild().Manifests[0].Path"></div></td></tr><tr><th>Branch</th><td data-bind="if: selectedBuild().ManifestsLoaded"><div data-bind="text: selectedBuild().Manifests[0].Branch"></div></td></tr><tr><th>Created on</th><td data-bind="if: selectedBuild().ManifestsLoaded"><div data-bind="text: selectedBuild().Manifests[0].CreateDate"></div></td></tr><tr><th>Activate?</th><td><button data-bind="click: activate">Set cookie</button></td></tr><tr><th>Manifests</th><td><table data-bind="if: selectedBuild().ManifestsLoaded"><thead><tr><th>Key</th><th>State</th><th>Is Dogfood?</th><th>Is Live?</th><th>Deployment %</th><th>CDN</th><th><div data-bind="if: isAuthenticated"><button data-bind="click: saveAll">Save All</button></div></th></tr></thead><tbody data-bind="foreach: selectedBuild().Manifests"><tr><td data-bind="text: RowKey"></td><td data-bind="text: EntryState"></td><td><div data-bind="if: $parent.isAuthenticated"><select data-bind="booleanValue: \'IsDogfood\'"><option value=true>True</option><option value=false>False</option></select></div><div data-bind="ifnot: $parent.isAuthenticated"><div data-bind="text: IsDogfood"></div></div></td><td><div data-bind="if: $parent.isAuthenticated"><select data-bind="booleanValue: \'IsLive\'"><option value=true>True</option><option value=false>False</option></select></div><div data-bind="ifnot: $parent.isAuthenticated"><div data-bind="text: IsLive"></div></div></td><td><div data-bind="if: $parent.isAuthenticated"><select data-bind="value: DeploymentPercentage"><option value=0>0%</option><option value=5>5%</option><option value=10>10%</option><option value=15>15%</option><option value=20>20%</option><option value=25>25%</option><option value=30>30%</option><option value=35>35%</option><option value=40>40%</option><option value=45>45%</option><option value=50>50%</option><option value=55>55%</option><option value=60>60%</option><option value=65>65%</option><option value=70>70%</option><option value=75>75%</option><option value=80>80%</option><option value=85>85%</option><option value=90>90%</option><option value=95>95%</option><option value=100>100%</option></select></div><div data-bind="ifnot: $parent.isAuthenticated"><div data-bind="text: DeploymentPercentage"></div></div></td><td><div data-bind="if: $parent.isAuthenticated"><select data-bind="value: getCdnObs()"><option value=Akamai>Akamai</option><option value=Azure>Azure</option></select></div><div data-bind="ifnot: $parent.isAuthenticated"><div data-bind="text: getCdnObs()"></div></div></td><td><div data-bind="if: $parent.isAuthenticated"><button data-bind="click: $parent.save">Save</button></div></td></tr></tbody></table></td></tr></tbody></table></div>'}),define("odsp-next/controls/debugWindow/panes/Manifests.css",["odsp-utilities/domUtils/DomUtils"],function(e){e.loadStyles(".DebugWindow-Panes-Manifests th{font-weight:700;padding:5px}.DebugWindow-Panes-Manifests td{padding:5px}.DebugWindow-Panes-Manifests tbody tr:nth-child(even){background-color:#e6f2fb}.DebugWindow-Panes-Manifests-Login{float:right}")}),define("odsp-next/controls/debugWindow/panes/Manifests",["require","exports","./ManifestsModel","odsp-shared/utilities/knockout/ComponentFactory","./Manifests.html","./Manifests.css"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window-panes-manifests",template:e("./Manifests.html"),viewModel:n,synchronous:!0});return o}),define("odsp-next/controls/debugWindow/DebugWindow",["require","exports","./DebugWindowViewModel","odsp-shared/utilities/knockout/ComponentFactory","./DebugWindow.html","./DebugWindow.css","./panes/Events","./panes/Performance","./panes/Deployments","./panes/Manifests"],function(e,t,n,i){var o=i.registerComponent({tagName:"od-debug-window",template:e("./DebugWindow.html"),viewModel:n});return o});